{"version":3,"file":"main.f86ebc916df29e48453d.js","mappings":"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;AACA;AACA;AACA;AACA;;AAEA,MAAM,2DAAM;AACZ;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,2DAAU,oBAAoB,2DAAU;;AAEzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,2DAAU,kBAAkB,2DAAU;;AAEvD;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAmD,iEAAoB;AACvE;AACA;AACA;AACA,iBAAiB,2DAAU;AAC3B;AACA,2CAA2C,2DAAU,aAAa,2DAAU;AAC5E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM,iDAAK;AACX;AACA,OAAO;AACP;;AAEA;AACA,SAAS,iDAAK;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,sFAAoB;AAChE;AACA;;AAEA;AACA;AACA,wCAAwC,sFAAoB;;AAE5D;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gEAAa;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qEAAa;;AAElC,oBAAoB,0DAAQ;AAC5B,iBAAiB,2DAAU,2CAA2C,2DAAU;AAChF;AACA;;;AAGA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpMY;;AAEkB;AACM;AACD;AACY;AACL;AACc;AACH;AACJ;AACN;AACN;AACW;AACH;AACL;AACY;AACH;AACJ;AACW;;AAEzD;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,OAAO;AACpB;AACA;AACA,sBAAsB,sDAAK;AAC3B,mBAAmB,4DAAI,CAAC,sDAAK;;AAE7B;AACA,EAAE,iDAAK,kBAAkB,sDAAK,sBAAsB,iBAAiB;;AAErE;AACA,EAAE,iDAAK,kCAAkC,iBAAiB;;AAE1D;AACA;AACA,0BAA0B,gEAAW;AACrC;;AAEA;AACA;;AAEA;AACA,6BAA6B,0DAAQ;;AAErC;AACA,cAAc,sDAAK;;AAEnB;AACA,sBAAsB,gEAAa;AACnC,oBAAoB,8DAAW;AAC/B,iBAAiB,2DAAQ;AACzB,gBAAgB,iDAAO;AACvB,mBAAmB,8DAAU;;AAE7B;AACA,mBAAmB,4DAAU;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,2DAAM;;AAErB;AACA,qBAAqB,iEAAY;;AAEjC;AACA,oBAAoB,4DAAW;;AAE/B,qBAAqB,8DAAY;;AAEjC,4BAA4B,uEAAc,CAAC,iDAAK;;AAEhD,mBAAmB,8DAAQ;;AAE3B,uBAAuB,mEAAc;;AAErC;;AAEA;AACA,iEAAe,KAAK;;;;;;;;;;;;;;;;;ACxFP;;AAEkC;;AAE/C;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,yDAAa;AACtC;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;;;ACtId;;AAEkC;AACf;;AAEhC;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA,EAAE,2DAAU,oDAAoD,2DAAU;AAC1E;AACA;;AAEA,iDAAK,yBAAyB,2DAAU;AACxC;AACA,CAAC;;AAED,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;ACxBhB;;AAEE;AACf;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACJa;;AAEqB;AACY;AACW;AACN;AACR;AACI;AACC;AACH;;AAE7C,mBAAmB,6DAAS;;AAE5B;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,mBAAmB,8DAAkB;AACrC,oBAAoB,8DAAkB;AACtC;AACA;;AAEA;AACA;AACA;AACA,aAAa,eAAe;AAC5B,aAAa,SAAS;AACtB;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA,aAAa,2DAAW;;AAExB,WAAW,yCAAyC;;AAEpD;AACA,MAAM,6DAAS;AACf;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,UAAU,iDAAK;AACf;AACA;AACA;AACA,QAAQ;AACR,QAAQ,6DAAS;AACjB;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA,IAAI,6DAAS;AACb;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,oCAAoC,iDAAK;AACzC;AACA;AACA;;AAEA,eAAe,iDAAK;AACpB;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,wDAAY;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,qBAAqB,2DAAe;AACpC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,2DAAe;AAC/B,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,2DAAW;AACxB,qBAAqB,6DAAa;AAClC,WAAW,gEAAQ;AACnB;AACA;;AAEA;AACA,iDAAK;AACL;AACA;AACA,wBAAwB,2DAAW,aAAa;AAChD;AACA;AACA,yBAAyB;AACzB,KAAK;AACL;AACA,CAAC;;AAED,iDAAK;AACL;;AAEA;AACA;AACA,0BAA0B,2DAAW,aAAa;AAClD;AACA;AACA;AACA,UAAU,IAAI;AACd;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;;;ACjPR;;AAEmB;;AAEhC;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,iDAAK;AACnB;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,CAAC;;AAED;AACA,kDAAkD,YAAY;;AAE9D;AACA;AACA;;AAEA,EAAE,iDAAK;AACP;AACA,GAAG;AACH;AACA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iEAAe,UAAU,EAAC;;;;;;;;;;;;;;;;;;ACtGb;;AAEmB;AACsB;;AAEtD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS,iDAAK;AACd;;AAEA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,MAAM,iDAAK;AACX;AACA;;AAEA;AACA;AACA;;AAEA,OAAO,iDAAK;;AAEZ,MAAM,iDAAK;AACX;AACA;;AAEA,MAAM,iDAAK;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,uBAAuB,iDAAK;;AAE5B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iDAAK;;AAEvB;AACA;AACA;AACA;;AAEA;AACA,MAAM,iDAAK;;AAEX,QAAQ,iDAAK;AACb;AACA,MAAM,QAAQ,iDAAK;AACnB,iBAAiB,oEAAY;AAC7B,MAAM,SAAS,iDAAK,qBAAqB,iDAAK;AAC9C,kBAAkB;AAClB;AACA,aAAa,iDAAK;AAClB;AACA;;AAEA;AACA,WAAW,iDAAK;AAChB;;AAEA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,iDAAK;;AAEvB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,YAAY,iDAAK;AACjB;AACA;;AAEA,YAAY,iDAAK;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,iDAAK;;AAEvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,iDAAK;;AAEzB;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,iDAAK;AACb;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,IAAI,iDAAK;AACT,kBAAkB,iDAAK;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI,iDAAK;AACT,sEAAsE,iDAAK;AAC3E,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAI,iDAAK;;AAET;AACA;AACA;;AAEA;;AAEA;AACA,iDAAK,6CAA6C,MAAM;AACxD,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,iDAAK;;AAEL,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;ACzTf;;AAEqB;;AAElC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA,eAAe;AACf;AACA;AACA,IAAI,iDAAK;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,iEAAe,kBAAkB,EAAC;;;;;;;;;;;;;;;;;;ACtErB;;AAE2C;AACJ;;AAEpD;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf,uBAAuB,qEAAa;AACpC;AACA,WAAW,mEAAW;AACtB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACrBa;;AAEkC;AACF;AACD;AACW;AACJ;AACJ;;AAE/C;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,gEAAa;AAC3B;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACe;AACf;;AAEA,mBAAmB,6DAAY;;AAE/B;AACA,gBAAgB,yDAAa;AAC7B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,6DAAQ,8BAA8B,0DAAQ;;AAEhE;AACA;;AAEA;AACA,oBAAoB,yDAAa;AACjC;AACA;AACA;AACA;;AAEA,uBAAuB,6DAAY;;AAEnC;AACA,GAAG;AACH,SAAS,+DAAQ;AACjB;;AAEA;AACA;AACA,+BAA+B,yDAAa;AAC5C;AACA;AACA;AACA;AACA,kCAAkC,6DAAY;AAC9C;AACA;;AAEA;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;AChFa;;AAEmB;AACa;;AAE7C,oDAAoD,wDAAY,KAAK,WAAW;;AAEhF;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf;AACA;AACA;;AAEA;AACA,QAAQ,iDAAK,0BAA0B,iDAAK;AAC5C,aAAa,iDAAK,aAAa,SAAS;AACxC,MAAM,SAAS,iDAAK;AACpB,aAAa,iDAAK,SAAS;AAC3B,MAAM,SAAS,iDAAK;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,iDAAK;AACd;AACA,MAAM,UAAU,iDAAK;AACrB;AACA;AACA;;AAEA;AACA;AACA,SAAS,iDAAK;AACd;AACA;AACA;;AAEA;AACA;AACA,SAAS,iDAAK;AACd;AACA,MAAM,UAAU,iDAAK;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE,iDAAK,sBAAsB,uBAAuB;AACpD;AACA;AACA,KAAK,iDAAK;AACV,GAAG;;AAEH;AACA;;;;;;;;;;;;;;;;;ACzGa;;AAE4B;;AAEzC;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACe;AACf;AACA;AACA;AACA,IAAI;AACJ,eAAe,sDAAU;AACzB;AACA,OAAO,sDAAU,kBAAkB,sDAAU;AAC7C;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC1Ba;;AAEqB;AACU;AACO;;AAEnD;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB;AACA,aAAa,GAAG;AAChB;AACe;AACf,yBAAyB,0DAAQ;AACjC;AACA,kBAAkB,6DAAY;AAC9B;;AAEA,EAAE,iDAAK;AACP;AACA,GAAG;;AAEH;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC3Ba;;AAEmB;AACe;AACM;AACH;AACY;AAClB;AACc;;AAE1D;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB;AACA,aAAa,QAAQ;AACrB;AACA;AACA,MAAM,iDAAK;AACX;AACA;AACA,aAAa,iDAAK;AAClB,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,gBAAgB,wDAAoB;;AAEpC;;AAEA;AACA;AACA;AACA,4BAA4B,iDAAK;;AAEjC,2BAA2B,iDAAK;AAChC;AACA;;AAEA,uBAAuB,iDAAK;;AAE5B;AACA,iDAAiD,sEAAc;AAC/D;;AAEA,QAAQ,iDAAK;AACb,MAAM,iDAAK;AACX,MAAM,iDAAK;AACX,MAAM,iDAAK;AACX,MAAM,iDAAK;AACX,MAAM,iDAAK;AACX;AACA;AACA;AACA,QAAQ,iDAAK;AACb;AACA;AACA,QAAQ,iDAAK;AACb,gEAAgE;AAChE;AACA;;AAEA;;AAEA;AACA;AACA,eAAe,wEAAgB;AAC/B;;AAEA,wBAAwB,iDAAK;AAC7B;;AAEA,eAAe,kEAAU;AACzB,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA,QAAQ,iDAAK,qBAAqB,iDAAK;AACvC;AACA;;AAEA,gBAAgB,iDAAK;AACrB;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA,kBAAkB,2DAAU,SAAS,2DAAU;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc,0DAAQ;AACtB,UAAU,0DAAQ;AAClB,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAK;AACL;AACA,CAAC;;AAED,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;AChKX;;AAEb,iEAAe;AACf;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;ACNK;;;;;;;;;;;;;;;;ACAM;;AAE4B;;AAEzC;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC,WAAW,qBAAqB;AAChC;AACA,aAAa;AACb;AACA;AACA;;AAEA,YAAY,0DAAU;AACtB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,GAAG;AACH;;AAEA,iEAAe,oBAAoB,EAAC;;;;;;;;;;;;;;;;ACzDpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;ACtDd;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACe;AACf;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3BA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;;;;;AC3CX;;AAEmB;AACe;AAC/C;AACoE;;AAEpE;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA,SAAS,iDAAK,yBAAyB,iDAAK;AAC5C;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA,SAAS,iDAAK;AACd;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA,aAAa;AACb;AACA;AACA,SAAS,iDAAK;AACd;;AAEA,mBAAmB,iDAAK,cAAc,iDAAK,IAAI;AAC/C;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,UAAU;AACrB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,UAAU;AACrB;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,QAAQ;AACnB,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA,OAAO,iDAAK;AACZ;AACA;;AAEA;AACA,8BAA8B,0EAAgB;;AAE9C;AACA,YAAY,iDAAK;AACjB;AACA;AACA;AACA,GAAG;AACH;AACA,YAAY,iDAAK;AACjB,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iDAAK;;AAEhC,OAAO,iDAAK;AACZ;AACA;;AAEA;AACA;;AAEA,QAAQ,iDAAK;AACb;AACA;;AAEA,QAAQ,iDAAK;AACb;AACA;;AAEA,oBAAoB,iDAAK;AACzB,gBAAgB,2DAAU;AAC1B;;AAEA,QAAQ,iDAAK,yBAAyB,iDAAK;AAC3C,yEAAyE,MAAM;AAC/E;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,eAAe;AAC5B,aAAa,sBAAsB;AACnC,YAAY;AACZ;AACA,eAAe,SAAS;AACxB;AACA;AACA;;AAEA;AACA,UAAU,iDAAK,kBAAkB;AACjC;AACA;AACA;AACA;AACA,QAAQ;AACR,SAAS,iDAAK;AACd,UAAU,iDAAK,sBAAsB,iDAAK,gCAAgC,iDAAK;AAC/E;AACA;AACA;;AAEA;AACA,YAAY,iDAAK;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,QAAQ,iDAAK;;AAEb;AACA;AACA;;AAEA;;AAEA,IAAI,iDAAK;AACT,uBAAuB,iDAAK;AAC5B,sBAAsB,iDAAK;AAC3B;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,OAAO,iDAAK;AACZ;AACA;;AAEA;;AAEA;AACA;;AAEA,iEAAe,UAAU,EAAC;;;;;;;;;;;;;;;;;;;AC9Nb;;AAEmB;AACS;AACG;;AAE7B;AACf,SAAS,0DAAU,WAAW,0DAAQ;AACtC;AACA,UAAU,0DAAQ,WAAW,iDAAK;AAClC;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;;ACjBO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;;AAE5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;ACtFa;;AAE0B;AACQ;;AAE/C;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA,wBAAwB,iDAAO;AAC/B;;AAEA;AACA;AACA;AACA,gBAAgB,2DAAU;AAC1B;AACA,QAAQ,2DAAU;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,KAAK,6BAA6B,gBAAgB;AACtE;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB;AACA,aAAa;AACb;;AAEA;AACA;AACA,cAAc,2DAAU,8BAA8B,2DAAU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,2DAAU,yCAAyC,2DAAU;AAC/E;AACA;AACA;AACA;AACA,gBAAgB,2DAAU,0BAA0B,2DAAU;AAC9D;AACA;AACA;;AAEA,iEAAe;AACf;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;AClGU;;AAEZ,iEAAe,yCAAyC;;;;;;;;;;;;;;;;ACF3C;;AAEb,iEAAe,iDAAiD,EAAC;;;;;;;;;;;;;;;;;ACFpD;;AAE+D;AAC5E,iEAAe,2DAA2D,wEAAoB,EAAC;;;;;;;;;;;;;;;;;;;ACHrC;AACd;AACR;;AAEpC,iEAAe;AACf;AACA;AACA,mBAAmB;AACnB,YAAY;AACZ,QAAQ;AACR,GAAG;AACH;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;ACZF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAQC;;;;;;;;;;;;;;;;;;AClDsC;AACI;;AAE3C,iEAAe;AACf,KAAK,6CAAK;AACV,KAAK,sDAAQ;AACb,CAAC;;;;;;;;;;;;;;;;;ACNY;;AAEwB;;AAErC;;AAEA,OAAO,UAAU;AACjB,OAAO,gBAAgB;AACvB,OAAO,uBAAuB;;AAE9B;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA,OAAO,SAAS;;AAEhB;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;;AAGA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,UAAU;AACrB;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA,2BAA2B,oBAAoB,IAAI;AACnD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,OAAO;AACvC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS,GAAG,SAAS;AAC5C,4BAA4B;AAC5B;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,kCAAkC;AAClC,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA,gCAAgC,WAAW,IAAI;AAC/C;AACA;AACA,eAAe,4DAAI;AACnB,MAAM;AACN;AACA;AACA,GAAG,GAAG,WAAW;AACjB;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,kBAAkB;AAC7B,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,eAAe;;AAEzC;AACA;AACA;AACA,WAAW,GAAG;AACd;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,aAAa;AACvD;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG,WAAW,cAAc;AAC5B,CAAC;AACD;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;;;AAGA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;AC3wBU;;AAEZ,kBAAkB;AAClB,mBAAmB;AACnB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA,mCAAmC,SAAS;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,UAAU;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,eAAe,mBAAO,CAAC,oDAAW;AAClC,gBAAgB,mBAAO,CAAC,gDAAS;AACjC;AACA;AACA;AACA;;AAEA,cAAc;AACd,kBAAkB;AAClB,yBAAyB;;AAEzB;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;;AAEA;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,eAAe;AACxC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,yBAAyB,QAAQ;AACjC;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,qBAAqB,WAAW,GAAG,IAAI;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,gBAAgB,WAAW,GAAG,IAAI,KAAK,aAAa;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;;AAEA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,KAAK,mDAAmD,cAAc;AACzF,GAAG;AACH;AACA;AACA,+BAA+B,IAAI;AACnC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,MAAM,aAAa,SAAS;AACtD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,SAAS,gBAAgB;AACzB,cAAc,oBAAoB,EAAE,IAAI;AACxC;AACA,YAAY,gBAAgB,EAAE,IAAI;AAClC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,GAAG,SAAS,GAAG,KAAK,qBAAqB,EAAE,EAAE;AACpE,QAAQ;AACR,yBAAyB,GAAG,KAAK,yBAAyB,EAAE,EAAE;AAC9D,mBAAmB,yBAAyB,EAAE,EAAE;AAChD;AACA,MAAM;AACN,oBAAoB,IAAI,EAAE,GAAG,SAAS,IAAI,EAAE,EAAE;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0CAA0C,cAAc,SAAS,OAAO;AACxE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,YAAY;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzjEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,WAAW;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEyH;;;;;;;;;;;AClMzH;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS,WAAW;;AAEpB;AACA;AACA;AACA,SAAS,WAAW;;AAEpB;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA,SAAS,WAAW;;AAEpB;AACA;AACA,SAAS,UAAU;;AAEnB;AACA;;;;;;;;;;;;;;;;;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,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,eAAe;EAAfA,eAAe,CAAfA,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ACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,sDAAsD;WACtD,sCAAsC,iEAAiE;WACvG;WACA;WACA;WACA;WACA;WACA;;;;;WCzBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,8jYAA8jY;WAC5lY;;;;;WCJA;WACA;WACA;WACA,8BAA8B,2hBAA2hB;WACzjB;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCzCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;WAGA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA;WACA;WACA;WACA,gBAAgB,6BAA6B;WAC7C;WACA;WACA;WACA;WACA;WACA,gBAAgB,8BAA8B;WAC9C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;;WAE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","sources":["webpack://telegram-t/./node_modules/axios/lib/adapters/adapters.js","webpack://telegram-t/./node_modules/axios/lib/adapters/fetch.js","webpack://telegram-t/./node_modules/axios/lib/adapters/xhr.js","webpack://telegram-t/./node_modules/axios/lib/axios.js","webpack://telegram-t/./node_modules/axios/lib/cancel/CancelToken.js","webpack://telegram-t/./node_modules/axios/lib/cancel/CanceledError.js","webpack://telegram-t/./node_modules/axios/lib/cancel/isCancel.js","webpack://telegram-t/./node_modules/axios/lib/core/Axios.js","webpack://telegram-t/./node_modules/axios/lib/core/AxiosError.js","webpack://telegram-t/./node_modules/axios/lib/core/AxiosHeaders.js","webpack://telegram-t/./node_modules/axios/lib/core/InterceptorManager.js","webpack://telegram-t/./node_modules/axios/lib/core/buildFullPath.js","webpack://telegram-t/./node_modules/axios/lib/core/dispatchRequest.js","webpack://telegram-t/./node_modules/axios/lib/core/mergeConfig.js","webpack://telegram-t/./node_modules/axios/lib/core/settle.js","webpack://telegram-t/./node_modules/axios/lib/core/transformData.js","webpack://telegram-t/./node_modules/axios/lib/defaults/index.js","webpack://telegram-t/./node_modules/axios/lib/defaults/transitional.js","webpack://telegram-t/./node_modules/axios/lib/env/data.js","webpack://telegram-t/./node_modules/axios/lib/helpers/AxiosURLSearchParams.js","webpack://telegram-t/./node_modules/axios/lib/helpers/HttpStatusCode.js","webpack://telegram-t/./node_modules/axios/lib/helpers/bind.js","webpack://telegram-t/./node_modules/axios/lib/helpers/buildURL.js","webpack://telegram-t/./node_modules/axios/lib/helpers/combineURLs.js","webpack://telegram-t/./node_modules/axios/lib/helpers/composeSignals.js","webpack://telegram-t/./node_modules/axios/lib/helpers/cookies.js","webpack://telegram-t/./node_modules/axios/lib/helpers/formDataToJSON.js","webpack://telegram-t/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://telegram-t/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://telegram-t/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://telegram-t/./node_modules/axios/lib/helpers/null.js","webpack://telegram-t/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://telegram-t/./node_modules/axios/lib/helpers/parseProtocol.js","webpack://telegram-t/./node_modules/axios/lib/helpers/progressEventReducer.js","webpack://telegram-t/./node_modules/axios/lib/helpers/resolveConfig.js","webpack://telegram-t/./node_modules/axios/lib/helpers/speedometer.js","webpack://telegram-t/./node_modules/axios/lib/helpers/spread.js","webpack://telegram-t/./node_modules/axios/lib/helpers/throttle.js","webpack://telegram-t/./node_modules/axios/lib/helpers/toFormData.js","webpack://telegram-t/./node_modules/axios/lib/helpers/toURLEncodedForm.js","webpack://telegram-t/./node_modules/axios/lib/helpers/trackStream.js","webpack://telegram-t/./node_modules/axios/lib/helpers/validator.js","webpack://telegram-t/./node_modules/axios/lib/platform/browser/classes/Blob.js","webpack://telegram-t/./node_modules/axios/lib/platform/browser/classes/FormData.js","webpack://telegram-t/./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","webpack://telegram-t/./node_modules/axios/lib/platform/browser/index.js","webpack://telegram-t/./node_modules/axios/lib/platform/common/utils.js","webpack://telegram-t/./node_modules/axios/lib/platform/index.js","webpack://telegram-t/./node_modules/axios/lib/utils.js","webpack://telegram-t/./node_modules/base64-js/index.js","webpack://telegram-t/./node_modules/buffer/index.js","webpack://telegram-t/./node_modules/idb-keyval/dist/index.js","webpack://telegram-t/./node_modules/ieee754/index.js","webpack://telegram-t/./src/api/gramjs/index.ts","webpack://telegram-t/./src/api/gramjs/worker/connector.ts","webpack://telegram-t/./src/api/types/bots.ts","webpack://telegram-t/./src/api/types/business.ts","webpack://telegram-t/./src/api/types/calls.ts","webpack://telegram-t/./src/api/types/chats.ts","webpack://telegram-t/./src/api/types/index.ts","webpack://telegram-t/./src/api/types/media.ts","webpack://telegram-t/./src/api/types/messages.ts","webpack://telegram-t/./src/api/types/misc.ts","webpack://telegram-t/./src/api/types/payments.ts","webpack://telegram-t/./src/api/types/settings.ts","webpack://telegram-t/./src/api/types/stars.ts","webpack://telegram-t/./src/api/types/statistics.ts","webpack://telegram-t/./src/api/types/stories.ts","webpack://telegram-t/./src/api/types/updates.ts","webpack://telegram-t/./src/api/types/users.ts","webpack://telegram-t/./src/assets/fonts/roboto.css?b9a1","webpack://telegram-t/./src/assets/localization/initialStrings.ts","webpack://telegram-t/./src/components/App.module.scss?a9d3","webpack://telegram-t/./src/components/App.tsx","webpack://telegram-t/./src/components/auth/Auth.scss?ddce","webpack://telegram-t/./src/components/auth/Auth.tsx","webpack://telegram-t/./src/components/auth/AuthCode.async.tsx","webpack://telegram-t/./src/components/auth/AuthPassword.async.tsx","webpack://telegram-t/./src/components/auth/AuthPhoneNumber.tsx","webpack://telegram-t/./src/components/auth/AuthQrCode.tsx","webpack://telegram-t/./src/components/auth/AuthRegister.async.tsx","webpack://telegram-t/./src/components/auth/AuthWalletCreated.tsx","webpack://telegram-t/./src/components/auth/CountryCodeInput.scss?b41c","webpack://telegram-t/./src/components/auth/CountryCodeInput.tsx","webpack://telegram-t/./src/components/auth/helpers/backNavigation.ts","webpack://telegram-t/./src/components/auth/helpers/getSuggestedLanguage.ts","webpack://telegram-t/./src/components/common/AnimatedIcon.tsx","webpack://telegram-t/./src/components/common/AnimatedSticker.tsx","webpack://telegram-t/./src/components/common/Avatar.scss?d524","webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/components/common/AvatarStoryCircle.tsx","webpack://telegram-t/./src/components/common/Blockquote.module.scss?d7ef","webpack://telegram-t/./src/components/common/Blockquote.tsx","webpack://telegram-t/./src/components/common/CustomEmoji.module.scss?8f5a","webpack://telegram-t/./src/components/common/CustomEmoji.tsx","webpack://telegram-t/./src/components/common/MessageSummary.tsx","webpack://telegram-t/./src/components/common/MessageText.tsx","webpack://telegram-t/./src/components/common/PeerColorWrapper.module.scss?b340","webpack://telegram-t/./src/components/common/PeerColorWrapper.tsx","webpack://telegram-t/./src/components/common/SafeLink.tsx","webpack://telegram-t/./src/components/common/Sparkles.module.scss?15c2","webpack://telegram-t/./src/components/common/Sparkles.tsx","webpack://telegram-t/./src/components/common/StickerView.module.scss?7ce5","webpack://telegram-t/./src/components/common/StickerView.tsx","webpack://telegram-t/./src/components/common/TopicDefaultIcon.module.scss?06b0","webpack://telegram-t/./src/components/common/TopicDefaultIcon.tsx","webpack://telegram-t/./src/components/common/UiLoader.module.scss?03f6","webpack://telegram-t/./src/components/common/UiLoader.tsx","webpack://telegram-t/./src/components/common/code/CodeBlock.scss?d6c7","webpack://telegram-t/./src/components/common/code/CodeBlock.tsx","webpack://telegram-t/./src/components/common/code/CodeOverlay.module.scss?733a","webpack://telegram-t/./src/components/common/code/CodeOverlay.tsx","webpack://telegram-t/./src/components/common/embedded/EmojiIconBackground.module.scss?aa76","webpack://telegram-t/./src/components/common/embedded/EmojiIconBackground.tsx","webpack://telegram-t/./src/components/common/helpers/animatedAssets.ts","webpack://telegram-t/./src/components/common/helpers/documentInfo.ts","webpack://telegram-t/./src/components/common/helpers/mediaDimensions.ts","webpack://telegram-t/./src/components/common/helpers/peerColor.ts","webpack://telegram-t/./src/components/common/helpers/renderText.tsx","webpack://telegram-t/./src/components/common/helpers/renderTextWithEntities.tsx","webpack://telegram-t/./src/components/common/hooks/useCustomEmoji.ts","webpack://telegram-t/./src/components/common/icons/Icon.tsx","webpack://telegram-t/./src/components/common/icons/StarIcon.module.scss?d424","webpack://telegram-t/./src/components/common/icons/StarIcon.tsx","webpack://telegram-t/./src/components/common/spoiler/Spoiler.scss?3e39","webpack://telegram-t/./src/components/common/spoiler/Spoiler.tsx","webpack://telegram-t/./src/components/main/AppInactive.scss?d8dd","webpack://telegram-t/./src/components/main/AppInactive.tsx","webpack://telegram-t/./src/components/main/LockScreen.async.tsx","webpack://telegram-t/./src/components/main/Main.async.tsx","webpack://telegram-t/./src/components/middle/composer/helpers/customEmoji.ts","webpack://telegram-t/./src/components/middle/helpers/preventMessageInputBlur.ts","webpack://telegram-t/./src/components/middle/message/ActionMessage.module.scss?5fb2","webpack://telegram-t/./src/components/middle/message/ActionMessageText.tsx","webpack://telegram-t/./src/components/middle/message/MentionLink.tsx","webpack://telegram-t/./src/components/middle/message/helpers/messageActions.tsx","webpack://telegram-t/./src/components/middle/message/hooks/useVideoAutoPause.ts","webpack://telegram-t/./src/components/ui/Button.scss?5997","webpack://telegram-t/./src/components/ui/Button.tsx","webpack://telegram-t/./src/components/ui/Checkbox.scss?d18e","webpack://telegram-t/./src/components/ui/Checkbox.tsx","webpack://telegram-t/./src/components/ui/DropdownMenu.scss?33a3","webpack://telegram-t/./src/components/ui/DropdownMenu.tsx","webpack://telegram-t/./src/components/ui/InputText.tsx","webpack://telegram-t/./src/components/ui/Link.module.scss?2387","webpack://telegram-t/./src/components/ui/Link.tsx","webpack://telegram-t/./src/components/ui/Loading.scss?e5fc","webpack://telegram-t/./src/components/ui/Loading.tsx","webpack://telegram-t/./src/components/ui/Menu.scss?0013","webpack://telegram-t/./src/components/ui/Menu.tsx","webpack://telegram-t/./src/components/ui/MenuItem.scss?7a53","webpack://telegram-t/./src/components/ui/MenuItem.tsx","webpack://telegram-t/./src/components/ui/Modal.scss?52a4","webpack://telegram-t/./src/components/ui/OptimizedVideo.tsx","webpack://telegram-t/./src/components/ui/Portal.ts","webpack://telegram-t/./src/components/ui/RippleEffect.scss?dc92","webpack://telegram-t/./src/components/ui/RippleEffect.tsx","webpack://telegram-t/./src/components/ui/Spinner.scss?bf14","webpack://telegram-t/./src/components/ui/Spinner.tsx","webpack://telegram-t/./src/components/ui/Transition.scss?6c1b","webpack://telegram-t/./src/components/ui/Transition.tsx","webpack://telegram-t/./src/config.ts","webpack://telegram-t/./src/global/actions/api/initial.ts","webpack://telegram-t/./src/global/actions/api/settings.ts","webpack://telegram-t/./src/global/actions/apiUpdaters/initial.ts","webpack://telegram-t/./src/global/actions/initial.ts","webpack://telegram-t/./src/global/actions/ui/initial.ts","webpack://telegram-t/./src/global/actions/ui/settings.ts","webpack://telegram-t/./src/global/cache.ts","webpack://telegram-t/./src/global/helpers/bots.ts","webpack://telegram-t/./src/global/helpers/chats.ts","webpack://telegram-t/./src/global/helpers/getEmojiOnlyCountForMessage.ts","webpack://telegram-t/./src/global/helpers/index.ts","webpack://telegram-t/./src/global/helpers/media.ts","webpack://telegram-t/./src/global/helpers/messageMedia.ts","webpack://telegram-t/./src/global/helpers/messageSummary.ts","webpack://telegram-t/./src/global/helpers/messages.ts","webpack://telegram-t/./src/global/helpers/middleSearch.ts","webpack://telegram-t/./src/global/helpers/misc.ts","webpack://telegram-t/./src/global/helpers/notifications.ts","webpack://telegram-t/./src/global/helpers/peers.ts","webpack://telegram-t/./src/global/helpers/reactions.ts","webpack://telegram-t/./src/global/helpers/replies.ts","webpack://telegram-t/./src/global/helpers/stars.ts","webpack://telegram-t/./src/global/helpers/symbols.ts","webpack://telegram-t/./src/global/helpers/users.ts","webpack://telegram-t/./src/global/index.ts","webpack://telegram-t/./src/global/init.ts","webpack://telegram-t/./src/global/initialState.ts","webpack://telegram-t/./src/global/intervals.ts","webpack://telegram-t/./src/global/reducers/chats.ts","webpack://telegram-t/./src/global/reducers/globalSearch.ts","webpack://telegram-t/./src/global/reducers/index.ts","webpack://telegram-t/./src/global/reducers/management.ts","webpack://telegram-t/./src/global/reducers/messages.ts","webpack://telegram-t/./src/global/reducers/middleSearch.ts","webpack://telegram-t/./src/global/reducers/passcode.ts","webpack://telegram-t/./src/global/reducers/payments.ts","webpack://telegram-t/./src/global/reducers/peers.ts","webpack://telegram-t/./src/global/reducers/settings.ts","webpack://telegram-t/./src/global/reducers/sharedState.ts","webpack://telegram-t/./src/global/reducers/statistics.ts","webpack://telegram-t/./src/global/reducers/stories.ts","webpack://telegram-t/./src/global/reducers/symbols.ts","webpack://telegram-t/./src/global/reducers/tabs.ts","webpack://telegram-t/./src/global/reducers/topics.ts","webpack://telegram-t/./src/global/reducers/translations.ts","webpack://telegram-t/./src/global/reducers/twoFaSettings.ts","webpack://telegram-t/./src/global/reducers/users.ts","webpack://telegram-t/./src/global/selectors/chats.ts","webpack://telegram-t/./src/global/selectors/globalSearch.ts","webpack://telegram-t/./src/global/selectors/index.ts","webpack://telegram-t/./src/global/selectors/management.ts","webpack://telegram-t/./src/global/selectors/messages.ts","webpack://telegram-t/./src/global/selectors/middleSearch.ts","webpack://telegram-t/./src/global/selectors/payments.ts","webpack://telegram-t/./src/global/selectors/peers.ts","webpack://telegram-t/./src/global/selectors/settings.ts","webpack://telegram-t/./src/global/selectors/sharedState.ts","webpack://telegram-t/./src/global/selectors/statistics.ts","webpack://telegram-t/./src/global/selectors/stories.ts","webpack://telegram-t/./src/global/selectors/symbols.ts","webpack://telegram-t/./src/global/selectors/tabs.ts","webpack://telegram-t/./src/global/selectors/topics.ts","webpack://telegram-t/./src/global/selectors/ui.ts","webpack://telegram-t/./src/global/selectors/users.ts","webpack://telegram-t/./src/global/shared/sharedStateConnector.ts","webpack://telegram-t/./src/hooks/animations/useViewTransition.ts","webpack://telegram-t/./src/hooks/data/useSelector.ts","webpack://telegram-t/./src/hooks/data/useSelectorSignal.ts","webpack://telegram-t/./src/hooks/element/useCollapsibleLines.ts","webpack://telegram-t/./src/hooks/element/useStyleObserver.ts","webpack://telegram-t/./src/hooks/schedulers/useInterval.ts","webpack://telegram-t/./src/hooks/stickers/useColorFilter.tsx","webpack://telegram-t/./src/hooks/stickers/useDynamicColorListener.ts","webpack://telegram-t/./src/hooks/useAppLayout.ts","webpack://telegram-t/./src/hooks/useAsync.ts","webpack://telegram-t/./src/hooks/useBuffering.ts","webpack://telegram-t/./src/hooks/useCoordsInSharedCanvas.ts","webpack://telegram-t/./src/hooks/useCurrentOrPrev.ts","webpack://telegram-t/./src/hooks/useDebouncedCallback.ts","webpack://telegram-t/./src/hooks/useDerivedSignal.ts","webpack://telegram-t/./src/hooks/useDerivedState.ts","webpack://telegram-t/./src/hooks/useEffectOnce.ts","webpack://telegram-t/./src/hooks/useEffectWithPrevDeps.ts","webpack://telegram-t/./src/hooks/useElectronDrag.ts","webpack://telegram-t/./src/hooks/useEnsureCustomEmoji.ts","webpack://telegram-t/./src/hooks/useFastClick.ts","webpack://telegram-t/./src/hooks/useFlag.ts","webpack://telegram-t/./src/hooks/useForceUpdate.ts","webpack://telegram-t/./src/hooks/useHeavyAnimation.ts","webpack://telegram-t/./src/hooks/useHistoryBack.ts","webpack://telegram-t/./src/hooks/useIntersectionObserver.ts","webpack://telegram-t/./src/hooks/useKeyboardListNavigation.ts","webpack://telegram-t/./src/hooks/useLang.ts","webpack://telegram-t/./src/hooks/useLangString.ts","webpack://telegram-t/./src/hooks/useLastCallback.ts","webpack://telegram-t/./src/hooks/useMedia.ts","webpack://telegram-t/./src/hooks/useMediaTransition.ts","webpack://telegram-t/./src/hooks/useMediaTransitionDeprecated.ts","webpack://telegram-t/./src/hooks/useMenuPosition.ts","webpack://telegram-t/./src/hooks/useModuleLoader.ts","webpack://telegram-t/./src/hooks/useMountAfterHeavyAnimation.ts","webpack://telegram-t/./src/hooks/useMultiaccountInfo.ts","webpack://telegram-t/./src/hooks/useOldLang.ts","webpack://telegram-t/./src/hooks/usePreviousDeprecated.ts","webpack://telegram-t/./src/hooks/usePriorityPlaybackCheck.ts","webpack://telegram-t/./src/hooks/useResizeObserver.ts","webpack://telegram-t/./src/hooks/useSharedIntersectionObserver.ts","webpack://telegram-t/./src/hooks/useShowTransition.ts","webpack://telegram-t/./src/hooks/useShowTransitionDeprecated.ts","webpack://telegram-t/./src/hooks/useSignalEffect.ts","webpack://telegram-t/./src/hooks/useStateRef.ts","webpack://telegram-t/./src/hooks/useSyncEffect.ts","webpack://telegram-t/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://telegram-t/./src/hooks/useThrottledCallback.ts","webpack://telegram-t/./src/hooks/useThumbnail.ts","webpack://telegram-t/./src/hooks/useUniqueId.ts","webpack://telegram-t/./src/hooks/useVideoCleanup.ts","webpack://telegram-t/./src/hooks/useVirtualBackdrop.ts","webpack://telegram-t/./src/hooks/window/useBackgroundMode.ts","webpack://telegram-t/./src/hooks/window/useDevicePixelRatio.ts","webpack://telegram-t/./src/hooks/window/useWindowSize.ts","webpack://telegram-t/./src/lib/fasterdom/fasterdom.ts","webpack://telegram-t/./src/lib/fasterdom/layoutCauses.ts","webpack://telegram-t/./src/lib/fasterdom/stricterdom.ts","webpack://telegram-t/./src/lib/punycode.js","webpack://telegram-t/./src/lib/rlottie/RLottie.async.ts","webpack://telegram-t/./src/lib/teact/dom-events.ts","webpack://telegram-t/./src/lib/teact/heavyAnimation.ts","webpack://telegram-t/./src/lib/teact/jsx-runtime.ts","webpack://telegram-t/./src/lib/teact/teact-dom.ts","webpack://telegram-t/./src/lib/teact/teact.ts","webpack://telegram-t/./src/lib/teact/teactn.tsx","webpack://telegram-t/./src/lib/twemojiRegex.js","webpack://telegram-t/./src/styles/index.scss?9fd2","webpack://telegram-t/./src/types/index.ts","webpack://telegram-t/./src/util/Deferred.ts","webpack://telegram-t/./src/util/animation.ts","webpack://telegram-t/./src/util/appBadge.ts","webpack://telegram-t/./src/util/areDeepEqual.ts","webpack://telegram-t/./src/util/arePropsShallowEqual.ts","webpack://telegram-t/./src/util/betterView.ts","webpack://telegram-t/./src/util/browser/globalEnvironment.ts","webpack://telegram-t/./src/util/browser/idb.ts","webpack://telegram-t/./src/util/browser/intlListFormat.ts","webpack://telegram-t/./src/util/browser/multitab.ts","webpack://telegram-t/./src/util/browser/unloadVideo.ts","webpack://telegram-t/./src/util/browser/url.ts","webpack://telegram-t/./src/util/browser/windowEnvironment.ts","webpack://telegram-t/./src/util/buildClassName.ts","webpack://telegram-t/./src/util/buildStyle.ts","webpack://telegram-t/./src/util/cacheApi.ts","webpack://telegram-t/./src/util/callbacks.ts","webpack://telegram-t/./src/util/captureEscKeyListener.ts","webpack://telegram-t/./src/util/captureEvents.ts","webpack://telegram-t/./src/util/captureKeyboardListeners.ts","webpack://telegram-t/./src/util/clipboard.ts","webpack://telegram-t/./src/util/colors.ts","webpack://telegram-t/./src/util/cssAnimationEndListeners.ts","webpack://telegram-t/./src/util/data/readFallbackStrings.ts","webpack://telegram-t/./src/util/data/readStrings.ts","webpack://telegram-t/./src/util/dates/dateFormat.ts","webpack://telegram-t/./src/util/dates/timestamp.ts","webpack://telegram-t/./src/util/dates/units.ts","webpack://telegram-t/./src/util/debugConsole.ts","webpack://telegram-t/./src/util/debugOverlay.ts","webpack://telegram-t/./src/util/deepDiff.ts","webpack://telegram-t/./src/util/deepLinkParser.ts","webpack://telegram-t/./src/util/deepMerge.ts","webpack://telegram-t/./src/util/deeplink.ts","webpack://telegram-t/./src/util/element/calcTextLineHeightAndCount.ts","webpack://telegram-t/./src/util/element/jsxToHtml.ts","webpack://telegram-t/./src/util/emoji/customEmojiManager.ts","webpack://telegram-t/./src/util/emoji/emoji.ts","webpack://telegram-t/./src/util/emoji/fixNonStandardEmoji.ts","webpack://telegram-t/./src/util/emoji/parseEmojiOnlyString.ts","webpack://telegram-t/./src/util/entities/ids.ts","webpack://telegram-t/./src/util/entities/username.ts","webpack://telegram-t/./src/util/establishMultitabRole.ts","webpack://telegram-t/./src/util/files.ts","webpack://telegram-t/./src/util/folderManager.ts","webpack://telegram-t/./src/util/fonts.ts","webpack://telegram-t/./src/util/forceReflow.ts","webpack://telegram-t/./src/util/formatCurrency.tsx","webpack://telegram-t/./src/util/forumColors.ts","webpack://telegram-t/./src/util/generateUniqueId.ts","webpack://telegram-t/./src/util/getReadableErrorText.ts","webpack://telegram-t/./src/util/handleError.ts","webpack://telegram-t/./src/util/imageResize.ts","webpack://telegram-t/./src/util/init.ts","webpack://telegram-t/./src/util/installPrompt.ts","webpack://telegram-t/./src/util/iteratees.ts","webpack://telegram-t/./src/util/keys/messageKey.ts","webpack://telegram-t/./src/util/keys/searchResultKey.ts","webpack://telegram-t/./src/util/lethargy.ts","webpack://telegram-t/./src/util/localization/format.tsx","webpack://telegram-t/./src/util/localization/index.ts","webpack://telegram-t/./src/util/localization/types.ts","webpack://telegram-t/./src/util/localization/utils.ts","webpack://telegram-t/./src/util/math.ts","webpack://telegram-t/./src/util/mediaLoader.ts","webpack://telegram-t/./src/util/memo.ts","webpack://telegram-t/./src/util/moduleLoader.ts","webpack://telegram-t/./src/util/multiaccount.ts","webpack://telegram-t/./src/util/notifications.tsx","webpack://telegram-t/./src/util/oggToWav.ts","webpack://telegram-t/./src/util/oldLangProvider.ts","webpack://telegram-t/./src/util/passcode.ts","webpack://telegram-t/./src/util/patchSafariProgressiveAudio.ts","webpack://telegram-t/./src/util/perfomanceSettings.ts","webpack://telegram-t/./src/util/permanentWebVersion.ts","webpack://telegram-t/./src/util/phoneNumber.ts","webpack://telegram-t/./src/util/prettyCodeLanguageNames.ts","webpack://telegram-t/./src/util/primitives/LimitedMap.ts","webpack://telegram-t/./src/util/replaceWithTeact.ts","webpack://telegram-t/./src/util/requestActionTimeout.ts","webpack://telegram-t/./src/util/routing.ts","webpack://telegram-t/./src/util/safeExec.ts","webpack://telegram-t/./src/util/safePlay.ts","webpack://telegram-t/./src/util/schedulers.ts","webpack://telegram-t/./src/util/searchWords.ts","webpack://telegram-t/./src/util/serverTime.ts","webpack://telegram-t/./src/util/sessions.ts","webpack://telegram-t/./src/util/setupServiceWorker.ts","webpack://telegram-t/./src/util/signals.ts","webpack://telegram-t/./src/util/stopEvent.ts","webpack://telegram-t/./src/util/svgController.ts","webpack://telegram-t/./src/util/swipeController.ts","webpack://telegram-t/./src/util/switchTheme.ts","webpack://telegram-t/./src/util/systemTheme.ts","webpack://telegram-t/./src/util/textFormat.ts","webpack://telegram-t/./src/util/theme.ts","webpack://telegram-t/./src/util/themeStyle.ts","webpack://telegram-t/./src/util/trimText.ts","webpack://telegram-t/./src/util/updateWebmanifest.ts","webpack://telegram-t/./src/util/websync.ts","webpack://telegram-t/./src/util/windowSize.ts","webpack://telegram-t/./src/util/withCache.ts","webpack://telegram-t/webpack/bootstrap","webpack://telegram-t/webpack/runtime/compat get default export","webpack://telegram-t/webpack/runtime/create fake namespace object","webpack://telegram-t/webpack/runtime/define property getters","webpack://telegram-t/webpack/runtime/ensure chunk","webpack://telegram-t/webpack/runtime/get javascript chunk filename","webpack://telegram-t/webpack/runtime/get mini-css chunk filename","webpack://telegram-t/webpack/runtime/global","webpack://telegram-t/webpack/runtime/hasOwnProperty shorthand","webpack://telegram-t/webpack/runtime/load script","webpack://telegram-t/webpack/runtime/make namespace object","webpack://telegram-t/webpack/runtime/node module decorator","webpack://telegram-t/webpack/runtime/publicPath","webpack://telegram-t/webpack/runtime/css loading","webpack://telegram-t/webpack/runtime/jsonp chunk loading","webpack://telegram-t/./src/index.tsx"],"sourcesContent":["import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: fetchAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst isFetchSupported = typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function';\nconst isReadableStreamSupported = isFetchSupported && typeof ReadableStream === 'function';\n\n// used only inside the fetch adapter\nconst encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n    ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n    async (str) => new Uint8Array(await new Response(str).arrayBuffer())\n);\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsRequestStream = isReadableStreamSupported && test(() => {\n  let duplexAccessed = false;\n\n  const hasContentType = new Request(platform.origin, {\n    body: new ReadableStream(),\n    method: 'POST',\n    get duplex() {\n      duplexAccessed = true;\n      return 'half';\n    },\n  }).headers.has('Content-Type');\n\n  return duplexAccessed && !hasContentType;\n});\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst supportsResponseStream = isReadableStreamSupported &&\n  test(() => utils.isReadableStream(new Response('').body));\n\n\nconst resolvers = {\n  stream: supportsResponseStream && ((res) => res.body)\n};\n\nisFetchSupported && (((res) => {\n  ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n    !resolvers[type] && (resolvers[type] = utils.isFunction(res[type]) ? (res) => res[type]() :\n      (_, config) => {\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n  });\n})(new Response));\n\nconst getBodyLength = async (body) => {\n  if (body == null) {\n    return 0;\n  }\n\n  if(utils.isBlob(body)) {\n    return body.size;\n  }\n\n  if(utils.isSpecCompliantForm(body)) {\n    const _request = new Request(platform.origin, {\n      method: 'POST',\n      body,\n    });\n    return (await _request.arrayBuffer()).byteLength;\n  }\n\n  if(utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n    return body.byteLength;\n  }\n\n  if(utils.isURLSearchParams(body)) {\n    body = body + '';\n  }\n\n  if(utils.isString(body)) {\n    return (await encodeText(body)).byteLength;\n  }\n}\n\nconst resolveBodyLength = async (headers, body) => {\n  const length = utils.toFiniteNumber(headers.getContentLength());\n\n  return length == null ? getBodyLength(body) : length;\n}\n\nexport default isFetchSupported && (async (config) => {\n  let {\n    url,\n    method,\n    data,\n    signal,\n    cancelToken,\n    timeout,\n    onDownloadProgress,\n    onUploadProgress,\n    responseType,\n    headers,\n    withCredentials = 'same-origin',\n    fetchOptions\n  } = resolveConfig(config);\n\n  responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n  let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n  let request;\n\n  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n  });\n\n  let requestContentLength;\n\n  try {\n    if (\n      onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n      (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n    ) {\n      let _request = new Request(url, {\n        method: 'POST',\n        body: data,\n        duplex: \"half\"\n      });\n\n      let contentTypeHeader;\n\n      if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n        headers.setContentType(contentTypeHeader)\n      }\n\n      if (_request.body) {\n        const [onProgress, flush] = progressEventDecorator(\n          requestContentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress))\n        );\n\n        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n      }\n    }\n\n    if (!utils.isString(withCredentials)) {\n      withCredentials = withCredentials ? 'include' : 'omit';\n    }\n\n    // Cloudflare Workers throws when credentials are defined\n    // see https://github.com/cloudflare/workerd/issues/902\n    const isCredentialsSupported = \"credentials\" in Request.prototype;\n    request = new Request(url, {\n      ...fetchOptions,\n      signal: composedSignal,\n      method: method.toUpperCase(),\n      headers: headers.normalize().toJSON(),\n      body: data,\n      duplex: \"half\",\n      credentials: isCredentialsSupported ? withCredentials : undefined\n    });\n\n    let response = await fetch(request, fetchOptions);\n\n    const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n    if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n      const options = {};\n\n      ['status', 'statusText', 'headers'].forEach(prop => {\n        options[prop] = response[prop];\n      });\n\n      const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n        responseContentLength,\n        progressEventReducer(asyncDecorator(onDownloadProgress), true)\n      ) || [];\n\n      response = new Response(\n        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n          flush && flush();\n          unsubscribe && unsubscribe();\n        }),\n        options\n      );\n    }\n\n    responseType = responseType || 'text';\n\n    let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n    !isStreamResponse && unsubscribe && unsubscribe();\n\n    return await new Promise((resolve, reject) => {\n      settle(resolve, reject, {\n        data: responseData,\n        headers: AxiosHeaders.from(response.headers),\n        status: response.status,\n        statusText: response.statusText,\n        config,\n        request\n      })\n    })\n  } catch (err) {\n    unsubscribe && unsubscribe();\n\n    if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n      throw Object.assign(\n        new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n        {\n          cause: err.cause || err\n        }\n      )\n    }\n\n    throw AxiosError.from(err, err && err.code, config, request);\n  }\n});\n\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift(...requestInterceptorChain);\n      chain.push(...responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys({...config1, ...config2}), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","export const VERSION = \"1.11.0\";","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let {data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth} = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  let contentType;\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // Let the browser set it\n    } else if ((contentType = headers.getContentType()) !== false) {\n      // fix semicolon duplication issue for ReactNative FormData implementation\n      const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n      headers.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n    }\n  }\n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn(...args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (utils.isBoolean(value)) {\n      return value.toString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), {\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    },\n    ...options\n  });\n}\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is an empty object (safely handles Buffers)\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an empty object, otherwise false\n */\nconst isEmptyObject = (val) => {\n  // Early return for non-objects or Buffers to prevent RangeError\n  if (!isObject(val) || isBuffer(val)) {\n    return false;\n  }\n  \n  try {\n    return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n  } catch (e) {\n    // Fallback for any other objects that might cause RangeError with Object.keys()\n    return false;\n  }\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Buffer check\n    if (isBuffer(obj)) {\n      return;\n    }\n\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  if (isBuffer(obj)){\n    return null;\n  }\n\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      //Buffer check\n      if (isBuffer(source)) {\n        return source;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isEmptyObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    let dbp;\n    const getDB = () => {\n        if (dbp)\n            return dbp;\n        const request = indexedDB.open(dbName);\n        request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n        dbp = promisifyRequest(request);\n        dbp.then((db) => {\n            // It seems like Safari sometimes likes to just close the connection.\n            // It's supposed to fire this event when that happens. Let's hope it does!\n            db.onclose = () => (dbp = undefined);\n        }, () => { });\n        return dbp;\n    };\n    return (txMode, callback) => getDB().then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic – if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// export { initApi, callApi, cancelApiProgress } from './methods/init';\nexport {\n  initApi, callApi, cancelApiProgress, cancelApiProgressMaster, callApiLocal,\n  handleMethodCallback,\n  handleMethodResponse,\n  updateFullLocalDb,\n  updateLocalDb,\n  setShouldEnableDebugLog,\n} from './worker/connector';\n","import type { Api } from '../../../lib/gramjs';\nimport type { TypedBroadcastChannel } from '../../../util/browser/multitab';\nimport type { ApiInitialArgs, ApiOnProgress, OnApiUpdate } from '../../types';\nimport type { LocalDb } from '../localDb';\nimport type { MethodArgs, MethodResponse, Methods } from '../methods/types';\nimport type { OriginPayload, ThenArg, WorkerMessageEvent } from './types';\n\nimport { DEBUG, IGNORE_UNHANDLED_ERRORS } from '../../../config';\nimport { logDebugMessage } from '../../../util/debugConsole';\nimport Deferred from '../../../util/Deferred';\nimport { getCurrentTabId, subscribeToMasterChange } from '../../../util/establishMultitabRole';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { ACCOUNT_SLOT, DATA_BROADCAST_CHANNEL_NAME } from '../../../util/multiaccount';\nimport { pause, throttleWithTickEnd } from '../../../util/schedulers';\n\ntype RequestState = {\n  messageId: string;\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n  callback?: AnyToVoidFunction;\n  DEBUG_payload?: any;\n};\n\ntype EnsurePromise<T> = Promise<Awaited<T>>;\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5 * 1000; // 5 sec\nconst NO_QUEUE_BEFORE_INIT = new Set(['destroy']);\n\nlet worker: Worker | undefined;\n\nconst requestStates = new Map<string, RequestState>();\nconst requestStatesByCallback = new Map<AnyToVoidFunction, RequestState>();\n\nlet pendingPayloads: OriginPayload[] = [];\n\nconst savedLocalDb: LocalDb = {\n  chats: {},\n  users: {},\n  documents: {},\n  stickerSets: {},\n  photos: {},\n  webDocuments: {},\n  commonBoxState: {},\n  channelPtsById: {},\n};\n\nlet isMasterTab = true;\nsubscribeToMasterChange((isMasterTabNew) => {\n  isMasterTab = isMasterTabNew;\n});\n\nconst channel = new BroadcastChannel(DATA_BROADCAST_CHANNEL_NAME) as TypedBroadcastChannel;\n\nconst postMessagesOnTickEnd = throttleWithTickEnd(() => {\n  const payloads = pendingPayloads;\n  pendingPayloads = [];\n  worker?.postMessage({ payloads });\n});\n\nfunction postMessageOnTickEnd(payload: OriginPayload) {\n  pendingPayloads.push(payload);\n  postMessagesOnTickEnd();\n}\n\nexport function initApiOnMasterTab(initialArgs: ApiInitialArgs) {\n  channel.postMessage({\n    type: 'initApi',\n    token: getCurrentTabId(),\n    initialArgs,\n  });\n}\n\nlet updateCallback: OnApiUpdate;\n\nlet localApiRequestsQueue: { fnName: any; args: any; deferred: Deferred<any> }[] = [];\nlet apiRequestsQueue: { fnName: any; args: any; deferred: Deferred<any> }[] = [];\nlet isInited = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initialArgs: ApiInitialArgs) {\n  updateCallback = onUpdate;\n\n  if (!isMasterTab) {\n    initApiOnMasterTab(initialArgs);\n    return Promise.resolve();\n  }\n\n  if (!worker) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('>>> START LOAD WORKER');\n    }\n\n    const params = new URLSearchParams();\n    if (ACCOUNT_SLOT) {\n      params.set('account', String(ACCOUNT_SLOT));\n    }\n\n    worker = new Worker(new URL('./worker.ts', import.meta.url), {\n      name: params.toString(),\n    });\n    subscribeToWorker(onUpdate);\n\n    if (initialArgs.platform === 'iOS') {\n      setupIosHealthCheck();\n    }\n  }\n\n  return makeRequest({\n    type: 'initApi',\n    args: [initialArgs, savedLocalDb],\n  }).then(() => {\n    isInited = true;\n\n    apiRequestsQueue.forEach((request) => {\n      callApi(request.fnName, ...request.args)\n        .then(request.deferred.resolve)\n        .catch(request.deferred.reject);\n    });\n    apiRequestsQueue = [];\n\n    localApiRequestsQueue.forEach((request) => {\n      callApiLocal(request.fnName, ...request.args)\n        .then(request.deferred.resolve)\n        .catch(request.deferred.reject);\n    });\n    localApiRequestsQueue = [];\n  });\n}\n\nexport function updateLocalDb(name: keyof LocalDb, prop: string, value: any) {\n  savedLocalDb[name][prop] = value;\n}\n\nexport function updateFullLocalDb(initial: LocalDb) {\n  Object.assign(savedLocalDb, initial);\n}\n\nexport function callApiOnMasterTab(payload: any) {\n  channel.postMessage({\n    type: 'callApi',\n    token: getCurrentTabId(),\n    ...payload,\n  });\n}\n\nexport function setShouldEnableDebugLog(value: boolean) {\n  return makeRequest({\n    type: 'toggleDebugMode',\n    isEnabled: value,\n  });\n}\n\n/*\n * Call a worker method on this tab's worker, without transferring to master tab\n * Mostly needed to disconnect worker when re-electing master\n */\nexport function callApiLocal<T extends keyof Methods>(\n  fnName: T, ...args: MethodArgs<T>\n): EnsurePromise<MethodResponse<T>> {\n  if (!isInited) {\n    if (NO_QUEUE_BEFORE_INIT.has(fnName)) {\n      return Promise.resolve(undefined) as EnsurePromise<MethodResponse<T>>;\n    }\n\n    const deferred = new Deferred();\n    localApiRequestsQueue.push({ fnName, args, deferred });\n\n    return deferred.promise as EnsurePromise<MethodResponse<T>>;\n  }\n\n  const promise = makeRequest({\n    type: 'callMethod',\n    name: fnName,\n    args,\n  });\n\n  // Some TypeScript magic to make sure `VirtualClass` is never returned from any method\n  if (DEBUG) {\n    (async () => {\n      try {\n        type ForbiddenTypes =\n          Api.VirtualClass<any>\n          | (Api.VirtualClass<any> | undefined)[];\n        type ForbiddenResponses =\n          ForbiddenTypes\n          | (AnyLiteral & Record<string, ForbiddenTypes>);\n\n        // Unwrap all chained promises\n        const response = await promise;\n        // Make sure responses do not include `VirtualClass` instances\n        const allowedResponse: Exclude<typeof response, ForbiddenResponses> = response;\n        // Suppress \"unused variable\" constraint\n        void allowedResponse;\n      } catch (err) {\n        // Do noting\n      }\n    })();\n  }\n\n  return promise as EnsurePromise<MethodResponse<T>>;\n}\n\nexport function callApi<T extends keyof Methods>(fnName: T, ...args: MethodArgs<T>): EnsurePromise<MethodResponse<T>> {\n  if (!isInited && isMasterTab) {\n    if (NO_QUEUE_BEFORE_INIT.has(fnName)) {\n      return Promise.resolve(undefined) as EnsurePromise<MethodResponse<T>>;\n    }\n\n    const deferred = new Deferred();\n    apiRequestsQueue.push({ fnName, args, deferred });\n\n    return deferred.promise as EnsurePromise<MethodResponse<T>>;\n  }\n\n  const promise = isMasterTab ? makeRequest({\n    type: 'callMethod',\n    name: fnName,\n    args,\n  }) : makeRequestToMaster({\n    name: fnName,\n    args,\n  });\n\n  // Some TypeScript magic to make sure `VirtualClass` is never returned from any method\n  if (DEBUG) {\n    (async () => {\n      try {\n        type ForbiddenTypes =\n          Api.VirtualClass<any>\n          | (Api.VirtualClass<any> | undefined)[];\n        type ForbiddenResponses =\n          ForbiddenTypes\n          | (AnyLiteral & Record<string, ForbiddenTypes>);\n\n        // Unwrap all chained promises\n        const response = await promise;\n        // Make sure responses do not include `VirtualClass` instances\n        const allowedResponse: Exclude<typeof response, ForbiddenResponses> = response;\n        // Suppress \"unused variable\" constraint\n        void allowedResponse;\n      } catch (err) {\n        // Do noting\n      }\n    })();\n  }\n\n  return promise as EnsurePromise<MethodResponse<T>>;\n}\n\nexport function cancelApiProgress(progressCallback: ApiOnProgress) {\n  progressCallback.isCanceled = true;\n\n  const { messageId } = requestStatesByCallback.get(progressCallback) || {};\n  if (!messageId) {\n    return;\n  }\n\n  if (isMasterTab) {\n    cancelApiProgressMaster(messageId);\n  } else {\n    channel.postMessage({\n      type: 'cancelApiProgress',\n      token: getCurrentTabId(),\n      messageId,\n    });\n  }\n}\n\nexport function cancelApiProgressMaster(messageId: string) {\n  postMessageOnTickEnd({\n    type: 'cancelProgress',\n    messageId,\n  });\n}\n\nfunction subscribeToWorker(onUpdate: OnApiUpdate) {\n  worker?.addEventListener('message', ({ data }: WorkerMessageEvent) => {\n    data?.payloads.forEach((payload) => {\n      if (payload.type === 'updates') {\n        let DEBUG_startAt: number | undefined;\n        if (DEBUG) {\n          DEBUG_startAt = performance.now();\n        }\n\n        payload.updates.forEach(onUpdate);\n\n        if (DEBUG) {\n          const duration = performance.now() - DEBUG_startAt!;\n          if (duration > 5) {\n            // eslint-disable-next-line no-console\n            console.warn(`[API] Slow updates processing: ${payload.updates.length} updates in ${duration} ms`);\n          }\n        }\n      } else if (payload.type === 'methodResponse') {\n        handleMethodResponse(payload);\n      } else if (payload.type === 'methodCallback') {\n        handleMethodCallback(payload);\n      } else if (payload.type === 'unhandledError') {\n        const message = payload.error?.message;\n        if (message && IGNORE_UNHANDLED_ERRORS.has(message)) return;\n        throw new Error(message);\n      } else if (payload.type === 'sendBeacon') {\n        navigator.sendBeacon(payload.url, payload.data);\n      } else if (payload.type === 'debugLog') {\n        logDebugMessage(payload.level, ...payload.args);\n      }\n    });\n  });\n}\n\nexport function handleMethodResponse(data: {\n  messageId: string;\n  response?: ThenArg<MethodResponse<keyof Methods>>;\n  error?: { message: string };\n}) {\n  const requestState = requestStates.get(data.messageId);\n  if (requestState) {\n    if (data.error) {\n      requestState.reject(data.error);\n    } else {\n      requestState.resolve(data.response);\n    }\n  }\n}\n\nexport function handleMethodCallback(data: {\n  messageId: string;\n  callbackArgs: any[];\n}) {\n  requestStates.get(data.messageId)?.callback?.(...data.callbackArgs);\n}\n\nfunction makeRequestToMaster(message: {\n  messageId?: string;\n  name: keyof Methods;\n  args: MethodArgs<keyof Methods>;\n  withCallback?: boolean;\n}) {\n  const messageId = generateUniqueId();\n  const payload = {\n    messageId,\n    ...message,\n  };\n\n  const requestState = { messageId } as RequestState;\n\n  // Re-wrap type because of `postMessage`\n  const promise = new Promise<MethodResponse<keyof Methods>>((resolve, reject) => {\n    Object.assign(requestState, { resolve, reject });\n  });\n\n  if ('args' in payload && 'name' in payload && typeof payload.args[1] === 'function') {\n    payload.withCallback = true;\n\n    const callback = payload.args.pop() as AnyToVoidFunction;\n    requestState.callback = callback;\n    requestStatesByCallback.set(callback, requestState);\n  }\n\n  requestStates.set(messageId, requestState);\n\n  promise\n    .catch(() => undefined)\n    .finally(() => {\n      requestStates.delete(messageId);\n\n      if (requestState.callback) {\n        requestStatesByCallback.delete(requestState.callback);\n      }\n    });\n\n  callApiOnMasterTab(payload);\n\n  return promise;\n}\n\nfunction makeRequest(message: OriginPayload) {\n  const messageId = generateUniqueId();\n  const payload: OriginPayload = {\n    messageId,\n    ...message,\n  };\n\n  const requestState = { messageId } as RequestState;\n\n  // Re-wrap type because of `postMessage`\n  const promise = new Promise<MethodResponse<keyof Methods>>((resolve, reject) => {\n    Object.assign(requestState, { resolve, reject });\n  });\n\n  if ('args' in payload && 'name' in payload && typeof payload.args[1] === 'function') {\n    payload.withCallback = true;\n\n    const callback = payload.args.pop() as AnyToVoidFunction;\n    requestState.callback = callback;\n    requestStatesByCallback.set(callback, requestState);\n  }\n\n  requestState.DEBUG_payload = payload;\n\n  requestStates.set(messageId, requestState);\n\n  promise\n    .catch(() => undefined)\n    .finally(() => {\n      requestStates.delete(messageId);\n\n      if (requestState.callback) {\n        requestStatesByCallback.delete(requestState.callback);\n      }\n    });\n\n  postMessageOnTickEnd(payload);\n\n  return promise;\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      makeRequest({ type: 'ping' }),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      updateCallback({ '@type': 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","import type {\n  ApiDimensions, ApiDocument,\n  ApiPhoto, ApiReplyKeyboard,\n  ApiSticker, ApiThumbnail,\n  ApiVideo, MediaContainer,\n  MediaContent,\n} from './messages';\n\nexport type ApiInlineResultType = (\n  'article' | 'audio' | 'contact' | 'document' | 'game' | 'gif' | 'location' | 'mpeg4_gif' |\n  'photo' | 'sticker' | 'venue' | 'video' | 'voice' | 'file' | 'geo'\n);\n\nexport interface ApiWebDocument {\n  mediaType: 'webDocument';\n  url: string;\n  size: number;\n  mimeType: string;\n  accessHash?: string;\n  dimensions?: ApiDimensions;\n}\n\nexport type ApiBotInlineMessage = {\n  content: MediaContent;\n  replyMarkup?: ApiReplyKeyboard;\n};\n\nexport interface ApiBotInlineResult {\n  id: string;\n  queryId: string;\n  type: ApiInlineResultType;\n  title?: string;\n  description?: string;\n  url?: string;\n  content?: ApiWebDocument;\n  webThumbnail?: ApiWebDocument;\n  sendMessage: ApiBotInlineMessage;\n}\n\nexport interface ApiBotInlineMediaResult {\n  id: string;\n  queryId: string;\n  type: ApiInlineResultType;\n  title?: string;\n  description?: string;\n  sticker?: ApiSticker;\n  document?: ApiDocument;\n  photo?: ApiPhoto;\n  gif?: ApiVideo;\n  thumbnail?: ApiThumbnail;\n  sendMessage: ApiBotInlineMessage;\n}\n\nexport interface ApiBotInlineSwitchPm {\n  text: string;\n  startParam: string;\n}\n\nexport interface ApiBotInlineSwitchWebview {\n  text: string;\n  url: string;\n}\n\nexport interface ApiBotCommand {\n  botId: string;\n  command: string;\n  description: string;\n}\n\ntype ApiBotMenuButtonCommands = {\n  type: 'commands';\n};\n\ntype ApiBotMenuButtonWebApp = {\n  type: 'webApp';\n  text: string;\n  url: string;\n};\n\nexport type ApiBotMenuButton = ApiBotMenuButtonWebApp | ApiBotMenuButtonCommands;\n\nexport interface ApiBotAppSettings {\n  placeholderPath?: string;\n  backgroundColor?: string;\n  backgroundDarkColor?: string;\n  headerColor?: string;\n  headerDarkColor?: string;\n}\n\nexport interface ApiBotInfo {\n  botId: string;\n  commands?: ApiBotCommand[];\n  description?: string;\n  photo?: ApiPhoto;\n  gif?: ApiVideo;\n  menuButton: ApiBotMenuButton;\n  privacyPolicyUrl?: string;\n  hasPreviewMedia?: true;\n  appSettings?: ApiBotAppSettings;\n}\n\nexport interface ApiBotPreviewMedia extends MediaContainer {\n  date: number;\n}\n","import type { ApiGeoPoint, ApiSticker } from './messages';\n\nexport interface ApiBusinessLocation {\n  geo?: ApiGeoPoint;\n  address: string;\n}\n\nexport interface ApiBusinessTimetableSegment {\n  startMinute: number;\n  endMinute: number;\n}\n\nexport interface ApiBusinessWorkHours {\n  timezoneId: string;\n  workHours: ApiBusinessTimetableSegment[];\n}\n\nexport interface ApiBusinessIntro {\n  title: string;\n  description: string;\n  sticker?: ApiSticker;\n}\n","import type {\n  ApiCallProtocol, ApiPhoneCallConnection,\n  GroupCallConnectionState,\n  GroupCallParticipant,\n  VideoRotation,\n  VideoState,\n} from '../../lib/secret-sauce';\n\nexport interface ApiGroupCall {\n  chatId?: string;\n  isLoaded?: boolean;\n  id: string;\n  accessHash: string;\n  joinMuted?: true;\n  canChangeJoinMuted?: true;\n  canStartVideo?: true;\n  joinDateAsc?: true;\n  scheduleStartSubscribed?: true;\n  participantsCount: number;\n  params?: any;\n  title?: string;\n  streamDcId?: number;\n  recordStartDate?: number;\n  scheduleDate?: number;\n  version: number;\n  inviteHash?: string;\n\n  nextOffset?: string;\n  participants: Record<string, GroupCallParticipant>;\n  connectionState: GroupCallConnectionState;\n  isSpeakerDisabled?: boolean;\n}\n\nexport interface ApiPhoneCall {\n  state?: 'active' | 'waiting' | 'discarded' | 'requested' | 'accepted' | 'requesting';\n  isConnected?: boolean;\n  id: string;\n  accessHash?: string;\n  adminId?: string;\n  participantId?: string;\n  isVideo?: boolean;\n  isP2pAllowed?: boolean;\n  date?: number;\n  startDate?: number;\n  receiveDate?: number;\n  p2pAllowed?: boolean;\n  connections?: ApiPhoneCallConnection[];\n  protocol?: ApiCallProtocol;\n  needRating?: boolean;\n  needDebug?: boolean;\n  reason?: 'missed' | 'disconnect' | 'hangup' | 'busy';\n  duration?: number;\n\n  emojis?: string;\n  gA?: number[];\n  gB?: number[];\n  pLast?: number[];\n  randomLast?: number[];\n  gAOrB?: number[];\n  gAHash?: number[];\n  keyFingerprint?: string;\n\n  isMuted?: boolean;\n  videoState?: VideoState;\n  videoRotation?: VideoRotation;\n  screencastState?: VideoState;\n  isBatteryLow?: boolean;\n}\n\nexport type ApiPhoneCallDiscardReason = 'missed' | 'disconnect' | 'hangup' | 'busy';\n","import type { ApiBotCommand } from './bots';\nimport type {\n  ApiChatReactions, ApiFormattedText, ApiInputMessageReplyInfo, ApiInputSuggestedPostInfo, ApiPhoto, ApiStickerSet,\n} from './messages';\nimport type { ApiBotVerification, ApiChatInviteImporter, ApiPeerNotifySettings, ApiRestrictionReason } from './misc';\nimport type {\n  ApiEmojiStatusType, ApiFakeType, ApiUser, ApiUsername,\n} from './users';\n\ntype ApiChatType = (\n  'chatTypePrivate' | 'chatTypeSecret' |\n  'chatTypeBasicGroup' | 'chatTypeSuperGroup' |\n  'chatTypeChannel'\n);\n\nexport type ApiPeer = ApiChat | ApiUser;\n\nexport interface ApiChat {\n  id: string;\n  folderId?: number;\n  type: ApiChatType;\n  title: string;\n  hasUnreadMark?: boolean;\n  lastReadOutboxMessageId?: number;\n  lastReadInboxMessageId?: number;\n  unreadCount?: number;\n  unreadMentionsCount?: number;\n  unreadReactionsCount?: number;\n  isVerified?: true;\n  areSignaturesShown?: boolean;\n  areProfilesShown?: boolean;\n  isLinkedInDiscussion?: boolean;\n  hasGeo?: boolean;\n  accessHash?: string;\n  isMin?: boolean;\n  hasVideoAvatar?: boolean;\n  avatarPhotoId?: string;\n  usernames?: ApiUsername[];\n  hasUsername?: boolean;\n  membersCount?: number;\n  creationDate?: number;\n  isSupport?: true;\n  draftDate?: number;\n  isProtected?: boolean;\n  fakeType?: ApiFakeType;\n  color?: ApiPeerColor;\n  emojiStatus?: ApiEmojiStatusType;\n  isForum?: boolean;\n  isForumAsMessages?: true;\n  isMonoforum?: boolean;\n  withForumTabs?: boolean;\n  linkedMonoforumId?: string;\n  areChannelMessagesAllowed?: boolean;\n  boostLevel?: number;\n  botVerificationIconId?: string;\n  hasAutoTranslation?: true;\n  level?: number;\n\n  // Calls\n  isCallActive?: boolean;\n  isCallNotEmpty?: boolean;\n\n  // Current user permissions\n  isNotJoined?: boolean;\n  isListed?: boolean;\n  isCreator?: boolean;\n  isForbidden?: boolean; // Forbidden - can't send messages (user was kicked, for example)\n  isRestricted?: boolean; // Restricted - can't access the chat (user was banned or chat is violating rules)\n  restrictionReasons?: ApiRestrictionReason[];\n  adminRights?: ApiChatAdminRights;\n  currentUserBannedRights?: ApiChatBannedRights;\n  defaultBannedRights?: ApiChatBannedRights;\n\n  migratedTo?: {\n    chatId: string;\n    accessHash?: string;\n  };\n\n  joinRequests?: ApiChatInviteImporter[];\n  isJoinToSend?: boolean;\n  isJoinRequest?: boolean;\n  sendAsPeerIds?: ApiSendAsPeerId[];\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  sendPaidReactionsPeer?: ApiSendAsPeerId;\n\n  unreadReactions?: number[];\n  unreadMentions?: number[];\n\n  // Stories\n  areStoriesHidden?: boolean;\n  hasStories?: boolean;\n  hasUnreadStories?: boolean;\n  maxStoryId?: number;\n\n  subscriptionUntil?: number;\n\n  // Locally determined field\n  detectedLanguage?: string;\n\n  paidMessagesStars?: number;\n}\n\nexport interface ApiTypingStatus {\n  userId?: string;\n  action: string;\n  timestamp: number;\n  emoji?: string;\n}\n\nexport interface ApiChatFullInfo {\n  about?: string;\n  onlineCount?: number;\n  members?: ApiChatMember[];\n  kickedMembers?: ApiChatMember[];\n  adminMembersById?: Record<string, ApiChatMember>;\n  canViewMembers?: boolean;\n  isPreHistoryHidden?: boolean;\n  inviteLink?: string;\n  groupCallId?: string;\n  slowMode?: {\n    seconds: number;\n    nextSendDate?: number;\n  };\n  migratedFrom?: {\n    chatId: string;\n    maxMessageId?: number;\n  };\n  joinInfo?: {\n    joinedDate: number;\n    inviterId?: string;\n    isViaRequest?: boolean;\n  };\n  linkedChatId?: string;\n  botCommands?: ApiBotCommand[];\n  enabledReactions?: ApiChatReactions;\n  reactionsLimit?: number;\n  sendAsId?: string;\n  canViewStatistics?: boolean;\n  canViewMonetization?: boolean;\n  recentRequesterIds?: string[];\n  requestsPending?: number;\n  statisticsDcId?: number;\n  stickerSet?: ApiStickerSet;\n  emojiSet?: ApiStickerSet;\n  profilePhoto?: ApiPhoto;\n  areParticipantsHidden?: boolean;\n  isTranslationDisabled?: true;\n  hasPinnedStories?: boolean;\n  isPaidReactionAvailable?: boolean;\n  hasScheduledMessages?: boolean;\n  starGiftCount?: number;\n  areStarGiftsAvailable?: boolean;\n  arePaidMessagesAvailable?: true;\n\n  boostsApplied?: number;\n  boostsToUnrestrict?: number;\n  botVerification?: ApiBotVerification;\n}\n\nexport interface ApiChatMember {\n  userId: string;\n  inviterId?: string;\n  joinedDate?: number;\n  kickedByUserId?: string;\n  promotedByUserId?: string;\n  bannedRights?: ApiChatBannedRights;\n  adminRights?: ApiChatAdminRights;\n  customTitle?: string;\n  isAdmin?: true;\n  isOwner?: true;\n  isViaRequest?: true;\n}\n\nexport interface ApiChatAdminRights {\n  changeInfo?: true;\n  postMessages?: true;\n  editMessages?: true;\n  deleteMessages?: true;\n  banUsers?: true;\n  inviteUsers?: true;\n  pinMessages?: true;\n  addAdmins?: true;\n  anonymous?: true;\n  manageCall?: true;\n  manageTopics?: true;\n  postStories?: true;\n  editStories?: true;\n  deleteStories?: true;\n}\n\nexport interface ApiChatBannedRights {\n  viewMessages?: true;\n  sendMessages?: true;\n  sendMedia?: true;\n  sendStickers?: true;\n  sendGifs?: true;\n  sendGames?: true;\n  sendInline?: true;\n  embedLinks?: true;\n  sendPolls?: true;\n  changeInfo?: true;\n  inviteUsers?: true;\n  pinMessages?: true;\n  manageTopics?: true;\n  sendPhotos?: true;\n  sendVideos?: true;\n  sendRoundvideos?: true;\n  sendAudios?: true;\n  sendVoices?: true;\n  sendDocs?: true;\n  sendPlain?: true;\n  untilDate?: number;\n}\n\nexport interface ApiChatFolder {\n  id: number;\n  title: ApiFormattedText;\n  noTitleAnimations?: true;\n  description?: string;\n  emoticon?: string;\n  contacts?: true;\n  nonContacts?: true;\n  groups?: true;\n  channels?: true;\n  bots?: true;\n  excludeMuted?: true;\n  excludeRead?: true;\n  excludeArchived?: true;\n  pinnedChatIds?: string[];\n  includedChatIds: string[];\n  excludedChatIds: string[];\n  isChatList?: true;\n  hasMyInvites?: true;\n}\n\nexport interface ApiPeerSettings {\n  isAutoArchived?: boolean;\n  canReportSpam?: boolean;\n  canAddContact?: boolean;\n  canBlockContact?: boolean;\n  chargedPaidMessageStars?: number;\n  registrationMonth?: string;\n  phoneCountry?: string;\n  nameChangeDate?: number;\n  photoChangeDate?: number;\n}\n\nexport interface ApiSendAsPeerId {\n  id: string;\n  isPremium?: boolean;\n}\n\nexport interface ApiTopic {\n  id: number;\n  isClosed?: boolean;\n  isPinned?: boolean;\n  isHidden?: boolean;\n  isOwner?: boolean;\n\n  // TODO[forums] https://github.com/telegramdesktop/tdesktop/blob/1aece79a471d99a8b63d826b1bce1f36a04d7293/Telegram/SourceFiles/data/data_forum_topic.cpp#L318\n  isMin?: boolean;\n  date: number;\n  title: string;\n  iconColor: number;\n  iconEmojiId?: string;\n  lastMessageId: number;\n  unreadCount: number;\n  unreadMentionsCount: number;\n  unreadReactionsCount: number;\n  fromId: string;\n  notifySettings: ApiPeerNotifySettings;\n}\n\nexport interface ApiChatlistInviteNew {\n  title: ApiFormattedText;\n  noTitleAnimations?: true;\n  emoticon?: string;\n  peerIds: string[];\n  slug: string;\n}\n\nexport interface ApiChatlistInviteAlready {\n  folderId: number;\n  missingPeerIds: string[];\n  alreadyPeerIds: string[];\n  slug: string;\n}\n\nexport type ApiChatlistInvite = ApiChatlistInviteNew | ApiChatlistInviteAlready;\n\nexport interface ApiChatlistExportedInvite {\n  title: string;\n  url: string;\n  peerIds: string[];\n}\n\nexport interface ApiPeerColor {\n  color?: number;\n  backgroundEmojiId?: string;\n}\n\nexport interface ApiMissingInvitedUser {\n  id: string;\n  isRequiringPremiumToInvite?: boolean;\n  isRequiringPremiumToMessage?: boolean;\n}\n\nexport interface ApiChatLink {\n  chatId: string;\n  text: ApiFormattedText;\n}\n\nexport type ApiDraft = {\n  text?: ApiFormattedText;\n  replyInfo?: ApiInputMessageReplyInfo;\n  suggestedPostInfo?: ApiInputSuggestedPostInfo;\n  date?: number;\n  effectId?: string;\n  isLocal?: boolean;\n};\n\nexport type ApiSponsoredPeer = {\n  randomId: string;\n  peerId: string;\n  sponsorInfo?: string;\n  additionalInfo?: string;\n};\n","export * from './users';\nexport * from './chats';\nexport * from './messages';\nexport * from './updates';\nexport * from './media';\nexport * from './payments';\nexport * from './settings';\nexport * from './bots';\nexport * from './misc';\nexport * from './calls';\nexport * from './statistics';\nexport * from './stories';\nexport * from './business';\nexport * from './stars';\n","// We cache avatars as Data URI for faster initial load\n// and messages media as Blob for smaller size.\n\nexport enum ApiMediaFormat {\n  BlobUrl,\n  Progressive,\n  DownloadUrl,\n  Text,\n}\n\nexport type ApiParsedMedia = string | Blob | ArrayBuffer;\nexport type ApiPreparedMedia = string;\n","import type { ThreadId, WebPageMediaSize } from '../../types';\nimport type {\n  ApiBotInlineMediaResult,\n  ApiBotInlineResult,\n  ApiWebDocument,\n} from './bots';\nimport type { ApiPeerColor } from './chats';\nimport type { ApiMessageAction } from './messageActions';\nimport type { ApiRestrictionReason } from './misc';\nimport type {\n  ApiLabeledPrice,\n} from './payments';\nimport type { ApiStarGiftUnique, ApiTypeCurrencyAmount } from './stars';\nimport type {\n  ApiMessageStoryData, ApiStory, ApiWebPageStickerData, ApiWebPageStoryData,\n} from './stories';\nimport type { ApiInlineQueryPeerType } from './users';\n\nexport interface ApiDimensions {\n  width: number;\n  height: number;\n}\n\nexport interface ApiPhotoSize extends ApiDimensions {\n  type: 's' | 'm' | 'x' | 'y' | 'w';\n}\n\nexport interface ApiVideoSize extends ApiDimensions {\n  type: 'u' | 'v';\n  videoStartTs?: number;\n  size: number;\n}\n\nexport interface ApiThumbnail extends ApiDimensions {\n  dataUri: string;\n}\n\nexport interface ApiPhoto {\n  mediaType: 'photo';\n  id: string;\n  date: number;\n  thumbnail?: ApiThumbnail;\n  isVideo?: boolean;\n  sizes: ApiPhotoSize[];\n  videoSizes?: ApiVideoSize[];\n  blobUrl?: string;\n  isSpoiler?: boolean;\n}\n\nexport interface ApiSticker {\n  mediaType: 'sticker';\n  id: string;\n  stickerSetInfo: ApiStickerSetInfo;\n  emoji?: string;\n  isCustomEmoji?: boolean;\n  isLottie: boolean;\n  isVideo: boolean;\n  width?: number;\n  height?: number;\n  thumbnail?: ApiThumbnail;\n  previewPhotoSizes?: ApiPhotoSize[];\n  isPreloadedGlobally?: boolean;\n  hasEffect?: boolean;\n  isFree?: boolean;\n  shouldUseTextColor?: boolean;\n}\n\nexport interface ApiStickerSet {\n  isArchived?: true;\n  isEmoji?: true;\n  installedDate?: number;\n  id: string;\n  accessHash: string;\n  title: string;\n  hasThumbnail?: boolean;\n  hasStaticThumb?: boolean;\n  hasAnimatedThumb?: boolean;\n  hasVideoThumb?: boolean;\n  thumbCustomEmojiId?: string;\n  count: number;\n  stickers?: ApiSticker[];\n  packs?: Record<string, ApiSticker[]>;\n  covers?: ApiSticker[];\n  shortName: string;\n}\n\ntype ApiStickerSetInfoShortName = {\n  shortName: string;\n};\n\ntype ApiStickerSetInfoId = {\n  id: string;\n  accessHash: string;\n};\n\ntype ApiStickerSetInfoMissing = {\n  isMissing: true;\n};\n\nexport type ApiStickerSetInfo = ApiStickerSetInfoShortName | ApiStickerSetInfoId | ApiStickerSetInfoMissing;\n\nexport interface ApiVideo {\n  mediaType: 'video';\n  id: string;\n  mimeType: string;\n  duration: number;\n  fileName: string;\n  width?: number;\n  height?: number;\n  supportsStreaming?: boolean;\n  isRound?: boolean;\n  isGif?: boolean;\n  hasVideoPreview?: boolean;\n  isSpoiler?: boolean;\n  thumbnail?: ApiThumbnail;\n  previewPhotoSizes?: ApiPhotoSize[];\n  blobUrl?: string;\n  previewBlobUrl?: string;\n  size: number;\n  noSound?: boolean;\n  waveform?: number[];\n  timestamp?: number;\n}\n\nexport interface ApiAudio {\n  mediaType: 'audio';\n  id: string;\n  size: number;\n  mimeType: string;\n  fileName: string;\n  duration: number;\n  performer?: string;\n  title?: string;\n  thumbnailSizes?: ApiPhotoSize[];\n}\n\nexport interface ApiVoice {\n  mediaType: 'voice';\n  id: string;\n  duration: number;\n  waveform?: number[];\n  size: number;\n}\n\nexport interface ApiDocument {\n  mediaType: 'document';\n  id?: string;\n  fileName: string;\n  size: number;\n  timestamp?: number;\n  mimeType: string;\n  thumbnail?: ApiThumbnail;\n  previewPhotoSizes?: ApiPhotoSize[];\n  previewBlobUrl?: string;\n  innerMediaType?: 'photo' | 'video';\n  mediaSize?: ApiDimensions;\n}\n\nexport interface ApiContact {\n  mediaType: 'contact';\n  firstName: string;\n  lastName: string;\n  phoneNumber: string;\n  userId: string;\n}\n\nexport type ApiPaidMedia = {\n  mediaType: 'paidMedia';\n  starsAmount: number;\n} & ({\n  isBought?: true;\n  extendedMedia: BoughtPaidMedia[];\n} | {\n  isBought?: undefined;\n  extendedMedia: ApiMediaExtendedPreview[];\n});\n\nexport interface ApiPollAnswer {\n  text: ApiFormattedText;\n  option: string;\n}\n\nexport interface ApiPollResult {\n  isChosen?: true;\n  isCorrect?: true;\n  option: string;\n  votersCount: number;\n}\n\nexport interface ApiPoll {\n  mediaType: 'poll';\n  id: string;\n  summary: {\n    closed?: true;\n    isPublic?: true;\n    multipleChoice?: true;\n    quiz?: true;\n    question: ApiFormattedText;\n    answers: ApiPollAnswer[];\n    closePeriod?: number;\n    closeDate?: number;\n  };\n  results: {\n    isMin?: true;\n    results?: ApiPollResult[];\n    totalVoters?: number;\n    recentVoterIds?: string[];\n    solution?: string;\n    solutionEntities?: ApiMessageEntity[];\n  };\n}\n\nexport interface ApiInvoice {\n  prices: ApiLabeledPrice[];\n  totalAmount: number;\n  currency: string;\n  isTest?: boolean;\n  isRecurring?: boolean;\n  subscriptionPeriod?: number;\n  termsUrl?: string;\n  maxTipAmount?: number;\n  suggestedTipAmounts?: number[];\n  isNameRequested?: boolean;\n  isPhoneRequested?: boolean;\n  isEmailRequested?: boolean;\n  isShippingAddressRequested?: boolean;\n  isFlexible?: boolean;\n  isPhoneSentToProvider?: boolean;\n  isEmailSentToProvider?: boolean;\n}\n\nexport interface ApiMediaInvoice {\n  mediaType: 'invoice';\n  title: string;\n  description: string;\n  photo?: ApiWebDocument;\n  isTest?: boolean;\n  receiptMessageId?: number;\n  currency: string;\n  amount: number;\n  extendedMedia?: ApiMediaExtendedPreview;\n}\n\nexport interface ApiMediaExtendedPreview {\n  mediaType: 'extendedMediaPreview';\n  width?: number;\n  height?: number;\n  thumbnail?: ApiThumbnail;\n  duration?: number;\n}\n\nexport interface ApiPaymentCredentials {\n  id: string;\n  title: string;\n}\n\nexport interface ApiGeoPoint {\n  long: number;\n  lat: number;\n  accessHash: string;\n  accuracyRadius?: number;\n}\n\nexport interface ApiGeo {\n  mediaType: 'geo';\n  geo: ApiGeoPoint;\n}\n\nexport interface ApiVenue {\n  mediaType: 'venue';\n  geo: ApiGeoPoint;\n  title: string;\n  address: string;\n  provider: string;\n  venueId: string;\n  venueType: string;\n}\n\nexport interface ApiGeoLive {\n  mediaType: 'geoLive';\n  geo: ApiGeoPoint;\n  heading?: number;\n  period: number;\n}\n\nexport type ApiLocation = ApiGeo | ApiVenue | ApiGeoLive;\n\nexport type ApiGame = {\n  mediaType: 'game';\n  title: string;\n  description: string;\n  photo?: ApiPhoto;\n  shortName: string;\n  id: string;\n  accessHash: string;\n  document?: ApiDocument;\n};\n\nexport type ApiGiveaway = {\n  mediaType: 'giveaway';\n  quantity: number;\n  months?: number;\n  stars?: number;\n  untilDate: number;\n  isOnlyForNewSubscribers?: true;\n  countries?: string[];\n  channelIds: string[];\n  prizeDescription?: string;\n};\n\nexport type ApiGiveawayResults = {\n  mediaType: 'giveawayResults';\n  months?: number;\n  stars?: number;\n  untilDate: number;\n  isRefunded?: true;\n  isOnlyForNewSubscribers?: true;\n  channelId: string;\n  prizeDescription?: string;\n  winnersCount?: number;\n  winnerIds: string[];\n  additionalPeersCount?: number;\n  launchMessageId: number;\n  unclaimedCount: number;\n};\n\nexport type ApiNewPoll = {\n  summary: ApiPoll['summary'];\n  quiz?: {\n    correctAnswers: string[];\n    solution?: string;\n    solutionEntities?: ApiMessageEntity[];\n  };\n};\n\nexport interface ApiTodoItem {\n  id: number;\n  title: ApiFormattedText;\n}\n\nexport interface ApiTodoList {\n  title: ApiFormattedText;\n  items: ApiTodoItem[];\n  othersCanAppend?: boolean;\n  othersCanComplete?: boolean;\n}\n\nexport interface ApiTodoCompletion {\n  itemId: number;\n  completedBy: string;\n  completedAt: number;\n}\n\nexport interface ApiMediaTodo {\n  mediaType: 'todo';\n  todo: ApiTodoList;\n  completions?: ApiTodoCompletion[];\n}\n\nexport type ApiNewMediaTodo = {\n  todo: ApiTodoList;\n};\n\nexport interface ApiWebPage {\n  mediaType: 'webpage';\n  id: number;\n  url: string;\n  displayUrl: string;\n  type?: string;\n  siteName?: string;\n  title?: string;\n  description?: string;\n  photo?: ApiPhoto;\n  audio?: ApiAudio;\n  duration?: number;\n  document?: ApiDocument;\n  video?: ApiVideo;\n  story?: ApiWebPageStoryData;\n  gift?: ApiStarGiftUnique;\n  stickers?: ApiWebPageStickerData;\n  mediaSize?: WebPageMediaSize;\n  hasLargeMedia?: boolean;\n}\n\nexport type ApiReplyInfo = ApiMessageReplyInfo | ApiStoryReplyInfo;\n\nexport interface ApiMessageReplyInfo {\n  type: 'message';\n  replyToMsgId?: number;\n  replyToPeerId?: string;\n  replyFrom?: ApiMessageForwardInfo;\n  replyMedia?: MediaContent;\n  replyToTopId?: number;\n  isForumTopic?: true;\n  isQuote?: true;\n  quoteText?: ApiFormattedText;\n  quoteOffset?: number;\n}\n\nexport interface ApiStoryReplyInfo {\n  type: 'story';\n  peerId: string;\n  storyId: number;\n}\n\nexport interface ApiInputMessageReplyInfo {\n  type: 'message';\n  replyToMsgId: number;\n  replyToTopId?: number;\n  replyToPeerId?: string;\n  monoforumPeerId?: string;\n  quoteText?: ApiFormattedText;\n  quoteOffset?: number;\n}\n\nexport interface ApiSuggestedPost {\n  isAccepted?: true;\n  isRejected?: true;\n  price?: ApiTypeCurrencyAmount;\n  scheduleDate?: number;\n}\n\nexport interface ApiInputStoryReplyInfo {\n  type: 'story';\n  peerId: string;\n  storyId: number;\n}\n\nexport interface ApiInputSuggestedPostInfo {\n  price?: ApiTypeCurrencyAmount;\n  scheduleDate?: number;\n  isAccepted?: true;\n  isRejected?: true;\n}\n\nexport type ApiInputReplyInfo = ApiInputMessageReplyInfo | ApiInputStoryReplyInfo;\n\nexport interface ApiMessageForwardInfo {\n  date: number;\n  savedDate?: number;\n  isImported?: boolean;\n  isChannelPost: boolean;\n  channelPostId?: number;\n  isLinkedChannelPost?: boolean;\n  fromChatId?: string;\n  fromId?: string;\n  savedFromPeerId?: string;\n  isSavedOutgoing?: boolean;\n  fromMessageId?: number;\n  hiddenUserName?: string;\n  postAuthorTitle?: string;\n}\n\nexport interface ApiStoryForwardInfo {\n  fromPeerId?: string;\n  fromName?: string;\n  storyId?: number;\n  isModified?: boolean;\n}\n\nexport type ApiMessageEntityDefault = {\n  type: Exclude<\n  `${ApiMessageEntityTypes}`,\n  `${ApiMessageEntityTypes.Pre}` | `${ApiMessageEntityTypes.TextUrl}` | `${ApiMessageEntityTypes.MentionName}` |\n  `${ApiMessageEntityTypes.CustomEmoji}` | `${ApiMessageEntityTypes.Blockquote}` | `${ApiMessageEntityTypes.Timestamp}`\n  >;\n  offset: number;\n  length: number;\n};\n\nexport type ApiMessageEntityPre = {\n  type: ApiMessageEntityTypes.Pre;\n  offset: number;\n  length: number;\n  language?: string;\n};\n\nexport type ApiMessageEntityTextUrl = {\n  type: ApiMessageEntityTypes.TextUrl;\n  offset: number;\n  length: number;\n  url: string;\n};\n\nexport type ApiMessageEntityMentionName = {\n  type: ApiMessageEntityTypes.MentionName;\n  offset: number;\n  length: number;\n  userId: string;\n};\n\nexport type ApiMessageEntityBlockquote = {\n  type: ApiMessageEntityTypes.Blockquote;\n  offset: number;\n  length: number;\n  canCollapse?: boolean;\n};\n\nexport type ApiMessageEntityCustomEmoji = {\n  type: ApiMessageEntityTypes.CustomEmoji;\n  offset: number;\n  length: number;\n  documentId: string;\n};\n\n// Local entities\nexport type ApiMessageEntityTimestamp = {\n  type: ApiMessageEntityTypes.Timestamp;\n  offset: number;\n  length: number;\n  timestamp: number;\n};\n\nexport type ApiMessageEntityQuoteFocus = {\n  type: 'quoteFocus';\n  offset: number;\n  length: number;\n};\n\nexport type ApiMessageEntity = ApiMessageEntityDefault | ApiMessageEntityPre | ApiMessageEntityTextUrl |\n  ApiMessageEntityMentionName | ApiMessageEntityCustomEmoji | ApiMessageEntityBlockquote | ApiMessageEntityTimestamp |\n  ApiMessageEntityQuoteFocus;\n\nexport enum ApiMessageEntityTypes {\n  Bold = 'MessageEntityBold',\n  Blockquote = 'MessageEntityBlockquote',\n  BotCommand = 'MessageEntityBotCommand',\n  Cashtag = 'MessageEntityCashtag',\n  Code = 'MessageEntityCode',\n  Email = 'MessageEntityEmail',\n  Hashtag = 'MessageEntityHashtag',\n  Italic = 'MessageEntityItalic',\n  MentionName = 'MessageEntityMentionName',\n  Mention = 'MessageEntityMention',\n  Phone = 'MessageEntityPhone',\n  Pre = 'MessageEntityPre',\n  Strike = 'MessageEntityStrike',\n  TextUrl = 'MessageEntityTextUrl',\n  Url = 'MessageEntityUrl',\n  Underline = 'MessageEntityUnderline',\n  Spoiler = 'MessageEntitySpoiler',\n  CustomEmoji = 'MessageEntityCustomEmoji',\n  Timestamp = 'MessageEntityTimestamp',\n  QuoteFocus = 'MessageEntityQuoteFocus',\n  Unknown = 'MessageEntityUnknown',\n}\n\nexport interface ApiFormattedText {\n  text: string;\n  entities?: ApiMessageEntity[];\n}\n\nexport type MediaContent = {\n  text?: ApiFormattedText;\n  photo?: ApiPhoto;\n  video?: ApiVideo;\n  altVideos?: ApiVideo[];\n  document?: ApiDocument;\n  sticker?: ApiSticker;\n  contact?: ApiContact;\n  pollId?: string;\n  todo?: ApiMediaTodo;\n  action?: ApiMessageAction;\n  webPage?: ApiWebPage;\n  audio?: ApiAudio;\n  voice?: ApiVoice;\n  invoice?: ApiMediaInvoice;\n  location?: ApiLocation;\n  game?: ApiGame;\n  storyData?: ApiMessageStoryData;\n  giveaway?: ApiGiveaway;\n  giveawayResults?: ApiGiveawayResults;\n  paidMedia?: ApiPaidMedia;\n  ttlSeconds?: number;\n};\nexport type MediaContainer = {\n  content: MediaContent;\n};\n\nexport type StatefulMediaContent = {\n  poll?: ApiPoll;\n  story?: ApiStory;\n};\n\nexport type BoughtPaidMedia = Pick<MediaContent, 'photo' | 'video'>;\n\nexport interface ApiMessage {\n  id: number;\n  chatId: string;\n  content: MediaContent;\n  date: number;\n  isOutgoing: boolean;\n  senderId?: string;\n  replyInfo?: ApiReplyInfo;\n  suggestedPostInfo?: ApiInputSuggestedPostInfo;\n  sendingState?: 'messageSendingStatePending' | 'messageSendingStateFailed';\n  forwardInfo?: ApiMessageForwardInfo;\n  isDeleting?: boolean;\n  previousLocalId?: number;\n  viewsCount?: number;\n  forwardsCount?: number;\n  isEdited?: boolean;\n  editDate?: number;\n  isMentioned?: boolean;\n  isMediaUnread?: boolean;\n  groupedId?: string;\n  isInAlbum?: boolean;\n  hasUnreadMention?: boolean;\n  inlineButtons?: ApiKeyboardButtons;\n  keyboardButtons?: ApiKeyboardButtons;\n  keyboardPlaceholder?: string;\n  isKeyboardSingleUse?: boolean;\n  isKeyboardSelective?: boolean;\n  viaBotId?: string;\n  viaBusinessBotId?: string;\n  postAuthorTitle?: string;\n  isScheduled?: boolean;\n  shouldHideKeyboardButtons?: boolean;\n  isHideKeyboardSelective?: boolean;\n  isFromScheduled?: boolean;\n  isSilent?: boolean;\n  isPinned?: boolean;\n  seenByDates?: Record<string, number>;\n  isProtected?: boolean;\n  isForwardingAllowed?: boolean;\n  transcriptionId?: string;\n  isTranscriptionError?: boolean;\n  emojiOnlyCount?: number;\n  reactors?: {\n    nextOffset?: string;\n    count: number;\n    reactions: ApiPeerReaction[];\n  };\n  reactions?: ApiReactions;\n  hasComments?: boolean;\n  readDate?: number;\n  savedPeerId?: string;\n  senderBoosts?: number;\n  factCheck?: ApiFactCheck;\n  effectId?: string;\n  isInvertedMedia?: true;\n  isVideoProcessingPending?: true;\n  areReactionsPossible?: true;\n  reportDeliveryUntilDate?: number;\n  paidMessageStars?: number;\n  restrictionReasons?: ApiRestrictionReason[];\n}\n\nexport interface ApiReactions {\n  canSeeList?: boolean;\n  areTags?: boolean;\n  results: ApiReactionCount[];\n  recentReactions?: ApiPeerReaction[];\n  topReactors?: ApiMessageReactor[];\n}\n\nexport interface ApiPeerReaction {\n  peerId: string;\n  reaction: ApiReaction;\n  isOwn?: boolean;\n  isBig?: boolean;\n  isUnread?: boolean;\n  addedDate: number;\n}\n\nexport interface ApiMessageReactor {\n  isTop?: true;\n  isMy?: true;\n  count: number;\n  isAnonymous?: true;\n  peerId?: string;\n}\n\nexport interface ApiReactionCount {\n  chosenOrder?: number;\n  count: number;\n  reaction: ApiReactionWithPaid;\n  localAmount?: number;\n  localIsPrivate?: boolean;\n  localPeerId?: string;\n  localPreviousChosenOrder?: number;\n}\n\nexport interface ApiAvailableReaction {\n  selectAnimation?: ApiDocument;\n  appearAnimation?: ApiDocument;\n  activateAnimation?: ApiDocument;\n  effectAnimation?: ApiDocument;\n  staticIcon?: ApiDocument;\n  centerIcon?: ApiDocument;\n  aroundAnimation?: ApiDocument;\n  reaction: ApiReactionEmoji;\n  title: string;\n  isInactive?: boolean;\n  isPremium?: boolean;\n}\n\nexport interface ApiAvailableEffect {\n  id: string;\n  emoticon: string;\n  staticIconId?: string;\n  effectAnimationId?: string;\n  effectStickerId: string;\n  isPremium?: boolean;\n}\n\ntype ApiChatReactionsAll = {\n  type: 'all';\n  areCustomAllowed?: true;\n};\n\ntype ApiChatReactionsSome = {\n  type: 'some';\n  allowed: ApiReaction[];\n};\n\nexport type ApiChatReactions = ApiChatReactionsAll | ApiChatReactionsSome;\n\nexport type ApiReactionEmoji = {\n  type: 'emoji';\n  emoticon: string;\n};\n\nexport type ApiReactionCustomEmoji = {\n  type: 'custom';\n  documentId: string;\n};\n\nexport type ApiReactionPaid = {\n  type: 'paid';\n};\n\nexport type ApiReaction = ApiReactionEmoji | ApiReactionCustomEmoji;\nexport type ApiReactionWithPaid = ApiReaction | ApiReactionPaid;\n\nexport type ApiReactionKey = `${string}-${string}` | 'paid' | 'unsupported';\n\nexport type ApiSavedReactionTag = {\n  reaction: ApiReaction;\n  title?: string;\n  count: number;\n};\n\nexport type ApiPaidReactionPrivacyType = ApiPaidReactionPrivacyDefault |\n  ApiPaidReactionPrivacyAnonymous | PaidReactionPrivacyPeer;\n\nexport type ApiPaidReactionPrivacyDefault = {\n  type: 'default';\n};\n\nexport type ApiPaidReactionPrivacyAnonymous = {\n  type: 'anonymous';\n};\n\nexport type PaidReactionPrivacyPeer = {\n  type: 'peer';\n  peerId: string;\n};\n\ninterface ApiBaseThreadInfo {\n  chatId: string;\n  messagesCount: number;\n  lastMessageId?: number;\n  lastReadInboxMessageId?: number;\n  recentReplierIds?: string[];\n}\n\nexport interface ApiCommentsInfo extends ApiBaseThreadInfo {\n  isCommentsInfo: true;\n  threadId?: never;\n  originChannelId: string;\n  originMessageId: number;\n}\n\nexport interface ApiMessageThreadInfo extends ApiBaseThreadInfo {\n  isCommentsInfo: false;\n  threadId: ThreadId;\n  // For linked messages in discussion\n  fromChannelId?: string;\n  fromMessageId?: number;\n}\n\nexport type ApiThreadInfo = ApiCommentsInfo | ApiMessageThreadInfo;\n\nexport type ApiMessageReportResult = {\n  type: 'reported';\n} | {\n  type: 'comment';\n  isOptional?: boolean;\n  option: string;\n} | {\n  type: 'selectOption';\n  title: string;\n  options: {\n    text: string;\n    option: string;\n  }[];\n};\n\nexport type ApiMessageOutgoingStatus = 'read' | 'succeeded' | 'pending' | 'failed';\n\nexport type ApiSponsoredMessage = {\n  chatId: string;\n  randomId: string;\n  isRecommended?: true;\n  expiresAt: number;\n  sponsorInfo?: string;\n  additionalInfo?: string;\n  buttonText?: string;\n  canReport?: true;\n  title: string;\n  url: string;\n  photo?: ApiPhoto;\n  content: MediaContent;\n  peerColor?: ApiPeerColor;\n};\n\n// KeyboardButtons\n\ninterface ApiKeyboardButtonSimple {\n  type: 'unsupported' | 'buy' | 'command' | 'requestPhone' | 'game';\n  text: string;\n}\n\ninterface ApiKeyboardButtonReceipt {\n  type: 'receipt';\n  receiptMessageId: number;\n}\n\ninterface ApiKeyboardButtonUrl {\n  type: 'url';\n  text: string;\n  url: string;\n}\n\ninterface ApiKeyboardButtonSimpleWebView {\n  type: 'simpleWebView';\n  text: string;\n  url: string;\n}\n\ninterface ApiKeyboardButtonWebView {\n  type: 'webView';\n  text: string;\n  url: string;\n}\n\ninterface ApiKeyboardButtonCallback {\n  type: 'callback';\n  text: string;\n  data: string;\n}\n\ninterface ApiKeyboardButtonRequestPoll {\n  type: 'requestPoll';\n  text: string;\n  isQuiz?: boolean;\n}\n\ninterface ApiKeyboardButtonSwitchBotInline {\n  type: 'switchBotInline';\n  text: string;\n  query: string;\n  isSamePeer?: boolean;\n}\n\ninterface ApiKeyboardButtonUserProfile {\n  type: 'userProfile';\n  text: string;\n  userId: string;\n}\n\ninterface ApiKeyboardButtonUrlAuth {\n  type: 'urlAuth';\n  text: string;\n  url: string;\n  buttonId: number;\n}\n\ninterface ApiKeyboardButtonCopy {\n  type: 'copy';\n  text: string;\n  copyText: string;\n}\n\nexport interface ApiKeyboardButtonSuggestedMessage {\n  type: 'suggestedMessage';\n  text: string;\n  buttonType: 'approve' | 'decline' | 'suggestChanges';\n  disabled?: boolean;\n}\n\nexport type ApiKeyboardButton = (\n  ApiKeyboardButtonSimple\n  | ApiKeyboardButtonReceipt\n  | ApiKeyboardButtonUrl\n  | ApiKeyboardButtonCallback\n  | ApiKeyboardButtonRequestPoll\n  | ApiKeyboardButtonSwitchBotInline\n  | ApiKeyboardButtonUserProfile\n  | ApiKeyboardButtonWebView\n  | ApiKeyboardButtonSimpleWebView\n  | ApiKeyboardButtonUrlAuth\n  | ApiKeyboardButtonCopy\n  | ApiKeyboardButtonSuggestedMessage\n);\n\nexport type ApiKeyboardButtons = ApiKeyboardButton[][];\nexport type ApiReplyKeyboard = {\n  keyboardPlaceholder?: string;\n  isKeyboardSingleUse?: boolean;\n  isKeyboardSelective?: boolean;\n} & Partial<Record<'inlineButtons' | 'keyboardButtons', ApiKeyboardButtons>>;\n\nexport type ApiTranscription = {\n  text: string;\n  isPending?: boolean;\n  transcriptionId: string;\n};\n\nexport type ApiMessageSearchType = 'text' | 'media' | 'documents' | 'links' | 'audio' | 'voice' | 'profilePhoto';\nexport type ApiGlobalMessageSearchType = 'text' | 'channels' | 'media' | 'documents' | 'links' | 'audio' | 'voice';\nexport type ApiMessageSearchContext = 'all' | 'users' | 'groups' | 'channels';\n\nexport type ApiReportReason = 'spam' | 'violence' | 'pornography' | 'childAbuse'\n  | 'copyright' | 'geoIrrelevant' | 'fake' | 'illegalDrugs' | 'personalDetails' | 'other';\n\nexport type ApiSendMessageAction = {\n  type: 'cancel' | 'typing' | 'recordAudio' | 'chooseSticker' | 'playingGame';\n};\n\nexport type ApiThemeParameters = {\n  bg_color: string;\n  text_color: string;\n  hint_color: string;\n  link_color: string;\n  button_color: string;\n  button_text_color: string;\n  secondary_bg_color: string;\n  header_bg_color: string;\n  accent_text_color: string;\n  section_bg_color: string;\n  section_header_text_color: string;\n  subtitle_text_color: string;\n  destructive_text_color: string;\n  section_separator_color: string;\n};\n\nexport type ApiBotApp = {\n  id: string;\n  accessHash: string;\n  title: string;\n  shortName: string;\n  description: string;\n  photo?: ApiPhoto;\n  document?: ApiDocument;\n};\n\nexport type ApiMessagesBotApp = ApiBotApp & {\n  isInactive?: boolean;\n  shouldRequestWriteAccess?: boolean;\n};\n\nexport type ApiQuickReply = {\n  id: number;\n  shortcut: string;\n  topMessageId: number;\n};\n\nexport type ApiFactCheck = {\n  shouldFetch?: true;\n  hash: string;\n  countryCode?: string;\n  text?: ApiFormattedText;\n};\n\nexport type ApiSponsoredMessageReportResult = {\n  type: 'reported' | 'hidden' | 'premiumRequired';\n} | {\n  type: 'selectOption';\n  title: string;\n  options: {\n    text: string;\n    option: string;\n  }[];\n};\n\nexport type ApiPreparedInlineMessage = {\n  queryId: string;\n  result: ApiBotInlineResult | ApiBotInlineMediaResult;\n  peerTypes: ApiInlineQueryPeerType[];\n  cacheTime: number;\n};\n\nexport const MAIN_THREAD_ID = -1;\n\n// `Symbol` can not be transferred from worker\nexport const MESSAGE_DELETED = 'MESSAGE_DELETED';\n","import type { TeactNode } from '../../lib/teact/teact';\n\nimport type { CallbackAction } from '../../global/types';\nimport type { IconName } from '../../types/icons';\nimport type { RegularLangFnParameters } from '../../util/localization';\nimport type { ApiDocument, ApiPhoto, ApiReaction } from './messages';\nimport type { ApiPremiumSection } from './payments';\nimport type { ApiStarsSubscriptionPricing } from './stars';\nimport type { ApiUser } from './users';\n\nexport interface ApiInitialArgs {\n  userAgent: string;\n  platform?: string;\n  sessionData?: ApiSessionData;\n  isTest?: boolean;\n  isWebmSupported?: boolean;\n  maxBufferSize?: number;\n  webAuthToken?: string;\n  dcId?: number;\n  mockScenario?: string;\n  shouldAllowHttpTransport?: boolean;\n  shouldForceHttpTransport?: boolean;\n  shouldDebugExportedSenders?: boolean;\n  langCode: string;\n  isTestServerRequested?: boolean;\n  accountIds?: string[];\n}\n\nexport interface ApiOnProgress {\n  (\n    progress: number, // Float between 0 and 1.\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n}\n\nexport interface ApiAttachment {\n  blob: Blob;\n  blobUrl: string;\n  compressedBlobUrl?: string;\n  filename: string;\n  mimeType: string;\n  size: number;\n  quick?: {\n    width: number;\n    height: number;\n    duration?: number;\n  };\n  voice?: {\n    duration: number;\n    waveform: number[];\n  };\n  audio?: {\n    duration: number;\n    title?: string;\n    performer?: string;\n  };\n  previewBlobUrl?: string;\n\n  shouldSendAsFile?: true;\n  shouldSendAsSpoiler?: true;\n\n  uniqueId?: string;\n  ttlSeconds?: number;\n  shouldSendInHighQuality?: boolean;\n}\n\nexport interface ApiWallpaper {\n  slug: string;\n  document: ApiDocument;\n}\n\nexport interface ApiSession {\n  hash: string;\n  isCurrent: boolean;\n  isOfficialApp: boolean;\n  isPasswordPending: boolean;\n  deviceModel: string;\n  platform: string;\n  systemVersion: string;\n  appName: string;\n  appVersion: string;\n  dateCreated: number;\n  dateActive: number;\n  ip: string;\n  country: string;\n  region: string;\n  areCallsEnabled: boolean;\n  areSecretChatsEnabled: boolean;\n  isUnconfirmed?: true;\n}\n\nexport interface ApiWebSession {\n  hash: string;\n  botId: string;\n  domain: string;\n  browser: string;\n  platform: string;\n  dateCreated: number;\n  dateActive: number;\n  ip: string;\n  region: string;\n}\n\nexport interface ApiSessionData {\n  mainDcId: number;\n  keys: Record<number, string>;\n  isTest?: true;\n}\n\nexport type ApiNotification = {\n  localId: string;\n  containerSelector?: string;\n  type?: 'paidMessage' | undefined;\n  title?: string | RegularLangFnParameters;\n  message: TeactNode | RegularLangFnParameters;\n  cacheBreaker?: string;\n  actionText?: string | RegularLangFnParameters;\n  action?: CallbackAction | CallbackAction[];\n  className?: string;\n  duration?: number;\n  disableClickDismiss?: boolean;\n  shouldShowTimer?: boolean;\n  icon?: IconName;\n  customEmojiIconId?: string;\n  shouldUseCustomIcon?: boolean;\n  dismissAction?: CallbackAction;\n};\n\nexport type ApiError = {\n  message: string;\n  hasErrorKey?: boolean;\n  isSlowMode?: boolean;\n  textParams?: Record<string, string>;\n};\n\nexport type ApiFieldError = {\n  field: string;\n  message: string;\n};\n\nexport type ApiExportedInvite = {\n  isRevoked?: boolean;\n  isPermanent?: boolean;\n  link: string;\n  date: number;\n  startDate?: number;\n  expireDate?: number;\n  usageLimit?: number;\n  usage?: number;\n  isRequestNeeded?: boolean;\n  requested?: number;\n  title?: string;\n  adminId: string;\n};\n\nexport type ApiChatInviteInfo = {\n  title: string;\n  about?: string;\n  photo?: ApiPhoto;\n  isScam?: boolean;\n  isFake?: boolean;\n  isChannel?: boolean;\n  isVerified?: boolean;\n  isSuperGroup?: boolean;\n  isPublic?: boolean;\n  participantsCount?: number;\n  participantIds?: string[];\n  color: number;\n  isBroadcast?: boolean;\n  isRequestNeeded?: boolean;\n  subscriptionFormId?: string;\n  canRefulfillSubscription?: boolean;\n  subscriptionPricing?: ApiStarsSubscriptionPricing;\n  botVerification?: ApiBotVerification;\n};\n\nexport type ApiChatInviteImporter = {\n  userId: string;\n  date: number;\n  isRequested?: boolean;\n  about?: string;\n  isFromChatList?: boolean;\n};\n\nexport interface ApiCountry {\n  isHidden?: boolean;\n  iso2: string;\n  defaultName: string;\n  name?: string;\n}\n\nexport interface ApiCountryCode extends ApiCountry {\n  countryCode: string;\n  prefixes?: string[];\n  patterns?: string[];\n}\n\nexport interface ApiAppConfig {\n  hash: number;\n  emojiSounds: Record<string, string>;\n  seenByMaxChatMembers: number;\n  seenByExpiresAt: number;\n  readDateExpiresAt: number;\n  autologinDomains: string[];\n  urlAuthDomains: string[];\n  premiumInvoiceSlug: string;\n  premiumBotUsername: string;\n  isPremiumPurchaseBlocked: boolean;\n  isGiveawayGiftsPurchaseAvailable: boolean;\n  giveawayAddPeersMax: number;\n  giveawayBoostsPerPremium: number;\n  giveawayCountriesMax: number;\n  boostsPerSentGift: number;\n  premiumPromoOrder: ApiPremiumSection[];\n  defaultEmojiStatusesStickerSetId: string;\n  maxUniqueReactions: number;\n  topicsPinnedLimit: number;\n  maxUserReactionsDefault: number;\n  maxUserReactionsPremium: number;\n  hiddenMembersMinCount: number;\n  limits: Record<ApiLimitType, readonly [number, number]>;\n  canDisplayAutoarchiveSetting: boolean;\n  areStoriesHidden?: boolean;\n  storyExpirePeriod: number;\n  storyViewersExpirePeriod: number;\n  storyChangelogUserId: string;\n  maxPinnedStoriesCount?: number;\n  groupTranscribeLevelMin?: number;\n  canLimitNewMessagesWithoutPremium?: boolean;\n  starsPaidMessagesAvailable?: boolean;\n  starsPaidMessageCommissionPermille?: number;\n  starsPaidMessageAmountMax?: number;\n  starsUsdWithdrawRateX1000?: number;\n  bandwidthPremiumNotifyPeriod?: number;\n  bandwidthPremiumUploadSpeedup?: number;\n  bandwidthPremiumDownloadSpeedup?: number;\n  channelRestrictAdsLevelMin?: number;\n  channelAutoTranslationLevelMin?: number;\n  paidReactionMaxAmount?: number;\n  isChannelRevenueWithdrawalEnabled?: boolean;\n  isStarsGiftEnabled?: boolean;\n  starGiftMaxMessageLength?: number;\n  starGiftMaxConvertPeriod?: number;\n  starRefStartPrefixes?: string[];\n  tonExplorerUrl?: string;\n  savedGiftPinLimit?: number;\n  freezeSinceDate?: number;\n  freezeUntilDate?: number;\n  freezeAppealUrl?: string;\n  starsStargiftResaleAmountMin?: number;\n  starsStargiftResaleAmountMax?: number;\n  starsStargiftResaleCommissionPermille?: number;\n  starsSuggestedPostAmountMax?: number;\n  starsSuggestedPostAmountMin?: number;\n  starsSuggestedPostCommissionPermille?: number;\n  starsSuggestedPostAgeMin?: number;\n  starsSuggestedPostFutureMax?: number;\n  starsSuggestedPostFutureMin?: number;\n  tonSuggestedPostCommissionPermille?: number;\n  tonSuggestedPostAmountMax?: number;\n  tonSuggestedPostAmountMin?: number;\n  tonUsdRate?: number;\n  tonTopupUrl?: string;\n  pollMaxAnswers?: number;\n  todoItemsMax?: number;\n  todoTitleLengthMax?: number;\n  todoItemLengthMax?: number;\n  ignoreRestrictionReasons?: string[];\n  needAgeVideoVerification?: boolean;\n  verifyAgeBotUsername?: string;\n  verifyAgeCountry?: string;\n  verifyAgeMin?: number;\n}\n\nexport interface ApiConfig {\n  expiresAt: number;\n  defaultReaction?: ApiReaction;\n  gifSearchUsername?: string;\n  maxGroupSize: number;\n  autologinToken?: string;\n  isTestServer?: boolean;\n  maxMessageLength: number;\n  editTimeLimit: number;\n  maxForwardedCount: number;\n}\n\nexport type ApiPeerColorSet = string[];\n\nexport interface ApiPeerColors {\n  general: Record<number, {\n    isHidden?: true;\n    colors?: ApiPeerColorSet;\n    darkColors?: ApiPeerColorSet;\n  }>;\n  generalHash?: number;\n}\n\nexport interface ApiTimezone {\n  id: string;\n  name: string;\n  utcOffset: number;\n}\n\nexport interface GramJsEmojiInteraction {\n  v: number;\n  a: {\n    i: number;\n    t: number;\n  }[];\n}\n\nexport interface ApiEmojiInteraction {\n  timestamps: number[];\n}\n\ntype ApiUrlAuthResultRequest = {\n  type: 'request';\n  bot: ApiUser;\n  domain: string;\n  shouldRequestWriteAccess?: boolean;\n};\n\ntype ApiUrlAuthResultAccepted = {\n  type: 'accepted';\n  url: string;\n};\n\ntype ApiUrlAuthResultDefault = {\n  type: 'default';\n};\n\nexport type ApiUrlAuthResult = ApiUrlAuthResultRequest | ApiUrlAuthResultAccepted | ApiUrlAuthResultDefault;\n\nexport interface ApiCollectibleInfo {\n  amount: number;\n  currency: string;\n  cryptoAmount: number;\n  cryptoCurrency: string;\n  purchaseDate: number;\n  url: string;\n}\n\nexport interface ApiPeerPhotos {\n  fallbackPhoto?: ApiPhoto;\n  personalPhoto?: ApiPhoto;\n  photos: ApiPhoto[];\n  count: number;\n  nextOffset?: number;\n  isLoading?: boolean;\n}\n\nexport interface ApiBotVerification {\n  botId: string;\n  iconId: string;\n  description: string;\n}\n\nexport type ApiLimitType =\n  | 'uploadMaxFileparts'\n  | 'stickersFaved'\n  | 'savedGifs'\n  | 'dialogFiltersChats'\n  | 'dialogFilters'\n  | 'dialogFolderPinned'\n  | 'captionLength'\n  | 'channels'\n  | 'channelsPublic'\n  | 'aboutLength'\n  | 'chatlistInvites'\n  | 'chatlistJoined'\n  | 'recommendedChannels'\n  | 'savedDialogsPinned'\n  | 'moreAccounts';\n\nexport type ApiLimitTypeWithModal = Exclude<ApiLimitType, (\n  'captionLength' | 'aboutLength' | 'stickersFaved' | 'savedGifs' | 'recommendedChannels' | 'moreAccounts'\n)>;\n\nexport type ApiLimitTypeForPromo = Exclude<ApiLimitType,\n'uploadMaxFileparts' | 'chatlistInvites' | 'chatlistJoined' | 'savedDialogsPinned'\n>;\n\nexport type ApiPeerNotifySettings = {\n  mutedUntil?: number;\n  hasSound?: boolean;\n  isSilentPosting?: boolean;\n  shouldShowPreviews?: boolean;\n};\n\nexport type ApiNotifyPeerType = 'users' | 'groups' | 'channels';\n\nexport interface ApiRestrictionReason {\n  reason: string;\n  text: string;\n  platform: string;\n}\n","import type { PREMIUM_FEATURE_SECTIONS } from '../../config';\nimport type { ApiWebDocument } from './bots';\nimport type { ApiChat, ApiPeer } from './chats';\nimport type {\n  ApiDocument,\n  ApiFormattedText,\n  ApiInvoice,\n  ApiMessageEntity,\n  ApiPaymentCredentials,\n} from './messages';\nimport type {\n  ApiInputSavedStarGift, ApiRequestInputSavedStarGift, ApiStarsGiveawayWinnerOption,\n} from './stars';\nimport type { StatisticsOverviewPercentage } from './statistics';\nimport type { ApiUser } from './users';\n\nexport interface ApiShippingAddress {\n  streetLine1: string;\n  streetLine2: string;\n  city: string;\n  state: string;\n  countryIso2: string;\n  postCode: string;\n}\n\nexport interface ApiPaymentSavedInfo {\n  name?: string;\n  phone?: string;\n  email?: string;\n  shippingAddress?: ApiShippingAddress;\n}\n\nexport interface ApiPaymentFormRegular {\n  type: 'regular';\n  url: string;\n  botId: string;\n  canSaveCredentials?: boolean;\n  isPasswordMissing?: boolean;\n  formId: string;\n  providerId: string;\n  nativeProvider?: string;\n  nativeParams: ApiPaymentFormNativeParams;\n  savedInfo?: ApiPaymentSavedInfo;\n  savedCredentials?: ApiPaymentCredentials[];\n  invoice: ApiInvoice;\n  title: string;\n  description: string;\n  photo?: ApiWebDocument;\n}\n\nexport interface ApiPaymentFormStars {\n  type: 'stars';\n  formId: string;\n  botId: string;\n  title: string;\n  description: string;\n  photo?: ApiWebDocument;\n  invoice: ApiInvoice;\n}\n\nexport interface ApiPaymentFormStarGift {\n  type: 'stargift';\n  formId: string;\n  invoice: ApiInvoice;\n}\n\nexport type ApiPaymentForm = ApiPaymentFormRegular | ApiPaymentFormStars | ApiPaymentFormStarGift;\n\nexport interface ApiPaymentFormNativeParams {\n  needCardholderName?: boolean;\n  needCountry?: boolean;\n  needZip?: boolean;\n  publishableKey?: string;\n  publicToken?: string;\n  tokenizeUrl?: string;\n}\n\nexport interface ApiLabeledPrice {\n  label: string;\n  amount: number;\n}\n\nexport interface ApiReceiptStars {\n  type: 'stars';\n  date: number;\n  botId: string;\n  title: string;\n  description: string;\n  invoice: ApiInvoice;\n  photo?: ApiWebDocument;\n  currency: string;\n  totalAmount: number;\n  transactionId: string;\n}\n\nexport interface ApiReceiptRegular {\n  type: 'regular';\n  botId: string;\n  providerId: string;\n  description: string;\n  title: string;\n  invoice: ApiInvoice;\n  photo?: ApiWebDocument;\n  info?: {\n    shippingAddress?: ApiShippingAddress;\n    phone?: string;\n    name?: string;\n  };\n  tipAmount: number;\n  totalAmount: number;\n  currency: string;\n  date: number;\n  credentialsTitle: string;\n  shippingPrices?: ApiLabeledPrice[];\n  shippingMethod?: string;\n}\n\nexport type ApiReceipt = ApiReceiptRegular | ApiReceiptStars;\n\nexport type ApiPremiumSection = typeof PREMIUM_FEATURE_SECTIONS[number];\n\nexport interface ApiPremiumPromo {\n  videoSections: ApiPremiumSection[];\n  videos: ApiDocument[];\n  statusText: string;\n  statusEntities: ApiMessageEntity[];\n  options: ApiPremiumSubscriptionOption[];\n}\n\nexport interface ApiPremiumSubscriptionOption {\n  isCurrent?: boolean;\n  canPurchaseUpgrade?: boolean;\n  months: number;\n  currency: string;\n  amount: number;\n  botUrl: string;\n}\n\nexport type ApiInputStorePaymentGiveaway = {\n  type: 'giveaway';\n  isOnlyForNewSubscribers?: boolean;\n  areWinnersVisible?: boolean;\n  chat: ApiChat;\n  additionalChannels?: ApiChat[];\n  countries?: string[];\n  prizeDescription?: string;\n  untilDate: number;\n  currency: string;\n  amount: number;\n};\n\nexport type ApiInputStorePaymentGiftcode = {\n  type: 'giftcode';\n  users: ApiUser[];\n  boostChannel?: ApiChat;\n  currency: string;\n  amount: number;\n  message?: ApiFormattedText;\n};\n\nexport type ApiInputStorePaymentStarsTopup = {\n  type: 'stars';\n  stars: number;\n  currency: string;\n  amount: number;\n};\n\nexport type ApiInputStorePaymentStarsGift = {\n  type: 'starsgift';\n  user: ApiUser;\n  stars: number;\n  currency: string;\n  amount: number;\n};\n\nexport type ApiInputStorePaymentStarsGiveaway = {\n  type: 'starsgiveaway';\n  isOnlyForNewSubscribers?: boolean;\n  areWinnersVisible?: boolean;\n  chat: ApiChat;\n  additionalChannels?: ApiChat[];\n  stars?: number;\n  countries?: string[];\n  prizeDescription?: string;\n  untilDate: number;\n  currency: string;\n  amount: number;\n  users: number;\n};\n\nexport type ApiInputStorePaymentPurpose = ApiInputStorePaymentGiveaway | ApiInputStorePaymentGiftcode |\n  ApiInputStorePaymentStarsTopup | ApiInputStorePaymentStarsGift | ApiInputStorePaymentStarsGiveaway;\n\nexport interface ApiPremiumGiftCodeOption {\n  users: number;\n  months: number;\n  currency: string;\n  amount: number;\n}\n\nexport interface ApiPrepaidGiveaway {\n  type: 'giveaway';\n  id: string;\n  months: number;\n  quantity: number;\n  date: number;\n}\n\nexport type ApiPrepaidStarsGiveaway = {\n  type: 'starsGiveaway';\n  id: string;\n  stars: number;\n  quantity: number;\n  boosts: number;\n  date: number;\n};\n\nexport type ApiTypePrepaidGiveaway = ApiPrepaidGiveaway | ApiPrepaidStarsGiveaway;\n\nexport type ApiBoostsStatus = {\n  level: number;\n  currentLevelBoosts: number;\n  boosts: number;\n  nextLevelBoosts?: number;\n  hasMyBoost?: boolean;\n  boostUrl: string;\n  giftBoosts?: number;\n  premiumSubscribers?: StatisticsOverviewPercentage;\n  prepaidGiveaways?: ApiTypePrepaidGiveaway[];\n};\n\nexport type ApiMyBoost = {\n  slot: number;\n  chatId?: string;\n  date: number;\n  expires: number;\n  cooldownUntil?: number;\n};\n\nexport type ApiBoost = {\n  userId?: string;\n  multiplier?: number;\n  expires: number;\n  isFromGiveaway?: boolean;\n  isGift?: boolean;\n  stars?: number;\n};\n\nexport type ApiGiveawayInfoActive = {\n  type: 'active';\n  isParticipating?: true;\n  isPreparingResults?: true;\n  startDate: number;\n  joinedTooEarlyDate?: number;\n  adminDisallowedChatId?: string;\n  disallowedCountry?: string;\n};\n\nexport type ApiGiveawayInfoResults = {\n  type: 'results';\n  isWinner?: true;\n  isRefunded?: true;\n  startDate: number;\n  starsPrize?: number;\n  finishDate: number;\n  giftCodeSlug?: string;\n  winnersCount: number;\n  activatedCount?: number;\n};\n\nexport type ApiGiveawayInfo = ApiGiveawayInfoActive | ApiGiveawayInfoResults;\n\nexport type ApiCheckedGiftCode = {\n  isFromGiveaway?: true;\n  fromId?: string;\n  giveawayMessageId?: number;\n  toId?: string;\n  date: number;\n  months: number;\n  usedAt?: number;\n};\n\nexport interface ApiStarGiveawayOption {\n  isExtended?: true;\n  isDefault?: true;\n  stars: number;\n  yearlyBoosts: number;\n  currency: string;\n  amount: number;\n  winners: ApiStarsGiveawayWinnerOption[];\n}\n\nexport type ApiPaymentStatus = 'paid' | 'failed' | 'pending' | 'cancelled';\n\n/* Used for Invoice UI */\nexport type ApiInputInvoiceMessage = {\n  type: 'message';\n  chatId: string;\n  messageId: number;\n  isExtendedMedia?: boolean;\n};\n\nexport type ApiInputInvoiceSlug = {\n  type: 'slug';\n  slug: string;\n};\n\nexport type ApiInputInvoiceGiveaway = {\n  type: 'giveaway';\n  chatId: string;\n  additionalChannelIds?: string[];\n  isOnlyForNewSubscribers?: boolean;\n  areWinnersVisible?: boolean;\n  prizeDescription?: string;\n  countries?: string[];\n  untilDate: number;\n  currency: string;\n  amount: number;\n  option: ApiPremiumGiftCodeOption;\n};\n\nexport type ApiInputInvoicePremiumGiftStars = {\n  type: 'premiumGiftStars';\n  userId: string;\n  months: number;\n  message?: ApiFormattedText;\n};\n\nexport type ApiInputInvoiceGiftCode = {\n  type: 'giftcode';\n  userIds: string[];\n  boostChannelId?: string;\n  currency: string;\n  amount: number;\n  option: ApiPremiumGiftCodeOption;\n  message?: ApiFormattedText;\n};\n\nexport type ApiInputInvoiceStars = {\n  type: 'stars';\n  stars: number;\n  currency: string;\n  amount: number;\n};\n\nexport type ApiInputInvoiceStarsGift = {\n  type: 'starsgift';\n  userId: string;\n  stars: number;\n  currency: string;\n  amount: number;\n};\n\nexport type ApiInputInvoiceStarGift = {\n  type: 'stargift';\n  shouldHideName?: boolean;\n  peerId: string;\n  giftId: string;\n  message?: ApiFormattedText;\n  shouldUpgrade?: true;\n};\n\nexport type ApiInputInvoiceStarGiftResale = {\n  type: 'stargiftResale';\n  slug: string;\n  peerId: string;\n};\n\nexport type ApiInputInvoiceStarsGiveaway = {\n  type: 'starsgiveaway';\n  chatId: string;\n  additionalChannelIds?: string[];\n  isOnlyForNewSubscribers?: boolean;\n  areWinnersVisible?: boolean;\n  prizeDescription?: string;\n  countries?: string[];\n  untilDate: number;\n  currency: string;\n  amount: number;\n  stars: number;\n  users: number;\n};\n\nexport type ApiInputInvoiceChatInviteSubscription = {\n  type: 'chatInviteSubscription';\n  hash: string;\n};\n\nexport type ApiInputInvoiceStarGiftUpgrade = {\n  type: 'stargiftUpgrade';\n  inputSavedGift: ApiInputSavedStarGift;\n  shouldKeepOriginalDetails?: true;\n};\n\nexport type ApiInputInvoiceStarGiftTransfer = {\n  type: 'stargiftTransfer';\n  inputSavedGift: ApiInputSavedStarGift;\n  recipientId: string;\n};\n\nexport type ApiInputInvoice = ApiInputInvoiceMessage | ApiInputInvoiceSlug | ApiInputInvoiceGiveaway\n  | ApiInputInvoiceGiftCode | ApiInputInvoicePremiumGiftStars | ApiInputInvoiceStars | ApiInputInvoiceStarsGift\n  | ApiInputInvoiceStarsGiveaway | ApiInputInvoiceStarGift | ApiInputInvoiceChatInviteSubscription\n  | ApiInputInvoiceStarGiftUpgrade | ApiInputInvoiceStarGiftTransfer | ApiInputInvoiceStarGiftResale;\n\n/* Used for Invoice request */\nexport type ApiRequestInputInvoiceMessage = {\n  type: 'message';\n  chat: ApiChat;\n  messageId: number;\n};\n\nexport type ApiRequestInputInvoiceSlug = {\n  type: 'slug';\n  slug: string;\n};\n\nexport type ApiRequestInputInvoiceGiveaway = {\n  type: 'giveaway';\n  purpose: ApiInputStorePaymentPurpose;\n  option: ApiPremiumGiftCodeOption;\n};\n\nexport type ApiRequestInputInvoiceStars = {\n  type: 'stars';\n  purpose: ApiInputStorePaymentPurpose;\n};\n\nexport type ApiRequestInputInvoicePremiumGiftStars = {\n  type: 'premiumGiftStars';\n  user: ApiUser;\n  months: number;\n  message?: ApiFormattedText;\n};\n\nexport type ApiRequestInputInvoiceStarsGiveaway = {\n  type: 'starsgiveaway';\n  purpose: ApiInputStorePaymentPurpose;\n};\n\nexport type ApiRequestInputInvoiceStarGift = {\n  type: 'stargift';\n  shouldHideName?: boolean;\n  peer: ApiPeer;\n  giftId: string;\n  message?: ApiFormattedText;\n  shouldUpgrade?: true;\n};\n\nexport type ApiRequestInputInvoiceStarGiftResale = {\n  type: 'stargiftResale';\n  slug: string;\n  peer: ApiPeer;\n};\n\nexport type ApiRequestInputInvoiceChatInviteSubscription = {\n  type: 'chatInviteSubscription';\n  hash: string;\n};\n\nexport type ApiRequestInputInvoiceStarGiftUpgrade = {\n  type: 'stargiftUpgrade';\n  inputSavedGift: ApiRequestInputSavedStarGift;\n  shouldKeepOriginalDetails?: true;\n};\n\nexport type ApiRequestInputInvoiceStarGiftTransfer = {\n  type: 'stargiftTransfer';\n  inputSavedGift: ApiRequestInputSavedStarGift;\n  recipient: ApiPeer;\n};\n\nexport type ApiRequestInputInvoice = ApiRequestInputInvoiceMessage | ApiRequestInputInvoiceSlug\n  | ApiRequestInputInvoiceGiveaway | ApiRequestInputInvoiceStars | ApiRequestInputInvoiceStarsGiveaway\n  | ApiRequestInputInvoiceChatInviteSubscription | ApiRequestInputInvoiceStarGift\n  | ApiRequestInputInvoiceStarGiftUpgrade | ApiRequestInputInvoiceStarGiftTransfer\n  | ApiRequestInputInvoicePremiumGiftStars | ApiRequestInputInvoiceStarGiftResale;\n","import type { ApiChat } from './chats';\nimport type { ApiUser } from './users';\n\nexport type ApiPrivacyKey = 'phoneNumber' | 'addByPhone' | 'lastSeen' | 'profilePhoto' | 'voiceMessages' |\n  'forwards' | 'chatInvite' | 'phoneCall' | 'phoneP2P' | 'bio' | 'birthday' | 'gifts' | 'noPaidMessages';\nexport type PrivacyVisibility = 'everybody' | 'contacts' | 'closeFriends' | 'nonContacts' | 'nobody';\nexport type BotsPrivacyType = 'allow' | 'disallow' | 'none';\n\nexport interface ApiPrivacySettings {\n  visibility: PrivacyVisibility;\n  isUnspecified?: boolean;\n  allowUserIds: string[];\n  allowChatIds: string[];\n  blockUserIds: string[];\n  blockChatIds: string[];\n  shouldAllowPremium?: true;\n  botsPrivacy: BotsPrivacyType;\n}\n\nexport interface ApiInputPrivacyRules {\n  visibility: PrivacyVisibility;\n  isUnspecified?: boolean;\n  allowedUsers?: ApiUser[];\n  allowedChats?: ApiChat[];\n  blockedUsers?: ApiUser[];\n  blockedChats?: ApiChat[];\n  shouldAllowPremium?: true;\n  botsPrivacy: BotsPrivacyType;\n}\n\nexport interface ApiLanguage {\n  isOfficial?: true;\n  isRtl?: true;\n  isBeta?: true;\n  name: string;\n  nativeName: string;\n  langCode: string;\n  baseLangCode?: string;\n  pluralCode: string;\n  stringsCount: number;\n  translatedCount: number;\n  translationsUrl: string;\n}\n\nexport type ApiOldLangString = string | {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n};\n\nexport type ApiOldLangPack = Record<string, ApiOldLangString | undefined>;\n\nexport type LangPack = {\n  langCode: string;\n  version: number;\n  strings: Record<string, LangPackStringValue>;\n};\n\nexport type CachedLangData = {\n  langPack: LangPack;\n  language: ApiLanguage;\n};\n\nexport type LangPackStringValueRegular = string;\nexport type LangPackStringValueDeleted = {\n  isDeleted: true;\n};\nexport type LangPackStringValuePlural = {\n  zero?: string;\n  one?: string;\n  two?: string;\n  few?: string;\n  many?: string;\n  other: string;\n};\n\nexport type LangPackStringValue = LangPackStringValueRegular | LangPackStringValueDeleted | LangPackStringValuePlural;\n","import type { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../config';\nimport type { ApiWebDocument } from './bots';\nimport type { ApiChat } from './chats';\nimport type { ApiFormattedText, ApiSticker, BoughtPaidMedia } from './messages';\nimport type { ApiUser } from './users';\n\nexport interface ApiStarGiftRegular {\n  type: 'starGift';\n  isLimited?: true;\n  id: string;\n  sticker: ApiSticker;\n  stars: number;\n  availabilityRemains?: number;\n  availabilityTotal?: number;\n  availabilityResale?: number;\n  starsToConvert: number;\n  isSoldOut?: true;\n  firstSaleDate?: number;\n  lastSaleDate?: number;\n  isBirthday?: true;\n  upgradeStars?: number;\n  resellMinStars?: number;\n  releasedByPeerId?: string;\n  title?: string;\n}\n\nexport interface ApiStarGiftUnique {\n  type: 'starGiftUnique';\n  id: string;\n  title: string;\n  number: number;\n  ownerId?: string;\n  ownerName?: string;\n  ownerAddress?: string;\n  issuedCount: number;\n  totalCount: number;\n  attributes: ApiStarGiftAttribute[];\n  slug: string;\n  giftAddress?: string;\n  resellPriceInStars?: number;\n  releasedByPeerId?: string;\n}\n\nexport type ApiStarGift = ApiStarGiftRegular | ApiStarGiftUnique;\n\nexport interface ApiStarGiftAttributeModel {\n  type: 'model';\n  name: string;\n  rarityPercent: number;\n  sticker: ApiSticker;\n}\n\nexport interface ApiStarGiftAttributePattern {\n  type: 'pattern';\n  name: string;\n  rarityPercent: number;\n  sticker: ApiSticker;\n}\n\nexport interface ApiStarGiftAttributeBackdrop {\n  type: 'backdrop';\n  backdropId: number;\n  name: string;\n  centerColor: string;\n  edgeColor: string;\n  patternColor: string;\n  textColor: string;\n  rarityPercent: number;\n}\n\nexport interface ApiStarGiftAttributeOriginalDetails {\n  type: 'originalDetails';\n  senderId?: string;\n  recipientId: string;\n  date: number;\n  message?: ApiFormattedText;\n}\n\nexport type ApiStarGiftAttribute = ApiStarGiftAttributeModel | ApiStarGiftAttributePattern\n  | ApiStarGiftAttributeBackdrop | ApiStarGiftAttributeOriginalDetails;\n\nexport interface ApiSavedStarGift {\n  isNameHidden?: boolean;\n  isUnsaved?: boolean;\n  fromId?: string;\n  date: number;\n  gift: ApiStarGift;\n  inputGift?: ApiInputSavedStarGift;\n  savedId?: string;\n  message?: ApiFormattedText;\n  messageId?: number;\n  starsToConvert?: number;\n  canUpgrade?: true;\n  alreadyPaidUpgradeStars?: number;\n  transferStars?: number;\n  canExportAt?: number;\n  canTransferAt?: number;\n  canResellAt?: number;\n  isPinned?: boolean;\n  isConverted?: boolean; // Local field, used for Action Message\n  upgradeMsgId?: number; // Local field, used for Action Message\n  localTag?: number; // Local field, used for key in list\n}\n\nexport type StarGiftAttributeIdModel = {\n  type: 'model';\n  documentId: string;\n};\nexport type ApiStarGiftAttributeIdPattern = {\n  type: 'pattern';\n  documentId: string;\n};\nexport type ApiStarGiftAttributeIdBackdrop = {\n  type: 'backdrop';\n  backdropId: number;\n};\nexport type ApiStarGiftAttributeId = StarGiftAttributeIdModel |\n  ApiStarGiftAttributeIdPattern | ApiStarGiftAttributeIdBackdrop;\n\nexport interface ApiStarGiftAttributeCounter<T extends ApiStarGiftAttributeId = ApiStarGiftAttributeId> {\n  attribute: T;\n  count: number;\n}\n\nexport interface ApiTypeResaleStarGifts {\n  count: number;\n  gifts: ApiStarGift[];\n  nextOffset?: string;\n  attributes?: ApiStarGiftAttribute[];\n  attributesHash?: string;\n  chats: ApiChat[];\n  counters?: ApiStarGiftAttributeCounter[];\n  users: ApiUser[];\n}\n\nexport interface ApiInputSavedStarGiftUser {\n  type: 'user';\n  messageId: number;\n}\n\nexport interface ApiInputSavedStarGiftChat {\n  type: 'chat';\n  chatId: string;\n  savedId: string;\n}\n\nexport type ApiInputSavedStarGift = ApiInputSavedStarGiftUser | ApiInputSavedStarGiftChat;\n\nexport type ApiRequestInputSavedStarGiftUser = ApiInputSavedStarGiftUser;\nexport type ApiRequestInputSavedStarGiftChat = {\n  type: 'chat';\n  chat: ApiChat;\n  savedId: string;\n};\nexport type ApiRequestInputSavedStarGift = ApiRequestInputSavedStarGiftUser | ApiRequestInputSavedStarGiftChat;\n\nexport type ApiTypeCurrencyAmount = ApiStarsAmount | ApiTonAmount;\n\nexport interface ApiStarsAmount {\n  currency: typeof STARS_CURRENCY_CODE;\n  amount: number;\n  nanos: number;\n}\n\nexport interface ApiTonAmount {\n  currency: typeof TON_CURRENCY_CODE;\n  amount: number;\n}\n\nexport interface ApiStarsTransactionPeerUnsupported {\n  type: 'unsupported';\n}\n\nexport interface ApiStarsTransactionPeerAppStore {\n  type: 'appStore';\n}\n\nexport interface ApiStarsTransactionPeerPlayMarket {\n  type: 'playMarket';\n}\n\nexport interface ApiStarsTransactionPeerPremiumBot {\n  type: 'premiumBot';\n}\n\nexport interface ApiStarsTransactionPeerFragment {\n  type: 'fragment';\n}\n\nexport interface ApiStarsTransactionPeerAds {\n  type: 'ads';\n}\n\nexport interface ApiStarsTransactionApi {\n  type: 'api';\n}\n\nexport interface ApiStarsTransactionPeerPeer {\n  type: 'peer';\n  id: string;\n}\n\nexport type ApiStarsTransactionPeer =\n  | ApiStarsTransactionPeerUnsupported\n  | ApiStarsTransactionPeerAppStore\n  | ApiStarsTransactionPeerPlayMarket\n  | ApiStarsTransactionPeerPremiumBot\n  | ApiStarsTransactionPeerFragment\n  | ApiStarsTransactionPeerAds\n  | ApiStarsTransactionApi\n  | ApiStarsTransactionPeerPeer;\n\nexport interface ApiStarsTransaction {\n  id?: string;\n  peer: ApiStarsTransactionPeer;\n  messageId?: number;\n  amount: ApiTypeCurrencyAmount;\n  isRefund?: true;\n  isGift?: true;\n  starGift?: ApiStarGift;\n  giveawayPostId?: number;\n  isMyGift?: true; // Used only for outgoing star gift messages\n  isReaction?: true;\n  hasFailed?: true;\n  isPending?: true;\n  date: number;\n  title?: string;\n  description?: string;\n  photo?: ApiWebDocument;\n  extendedMedia?: BoughtPaidMedia[];\n  subscriptionPeriod?: number;\n  starRefCommision?: number;\n  isGiftUpgrade?: true;\n  isGiftResale?: true;\n  paidMessages?: number;\n}\n\nexport interface ApiStarsSubscription {\n  id: string;\n  peerId: string;\n  until: number;\n  pricing: ApiStarsSubscriptionPricing;\n  isCancelled?: true;\n  canRefulfill?: true;\n  hasMissingBalance?: true;\n  chatInviteHash?: string;\n  hasBotCancelled?: true;\n  title?: string;\n  photo?: ApiWebDocument;\n  invoiceSlug?: string;\n}\n\nexport type ApiStarsSubscriptionPricing = {\n  period: number;\n  amount: number;\n};\n\nexport interface ApiStarTopupOption {\n  isExtended?: true;\n  stars: number;\n  currency: string;\n  amount: number;\n}\n\nexport interface ApiStarsGiveawayWinnerOption {\n  isDefault?: true;\n  users: number;\n  perUserStars: number;\n}\n\nexport interface ApiDisallowedGiftsSettings {\n  shouldDisallowUnlimitedStarGifts?: true;\n  shouldDisallowLimitedStarGifts?: true;\n  shouldDisallowUniqueStarGifts?: true;\n  shouldDisallowPremiumGifts?: true;\n}\n","import type { ApiChat } from './chats';\nimport type { ApiTypePrepaidGiveaway } from './payments';\n\nexport interface ApiChannelStatistics {\n  growthGraph?: StatisticsGraph | string;\n  followersGraph?: StatisticsGraph | string;\n  muteGraph?: StatisticsGraph | string;\n  topHoursGraph?: StatisticsGraph | string;\n  reactionsByEmotionGraph?: StatisticsGraph | string;\n  storyInteractionsGraph?: StatisticsGraph | string;\n  storyReactionsByEmotionGraph?: StatisticsGraph | string;\n  interactionsGraph: StatisticsGraph | string;\n  viewsBySourceGraph: StatisticsGraph | string;\n  newFollowersBySourceGraph: StatisticsGraph | string;\n  languagesGraph: StatisticsGraph | string;\n  followers: StatisticsOverviewItem;\n  viewsPerPost: StatisticsOverviewItem;\n  sharesPerPost: StatisticsOverviewItem;\n  enabledNotifications: StatisticsOverviewPercentage;\n  reactionsPerPost: StatisticsOverviewItem;\n  viewsPerStory: StatisticsOverviewItem;\n  sharesPerStory: StatisticsOverviewItem;\n  reactionsPerStory: StatisticsOverviewItem;\n  recentPosts: Array<StatisticsMessageInteractionCounter | StatisticsStoryInteractionCounter>;\n}\n\nexport interface ApiChannelMonetizationStatistics {\n  topHoursGraph?: StatisticsGraph | string;\n  revenueGraph?: StatisticsGraph | string;\n  balances?: ChannelMonetizationBalances;\n  usdRate?: number;\n}\n\nexport interface ApiGroupStatistics {\n  growthGraph?: StatisticsGraph | string;\n  membersGraph?: StatisticsGraph | string;\n  topHoursGraph?: StatisticsGraph | string;\n  languagesGraph: StatisticsGraph | string;\n  messagesGraph: StatisticsGraph | string;\n  actionsGraph: StatisticsGraph | string;\n  period: StatisticsOverviewPeriod;\n  members: StatisticsOverviewItem;\n  viewers: StatisticsOverviewItem;\n  messages: StatisticsOverviewItem;\n  posters: StatisticsOverviewItem;\n}\n\nexport interface ApiPostStatistics {\n  viewsGraph?: StatisticsGraph | string;\n  reactionsGraph?: StatisticsGraph | string;\n  forwardsCount?: number;\n  viewsCount?: number;\n  reactionsCount?: number;\n  publicForwards?: number;\n  publicForwardsData?: (ApiMessagePublicForward | ApiStoryPublicForward)[];\n\n  nextOffset?: string;\n}\n\nexport interface ApiBoostStatistics {\n  level: number;\n  boosts: number;\n  premiumSubscribers: StatisticsOverviewPercentage;\n  remainingBoosts: number;\n  prepaidGiveaways: ApiTypePrepaidGiveaway[];\n}\n\nexport interface ApiMessagePublicForward {\n  messageId: number;\n  views?: number;\n  title?: string;\n  chat: ApiChat;\n}\n\nexport interface ApiStoryPublicForward {\n  peerId: string;\n  storyId: number;\n  viewsCount?: number;\n  reactionsCount?: number;\n}\n\nexport interface StatisticsGraph {\n  type: string;\n  zoomToken?: string;\n  labelFormatter: string;\n  tooltipFormatter: string;\n  labels: Array<string | number>;\n  isStacked: boolean;\n  isPercentage?: boolean;\n  isCurrency?: boolean;\n  currencyRate?: number;\n  hideCaption: boolean;\n  hasSecondYAxis: boolean;\n  minimapRange: {\n    begin: number;\n    end: number;\n  };\n  labelFromIndex: number;\n  labelToIndex: number;\n  datasets: {\n    name: string;\n    color: string;\n    values: number[];\n  };\n}\n\nexport interface StatisticsOverviewItem {\n  current?: number;\n  change?: number;\n  percentage: string;\n}\n\nexport interface StatisticsOverviewPercentage {\n  part: number;\n  total: number;\n  percentage: string;\n}\n\nexport interface StatisticsOverviewPeriod {\n  maxDate: number;\n  minDate: number;\n}\n\nexport interface StatisticsMessageInteractionCounter {\n  msgId: number;\n  forwardsCount: number;\n  viewsCount: number;\n  reactionsCount: number;\n}\n\nexport interface StatisticsStoryInteractionCounter {\n  storyId: number;\n  viewsCount: number;\n  forwardsCount: number;\n  reactionsCount: number;\n}\n\nexport interface ChannelMonetizationBalances {\n  currentBalance: number;\n  availableBalance: number;\n  overallRevenue: number;\n  isWithdrawalEnabled?: boolean;\n}\n","import type {\n  ApiGeoPoint,\n  ApiMessage,\n  ApiReaction,\n  ApiReactionCount,\n  ApiSticker,\n  ApiStoryForwardInfo,\n  MediaContent,\n} from './messages';\nimport type { ApiPrivacySettings } from './settings';\n\nexport interface ApiStory {\n  '@type'?: 'story';\n  id: number;\n  peerId: string;\n  date: number;\n  expireDate: number;\n  content: MediaContent;\n  isInProfile?: boolean;\n  isEdited?: boolean;\n  isForCloseFriends?: boolean;\n  isForContacts?: boolean;\n  isForSelectedContacts?: boolean;\n  isPublic?: boolean;\n  isOut?: true;\n  noForwards?: boolean;\n  views?: ApiStoryViews;\n  visibility?: ApiPrivacySettings;\n  sentReaction?: ApiReaction;\n  mediaAreas?: ApiMediaArea[];\n  forwardInfo?: ApiStoryForwardInfo;\n  fromId?: string;\n}\n\nexport interface ApiStoryViews {\n  hasViewers?: true;\n  viewsCount?: number;\n  forwardsCount?: number;\n  reactionsCount?: number;\n  reactions?: ApiReactionCount[];\n  recentViewerIds?: string[];\n}\n\nexport interface ApiStorySkipped {\n  '@type'?: 'storySkipped';\n  id: number;\n  peerId: string;\n  isForCloseFriends?: boolean;\n  date: number;\n  expireDate: number;\n}\n\nexport interface ApiStoryDeleted {\n  '@type'?: 'storyDeleted';\n  id: number;\n  peerId: string;\n  isDeleted: true;\n}\n\nexport type ApiTypeStory = ApiStory | ApiStorySkipped | ApiStoryDeleted;\n\nexport type ApiPeerStories = {\n  byId: Record<number, ApiTypeStory>;\n  orderedIds: number[]; // Actual peer stories\n  profileIds: number[]; // Profile Shared Media: Profile Stories tab\n  isFullyLoaded?: boolean;\n  pinnedIds?: number[]; // Profile Shared Media: Pinned profile stories\n  archiveIds?: number[]; // Profile Shared Media: Archive Stories tab\n  isArchiveFullyLoaded?: boolean;\n  lastUpdatedAt?: number;\n  lastReadId?: number;\n};\n\nexport type ApiMessageStoryData = {\n  mediaType: 'storyData';\n  id: number;\n  peerId: string;\n  isMention?: boolean;\n};\n\nexport type ApiWebPageStoryData = {\n  id: number;\n  peerId: string;\n};\n\nexport type ApiWebPageStickerData = {\n  documents: ApiSticker[];\n  isEmoji?: boolean;\n  isWithTextColor?: boolean;\n};\n\nexport type ApiStoryViewPublicForward = {\n  type: 'forward';\n  peerId: string;\n  messageId: number;\n  message: ApiMessage;\n  date: number;\n  isUserBlocked?: true;\n  areStoriesBlocked?: true;\n};\n\nexport type ApiStoryViewPublicRepost = {\n  type: 'repost';\n  isUserBlocked?: true;\n  areStoriesBlocked?: true;\n  date: number;\n  peerId: string;\n  storyId: number;\n  story: ApiStory;\n};\n\nexport type ApiStoryView = {\n  type: 'user';\n  peerId: string;\n  date: number;\n  reaction?: ApiReaction;\n  isUserBlocked?: true;\n  areStoriesBlocked?: true;\n};\n\nexport type ApiTypeStoryView = ApiStoryView | ApiStoryViewPublicForward | ApiStoryViewPublicRepost;\n\nexport type ApiStealthMode = {\n  activeUntil?: number;\n  cooldownUntil?: number;\n};\n\nexport type ApiMediaAreaCoordinates = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  rotation: number;\n  radius?: number;\n};\n\nexport type ApiMediaAreaVenue = {\n  type: 'venue';\n  coordinates: ApiMediaAreaCoordinates;\n  geo: ApiGeoPoint;\n  title: string;\n};\n\nexport type ApiMediaAreaGeoPoint = {\n  type: 'geoPoint';\n  coordinates: ApiMediaAreaCoordinates;\n  geo: ApiGeoPoint;\n};\n\nexport type ApiMediaAreaSuggestedReaction = {\n  type: 'suggestedReaction';\n  coordinates: ApiMediaAreaCoordinates;\n  reaction: ApiReaction;\n  isDark?: boolean;\n  isFlipped?: boolean;\n};\n\nexport type ApiMediaAreaChannelPost = {\n  type: 'channelPost';\n  coordinates: ApiMediaAreaCoordinates;\n  channelId: string;\n  messageId: number;\n};\n\nexport type ApiMediaAreaUrl = {\n  type: 'url';\n  coordinates: ApiMediaAreaCoordinates;\n  url: string;\n};\n\nexport type ApiMediaAreaWeather = {\n  type: 'weather';\n  coordinates: ApiMediaAreaCoordinates;\n  emoji: string;\n  temperatureC: number;\n  color: number;\n};\n\nexport type ApiMediaAreaUniqueGift = {\n  type: 'uniqueGift';\n  coordinates: ApiMediaAreaCoordinates;\n  slug: string;\n};\n\nexport type ApiMediaArea = ApiMediaAreaVenue | ApiMediaAreaGeoPoint | ApiMediaAreaSuggestedReaction\n  | ApiMediaAreaChannelPost | ApiMediaAreaUrl | ApiMediaAreaWeather | ApiMediaAreaUniqueGift;\n","import type { TabState } from \"../../global/types\";\nimport type {\n  GroupCallConnectionData,\n  GroupCallConnectionState,\n  GroupCallParticipant,\n  VideoRotation,\n  VideoState,\n} from \"../../lib/secret-sauce\";\nimport type { ThreadId } from \"../../types\";\nimport type { RegularLangFnParameters } from \"../../util/localization\";\nimport type { ApiBotCommand, ApiBotMenuButton } from \"./bots\";\nimport type { ApiGroupCall, ApiPhoneCall } from \"./calls\";\nimport type {\n  ApiChat,\n  ApiChatFolder,\n  ApiChatFullInfo,\n  ApiChatMember,\n  ApiDraft,\n  ApiPeerSettings,\n  ApiTypingStatus,\n} from \"./chats\";\nimport type {\n  ApiFormattedText,\n  ApiMediaExtendedPreview,\n  ApiMessage,\n  ApiPaidReactionPrivacyType,\n  ApiPhoto,\n  ApiPoll,\n  ApiQuickReply,\n  ApiReaction,\n  ApiReactions,\n  ApiStickerSet,\n  ApiThreadInfo,\n  BoughtPaidMedia,\n} from \"./messages\";\nimport type {\n  ApiEmojiInteraction,\n  ApiError,\n  ApiNotifyPeerType,\n  ApiPeerNotifySettings,\n  ApiSessionData,\n} from \"./misc\";\nimport type {\n  ApiPrivacyKey,\n  LangPackStringValue,\n  PrivacyVisibility,\n} from \"./settings\";\nimport type { ApiTypeCurrencyAmount } from \"./stars\";\nimport type { ApiStealthMode, ApiStory, ApiStorySkipped } from \"./stories\";\nimport type {\n  ApiEmojiStatusType,\n  ApiUser,\n  ApiUserFullInfo,\n  ApiUserStatus,\n} from \"./users\";\n\nexport type ApiUpdateReady = {\n  \"@type\": \"updateApiReady\";\n};\n\nexport type ApiUpdateAuthorizationStateType =\n  | \"authorizationStateLoggingOut\"\n  | \"authorizationStateWaitPhoneNumber\"\n  | \"authorizationStateWaitCode\"\n  | \"authorizationStateWaitPassword\"\n  | \"authorizationStateWaitRegistration\"\n  | \"authorizationStateReady\"\n  | \"authorizationStateClosing\"\n  | \"authorizationStateClosed\"\n  | \"authorizationStateWaitQrCode\"\n  | \"authorizationStateWalletCreated\";\n\nexport type ApiUpdateConnectionStateType =\n  | \"connectionStateConnecting\"\n  | \"connectionStateReady\"\n  | \"connectionStateBroken\";\n\nexport type ApiUpdateAuthorizationState = {\n  \"@type\": \"updateAuthorizationState\";\n  authorizationState: ApiUpdateAuthorizationStateType;\n  isCodeViaApp?: boolean;\n  hint?: string;\n  noReset?: boolean;\n  qrCode?: { token: string; expires: number };\n};\n\nexport type ApiUpdateWebAuthTokenFailed = {\n  \"@type\": \"updateWebAuthTokenFailed\";\n};\n\nexport type ApiUpdateSession = {\n  \"@type\": \"updateSession\";\n  sessionData?: ApiSessionData;\n};\n\nexport type ApiUpdateAuthorizationError = {\n  \"@type\": \"updateAuthorizationError\";\n  errorKey: RegularLangFnParameters;\n};\n\nexport type ApiUpdateConnectionState = {\n  \"@type\": \"updateConnectionState\";\n  connectionState: ApiUpdateConnectionStateType;\n};\n\nexport type ApiUpdateCurrentUser = {\n  \"@type\": \"updateCurrentUser\";\n  currentUser: ApiUser;\n  currentUserFullInfo: ApiUserFullInfo;\n};\n\nexport type ApiUpdateChat = {\n  \"@type\": \"updateChat\";\n  id: string;\n  chat: Partial<ApiChat>;\n  noTopChatsRequest?: boolean;\n};\n\nexport type ApiUpdateChatLastMessage = {\n  \"@type\": \"updateChatLastMessage\";\n  id: string;\n  lastMessage: ApiMessage;\n};\n\nexport type ApiUpdateChatJoin = {\n  \"@type\": \"updateChatJoin\";\n  id: string;\n};\n\nexport type ApiUpdateChatLeave = {\n  \"@type\": \"updateChatLeave\";\n  id: string;\n};\n\nexport type ApiUpdateChatInbox = {\n  \"@type\": \"updateChatInbox\";\n  id: string;\n  chat: Partial<ApiChat>;\n};\n\nexport type ApiUpdateChatTypingStatus = {\n  \"@type\": \"updateChatTypingStatus\";\n  id: string;\n  threadId?: ThreadId;\n  typingStatus: ApiTypingStatus | undefined;\n};\n\nexport type ApiUpdateStartEmojiInteraction = {\n  \"@type\": \"updateStartEmojiInteraction\";\n  id: string;\n  emoji: string;\n  messageId: number;\n  interaction: ApiEmojiInteraction;\n};\n\nexport type ApiUpdateChatFullInfo = {\n  \"@type\": \"updateChatFullInfo\";\n  id: string;\n  fullInfo: Partial<ApiChatFullInfo>;\n};\n\nexport type ApiUpdateChatMembers = {\n  \"@type\": \"updateChatMembers\";\n  id: string;\n  replacedMembers?: ApiChatMember[];\n  addedMember?: ApiChatMember;\n  deletedMemberId?: string;\n};\n\nexport type ApiUpdatePinnedChatIds = {\n  \"@type\": \"updatePinnedChatIds\";\n  ids?: string[];\n  folderId?: number;\n};\n\nexport type ApiUpdateChatListType = {\n  \"@type\": \"updateChatListType\";\n  id: string;\n  folderId: number;\n};\n\nexport type ApiUpdateChatPinned = {\n  \"@type\": \"updateChatPinned\";\n  id: string;\n  isPinned: boolean;\n};\n\nexport type ApiUpdatePinnedSavedDialogIds = {\n  \"@type\": \"updatePinnedSavedDialogIds\";\n  ids: string[];\n};\n\nexport type ApiUpdateSavedDialogPinned = {\n  \"@type\": \"updateSavedDialogPinned\";\n  id: string;\n  isPinned: boolean;\n};\n\nexport type ApiUpdateChatFolder = {\n  \"@type\": \"updateChatFolder\";\n  id: number;\n  folder: ApiChatFolder | undefined;\n};\n\nexport type ApiUpdateChatFoldersOrder = {\n  \"@type\": \"updateChatFoldersOrder\";\n  orderedIds: number[];\n};\n\nexport type ApiUpdateRecommendedChatFolders = {\n  \"@type\": \"updateRecommendedChatFolders\";\n  folders: ApiChatFolder[];\n};\n\nexport type ApiUpdateNewScheduledMessage = {\n  \"@type\": \"newScheduledMessage\";\n  chatId: string;\n  id: number;\n  message: ApiMessage;\n  wasDrafted?: boolean;\n  poll?: ApiPoll;\n};\n\nexport type ApiUpdateNewMessage = {\n  \"@type\": \"newMessage\";\n  chatId: string;\n  id: number;\n  message: Partial<ApiMessage>;\n  shouldForceReply?: boolean;\n  wasDrafted?: boolean;\n  poll?: ApiPoll;\n};\n\nexport type ApiUpdateMessage = {\n  \"@type\": \"updateMessage\";\n  chatId: string;\n  id: number;\n  message: Partial<ApiMessage>;\n  poll?: ApiPoll;\n  shouldForceReply?: boolean;\n  isFromNew?: true;\n};\n\nexport type ApiUpdateScheduledMessage = {\n  \"@type\": \"updateScheduledMessage\";\n  chatId: string;\n  id: number;\n  message: Partial<ApiMessage>;\n  poll?: ApiPoll;\n  isFromNew?: true;\n};\n\nexport type ApiUpdateQuickReplyMessage = {\n  \"@type\": \"updateQuickReplyMessage\";\n  id: number;\n  message: Partial<ApiMessage>;\n  poll?: ApiPoll;\n};\n\nexport type ApiUpdateDeleteQuickReplyMessages = {\n  \"@type\": \"deleteQuickReplyMessages\";\n  quickReplyId: number;\n  messageIds: number[];\n};\n\nexport type ApiUpdateQuickReplies = {\n  \"@type\": \"updateQuickReplies\";\n  quickReplies: ApiQuickReply[];\n};\n\nexport type ApiDeleteQuickReply = {\n  \"@type\": \"deleteQuickReply\";\n  quickReplyId: number;\n};\n\nexport type ApiUpdatePinnedMessageIds = {\n  \"@type\": \"updatePinnedIds\";\n  chatId: string;\n  isPinned?: boolean;\n  messageIds: number[];\n};\n\nexport type ApiUpdateThreadInfo = {\n  \"@type\": \"updateThreadInfo\";\n  threadInfo: Partial<ApiThreadInfo>;\n};\n\nexport type ApiUpdateScheduledMessageSendSucceeded = {\n  \"@type\": \"updateScheduledMessageSendSucceeded\";\n  chatId: string;\n  localId: number;\n  message: ApiMessage;\n  poll?: ApiPoll;\n};\n\nexport type ApiUpdateMessageSendSucceeded = {\n  \"@type\": \"updateMessageSendSucceeded\";\n  chatId: string;\n  localId: number;\n  message: ApiMessage;\n  poll?: ApiPoll;\n};\n\nexport type ApiUpdateVideoProcessingPending = {\n  \"@type\": \"updateVideoProcessingPending\";\n  chatId: string;\n  localId: number;\n  newScheduledMessageId: number;\n};\n\nexport type ApiUpdateMessageSendFailed = {\n  \"@type\": \"updateMessageSendFailed\";\n  chatId: string;\n  localId: number;\n  error: string;\n};\n\nexport type ApiUpdateCommonBoxMessages = {\n  \"@type\": \"updateCommonBoxMessages\";\n  ids: number[];\n  messageUpdate: Partial<ApiMessage>;\n};\n\nexport type ApiUpdateChannelMessages = {\n  \"@type\": \"updateChannelMessages\";\n  channelId: string;\n  ids: number[];\n  messageUpdate: Partial<ApiMessage>;\n};\n\nexport type ApiUpdateMessagePoll = {\n  \"@type\": \"updateMessagePoll\";\n  pollId: string;\n  pollUpdate: Partial<ApiPoll>;\n};\n\nexport type ApiUpdateMessagePollVote = {\n  \"@type\": \"updateMessagePollVote\";\n  pollId: string;\n  peerId: string;\n  options: string[];\n};\n\nexport type ApiUpdateServiceNotification = {\n  \"@type\": \"updateServiceNotification\";\n  message: ApiMessage;\n};\n\nexport type ApiUpdateDeleteMessages = {\n  \"@type\": \"deleteMessages\";\n  ids: number[];\n  chatId?: string;\n};\n\nexport type ApiUpdateDeleteScheduledMessages = {\n  \"@type\": \"deleteScheduledMessages\";\n  ids: number[];\n  newIds?: number[];\n  chatId: string;\n};\n\nexport type ApiUpdateDeleteHistory = {\n  \"@type\": \"deleteHistory\";\n  chatId: string;\n};\n\nexport type ApiDeleteParticipantHistory = {\n  \"@type\": \"deleteParticipantHistory\";\n  chatId: string;\n  peerId: string;\n};\n\nexport type ApiUpdateDeleteSavedHistory = {\n  \"@type\": \"deleteSavedHistory\";\n  chatId: string;\n};\n\nexport type ApiUpdateResetMessages = {\n  \"@type\": \"resetMessages\";\n  id: string;\n};\n\nexport type ApiUpdateDraftMessage = {\n  \"@type\": \"draftMessage\";\n  chatId: string;\n  threadId?: ThreadId;\n  draft?: ApiDraft;\n};\n\nexport type ApiUpdateMessageReactions = {\n  \"@type\": \"updateMessageReactions\";\n  id: number;\n  chatId: string;\n  reactions: ApiReactions;\n};\n\nexport type ApiUpdateMessageExtendedMedia = {\n  \"@type\": \"updateMessageExtendedMedia\";\n  id: number;\n  chatId: string;\n} & (\n  | {\n      isBought?: true;\n      extendedMedia: BoughtPaidMedia[];\n    }\n  | {\n      isBought?: undefined;\n      extendedMedia: ApiMediaExtendedPreview[];\n    }\n);\n\nexport type ApiDeleteContact = {\n  \"@type\": \"deleteContact\";\n  id: string;\n};\n\nexport type ApiUpdatePeerSettings = {\n  \"@type\": \"updatePeerSettings\";\n  id: string;\n  settings: ApiPeerSettings;\n};\n\nexport type ApiUpdateUser = {\n  \"@type\": \"updateUser\";\n  id: string;\n  user: Partial<ApiUser>;\n  fullInfo?: ApiUserFullInfo;\n};\n\nexport type ApiUpdateRequestUserUpdate = {\n  \"@type\": \"updateRequestUserUpdate\";\n  id: string;\n};\n\nexport type ApiUpdateUserStatus = {\n  \"@type\": \"updateUserStatus\";\n  userId: string;\n  status: ApiUserStatus;\n};\n\nexport type ApiUpdateUserEmojiStatus = {\n  \"@type\": \"updateUserEmojiStatus\";\n  userId: string;\n  emojiStatus?: ApiEmojiStatusType;\n};\n\nexport type ApiUpdateRecentEmojiStatuses = {\n  \"@type\": \"updateRecentEmojiStatuses\";\n};\n\nexport type ApiUpdateUserFullInfo = {\n  \"@type\": \"updateUserFullInfo\";\n  id: string;\n  fullInfo: Partial<ApiUserFullInfo>;\n};\n\nexport type ApiUpdateAvatar = {\n  \"@type\": \"updateAvatar\";\n  chatId: string;\n  dataUri: string;\n};\n\nexport type ApiUpdateMessageImage = {\n  \"@type\": \"updateMessageImage\";\n  messageId: number;\n  dataUri: string;\n};\n\nexport type ApiUpdateError = {\n  \"@type\": \"error\";\n  error: ApiError;\n};\n\nexport type ApiUpdateNotSupportedInFrozenAccountError = {\n  \"@type\": \"notSupportedInFrozenAccount\";\n  error: ApiError;\n};\n\nexport type ApiUpdateConfig = {\n  \"@type\": \"updateConfig\";\n};\n\nexport type ApiUpdateResetContacts = {\n  \"@type\": \"updateResetContactList\";\n};\n\nexport type ApiUpdateFavoriteStickers = {\n  \"@type\": \"updateFavoriteStickers\";\n};\n\nexport type ApiUpdateRecentStickers = {\n  \"@type\": \"updateRecentStickers\";\n};\n\nexport type ApiUpdateRecentReactions = {\n  \"@type\": \"updateRecentReactions\";\n};\n\nexport type ApiUpdateMoveStickerSetToTop = {\n  \"@type\": \"updateMoveStickerSetToTop\";\n  isCustomEmoji?: boolean;\n  id: string;\n};\n\nexport type ApiUpdateStickerSets = {\n  \"@type\": \"updateStickerSets\";\n};\n\nexport type ApiUpdateStickerSetsOrder = {\n  \"@type\": \"updateStickerSetsOrder\";\n  order: string[];\n  isCustomEmoji?: boolean;\n};\n\nexport type ApiUpdateStickerSet = {\n  \"@type\": \"updateStickerSet\";\n  id: string;\n  stickerSet: Partial<ApiStickerSet>;\n};\n\nexport type ApiUpdateSavedGifs = {\n  \"@type\": \"updateSavedGifs\";\n};\n\nexport type ApiUpdateTwoFaError = {\n  \"@type\": \"updateTwoFaError\";\n  messageKey: RegularLangFnParameters;\n};\n\nexport type ApiUpdateDefaultNotifySettings = {\n  \"@type\": \"updateDefaultNotifySettings\";\n  peerType: ApiNotifyPeerType;\n  settings: Partial<ApiPeerNotifySettings>;\n};\n\nexport type ApiUpdatePeerNotifySettings = {\n  \"@type\": \"updateChatNotifySettings\";\n  chatId: string;\n  settings: Partial<ApiPeerNotifySettings>;\n};\n\nexport type ApiUpdateTopicNotifySettings = {\n  \"@type\": \"updateTopicNotifySettings\";\n  chatId: string;\n  topicId: number;\n  settings: Partial<ApiPeerNotifySettings>;\n};\n\nexport type ApiUpdateTwoFaStateWaitCode = {\n  \"@type\": \"updateTwoFaStateWaitCode\";\n  length: number;\n};\n\nexport type ApiUpdatePeerBlocked = {\n  \"@type\": \"updatePeerBlocked\";\n  id: string;\n  isBlocked?: boolean;\n  isBlockedFromStories?: boolean;\n};\n\nexport type ApiUpdatePaymentVerificationNeeded = {\n  \"@type\": \"updatePaymentVerificationNeeded\";\n  url: string;\n};\n\nexport type ApiUpdatePaymentStateCompleted = {\n  \"@type\": \"updatePaymentStateCompleted\";\n  paymentState: TabState[\"payment\"];\n  tabId: number;\n};\n\nexport type ApiUpdateStarPaymentStateCompleted = {\n  \"@type\": \"updateStarPaymentStateCompleted\";\n  paymentState: TabState[\"starsPayment\"];\n  tabId: number;\n};\n\nexport type ApiUpdatePrivacy = {\n  \"@type\": \"updatePrivacy\";\n  key: ApiPrivacyKey;\n  rules: {\n    visibility: PrivacyVisibility;\n    allowUserIds: string[];\n    allowChatIds: string[];\n    blockUserIds: string[];\n    blockChatIds: string[];\n  };\n};\n\nexport type ApiUpdateServerTimeOffset = {\n  \"@type\": \"updateServerTimeOffset\";\n  serverTimeOffset: number;\n};\n\nexport type ApiUpdateGroupCall = {\n  \"@type\": \"updateGroupCall\";\n  call: ApiGroupCall;\n};\n\nexport type ApiUpdateGroupCallChatId = {\n  \"@type\": \"updateGroupCallChatId\";\n  call: Partial<ApiGroupCall>;\n  chatId: string;\n};\n\nexport type ApiUpdateGroupCallLeavePresentation = {\n  \"@type\": \"updateGroupCallLeavePresentation\";\n};\n\nexport type ApiUpdateGroupCallParticipants = {\n  \"@type\": \"updateGroupCallParticipants\";\n  groupCallId: string;\n  participants: GroupCallParticipant[];\n  nextOffset?: string;\n};\n\nexport type ApiUpdatePendingJoinRequests = {\n  \"@type\": \"updatePendingJoinRequests\";\n  chatId: string;\n  recentRequesterIds: string[];\n  requestsPending: number;\n};\n\nexport type ApiUpdateGroupCallConnection = {\n  \"@type\": \"updateGroupCallConnection\";\n  data: GroupCallConnectionData;\n  presentation: boolean;\n};\n\nexport type ApiUpdateGroupCallStreams = {\n  \"@type\": \"updateGroupCallStreams\";\n  userId: string;\n  hasAudioStream: boolean;\n  hasVideoStream: boolean;\n  hasPresentationStream: boolean;\n};\n\nexport type ApiUpdateGroupCallConnectionState = {\n  \"@type\": \"updateGroupCallConnectionState\";\n  connectionState: GroupCallConnectionState;\n  isSpeakerDisabled?: boolean;\n};\n\nexport type ApiUpdatePhoneCall = {\n  \"@type\": \"updatePhoneCall\";\n  call: ApiPhoneCall;\n};\n\nexport type ApiUpdatePhoneCallSignalingData = {\n  \"@type\": \"updatePhoneCallSignalingData\";\n  callId: string;\n  data: number[];\n};\n\nexport type ApiUpdatePhoneCallMediaState = {\n  \"@type\": \"updatePhoneCallMediaState\";\n  isMuted: boolean;\n  videoState: VideoState;\n  videoRotation: VideoRotation;\n  screencastState: VideoState;\n  isBatteryLow: boolean;\n};\n\nexport type ApiUpdatePhoneCallConnectionState = {\n  \"@type\": \"updatePhoneCallConnectionState\";\n  connectionState: RTCPeerConnectionState;\n};\n\nexport type ApiUpdateWebViewResultSent = {\n  \"@type\": \"updateWebViewResultSent\";\n  queryId: string;\n};\n\nexport type ApiUpdateBotMenuButton = {\n  \"@type\": \"updateBotMenuButton\";\n  botId: string;\n  button: ApiBotMenuButton;\n};\n\nexport type ApiUpdateTranscribedAudio = {\n  \"@type\": \"updateTranscribedAudio\";\n  transcriptionId: string;\n  text: string;\n  isPending?: boolean;\n};\n\nexport type ApiUpdatePinnedTopic = {\n  \"@type\": \"updatePinnedTopic\";\n  topicId: number;\n  chatId: string;\n  isPinned: boolean;\n};\n\nexport type ApiUpdatePinnedTopicsOrder = {\n  \"@type\": \"updatePinnedTopicsOrder\";\n  chatId: string;\n  order: number[];\n};\n\nexport type ApiUpdateTopic = {\n  \"@type\": \"updateTopic\";\n  chatId: string;\n  topicId: number;\n};\n\nexport type ApiUpdateTopics = {\n  \"@type\": \"updateTopics\";\n  chatId: string;\n};\n\nexport type ApiUpdateViewForumAsMessages = {\n  \"@type\": \"updateViewForumAsMessages\";\n  chatId: string;\n  isEnabled?: true;\n};\n\nexport type ApiUpdateMessageTranslations = {\n  \"@type\": \"updateMessageTranslations\";\n  chatId: string;\n  messageIds: number[];\n  translations: ApiFormattedText[];\n  toLanguageCode: string;\n};\n\nexport type ApiUpdateFailedMessageTranslations = {\n  \"@type\": \"failedMessageTranslations\";\n  chatId: string;\n  messageIds: number[];\n  toLanguageCode: string;\n};\n\nexport type ApiUpdateFetchingDifference = {\n  \"@type\": \"updateFetchingDifference\";\n  isFetching: boolean;\n};\n\nexport type ApiRequestReconnectApi = {\n  \"@type\": \"requestReconnectApi\";\n};\n\nexport type ApiUpdateStory = {\n  \"@type\": \"updateStory\";\n  peerId: string;\n  story: ApiStory | ApiStorySkipped;\n};\n\nexport type ApiUpdateDeleteStory = {\n  \"@type\": \"deleteStory\";\n  peerId: string;\n  storyId: number;\n};\n\nexport type ApiUpdateReadStories = {\n  \"@type\": \"updateReadStories\";\n  peerId: string;\n  lastReadId: number;\n};\n\nexport type ApiUpdateSentStoryReaction = {\n  \"@type\": \"updateSentStoryReaction\";\n  peerId: string;\n  storyId: number;\n  reaction?: ApiReaction;\n};\n\nexport type ApiUpdateStealthMode = {\n  \"@type\": \"updateStealthMode\";\n  stealthMode: ApiStealthMode;\n};\n\nexport type ApiRequestSync = {\n  \"@type\": \"requestSync\";\n};\n\nexport type ApiUpdateAttachMenuBots = {\n  \"@type\": \"updateAttachMenuBots\";\n};\n\nexport type ApiUpdateNewAuthorization = {\n  \"@type\": \"updateNewAuthorization\";\n  hash: string;\n  isUnconfirmed?: true;\n  date?: number;\n  device?: string;\n  location?: string;\n};\n\nexport type ApiUpdateGroupInvitePrivacyForbidden = {\n  \"@type\": \"updateGroupInvitePrivacyForbidden\";\n  userId: string;\n};\n\nexport type ApiUpdateSavedReactionTags = {\n  \"@type\": \"updateSavedReactionTags\";\n};\n\nexport type ApiUpdatePremiumFloodWait = {\n  \"@type\": \"updatePremiumFloodWait\";\n  isUpload?: boolean;\n};\n\nexport type ApiUpdateStarsBalance = {\n  \"@type\": \"updateStarsBalance\";\n  balance: ApiTypeCurrencyAmount;\n};\n\nexport type ApiUpdateDeleteProfilePhoto = {\n  \"@type\": \"updateDeleteProfilePhoto\";\n  peerId: string;\n  photoId?: string;\n};\n\nexport type ApiUpdateNewProfilePhoto = {\n  \"@type\": \"updateNewProfilePhoto\";\n  peerId: string;\n  photo: ApiPhoto;\n};\n\nexport type ApiUpdateEntities = {\n  \"@type\": \"updateEntities\";\n  users?: Record<string, ApiUser>;\n  chats?: Record<string, ApiChat>;\n  threadInfos?: ApiThreadInfo[];\n  polls?: ApiPoll[];\n};\n\nexport type ApiUpdatePaidReactionPrivacy = {\n  \"@type\": \"updatePaidReactionPrivacy\";\n  private: ApiPaidReactionPrivacyType;\n};\n\nexport type ApiUpdateLangPackTooLong = {\n  \"@type\": \"updateLangPackTooLong\";\n  langCode: string;\n};\n\nexport type ApiUpdateLangPack = {\n  \"@type\": \"updateLangPack\";\n  version: number;\n  strings: Record<string, LangPackStringValue>;\n  keysToRemove: string[];\n};\n\nexport type ApiUpdateBotCommands = {\n  \"@type\": \"updateBotCommands\";\n  botId: string;\n  commands?: ApiBotCommand[];\n};\n\nexport type ApiUpdate =\n  | ApiUpdateReady\n  | ApiUpdateSession\n  | ApiUpdateWebAuthTokenFailed\n  | ApiUpdateRequestUserUpdate\n  | ApiUpdateAuthorizationState\n  | ApiUpdateAuthorizationError\n  | ApiUpdateConnectionState\n  | ApiUpdateCurrentUser\n  | ApiUpdateChat\n  | ApiUpdateChatInbox\n  | ApiUpdateChatTypingStatus\n  | ApiUpdateChatFullInfo\n  | ApiUpdatePinnedChatIds\n  | ApiUpdateChatMembers\n  | ApiUpdateChatJoin\n  | ApiUpdateChatLeave\n  | ApiUpdateChatPinned\n  | ApiUpdatePinnedMessageIds\n  | ApiUpdateChatListType\n  | ApiUpdateChatFolder\n  | ApiUpdateChatFoldersOrder\n  | ApiUpdateRecommendedChatFolders\n  | ApiUpdateNewMessage\n  | ApiUpdateMessage\n  | ApiUpdateThreadInfo\n  | ApiUpdateCommonBoxMessages\n  | ApiUpdateDeleteMessages\n  | ApiUpdateMessagePoll\n  | ApiUpdateMessagePollVote\n  | ApiUpdateDeleteHistory\n  | ApiDeleteParticipantHistory\n  | ApiUpdateMessageSendSucceeded\n  | ApiUpdateMessageSendFailed\n  | ApiUpdateServiceNotification\n  | ApiDeleteContact\n  | ApiUpdateUser\n  | ApiUpdateUserStatus\n  | ApiUpdateUserFullInfo\n  | ApiUpdateVideoProcessingPending\n  | ApiUpdatePeerSettings\n  | ApiUpdateAvatar\n  | ApiUpdateMessageImage\n  | ApiUpdateDraftMessage\n  | ApiUpdateError\n  | ApiUpdateResetContacts\n  | ApiUpdateStartEmojiInteraction\n  | ApiUpdateFavoriteStickers\n  | ApiUpdateStickerSet\n  | ApiUpdateStickerSets\n  | ApiUpdateStickerSetsOrder\n  | ApiUpdateRecentStickers\n  | ApiUpdateSavedGifs\n  | ApiUpdateNewScheduledMessage\n  | ApiUpdateMoveStickerSetToTop\n  | ApiUpdateScheduledMessageSendSucceeded\n  | ApiUpdateScheduledMessage\n  | ApiUpdateStarPaymentStateCompleted\n  | ApiUpdateDeleteScheduledMessages\n  | ApiUpdateResetMessages\n  | ApiUpdateMessageTranslations\n  | ApiUpdateFailedMessageTranslations\n  | ApiUpdateTwoFaError\n  | ApiUpdateTwoFaStateWaitCode\n  | ApiUpdateWebViewResultSent\n  | ApiUpdateDefaultNotifySettings\n  | ApiUpdatePeerNotifySettings\n  | ApiUpdatePeerBlocked\n  | ApiUpdatePrivacy\n  | ApiUpdateServerTimeOffset\n  | ApiUpdateMessageReactions\n  | ApiUpdateSavedReactionTags\n  | ApiUpdateGroupCallParticipants\n  | ApiUpdateGroupCallConnection\n  | ApiUpdateGroupCall\n  | ApiUpdateGroupCallStreams\n  | ApiUpdateGroupCallConnectionState\n  | ApiUpdateGroupCallLeavePresentation\n  | ApiUpdateGroupCallChatId\n  | ApiUpdatePendingJoinRequests\n  | ApiUpdatePaymentVerificationNeeded\n  | ApiUpdatePaymentStateCompleted\n  | ApiUpdatePhoneCall\n  | ApiUpdatePhoneCallSignalingData\n  | ApiUpdatePhoneCallMediaState\n  | ApiUpdatePhoneCallConnectionState\n  | ApiUpdateBotMenuButton\n  | ApiUpdateTranscribedAudio\n  | ApiUpdateUserEmojiStatus\n  | ApiUpdateMessageExtendedMedia\n  | ApiUpdateConfig\n  | ApiUpdateTopicNotifySettings\n  | ApiUpdatePinnedTopic\n  | ApiUpdatePinnedTopicsOrder\n  | ApiUpdateTopic\n  | ApiUpdateTopics\n  | ApiUpdateRecentEmojiStatuses\n  | ApiUpdateRecentReactions\n  | ApiUpdateStory\n  | ApiUpdateReadStories\n  | ApiUpdateDeleteStory\n  | ApiUpdateSentStoryReaction\n  | ApiRequestReconnectApi\n  | ApiRequestSync\n  | ApiUpdateFetchingDifference\n  | ApiUpdateChannelMessages\n  | ApiUpdateStealthMode\n  | ApiUpdateAttachMenuBots\n  | ApiUpdateNewAuthorization\n  | ApiUpdateGroupInvitePrivacyForbidden\n  | ApiUpdateViewForumAsMessages\n  | ApiUpdateSavedDialogPinned\n  | ApiUpdatePinnedSavedDialogIds\n  | ApiUpdateChatLastMessage\n  | ApiUpdateDeleteSavedHistory\n  | ApiUpdatePremiumFloodWait\n  | ApiUpdateStarsBalance\n  | ApiUpdateBotCommands\n  | ApiUpdateQuickReplyMessage\n  | ApiUpdateQuickReplies\n  | ApiDeleteQuickReply\n  | ApiUpdateDeleteQuickReplyMessages\n  | ApiUpdateDeleteProfilePhoto\n  | ApiUpdateNewProfilePhoto\n  | ApiUpdateEntities\n  | ApiUpdatePaidReactionPrivacy\n  | ApiUpdateLangPackTooLong\n  | ApiUpdateLangPack\n  | ApiUpdateNotSupportedInFrozenAccountError;\n\nexport type OnApiUpdate = (update: ApiUpdate) => void;\n","import type { API_CHAT_TYPES } from '../../config';\nimport type { ApiBotInfo } from './bots';\nimport type { ApiBusinessIntro, ApiBusinessLocation, ApiBusinessWorkHours } from './business';\nimport type { ApiPeerColor, ApiPeerSettings } from './chats';\nimport type { ApiDocument, ApiPhoto } from './messages';\nimport type { ApiBotVerification } from './misc';\nimport type { ApiSavedStarGift } from './stars';\n\nexport interface ApiUser {\n  id: string;\n  isMin: boolean;\n  isSelf?: true;\n  isVerified?: true;\n  isPremium?: boolean;\n  isCloseFriend?: boolean;\n  isContact?: true;\n  isSupport?: true;\n  type: ApiUserType;\n  firstName?: string;\n  lastName?: string;\n  noStatus?: boolean;\n  usernames?: ApiUsername[];\n  hasUsername?: boolean;\n  phoneNumber: string;\n  accessHash?: string;\n  hasVideoAvatar?: boolean;\n  avatarPhotoId?: string;\n  botPlaceholder?: string;\n  canBeInvitedToGroup?: boolean;\n  fakeType?: ApiFakeType;\n  isAttachBot?: boolean;\n  emojiStatus?: ApiEmojiStatusType;\n  areStoriesHidden?: boolean;\n  hasStories?: boolean;\n  hasUnreadStories?: boolean;\n  maxStoryId?: number;\n  color?: ApiPeerColor;\n  canEditBot?: boolean;\n  hasMainMiniApp?: boolean;\n  botActiveUsers?: number;\n  botVerificationIconId?: string;\n  paidMessagesStars?: number;\n}\n\nexport interface ApiUserFullInfo {\n  isBlocked?: boolean;\n  bio?: string;\n  commonChatsCount?: number;\n  pinnedMessageId?: number;\n  botInfo?: ApiBotInfo;\n  profilePhoto?: ApiPhoto;\n  fallbackPhoto?: ApiPhoto;\n  personalPhoto?: ApiPhoto;\n  noVoiceMessages?: boolean;\n  isTranslationDisabled?: true;\n  areAdsEnabled?: boolean;\n  hasPinnedStories?: boolean;\n  isContactRequirePremium?: boolean;\n  shouldDisplayGiftsButton?: boolean;\n  disallowedGifts?: ApiDisallowedGifts;\n  birthday?: ApiBirthday;\n  personalChannelId?: string;\n  personalChannelMessageId?: number;\n  businessLocation?: ApiBusinessLocation;\n  businessWorkHours?: ApiBusinessWorkHours;\n  businessIntro?: ApiBusinessIntro;\n  starGiftCount?: number;\n  isBotCanManageEmojiStatus?: boolean;\n  isBotAccessEmojiGranted?: boolean;\n  hasScheduledMessages?: boolean;\n  botVerification?: ApiBotVerification;\n  paidMessagesStars?: number;\n  settings?: ApiPeerSettings;\n}\n\nexport type ApiFakeType = 'fake' | 'scam';\n\nexport type ApiUserType = 'userTypeBot' | 'userTypeRegular' | 'userTypeDeleted' | 'userTypeUnknown';\n\nexport interface ApiUserStatus {\n  type: (\n    'userStatusEmpty' | 'userStatusLastMonth' | 'userStatusLastWeek' |\n    'userStatusOffline' | 'userStatusOnline' | 'userStatusRecently'\n  );\n  wasOnline?: number;\n  expires?: number;\n  isReadDateRestrictedByMe?: boolean;\n  isReadDateRestricted?: boolean;\n}\n\nexport interface ApiUserCommonChats {\n  ids: string[];\n  maxId?: string;\n  isFullyLoaded: boolean;\n}\n\nexport interface ApiSavedGifts {\n  gifts: ApiSavedStarGift[];\n  nextOffset?: string;\n}\n\nexport interface ApiUsername {\n  username: string;\n  isActive?: boolean;\n  isEditable?: boolean;\n}\n\nexport type ApiChatType = typeof API_CHAT_TYPES[number];\nexport type ApiAttachMenuPeerType = 'self' | ApiChatType;\n\nexport type ApiInlineQueryPeerType = 'self' | 'supergroups' | ApiChatType;\n\ntype ApiAttachBotForMenu = {\n  isForAttachMenu: true;\n  attachMenuPeerTypes?: ApiAttachMenuPeerType[];\n};\n\ntype ApiAttachBotBase = {\n  id: string;\n  shouldRequestWriteAccess?: boolean;\n  shortName: string;\n  isForSideMenu?: true;\n  isDisclaimerNeeded?: boolean;\n  icons: ApiAttachBotIcon[];\n  isInactive?: boolean;\n};\n\nexport type ApiAttachBot = OptionalCombine<ApiAttachBotBase, ApiAttachBotForMenu>;\n\nexport interface ApiAttachBotIcon {\n  name: string;\n  document: ApiDocument;\n}\n\nexport type ApiEmojiStatusType = ApiEmojiStatus | ApiEmojiStatusCollectible;\n\nexport interface ApiEmojiStatus {\n  type: 'regular';\n  documentId: string;\n  until?: number;\n}\n\nexport interface ApiEmojiStatusCollectible {\n  type: 'collectible';\n  collectibleId: string;\n  documentId: string;\n  title: string;\n  slug: string;\n  patternDocumentId: string;\n  centerColor: string;\n  edgeColor: string;\n  patternColor: string;\n  textColor: string;\n  until?: number;\n}\n\nexport interface ApiBirthday {\n  day: number;\n  month: number;\n  year?: number;\n}\n\nexport interface ApiDisallowedGifts {\n  shouldDisallowUnlimitedStarGifts?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n  shouldDisallowUniqueStarGifts?: boolean;\n  shouldDisallowPremiumGifts?: boolean;\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/* eslint-disable */\n// This file is generated by dev/generateInitialLangFallback.ts. Do not edit it manually.\n\nimport type { LangPackStringValue } from \"../../api/types\";\nimport type { LangKey } from \"../../types/language\";\n\nexport default {\n  WrongNumber: \"Wrong number?\",\n  SentAppCode:\n    \"We've sent the code to the **Telegram** app on your other device.\",\n  LoginJustSentSms: \"We've sent you a code via SMS. Please enter it above.\",\n  LoginHeaderPassword: \"Enter Password\",\n  LoginEnterPasswordDescription:\n    \"You have Two-Step Verification enabled, so your account is protected with an additional password.\",\n  StartText: \"Please confirm your country code\\nand enter your phone number.\",\n  AuthTitle: \"Log in with phone number\",\n  LoginPhonePlaceholder: \"Your phone number\",\n  LoginNext: \"Next\",\n  LoginQRLogin: \"Log in by QR Code\",\n  LoginQRTitle: \"QR code log in\",\n  LoginQRSubtitle: \"Log in to M7 using Telegram QR Code\",\n  LoginQRHelp1: \"Open Telegram on your phone\",\n  LoginQRHelp2: \"Go to **Settings** > **Devices** > **Link Desktop Device**\",\n  LoginQRHelp3: \"Point your phone at this screen to confirm login\",\n  LoginQRCancel: \"Log in by phone Number\",\n  YourName: \"Your Name\",\n  LoginRegisterDesc: \"Enter your name and add a profile photo.\",\n  LoginRegisterFirstNamePlaceholder: \"First Name\",\n  LoginRegisterLastNamePlaceholder: \"Last Name\",\n  LoginSelectCountryTitle: \"Country\",\n  CountryNone: \"Country not found\",\n  PleaseEnterPassword: \"Enter your new password\",\n  ErrorPhoneNumberInvalid: \"Invalid phone number, please try again.\",\n  ErrorCodeInvalid: \"Invalid code, please try again.\",\n  ErrorIncorrectPassword: \"Invalid password, please try again.\",\n  ErrorPasswordFlood: \"Too many attempts, please try again later.\",\n  ErrorPhoneBanned: \"This phone number is banned.\",\n  ErrorFloodTime: \"Too many attempts, please try again in {time}.\",\n  ErrorUnexpected: \"Unexpected error\",\n  ErrorUnexpectedMessage: \"Unexpected error: {error}\",\n  WalletCreatedTitle: \"Save your private keys\",\n  WalletCreatedMessage: \"These are your private keys. Please keep them safe\",\n  Continue: \"Continue\",\n  Create: \"Create\",\n} as Partial<Record<LangKey, LangPackStringValue>>;\n","// extracted by mini-css-extract-plugin\nexport default {\"bg\":\"ThfRMqwq\"};","import type { FC } from \"../lib/teact/teact\";\nimport {\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useState,\n} from \"../lib/teact/teact\";\nimport { withGlobal } from \"../global\";\nimport { getActions, getGlobal, setGlobal } from \"../global\";\n\nimport type { GlobalState } from \"../global/types\";\nimport type { ThemeKey } from \"../types\";\nimport type { UiLoaderPage } from \"./common/UiLoader\";\n\nimport {\n  DARK_THEME_BG_COLOR,\n  INACTIVE_MARKER,\n  IS_BYPASS_AUTH,\n  IS_WALLET_CREATED,\n  LIGHT_THEME_BG_COLOR,\n  PAGE_TITLE,\n} from \"../config\";\nimport { selectTabState, selectTheme } from \"../global/selectors\";\nimport {\n  IS_INSTALL_PROMPT_SUPPORTED,\n  PLATFORM_ENV,\n} from \"../util/browser/windowEnvironment\";\nimport buildClassName from \"../util/buildClassName\";\nimport { setupBeforeInstallPrompt } from \"../util/installPrompt\";\nimport {\n  ACCOUNT_SLOT,\n  getAccountsInfo,\n  getAccountSlotUrl,\n} from \"../util/multiaccount\";\nimport { hasEncryptedSession } from \"../util/passcode\";\nimport {\n  getInitialLocationHash,\n  parseInitialLocationHash,\n} from \"../util/routing\";\nimport { checkSessionLocked, hasStoredSession } from \"../util/sessions\";\nimport { updateSizes } from \"../util/windowSize\";\n\nimport useAppLayout from \"../hooks/useAppLayout\";\nimport useFlag from \"../hooks/useFlag\";\nimport usePreviousDeprecated from \"../hooks/usePreviousDeprecated\";\n\n// import Test from './test/TestLocale';\nimport Auth from \"./auth/Auth\";\nimport UiLoader from \"./common/UiLoader\";\nimport AppInactive from \"./main/AppInactive\";\nimport LockScreen from \"./main/LockScreen.async\";\nimport Main from \"./main/Main.async\";\nimport Transition from \"./ui/Transition\";\n\nimport styles from \"./App.module.scss\";\n\ntype StateProps = {\n  authState: GlobalState[\"authState\"];\n  isScreenLocked?: boolean;\n  hasPasscode?: boolean;\n  isInactiveAuth?: boolean;\n  hasWebAuthTokenFailed?: boolean;\n  isTestServer?: boolean;\n  theme: ThemeKey;\n};\n\nenum AppScreens {\n  auth,\n  main,\n  lock,\n  inactive,\n}\n\nconst TRANSITION_RENDER_COUNT = Object.keys(AppScreens).length / 2;\nconst INACTIVE_PAGE_TITLE = `${PAGE_TITLE} ${INACTIVE_MARKER}`;\n\n// Mock data initialization for test mode\nfunction initMockData() {\n  const global = getGlobal();\n\n  // Set up a mock current user\n  const mockUserId = \"mock_user_123\";\n  const mockUser = {\n    id: mockUserId,\n    isMin: false,\n    isSelf: true as const,\n    isContact: true as const,\n    accessHash: \"12345\",\n    firstName: \"Test\",\n    lastName: \"User\",\n    phoneNumber: \"+1234567890\",\n    type: \"userTypeRegular\" as const,\n  };\n\n  // Set up basic mock state for main app functionality\n  const updatedGlobal: GlobalState = {\n    ...global,\n    currentUserId: mockUserId,\n    authState: \"authorizationStateReady\",\n    isSynced: true,\n    isInited: true,\n    users: {\n      ...global.users,\n      byId: {\n        ...global.users.byId,\n        [mockUserId]: mockUser,\n      },\n    },\n    chats: {\n      ...global.chats,\n      listIds: {\n        active: [],\n        archived: [],\n        saved: [],\n      },\n      isFullyLoaded: {\n        active: true,\n        archived: true,\n        saved: true,\n      },\n      totalCount: {\n        all: 0,\n        archived: 0,\n        saved: 0,\n      },\n    },\n  };\n\n  setGlobal(updatedGlobal);\n}\n\nconst App: FC<StateProps> = ({\n  authState,\n  isScreenLocked,\n  hasPasscode,\n  isInactiveAuth,\n  hasWebAuthTokenFailed,\n  isTestServer,\n  theme,\n}) => {\n  const [isInactive, markInactive, unmarkInactive] = useFlag(false);\n  const { isMobile } = useAppLayout();\n  const isMobileOs = PLATFORM_ENV === \"iOS\" || PLATFORM_ENV === \"Android\";\n\n  useEffect(() => {\n    if (IS_INSTALL_PROMPT_SUPPORTED) {\n      setupBeforeInstallPrompt();\n    }\n  }, []);\n\n  useEffect(() => {\n    const hash = getInitialLocationHash();\n    // If there is no stored session on first slot, navigate to any other slot with stored session\n    if (!hasStoredSession() && !ACCOUNT_SLOT && !hash) {\n      const accounts = getAccountsInfo();\n      Object.keys(accounts)\n        .map(Number)\n        .sort((a, b) => b - a)\n        .forEach((key) => {\n          const slot = Number(key);\n          const account = accounts[slot];\n          if (account) {\n            const url = getAccountSlotUrl(slot);\n            window.location.href = `${url}#${hash || \"login\"}`;\n          }\n        });\n    }\n\n    // TODO[Passcode]: Remove when multiacc passcode is implemented\n    const checkMultiaccPasscode = async () => {\n      if (\n        checkSessionLocked() &&\n        ACCOUNT_SLOT &&\n        (await hasEncryptedSession())\n      ) {\n        const url = getAccountSlotUrl(1);\n        window.location.href = url;\n      }\n    };\n    checkMultiaccPasscode();\n  }, []);\n\n  // Prevent drop on elements that do not accept it\n  useEffect(() => {\n    const body = document.body;\n    const handleDrag = (e: DragEvent) => {\n      e.preventDefault();\n      if (!e.dataTransfer) return;\n      if (!(e.target as HTMLElement).dataset.dropzone) {\n        e.dataTransfer.dropEffect = \"none\";\n      } else {\n        e.dataTransfer.dropEffect = \"copy\";\n      }\n    };\n    const handleDrop = (e: DragEvent) => {\n      e.preventDefault();\n    };\n    body.addEventListener(\"drop\", handleDrop);\n    body.addEventListener(\"dragover\", handleDrag);\n    body.addEventListener(\"dragenter\", handleDrag);\n\n    return () => {\n      body.removeEventListener(\"drop\", handleDrop);\n      body.removeEventListener(\"dragover\", handleDrag);\n      body.removeEventListener(\"dragenter\", handleDrag);\n    };\n  }, []);\n\n  // Call checkWallet when in dev:WalletCreated mode and authState is WalletCreated\n  useEffect(() => {\n    if (IS_WALLET_CREATED && authState === \"authorizationStateWalletCreated\") {\n      const { checkWallet } = getActions();\n      const global = getGlobal();\n\n      console.log(\"Dev:WalletCreated mode - calling checkWallet\", {\n        authState,\n        currentUserId: global.currentUserId,\n      });\n\n      // Use a mock user ID for testing, or actual user ID if available\n      const testUserId = global.currentUserId || \"8214814881\";\n      checkWallet({ telegramUserId: testUserId });\n    }\n  }, [authState]);\n\n  // return <Test />;\n\n  let activeKey: AppScreens;\n  let page: UiLoaderPage | undefined;\n\n  // Check for wallet created state first (highest priority)\n  if (IS_WALLET_CREATED && authState === \"authorizationStateReady\") {\n    // In dev:WalletCreated mode, transition to main when auth is ready\n    page = \"main\";\n    activeKey = AppScreens.main;\n  } else if (IS_WALLET_CREATED) {\n    // Force wallet created screen when using dev:WalletCreated, regardless of actual authState\n    page = \"authWalletCreated\";\n    activeKey = AppScreens.auth;\n  } else if (IS_BYPASS_AUTH) {\n    // Bypass authentication in test mode\n    if (!authState || authState !== \"authorizationStateReady\") {\n      initMockData();\n    }\n    page = \"main\";\n    activeKey = AppScreens.main;\n  } else if (isInactive) {\n    activeKey = AppScreens.inactive;\n  } else if (isScreenLocked) {\n    page = \"lock\";\n    activeKey = AppScreens.lock;\n  } else if (authState) {\n    switch (authState) {\n      case \"authorizationStateWaitPhoneNumber\":\n        page = \"authPhoneNumber\";\n        activeKey = AppScreens.auth;\n        break;\n      case \"authorizationStateWaitCode\":\n        page = \"authCode\";\n        activeKey = AppScreens.auth;\n        break;\n      case \"authorizationStateWaitPassword\":\n        page = \"authPassword\";\n        activeKey = AppScreens.auth;\n        break;\n      case \"authorizationStateWaitRegistration\":\n        activeKey = AppScreens.auth;\n        break;\n      case \"authorizationStateWaitQrCode\":\n        page = \"authQrCode\";\n        activeKey = AppScreens.auth;\n        break;\n      case \"authorizationStateWalletCreated\":\n        page = \"authWalletCreated\";\n        activeKey = AppScreens.auth;\n        break;\n      case \"authorizationStateClosed\":\n      case \"authorizationStateClosing\":\n      case \"authorizationStateLoggingOut\":\n      case \"authorizationStateReady\":\n        page = \"main\";\n        activeKey = AppScreens.main;\n        break;\n    }\n  } else if (hasStoredSession()) {\n    page = \"main\";\n    activeKey = AppScreens.main;\n  } else if (hasPasscode) {\n    activeKey = AppScreens.lock;\n  } else {\n    page = isMobileOs ? \"authPhoneNumber\" : \"authQrCode\";\n    activeKey = AppScreens.auth;\n  }\n\n  if (\n    activeKey !== AppScreens.lock &&\n    activeKey !== AppScreens.inactive &&\n    activeKey !== AppScreens.main &&\n    parseInitialLocationHash()?.tgWebAuthToken &&\n    !hasWebAuthTokenFailed\n  ) {\n    page = \"main\";\n    activeKey = AppScreens.main;\n  }\n\n  useEffect(() => {\n    updateSizes();\n  }, []);\n\n  useEffect(() => {\n    if (isInactiveAuth) {\n      document.title = INACTIVE_PAGE_TITLE;\n      markInactive();\n    } else {\n      document.title = PAGE_TITLE;\n      unmarkInactive();\n    }\n  }, [isInactiveAuth, markInactive, unmarkInactive]);\n\n  const prevActiveKey = usePreviousDeprecated(activeKey);\n\n  function renderContent() {\n    switch (activeKey) {\n      case AppScreens.auth:\n        return <Auth />;\n      case AppScreens.main:\n        return <Main isMobile={isMobile} />;\n      case AppScreens.lock:\n        return <LockScreen isLocked={isScreenLocked} />;\n      case AppScreens.inactive:\n        return <AppInactive />;\n    }\n  }\n\n  useLayoutEffect(() => {\n    document.body.classList.add(styles.bg);\n  }, []);\n\n  useLayoutEffect(() => {\n    document.body.style.setProperty(\n      \"--theme-background-color\",\n      theme === \"dark\" ? DARK_THEME_BG_COLOR : LIGHT_THEME_BG_COLOR\n    );\n  }, [theme]);\n\n  return (\n    <UiLoader page={page} isMobile={isMobile}>\n      <Transition\n        name=\"fade\"\n        activeKey={activeKey}\n        shouldCleanup\n        className={buildClassName(\n          \"full-height\",\n          (activeKey === AppScreens.auth ||\n            prevActiveKey === AppScreens.auth) &&\n            \"is-auth\"\n        )}\n        renderCount={TRANSITION_RENDER_COUNT}\n      >\n        {renderContent}\n      </Transition>\n      {activeKey === AppScreens.auth && isTestServer && (\n        <div className=\"test-server-badge\">Test server</div>\n      )}\n    </UiLoader>\n  );\n};\n\nexport default withGlobal((global): StateProps => {\n  return {\n    authState: global.authState,\n    isScreenLocked: global.passcode?.isScreenLocked,\n    hasPasscode: global.passcode?.hasPasscode,\n    isInactiveAuth: selectTabState(global).isInactive,\n    hasWebAuthTokenFailed:\n      global.hasWebAuthTokenFailed || global.hasWebAuthTokenPasswordRequired,\n    theme: selectTheme(global),\n    isTestServer: global.config?.isTestServer,\n  };\n})(App);\n","// extracted by mini-css-extract-plugin\nexport {};","import \"../../global/actions/initial\";\n\nimport type { FC } from \"../../lib/teact/teact\";\nimport { memo, useRef } from \"../../lib/teact/teact\";\nimport { getActions, withGlobal } from \"../../global\";\n\nimport type { GlobalState } from \"../../global/types\";\n\nimport { PLATFORM_ENV } from \"../../util/browser/windowEnvironment\";\n\nimport useCurrentOrPrev from \"../../hooks/useCurrentOrPrev\";\nimport useElectronDrag from \"../../hooks/useElectronDrag\";\nimport useHistoryBack from \"../../hooks/useHistoryBack\";\n\nimport Transition from \"../ui/Transition\";\nimport AuthCode from \"./AuthCode.async\";\nimport AuthPassword from \"./AuthPassword.async\";\nimport AuthPhoneNumber from \"./AuthPhoneNumber\";\nimport AuthQrCode from \"./AuthQrCode\";\nimport AuthRegister from \"./AuthRegister.async\";\nimport AuthWalletCreated from \"./AuthWalletCreated\";\n\nimport \"./Auth.scss\";\n\ntype StateProps = Pick<GlobalState, \"authState\">;\n\nconst Auth: FC<StateProps> = ({ authState }) => {\n  const { returnToAuthPhoneNumber, goToAuthQrCode } = getActions();\n\n  const isMobile = PLATFORM_ENV === \"iOS\" || PLATFORM_ENV === \"Android\";\n\n  const handleChangeAuthorizationMethod = () => {\n    if (!isMobile) {\n      goToAuthQrCode();\n    } else {\n      returnToAuthPhoneNumber();\n    }\n  };\n\n  useHistoryBack({\n    isActive:\n      (!isMobile && authState === \"authorizationStateWaitPhoneNumber\") ||\n      (isMobile && authState === \"authorizationStateWaitQrCode\"),\n    onBack: handleChangeAuthorizationMethod,\n  });\n\n  const containerRef = useRef<HTMLDivElement>();\n  useElectronDrag(containerRef);\n\n  // For animation purposes\n  const renderingAuthState = useCurrentOrPrev(\n    authState !== \"authorizationStateReady\" ? authState : undefined,\n    true\n  );\n\n  function getScreen() {\n    switch (renderingAuthState) {\n      case \"authorizationStateWaitCode\":\n        return <AuthCode />;\n      case \"authorizationStateWaitPassword\":\n        return <AuthPassword />;\n      case \"authorizationStateWaitRegistration\":\n        return <AuthRegister />;\n      case \"authorizationStateWaitPhoneNumber\":\n        return <AuthPhoneNumber />;\n      case \"authorizationStateWaitQrCode\":\n        return <AuthQrCode />;\n      case \"authorizationStateWalletCreated\":\n        return <AuthWalletCreated />;\n      default:\n        return isMobile ? <AuthPhoneNumber /> : <AuthQrCode />;\n    }\n  }\n\n  function getActiveKey() {\n    switch (renderingAuthState) {\n      case \"authorizationStateWaitCode\":\n        return 0;\n      case \"authorizationStateWaitPassword\":\n        return 1;\n      case \"authorizationStateWaitRegistration\":\n        return 2;\n      case \"authorizationStateWaitPhoneNumber\":\n        return 3;\n      case \"authorizationStateWaitQrCode\":\n        return 4;\n      case \"authorizationStateWalletCreated\":\n        return 5;\n      default:\n        return isMobile ? 3 : 4;\n    }\n  }\n\n  return (\n    <Transition\n      activeKey={getActiveKey()}\n      name=\"fade\"\n      className=\"Auth\"\n      ref={containerRef}\n    >\n      {getScreen()}\n    </Transition>\n  );\n};\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      authState: global.authState,\n    };\n  })(Auth)\n);\n","import type { FC } from '../../lib/teact/teact';\n\nimport { Bundles } from '../../util/moduleLoader';\n\nimport useModuleLoader from '../../hooks/useModuleLoader';\n\nimport Loading from '../ui/Loading';\n\nconst AuthCodeAsync: FC = () => {\n  const AuthCode = useModuleLoader(Bundles.Auth, 'AuthCode');\n\n  return AuthCode ? <AuthCode /> : <Loading />;\n};\n\nexport default AuthCodeAsync;\n","import type { FC } from '../../lib/teact/teact';\n\nimport { Bundles } from '../../util/moduleLoader';\n\nimport useModuleLoader from '../../hooks/useModuleLoader';\n\nimport Loading from '../ui/Loading';\n\nconst AuthPasswordAsync: FC = () => {\n  const AuthPassword = useModuleLoader(Bundles.Auth, 'AuthPassword');\n\n  return AuthPassword ? <AuthPassword /> : <Loading />;\n};\n\nexport default AuthPasswordAsync;\n","import type { ChangeEvent } from \"react\";\nimport type { FC } from \"../../lib/teact/teact\";\nimport type React from \"../../lib/teact/teact\";\nimport {\n  memo,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"../../lib/teact/teact\";\nimport { getActions, withGlobal } from \"../../global\";\n\nimport type { ApiCountryCode } from \"../../api/types\";\nimport type { GlobalState } from \"../../global/types\";\n\nimport { requestMeasure } from \"../../lib/fasterdom/fasterdom\";\nimport { IS_SAFARI, IS_TOUCH_ENV } from \"../../util/browser/windowEnvironment\";\nimport { preloadImage } from \"../../util/files\";\nimport preloadFonts from \"../../util/fonts\";\nimport { pick } from \"../../util/iteratees\";\nimport { getAccountSlotUrl } from \"../../util/multiaccount\";\nimport { oldSetLanguage } from \"../../util/oldLangProvider\";\nimport {\n  formatPhoneNumber,\n  getCountryCodeByIso,\n  getCountryFromPhoneNumber,\n} from \"../../util/phoneNumber\";\nimport { navigateBack } from \"./helpers/backNavigation\";\nimport { getSuggestedLanguage } from \"./helpers/getSuggestedLanguage\";\n\nimport useFlag from \"../../hooks/useFlag\";\nimport useLang from \"../../hooks/useLang\";\nimport useLangString from \"../../hooks/useLangString\";\nimport useLastCallback from \"../../hooks/useLastCallback\";\nimport useMultiaccountInfo from \"../../hooks/useMultiaccountInfo\";\n\nimport Icon from \"../common/icons/Icon\";\nimport Button from \"../ui/Button\";\nimport Checkbox from \"../ui/Checkbox\";\nimport InputText from \"../ui/InputText\";\nimport Loading from \"../ui/Loading\";\nimport CountryCodeInput from \"./CountryCodeInput\";\n\nimport monkeyPath from \"../../assets/monkey.svg\";\nimport phoneLoginIcon from \"../../../public/svg/phone-login.svg\";\n\ntype StateProps = Pick<\n  GlobalState,\n  | \"connectionState\"\n  | \"authState\"\n  | \"authPhoneNumber\"\n  | \"authIsLoading\"\n  | \"authIsLoadingQrCode\"\n  | \"authErrorKey\"\n  | \"authRememberMe\"\n  | \"authNearestCountry\"\n> & {\n  language?: string;\n  phoneCodeList: ApiCountryCode[];\n  isTestServer?: boolean;\n};\n\nconst MIN_NUMBER_LENGTH = 7;\n\nlet isPreloadInitiated = false;\n\nconst AuthPhoneNumber: FC<StateProps> = ({\n  connectionState,\n  authState,\n  authPhoneNumber,\n  authIsLoading,\n  authIsLoadingQrCode,\n  authErrorKey,\n  authRememberMe,\n  authNearestCountry,\n  phoneCodeList,\n  language,\n  isTestServer,\n}) => {\n  const {\n    setAuthPhoneNumber,\n    setAuthRememberMe,\n    loadNearestCountry,\n    loadCountryList,\n    clearAuthErrorKey,\n    goToAuthQrCode,\n    setSharedSettingOption,\n  } = getActions();\n\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n  const suggestedLanguage = getSuggestedLanguage();\n\n  const isConnected = connectionState === \"connectionStateReady\";\n  const continueText = useLangString(\n    \"AuthContinueOnThisLanguage\",\n    suggestedLanguage\n  );\n  const [country, setCountry] = useState<ApiCountryCode | undefined>();\n  const [phoneNumber, setPhoneNumber] = useState<string | undefined>();\n  const [isTouched, setIsTouched] = useState(false);\n  const [lastSelection, setLastSelection] = useState<\n    [number, number] | undefined\n  >();\n  const [isLoading, markIsLoading, unmarkIsLoading] = useFlag();\n\n  const accountsInfo = useMultiaccountInfo();\n  const hasActiveAccount = Object.values(accountsInfo).length > 0;\n  const phoneNumberSlots = useMemo(\n    () =>\n      Object.entries(accountsInfo)\n        .filter(([, info]) => info.isTest === isTestServer)\n        .reduce((acc, [key, { phone }]) => {\n          if (phone) acc[phone] = Number(key);\n          return acc;\n        }, {} as Record<string, number>),\n    [accountsInfo, isTestServer]\n  );\n\n  const fullNumber = country\n    ? `+${country.countryCode} ${phoneNumber || \"\"}`\n    : phoneNumber;\n  const canSubmit =\n    fullNumber && fullNumber.replace(/[^\\d]+/g, \"\").length >= MIN_NUMBER_LENGTH;\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, [country]);\n\n  useEffect(() => {\n    if (isConnected && !authNearestCountry) {\n      loadNearestCountry();\n    }\n  }, [isConnected, authNearestCountry]);\n\n  useEffect(() => {\n    if (isConnected) {\n      loadCountryList({ langCode: language });\n    }\n  }, [isConnected, language]);\n\n  useEffect(() => {\n    if (authNearestCountry && phoneCodeList && !country && !isTouched) {\n      setCountry(getCountryCodeByIso(phoneCodeList, authNearestCountry));\n    }\n  }, [country, authNearestCountry, isTouched, phoneCodeList]);\n\n  const parseFullNumber = useLastCallback((newFullNumber: string) => {\n    if (!newFullNumber.length) {\n      setPhoneNumber(\"\");\n    }\n\n    const suggestedCountry =\n      phoneCodeList && getCountryFromPhoneNumber(phoneCodeList, newFullNumber);\n\n    // Any phone numbers should be allowed, in some cases ignoring formatting\n    const selectedCountry =\n      !country ||\n      (suggestedCountry && suggestedCountry.iso2 !== country.iso2) ||\n      (!suggestedCountry && newFullNumber.length)\n        ? suggestedCountry\n        : country;\n\n    if (\n      !country ||\n      !selectedCountry ||\n      (selectedCountry && selectedCountry.iso2 !== country.iso2)\n    ) {\n      setCountry(selectedCountry);\n    }\n    setPhoneNumber(formatPhoneNumber(newFullNumber, selectedCountry));\n  });\n\n  const handleLangChange = useLastCallback(() => {\n    markIsLoading();\n\n    void oldSetLanguage(suggestedLanguage, () => {\n      unmarkIsLoading();\n\n      setSharedSettingOption({ language: suggestedLanguage });\n    });\n  });\n\n  useEffect(() => {\n    if (phoneNumber === undefined && authPhoneNumber) {\n      parseFullNumber(authPhoneNumber);\n    }\n  }, [authPhoneNumber, phoneNumber, parseFullNumber]);\n\n  useLayoutEffect(() => {\n    if (inputRef.current && lastSelection) {\n      inputRef.current.setSelectionRange(...lastSelection);\n    }\n  }, [lastSelection]);\n\n  const isJustPastedRef = useRef(false);\n  const handlePaste = useLastCallback(() => {\n    isJustPastedRef.current = true;\n    requestMeasure(() => {\n      isJustPastedRef.current = false;\n    });\n  });\n\n  const handleBackNavigation = useLastCallback(() => {\n    navigateBack();\n  });\n\n  const handleCountryChange = useLastCallback((value: ApiCountryCode) => {\n    setCountry(value);\n    setPhoneNumber(\"\");\n  });\n\n  const handlePhoneNumberChange = useLastCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      if (authErrorKey) {\n        clearAuthErrorKey();\n      }\n\n      // This is for further screens. We delay it until user input to speed up the initial loading.\n      if (!isPreloadInitiated) {\n        isPreloadInitiated = true;\n        preloadFonts();\n        void preloadImage(monkeyPath);\n      }\n\n      const { value, selectionStart, selectionEnd } = e.target;\n      setLastSelection(\n        selectionStart && selectionEnd && selectionEnd < value.length\n          ? [selectionStart, selectionEnd]\n          : undefined\n      );\n\n      setIsTouched(true);\n\n      const shouldFixSafariAutoComplete =\n        IS_SAFARI &&\n        country &&\n        fullNumber !== undefined &&\n        value.length - fullNumber.length > 1 &&\n        !isJustPastedRef.current;\n      parseFullNumber(\n        shouldFixSafariAutoComplete ? `${country.countryCode} ${value}` : value\n      );\n    }\n  );\n\n  const handleKeepSessionChange = useLastCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      setAuthRememberMe({ value: e.target.checked });\n    }\n  );\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    if (authIsLoading) {\n      return;\n    }\n\n    const adaptedPhoneNumber = fullNumber?.replace(/[^\\d]/g, \"\");\n    if (adaptedPhoneNumber && phoneNumberSlots[adaptedPhoneNumber]) {\n      window.location.replace(\n        getAccountSlotUrl(phoneNumberSlots[adaptedPhoneNumber])\n      );\n      return;\n    }\n\n    if (canSubmit) {\n      setAuthPhoneNumber({ phoneNumber: fullNumber });\n    }\n  }\n\n  const handleGoToAuthQrCode = useLastCallback(() => {\n    goToAuthQrCode();\n  });\n\n  const isAuthReady = authState === \"authorizationStateWaitPhoneNumber\";\n\n  return (\n    <div id=\"auth-phone-number-form\" className=\"custom-scroll\">\n      {hasActiveAccount && (\n        <Button\n          size=\"smaller\"\n          round\n          color=\"translucent\"\n          className=\"auth-close\"\n          onClick={handleBackNavigation}\n        >\n          <Icon name=\"close\" />\n        </Button>\n      )}\n      <div className=\"auth-container\">\n        <div className=\"auth-header\">\n          <div className=\"auth-header-title\">M7 Log in</div>\n        </div>\n        <div className=\"auth-form phone\">\n          <img src={phoneLoginIcon} alt=\"Phone Login\" className=\"auth-logo\" />\n          <h1 className=\"auth-title\">{lang(\"AuthTitle\")}</h1>\n          <p className=\"note\">{lang(\"StartText\")}</p>\n          <form className=\"form\" action=\"\" onSubmit={handleSubmit}>\n            <CountryCodeInput\n              id=\"sign-in-phone-code\"\n              value={country}\n              isLoading={!authNearestCountry && !country}\n              onChange={handleCountryChange}\n            />\n            <InputText\n              ref={inputRef}\n              id=\"sign-in-phone-number\"\n              label={lang(\"LoginPhonePlaceholder\")}\n              value={fullNumber}\n              error={authErrorKey && lang.withRegular(authErrorKey)}\n              inputMode=\"tel\"\n              onChange={handlePhoneNumberChange}\n              onPaste={IS_SAFARI ? handlePaste : undefined}\n            />\n            <Checkbox\n              id=\"sign-in-keep-session\"\n              label={lang(\"AuthKeepSignedIn\")}\n              checked={Boolean(authRememberMe)}\n              onChange={handleKeepSessionChange}\n            />\n            {canSubmit &&\n              (isAuthReady ? (\n                <Button\n                  size=\"smaller\"\n                  type=\"submit\"\n                  ripple\n                  isLoading={authIsLoading}\n                >\n                  {lang(\"LoginNext\")}\n                </Button>\n              ) : (\n                <Loading />\n              ))}\n\n            {suggestedLanguage &&\n              suggestedLanguage !== language &&\n              continueText && (\n                <Button\n                  size=\"smaller\"\n                  isText\n                  isLoading={isLoading}\n                  onClick={handleLangChange}\n                >\n                  {continueText}\n                </Button>\n              )}\n          </form>\n        </div>\n        <div className=\"auth-footer\">\n          <Button\n            className=\"login-button\"\n            isLoading={authIsLoadingQrCode}\n            onClick={handleGoToAuthQrCode}\n          >\n            {lang(\"LoginQRLogin\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      sharedState: {\n        settings: { language },\n      },\n      countryList: { phoneCodes: phoneCodeList },\n      config,\n    } = global;\n\n    return {\n      ...pick(global, [\n        \"connectionState\",\n        \"authState\",\n        \"authPhoneNumber\",\n        \"authIsLoading\",\n        \"authIsLoadingQrCode\",\n        \"authErrorKey\",\n        \"authRememberMe\",\n        \"authNearestCountry\",\n      ]),\n      language,\n      phoneCodeList,\n      isTestServer: config?.isTestServer,\n    };\n  })(AuthPhoneNumber)\n);\n","import { memo, useLayoutEffect, useRef } from \"../../lib/teact/teact\";\nimport { getActions, withGlobal } from \"../../global\";\n\nimport type { GlobalState } from \"../../global/types\";\n\nimport { STRICTERDOM_ENABLED } from \"../../config\";\nimport { disableStrict, enableStrict } from \"../../lib/fasterdom/stricterdom\";\nimport { selectSharedSettings } from \"../../global/selectors/sharedState\";\nimport buildClassName from \"../../util/buildClassName\";\nimport { oldSetLanguage } from \"../../util/oldLangProvider\";\nimport { LOCAL_TGS_URLS } from \"../common/helpers/animatedAssets\";\nimport { navigateBack } from \"./helpers/backNavigation\";\nimport { getSuggestedLanguage } from \"./helpers/getSuggestedLanguage\";\n\nimport useAsync from \"../../hooks/useAsync\";\nimport useFlag from \"../../hooks/useFlag\";\nimport useLang from \"../../hooks/useLang\";\nimport useLangString from \"../../hooks/useLangString\";\nimport useLastCallback from \"../../hooks/useLastCallback\";\nimport useMediaTransitionDeprecated from \"../../hooks/useMediaTransitionDeprecated\";\nimport useMultiaccountInfo from \"../../hooks/useMultiaccountInfo\";\n\nimport AnimatedIcon from \"../common/AnimatedIcon\";\nimport Icon from \"../common/icons/Icon\";\nimport Button from \"../ui/Button\";\nimport Loading from \"../ui/Loading\";\n\nimport blankUrl from \"../../assets/blank.png\";\n\ntype StateProps = Pick<\n  GlobalState,\n  \"connectionState\" | \"authState\" | \"authQrCode\"\n> & {\n  language?: string;\n};\n\nconst DATA_PREFIX = \"tg://login?token=\";\nconst QR_SIZE = 126;\nconst QR_PLANE_SIZE = 24;\nconst QR_CODE_MUTATION_DURATION = 50; // The library is asynchronous and we need to wait for its mutation code\n\nlet qrCodeStylingPromise: Promise<typeof import(\"qr-code-styling\")> | undefined;\n\nfunction ensureQrCodeStyling() {\n  if (!qrCodeStylingPromise) {\n    qrCodeStylingPromise = import(\"qr-code-styling\");\n  }\n  return qrCodeStylingPromise;\n}\n\nconst AuthCode = ({\n  connectionState,\n  authState,\n  authQrCode,\n  language,\n}: StateProps) => {\n  const { returnToAuthPhoneNumber, setSharedSettingOption } = getActions();\n\n  const suggestedLanguage = getSuggestedLanguage();\n  const lang = useLang();\n  const qrCodeRef = useRef<HTMLDivElement>();\n\n  const isConnected = connectionState === \"connectionStateReady\";\n  const continueText = useLangString(\n    \"AuthContinueOnThisLanguage\",\n    suggestedLanguage\n  );\n  const [isLoading, markIsLoading, unmarkIsLoading] = useFlag();\n  const [isQrMounted, markQrMounted, unmarkQrMounted] = useFlag();\n\n  const accountsInfo = useMultiaccountInfo();\n  const hasActiveAccount = Object.values(accountsInfo).length > 0;\n\n  const { result: qrCode } = useAsync(async () => {\n    const QrCodeStyling = (await ensureQrCodeStyling()).default;\n    return new QrCodeStyling({\n      width: QR_SIZE,\n      height: QR_SIZE,\n      image: blankUrl,\n      margin: 10,\n      type: \"svg\",\n      dotsOptions: {\n        type: \"rounded\",\n      },\n      cornersSquareOptions: {\n        type: \"extra-rounded\",\n      },\n      imageOptions: {\n        imageSize: 0.4,\n        margin: 8,\n      },\n      qrOptions: {\n        errorCorrectionLevel: \"M\",\n      },\n    });\n  }, []);\n\n  const transitionClassNames = useMediaTransitionDeprecated(isQrMounted);\n\n  useLayoutEffect(() => {\n    if (!authQrCode || !qrCode) {\n      return () => {\n        unmarkQrMounted();\n      };\n    }\n\n    if (!isConnected) {\n      return undefined;\n    }\n\n    const container = qrCodeRef.current!;\n    const data = `${DATA_PREFIX}${authQrCode.token}`;\n\n    if (STRICTERDOM_ENABLED) {\n      disableStrict();\n    }\n\n    qrCode.update({\n      data,\n    });\n\n    if (!isQrMounted) {\n      qrCode.append(container);\n      markQrMounted();\n    }\n\n    if (STRICTERDOM_ENABLED) {\n      setTimeout(() => {\n        enableStrict();\n      }, QR_CODE_MUTATION_DURATION);\n    }\n\n    return undefined;\n  }, [isConnected, authQrCode, isQrMounted, qrCode]);\n\n  const handleBackNavigation = useLastCallback(() => {\n    navigateBack();\n  });\n\n  const handleLangChange = useLastCallback(() => {\n    markIsLoading();\n\n    void oldSetLanguage(suggestedLanguage, () => {\n      unmarkIsLoading();\n\n      setSharedSettingOption({ language: suggestedLanguage });\n    });\n  });\n\n  const handleReturnToAuthPhoneNumber = useLastCallback(() => {\n    returnToAuthPhoneNumber();\n  });\n\n  const isAuthReady = authState === \"authorizationStateWaitQrCode\";\n\n  return (\n    <div id=\"auth-qr-form\" className=\"custom-scroll\">\n      {hasActiveAccount && (\n        <Button\n          size=\"smaller\"\n          round\n          color=\"translucent\"\n          className=\"auth-close\"\n          onClick={handleBackNavigation}\n        >\n          <Icon name=\"close\" />\n        </Button>\n      )}\n      <div className=\"auth-container\">\n        <div className=\"auth-header\">\n          <div className=\"auth-header-title\">M7 Log in</div>\n        </div>\n        <div className=\"auth-form qr\">\n          <div className=\"qr-outer\">\n            <div\n              className={buildClassName(\"qr-inner\", transitionClassNames)}\n              key=\"qr-inner\"\n            >\n              <div\n                key=\"qr-container\"\n                className=\"qr-container\"\n                ref={qrCodeRef}\n                style={`width: ${QR_SIZE}px; height: ${QR_SIZE}px`}\n              />\n              <AnimatedIcon\n                tgsUrl={LOCAL_TGS_URLS.QrPlane}\n                size={QR_PLANE_SIZE}\n                className=\"qr-plane\"\n                nonInteractive\n                noLoop={false}\n              />\n            </div>\n            {!isQrMounted && (\n              <div className=\"qr-loading\">\n                <Loading />\n              </div>\n            )}\n          </div>\n          <h1>{lang(\"LoginQRTitle\")}</h1>\n          <p className=\"qr-subtitle\">{lang(\"LoginQRSubtitle\")}</p>\n          <ol>\n            <li>\n              <span>{lang(\"LoginQRHelp1\")}</span>\n            </li>\n            <li>\n              <span>\n                {lang(\"LoginQRHelp2\", undefined, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </span>\n            </li>\n            <li>\n              <span>{lang(\"LoginQRHelp3\")}</span>\n            </li>\n          </ol>\n          {suggestedLanguage &&\n            suggestedLanguage !== language &&\n            continueText && (\n              <Button\n                size=\"smaller\"\n                isText\n                isLoading={isLoading}\n                onClick={handleLangChange}\n              >\n                {continueText}\n              </Button>\n            )}\n        </div>\n        {isAuthReady && (\n          <div className=\"auth-footer\">\n            <Button\n              className=\"login-button\"\n              onClick={handleReturnToAuthPhoneNumber}\n            >\n              {lang(\"LoginQRCancel\")}\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const { connectionState, authState, authQrCode } = global;\n\n    const { language } = selectSharedSettings(global);\n\n    return {\n      connectionState,\n      authState,\n      authQrCode,\n      language,\n    };\n  })(AuthCode)\n);\n","import type { FC } from '../../lib/teact/teact';\n\nimport { Bundles } from '../../util/moduleLoader';\n\nimport useModuleLoader from '../../hooks/useModuleLoader';\n\nimport Loading from '../ui/Loading';\n\nconst AuthRegisterAsync: FC = () => {\n  const AuthRegister = useModuleLoader(Bundles.Auth, 'AuthRegister');\n\n  return AuthRegister ? <AuthRegister /> : <Loading />;\n};\n\nexport default AuthRegisterAsync;\n","import { memo, useState } from \"../../lib/teact/teact\";\nimport { getActions, withGlobal } from \"../../global\";\nimport axios from \"axios\";\n\nimport type { GlobalState } from \"../../global/types\";\nimport type { ApiUser } from \"../../api/types\";\n\nimport useLang from \"../../hooks/useLang\";\nimport useLastCallback from \"../../hooks/useLastCallback\";\nimport useMultiaccountInfo from \"../../hooks/useMultiaccountInfo\";\n\nimport { VIVA_API_KEY } from \"../../config\";\n\nimport Icon from \"../common/icons/Icon\";\nimport Button from \"../ui/Button\";\n\nimport { navigateBack } from \"./helpers/backNavigation\";\nimport { selectUser } from \"../../global/selectors/users\";\n\ntype StateProps = Pick<\n  GlobalState,\n  \"connectionState\" | \"authState\" | \"currentUserId\"\n> & {\n  currentUser?: ApiUser;\n};\n\nconst AuthWalletCreated = ({\n  connectionState,\n  authState,\n  currentUser,\n}: StateProps) => {\n  const lang = useLang();\n  const [isCreating, setIsCreating] = useState(false);\n  const [walletAddress, setWalletAddress] = useState<string>(\"\");\n  const [privateKey, setPrivateKey] = useState<string>(\"\");\n  const [walletId, setWalletId] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n  const [copySuccess, setCopySuccess] = useState<boolean>(false);\n  const [hasClickedCopy, setHasClickedCopy] = useState<boolean>(false);\n  const [hasConfirmedSaved, setHasConfirmedSaved] = useState<boolean>(false);\n\n  const accountsInfo = useMultiaccountInfo();\n  const hasActiveAccount = Object.values(accountsInfo).length > 0;\n\n  const handleBackNavigation = useLastCallback(() => {\n    navigateBack();\n  });\n\n  const handleContinue = useLastCallback(async () => {\n    // Check if we should use mock data (when APP_MOCKED_CLIENT=1)\n    const isMocked = process.env.APP_MOCKED_CLIENT === \"1\";\n\n    // Only check for currentUser if not in mock mode\n    if (!isMocked && !currentUser) {\n      setError(\"No user data available\");\n      return;\n    }\n\n    setIsCreating(true);\n    setError(\"\");\n\n    try {\n      if (isMocked) {\n        // Mock delay to simulate API call\n        await new Promise((resolve) => setTimeout(resolve, 2000));\n\n        // Mock wallet data for testing\n        const mockWalletData = {\n          walletAddress: \"0x742d35Cc6e6B8b9f8a3D8C4e2b5c7a8F9b2e6c8d\",\n          privateKey:\n            \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\n          walletId: \"turnkey-wallet-\" + Math.random().toString(36).substr(2, 9),\n        };\n\n        setWalletAddress(mockWalletData.walletAddress);\n        setPrivateKey(mockWalletData.privateKey);\n        setWalletId(mockWalletData.walletId);\n\n        console.log(\"Mock wallet created:\", mockWalletData);\n      } else {\n        // Call the backend to create Turnkey wallet\n        const response = await axios.post(\n          \"http://localhost:8888/user/create-wallet\",\n          {\n            telegramUserId: currentUser?.id,\n            telegramAccessHash: currentUser?.accessHash,\n            telegramPhoneNumber: currentUser?.phoneNumber,\n            telegramFirstName: currentUser?.firstName,\n            telegramLastName: currentUser?.lastName,\n            telegramUsername: currentUser?.usernames?.[0]?.username,\n            telegramIsPremium: currentUser?.isPremium,\n            telegramIsVerified: currentUser?.isVerified,\n            telegramIsContact: currentUser?.isContact,\n            telegramIsSelf: currentUser?.isSelf,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"x-api-key\": VIVA_API_KEY, // Add API key if required\n            },\n          }\n        );\n\n        setWalletAddress(response.data.walletAddress);\n        setPrivateKey(response.data.privateKey);\n        setWalletId(response.data.walletId);\n      }\n\n      // No automatic navigation - user must click Continue button\n    } catch (err) {\n      console.error(\"Failed to create wallet:\", err);\n      if (axios.isAxiosError(err)) {\n        const message =\n          err.response?.data?.message ||\n          err.message ||\n          \"Failed to create wallet\";\n        setError(message);\n      } else {\n        setError(\n          err instanceof Error ? err.message : \"Failed to create wallet\"\n        );\n      }\n    } finally {\n      setIsCreating(false);\n    }\n  });\n\n  const handleCopyWalletAddress = useLastCallback(() => {\n    if (navigator.clipboard && walletAddress) {\n      navigator.clipboard.writeText(walletAddress);\n    }\n  });\n\n  const handleCopyPrivateKey = useLastCallback(() => {\n    if (navigator.clipboard && privateKey) {\n      navigator.clipboard.writeText(privateKey);\n    }\n  });\n\n  const handleCopyAllPrivateKeys = useLastCallback(async () => {\n    if (navigator.clipboard && walletAddress && privateKey) {\n      const allKeys = `Wallet Address: ${walletAddress}\\nPrivate Key: ${privateKey}`;\n      await navigator.clipboard.writeText(allKeys);\n      setCopySuccess(true);\n      setHasClickedCopy(true);\n\n      // Reset after 2 seconds\n      setTimeout(() => {\n        setCopySuccess(false);\n      }, 2000);\n    }\n  });\n\n  const handleProceedToApp = useLastCallback(() => {\n    // Transition to main app by setting auth state to ready\n    const { apiUpdate } = getActions();\n    apiUpdate({\n      \"@type\": \"updateAuthorizationState\",\n      authorizationState: \"authorizationStateReady\",\n    });\n  });\n\n  const handleCheckboxChange = useLastCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setHasConfirmedSaved(e.target.checked);\n    }\n  );\n\n  return (\n    <div id=\"auth-wallet-created-form\" className=\"custom-scroll\">\n      {hasActiveAccount && (\n        <Button\n          size=\"smaller\"\n          round\n          color=\"translucent\"\n          className=\"auth-close\"\n          onClick={handleBackNavigation}\n        >\n          <Icon name=\"close\" />\n        </Button>\n      )}\n      <div className=\"auth-container\">\n        <div className=\"auth-header\">\n          <div className=\"auth-header-title\">Wallet created</div>\n        </div>\n        <div className=\"auth-form wallet\">\n          <div className=\"wallet-success-icon\">\n            <img src=\"./svg/wallet-created.svg\" alt=\"Wallet Created\" />\n          </div>\n          <h1 className=\"auth-title\">\n            {isCreating\n              ? \"Creating Wallet...\"\n              : walletAddress\n              ? \"Save your private keys\"\n              : lang(\"WalletCreatedTitle\")}\n          </h1>\n          <p className=\"note\">\n            {isCreating\n              ? \"Creating your secure Turnkey wallet...\"\n              : walletAddress\n              ? \"These are your private keys. Please keep them safe.\"\n              : lang(\"WalletCreatedMessage\")}\n          </p>\n\n          {error && (\n            <div className=\"error-message\" data-error=\"true\">\n              {error}\n            </div>\n          )}\n\n          {walletAddress && (\n            <div className=\"private-keys-section\">\n              <div className=\"private-key-item\">\n                <div className=\"private-key-label\">Wallet Address:</div>\n                <div className=\"private-key-value\">\n                  <span className=\"private-key-text\">{walletAddress}</span>\n                </div>\n              </div>\n\n              {privateKey && (\n                <div className=\"private-key-item\">\n                  <div className=\"private-key-label\">Private Key:</div>\n                  <div className=\"private-key-value\">\n                    <span className=\"private-key-text private-key-sensitive\">\n                      {privateKey}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {walletAddress && (\n            <div className=\"copy-all-keys-container\">\n              <div\n                className={`copy-all-keys-button ${\n                  copySuccess ? \"success\" : \"\"\n                }`}\n                onClick={handleCopyAllPrivateKeys}\n              >\n                <Icon name={copySuccess ? \"check\" : \"copy\"} />\n                {copySuccess ? \"Copied!\" : \"Copy private keys\"}\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"auth-footer\">\n          {hasClickedCopy && (\n            <div className=\"private-keys-warning\">\n              <div className=\"checkbox-container\">\n                <input\n                  type=\"checkbox\"\n                  id=\"keys-saved-checkbox\"\n                  className=\"keys-saved-checkbox\"\n                  onChange={handleCheckboxChange}\n                  checked={hasConfirmedSaved}\n                />\n                <label htmlFor=\"keys-saved-checkbox\" className=\"checkbox-label\">\n                  I have saved my private keys\n                </label>\n              </div>\n              <p className=\"warning-subtitle\">\n                This is your final chance to save these, you will not be able to\n                retrieve them again.\n              </p>\n            </div>\n          )}\n          <Button\n            className={`login-button ${\n              walletAddress && hasClickedCopy && !hasConfirmedSaved\n                ? \"disabled\"\n                : \"\"\n            }`}\n            onClick={walletAddress ? handleProceedToApp : handleContinue}\n            disabled={\n              isCreating ||\n              ((walletAddress && hasClickedCopy && !hasConfirmedSaved) as any)\n            }\n          >\n            {isCreating\n              ? \"Creating...\"\n              : walletAddress\n              ? \"Continue to App\"\n              : \"Create Wallet\"}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const currentUser = global.currentUserId\n      ? selectUser(global, global.currentUserId)\n      : undefined;\n\n    return {\n      connectionState: global.connectionState,\n      authState: global.authState,\n      currentUserId: global.currentUserId,\n      currentUser,\n    };\n  })(AuthWalletCreated)\n);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  memo, useCallback, useRef, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiCountryCode } from '../../api/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { IS_EMOJI_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport { isoToEmoji } from '../../util/emoji/emoji';\nimport { prepareSearchWordsForNeedle } from '../../util/searchWords';\nimport renderText from '../common/helpers/renderText';\n\nimport useLang from '../../hooks/useLang';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport MenuItem from '../ui/MenuItem';\nimport Spinner from '../ui/Spinner';\n\nimport './CountryCodeInput.scss';\n\ntype StateProps = {\n  phoneCodeList: ApiCountryCode[];\n};\n\ntype OwnProps = {\n  id: string;\n  value?: ApiCountryCode;\n  isLoading?: boolean;\n  onChange: (value: ApiCountryCode) => void;\n};\n\nconst MENU_HIDING_DURATION = 200 + ANIMATION_END_DELAY;\nconst SELECT_TIMEOUT = 50;\n\nconst CountryCodeInput: FC<OwnProps & StateProps> = ({\n  id,\n  value,\n  isLoading,\n  onChange,\n  phoneCodeList,\n}) => {\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n\n  const [filter, setFilter] = useState<string | undefined>();\n  const [filteredList, setFilteredList] = useState<ApiCountryCode[]>([]);\n\n  const updateFilter = useCallback((filterValue?: string) => {\n    setFilter(filterValue);\n    setFilteredList(getFilteredList(phoneCodeList, filterValue));\n  }, [phoneCodeList]);\n\n  useSyncEffect(([prevPhoneCodeList]) => {\n    if (!prevPhoneCodeList?.length && phoneCodeList.length) {\n      setFilteredList(getFilteredList(phoneCodeList, filter));\n    }\n  }, [phoneCodeList, filter]);\n\n  const handleChange = useCallback((country: ApiCountryCode) => {\n    onChange(country);\n\n    setTimeout(() => updateFilter(undefined), MENU_HIDING_DURATION);\n  }, [onChange, updateFilter]);\n\n  const handleInput = useCallback((e: React.FormEvent<HTMLInputElement>) => {\n    updateFilter(e.currentTarget.value);\n  }, [updateFilter]);\n\n  const handleInputKeyDown = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.keyCode !== 8) {\n      return;\n    }\n\n    const target = e.currentTarget;\n    if (value && filter === undefined) {\n      target.value = '';\n    }\n\n    updateFilter(target.value);\n  }, [filter, updateFilter, value]);\n\n  const CodeInput: FC<{ onTrigger: () => void; isOpen?: boolean }> = useCallback(({ onTrigger, isOpen }) => {\n    const handleTrigger = () => {\n      if (isOpen) {\n        return;\n      }\n\n      setTimeout(() => {\n        inputRef.current!.select();\n      }, SELECT_TIMEOUT);\n\n      onTrigger();\n\n      const formEl = document.getElementById('auth-phone-number-form')!;\n      formEl.scrollTo({ top: formEl.scrollHeight, behavior: 'smooth' });\n    };\n\n    const handleCodeInput = (e: React.FormEvent<HTMLInputElement>) => {\n      handleInput(e);\n      handleTrigger();\n    };\n\n    const emoji = value && IS_EMOJI_SUPPORTED && isoToEmoji(value.iso2);\n    const name = value?.name || value?.defaultName || '';\n    const inputValue = filter ?? [emoji, name].filter(Boolean).join(' ');\n\n    return (\n      <div className={buildClassName('input-group', value && 'touched')}>\n        <input\n          ref={inputRef}\n          className={buildClassName('form-control', isOpen && 'focus')}\n          type=\"text\"\n          id={id}\n          value={inputValue}\n          autoComplete=\"off\"\n          onClick={handleTrigger}\n          onFocus={handleTrigger}\n          onInput={handleCodeInput}\n          onKeyDown={handleInputKeyDown}\n        />\n        <label>{lang('LoginSelectCountryTitle')}</label>\n        {isLoading ? (\n          <Spinner color=\"black\" />\n        ) : (\n          <i onClick={handleTrigger} className={buildClassName('css-icon-down', isOpen && 'open')} />\n        )}\n      </div>\n    );\n  }, [filter, handleInput, handleInputKeyDown, id, isLoading, lang, value]);\n\n  return (\n    <DropdownMenu\n      className=\"CountryCodeInput\"\n      trigger={CodeInput}\n    >\n      {filteredList\n        .map((country: ApiCountryCode) => (\n          <MenuItem\n            key={`${country.iso2}-${country.countryCode}`}\n            className={value && country.iso2 === value.iso2 ? 'selected' : ''}\n\n            onClick={() => handleChange(country)}\n          >\n            <span className=\"country-flag\">{renderText(isoToEmoji(country.iso2), ['hq_emoji'])}</span>\n            <span className=\"country-name\">{country.name || country.defaultName}</span>\n            <span className=\"country-code\">\n              +\n              {country.countryCode}\n            </span>\n          </MenuItem>\n        ))}\n      {!filteredList.length && (\n        <MenuItem\n          key=\"no-results\"\n          className=\"no-results\"\n          disabled\n        >\n          <span>{lang('CountryNone')}</span>\n        </MenuItem>\n      )}\n    </DropdownMenu>\n  );\n};\n\nfunction getFilteredList(countryList: ApiCountryCode[], filter = ''): ApiCountryCode[] {\n  if (!filter.length) {\n    return countryList;\n  }\n\n  const searchWords = prepareSearchWordsForNeedle(filter);\n\n  return countryList.filter((country) => (\n    searchWords(country.defaultName) || (country.name && searchWords(country.name))\n  ));\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { countryList: { phoneCodes: phoneCodeList } } = global;\n    return {\n      phoneCodeList,\n    };\n  },\n)(CountryCodeInput));\n","import { getAccountSlotUrl } from '../../../util/multiaccount';\n\nexport function navigateBack() {\n  const currentUrl = new URL(window.location.href);\n  const referrer = document.referrer ? new URL(document.referrer) : undefined;\n  if (referrer?.origin === currentUrl.origin && referrer.pathname === currentUrl.pathname\n    && referrer.searchParams.get('account') !== currentUrl.searchParams.get('account')) {\n    window.location.assign(referrer); // Return to previous account with it's state\n    return;\n  }\n\n  const url = getAccountSlotUrl(1);\n  window.location.href = url;\n}\n","import type { LangCode } from '../../../types';\n\nexport function getSuggestedLanguage() {\n  let suggestedLanguage = navigator.language.toLowerCase();\n\n  if (suggestedLanguage && suggestedLanguage !== 'pt-br') {\n    suggestedLanguage = suggestedLanguage.substr(0, 2);\n  }\n\n  return suggestedLanguage as LangCode;\n}\n","import { memo, useState } from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransitionDeprecated from '../../hooks/useMediaTransitionDeprecated';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nconst DEFAULT_SIZE = 150;\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size = DEFAULT_SIZE,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const transitionClassNames = useMediaTransitionDeprecated(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      className={buildClassName(className, transitionClassNames)}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","import type { ElementRef, FC } from '../../lib/teact/teact';\nimport {\n  getIsHeavyAnimating,\n  memo,\n  useEffect,\n  useRef,\n  useState,\n  useUnmountCleanup,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport { IS_ELECTRON } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { hexToRgb } from '../../util/switchTheme';\n\nimport useColorFilter from '../../hooks/stickers/useColorFilter';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/window/useBackgroundMode';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceAlways?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  quality,\n  isLowPriority,\n  color,\n  forceAlways,\n  forceOnHeavyAnimation,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const shouldUseColorFilter = !sharedCanvas && color;\n  const colorFilter = useColorFilter(shouldUseColorFilter ? color : undefined);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const shouldForceOnHeavyAnimation = forceAlways || forceOnHeavyAnimation;\n  // Delay initialization until heavy animation ends\n  const [\n    canInitialize, markCanInitialize, unmarkCanInitialize,\n  ] = useFlag(!getIsHeavyAnimating() || shouldForceOnHeavyAnimation);\n  useHeavyAnimation(unmarkCanInitialize, markCanInitialize, shouldForceOnHeavyAnimation);\n  useEffect(() => {\n    if (shouldForceOnHeavyAnimation) markCanInitialize();\n  }, [shouldForceOnHeavyAnimation]);\n\n  useSyncEffect(() => {\n    if (color && !shouldUseColorFilter) {\n      const { r, g, b } = hexToRgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color, shouldUseColorFilter]);\n\n  const isUnmountedRef = useRef(false);\n  useUnmountCleanup(() => {\n    isUnmountedRef.current = true;\n  });\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n      || (getIsHeavyAnimating() && !shouldForceOnHeavyAnimation)\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (!canInitialize) return;\n    if (getRLottie()) {\n      init();\n    } else {\n      ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords, canInitialize]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    animation?.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    if (typeof speed === 'number') {\n      animation?.setSpeed(speed);\n    }\n  }, [speed, animation]);\n\n  useUnmountCleanup(() => {\n    animationRef.current?.removeView(viewId);\n  });\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceAlways)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceAlways, forceOnHeavyAnimation)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceAlways, forceOnHeavyAnimation]);\n\n  useEffect(() => {\n    if (animation) {\n      if (isFirstRender.current) {\n        isFirstRender.current = false;\n      } else if (tgsUrl) {\n        animation.changeData(tgsUrl);\n        playAnimation();\n      }\n    }\n  }, [playAnimation, animation, tgsUrl]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, !playKey || shouldForceOnHeavyAnimation);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey || forceAlways);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceAlways);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName('AnimatedSticker', className)}\n      style={buildStyle(\n        size !== undefined && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        colorFilter,\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceAlways = false, forceOnHeavyAnimation = false) {\n  if (forceAlways) return false;\n  return (!forceOnHeavyAnimation && getIsHeavyAnimating()) || isPriorityPlaybackActive() || isBackgroundModeActive();\n}\n","// extracted by mini-css-extract-plugin\nexport {};","import type { MouseEvent as ReactMouseEvent } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer, ApiPhoto, ApiWebDocument,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer, StoryViewerOrigin } from '../../types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getPeerStoryHtmlId,\n  getUserFullName,\n  getVideoProfilePhotoMediaHash,\n  getWebDocumentHash,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isDeletedUser,\n} from '../../global/helpers';\nimport { isApiPeerChat, isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { isUserId } from '../../util/entities/ids';\nimport { getFirstLetters } from '../../util/textFormat';\nimport { REM } from './helpers/mediaDimensions';\nimport { getPeerColorClass } from './helpers/peerColor';\nimport renderText from './helpers/renderText';\n\nimport { useFastClick } from '../../hooks/useFastClick';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransitionDeprecated from '../../hooks/useMediaTransitionDeprecated';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport AvatarStoryCircle from './AvatarStoryCircle';\nimport Icon from './icons/Icon';\n\nimport './Avatar.scss';\n\nconst LOOP_COUNT = 3;\n\nexport const AVATAR_SIZES = {\n  micro: REM,\n  mini: 1.5 * REM,\n  tiny: 2 * REM,\n  small: 2.125 * REM,\n  medium: 2.75 * REM,\n  large: 3.375 * REM,\n  giant: 5.625 * REM,\n  jumbo: 7.5 * REM,\n};\n\nexport type AvatarSize =\n  'micro' | 'mini' | 'tiny' | 'small' | 'medium' | 'large' | 'giant' | 'jumbo' | number;\n\nconst cn = createClassNameBuilder('Avatar');\ncn.media = cn('media');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: AvatarSize;\n  peer?: ApiPeer | CustomPeer;\n  photo?: ApiPhoto;\n  webPhoto?: ApiWebDocument;\n  previewUrl?: string;\n  text?: string;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  withVideo?: boolean;\n  withStory?: boolean;\n  forPremiumPromo?: boolean;\n  withStoryGap?: boolean;\n  withStorySolid?: boolean;\n  forceFriendStorySolid?: boolean;\n  forceUnreadStorySolid?: boolean;\n  storyViewerOrigin?: StoryViewerOrigin;\n  storyViewerMode?: 'full' | 'single-peer' | 'disabled';\n  loopIndefinitely?: boolean;\n  noPersonalPhoto?: boolean;\n  asMessageBubble?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasMedia: boolean) => void;\n  onContextMenu?: (e: React.MouseEvent) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  peer,\n  photo,\n  webPhoto,\n  previewUrl,\n  text,\n  isSavedMessages,\n  isSavedDialog,\n  withVideo,\n  withStory,\n  forPremiumPromo,\n  withStoryGap,\n  withStorySolid,\n  forceFriendStorySolid,\n  forceUnreadStorySolid,\n  storyViewerOrigin,\n  storyViewerMode = 'single-peer',\n  loopIndefinitely,\n  noPersonalPhoto,\n  asMessageBubble,\n  onClick,\n  onContextMenu,\n}) => {\n  const { openStoryViewer } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const videoLoopCountRef = useRef(0);\n  const isCustomPeer = peer && 'isCustomPeer' in peer;\n  const realPeer = peer && !isCustomPeer ? peer : undefined;\n  const user = realPeer && isApiPeerUser(realPeer) ? realPeer : undefined;\n  const chat = realPeer && isApiPeerChat(realPeer) ? realPeer : undefined;\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = realPeer && isChatWithRepliesBot(realPeer.id);\n  const isAnonymousForwards = realPeer && isAnonymousForwardsChat(realPeer.id);\n  const isForum = chat?.isForum;\n  let imageHash: string | undefined;\n  let videoHash: string | undefined;\n\n  const pxSize = typeof size === 'number' ? size : AVATAR_SIZES[size];\n\n  const shouldLoadVideo = withVideo && photo?.isVideo;\n\n  const isBig = pxSize >= AVATAR_SIZES.jumbo;\n  if (!isSavedMessages && !isDeleted) {\n    if ((user && !noPersonalPhoto) || chat) {\n      imageHash = getChatAvatarHash(peer as ApiPeer, isBig ? 'big' : undefined);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n      if (photo.isVideo && withVideo) {\n        videoHash = getVideoProfilePhotoMediaHash(photo);\n      }\n    } else if (webPhoto) {\n      imageHash = getWebDocumentHash(webPhoto);\n    }\n  }\n\n  const specialIcon = useMemo(() => {\n    if (isCustomPeer) {\n      return peer.avatarIcon;\n    }\n\n    if (isSavedMessages) {\n      return isSavedDialog ? 'my-notes' : 'avatar-saved-messages';\n    }\n\n    if (isDeleted) {\n      return 'avatar-deleted-account';\n    }\n\n    if (isReplies) {\n      return 'reply-filled';\n    }\n\n    if (isAnonymousForwards) {\n      return 'author-hidden';\n    }\n\n    return undefined;\n  }, [isCustomPeer, isSavedMessages, isDeleted, isReplies, isAnonymousForwards, peer, isSavedDialog]);\n\n  const imgBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const videoBlobUrl = useMedia(videoHash, !shouldLoadVideo, ApiMediaFormat.BlobUrl);\n  const imgUrl = imgBlobUrl || previewUrl;\n  const hasBlobUrl = Boolean(imgUrl || videoBlobUrl);\n  // `videoBlobUrl` can be taken from memory cache, so we need to check `shouldLoadVideo` again\n  const shouldPlayVideo = Boolean(videoBlobUrl && shouldLoadVideo);\n\n  const transitionClassNames = useMediaTransitionDeprecated(hasBlobUrl);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    const video = e.currentTarget;\n    if (!videoBlobUrl) return;\n\n    if (loopIndefinitely) return;\n\n    videoLoopCountRef.current += 1;\n    if (videoLoopCountRef.current >= LOOP_COUNT) {\n      video.style.display = 'none';\n    }\n  });\n\n  const lang = useOldLang();\n\n  let content: TeactNode | undefined;\n  const author = user ? getUserFullName(user) : (chat ? getChatTitle(lang, chat) : text);\n\n  if (specialIcon) {\n    content = (\n      <Icon\n        name={specialIcon}\n        className={cn.icon}\n        role=\"img\"\n        ariaLabel={author}\n      />\n    );\n  } else if (hasBlobUrl) {\n    content = (\n      <>\n        <img\n          src={imgUrl}\n          className={buildClassName(cn.media, 'avatar-media', transitionClassNames, videoBlobUrl && 'poster')}\n          alt={author}\n          decoding=\"async\"\n          draggable={false}\n        />\n        {shouldPlayVideo && (\n          <OptimizedVideo\n            canPlay\n            src={videoBlobUrl}\n            className={buildClassName(cn.media, 'avatar-media', 'poster')}\n            muted\n            loop={loopIndefinitely}\n            autoPlay\n            disablePictureInPicture\n            playsInline\n            draggable={false}\n            onEnded={handleVideoEnded}\n          />\n        )}\n      </>\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (isCustomPeer) {\n    const title = peer.title || lang(peer.titleKey!);\n    content = title && getFirstLetters(title, 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const isRoundedRect = (isCustomPeer && peer.isAvatarSquare)\n    || (isForum && !((withStory || withStorySolid) && realPeer?.hasStories));\n  const isPremiumGradient = isCustomPeer && peer.withPremiumGradient;\n  const customColor = isCustomPeer && peer.customPeerAvatarColor;\n\n  const fullClassName = buildClassName(\n    'Avatar',\n    className,\n    getPeerColorClass(peer),\n    !peer && text && 'hidden-user',\n    isSavedMessages && 'saved-messages',\n    isAnonymousForwards && 'anonymous-forwards',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isPremiumGradient && 'premium-gradient-bg',\n    isRoundedRect && 'forum',\n    asMessageBubble && 'message-bubble',\n    (photo || webPhoto) && 'force-fit',\n    ((withStory && realPeer?.hasStories) || forPremiumPromo) && 'with-story-circle',\n    withStorySolid && realPeer?.hasStories && 'with-story-solid',\n    withStorySolid && forceFriendStorySolid && 'close-friend',\n    withStorySolid && (realPeer?.hasUnreadStories || forceUnreadStorySolid) && 'has-unread-story',\n    onClick && 'interactive',\n    (!isSavedMessages && !imgUrl) && 'no-photo',\n  );\n\n  const hasMedia = Boolean(isSavedMessages || imgUrl);\n\n  const { handleClick, handleMouseDown } = useFastClick((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (withStory && storyViewerMode !== 'disabled' && realPeer?.hasStories) {\n      e.stopPropagation();\n\n      openStoryViewer({\n        peerId: realPeer.id,\n        isSinglePeer: storyViewerMode === 'single-peer',\n        origin: storyViewerOrigin,\n      });\n      return;\n    }\n\n    if (onClick) {\n      onClick(e, hasMedia);\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      id={realPeer?.id && withStory ? getPeerStoryHtmlId(realPeer.id) : undefined}\n      data-peer-id={realPeer?.id}\n      data-test-sender-id={IS_TEST ? realPeer?.id : undefined}\n      aria-label={typeof content === 'string' ? author : undefined}\n      style={buildStyle(`--_size: ${pxSize}px;`, customColor && `--color-user: ${customColor}`)}\n      onClick={handleClick}\n      onContextMenu={onContextMenu}\n      onMouseDown={handleMouseDown}\n    >\n      <div className=\"inner\">\n        {typeof content === 'string' ? renderText(content, [isBig ? 'hq_emoji' : 'emoji']) : content}\n      </div>\n      {withStory && realPeer?.hasStories && (\n        <AvatarStoryCircle peerId={realPeer.id} size={pxSize} withExtraGap={withStoryGap} />\n      )}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","import {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\nimport type { ThemeKey } from '../../types';\n\nimport { selectPeerStories, selectTheme } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from './helpers/mediaDimensions';\n\nimport useDevicePixelRatio from '../../hooks/window/useDevicePixelRatio';\n\ninterface OwnProps {\n\n  peerId: string;\n  className?: string;\n  size: number;\n  withExtraGap?: boolean;\n}\n\ninterface StateProps {\n  peerStories?: Record<number, ApiTypeStory>;\n  storyIds?: number[];\n  lastReadId?: number;\n  appTheme: ThemeKey;\n}\n\nconst BLUE = ['#34C578', '#3CA3F3'];\nconst GREEN = ['#C9EB38', '#09C167'];\nconst PURPLE = ['#A667FF', '#55A5FF'];\nconst GRAY = '#C4C9CC';\nconst DARK_GRAY = '#737373';\nconst STROKE_WIDTH = 0.125 * REM;\nconst STROKE_WIDTH_READ = 0.0625 * REM;\nconst GAP_PERCENT = 2;\nconst SEGMENTS_MAX = 45; // More than this breaks rendering in Safari and Chrome\nconst LARGE_AVATAR_SIZE = 3.5 * REM;\n\nconst GAP_PERCENT_EXTRA = 10;\nconst EXTRA_GAP_ANGLE = Math.PI / 4;\nconst EXTRA_GAP_SIZE = (GAP_PERCENT_EXTRA / 100) * (2 * Math.PI);\nconst EXTRA_GAP_START = EXTRA_GAP_ANGLE - EXTRA_GAP_SIZE / 2;\nconst EXTRA_GAP_END = EXTRA_GAP_ANGLE + EXTRA_GAP_SIZE / 2;\n\nfunction AvatarStoryCircle({\n  size,\n  className,\n  peerStories,\n  storyIds,\n  lastReadId,\n  withExtraGap,\n  appTheme,\n}: OwnProps & StateProps) {\n  const ref = useRef<HTMLCanvasElement>();\n\n  const dpr = useDevicePixelRatio();\n\n  const adaptedSize = size + STROKE_WIDTH;\n\n  const values = useMemo(() => {\n    return (storyIds || []).reduce((acc, id) => {\n      acc.total += 1;\n      if (lastReadId && id <= lastReadId) {\n        acc.read += 1;\n      }\n\n      return acc;\n    }, { total: 0, read: 0 });\n  }, [lastReadId, storyIds]);\n\n  const isCloseFriend = useMemo(() => {\n    if (!peerStories || !storyIds?.length) {\n      return false;\n    }\n\n    return storyIds.some((id) => {\n      const story = peerStories[id];\n      if (!story || !('isForCloseFriends' in story)) {\n        return false;\n      }\n      const isRead = lastReadId && story.id <= lastReadId;\n      return story.isForCloseFriends && !isRead;\n    });\n  }, [lastReadId, peerStories, storyIds]);\n\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    drawGradientCircle({\n      canvas: ref.current,\n      size: adaptedSize * dpr,\n      segmentsCount: values.total,\n      color: isCloseFriend ? 'green' : 'blue',\n      readSegmentsCount: values.read,\n      withExtraGap,\n      readSegmentColor: appTheme === 'dark' ? DARK_GRAY : GRAY,\n      dpr,\n    });\n  }, [appTheme, isCloseFriend, adaptedSize, values.read, values.total, withExtraGap, dpr]);\n\n  if (!values.total) {\n    return undefined;\n  }\n\n  return (\n    <canvas\n      ref={ref}\n      className={buildClassName('story-circle', className)}\n      style={`max-width: ${adaptedSize}px; max-height: ${adaptedSize}px;`}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { peerId }): StateProps => {\n  const peerStories = selectPeerStories(global, peerId);\n  const appTheme = selectTheme(global);\n\n  return {\n    peerStories: peerStories?.byId,\n    storyIds: peerStories?.orderedIds,\n    lastReadId: peerStories?.lastReadId,\n    appTheme,\n  };\n})(AvatarStoryCircle));\n\nexport function drawGradientCircle({\n  canvas,\n  size,\n  color,\n  segmentsCount,\n  readSegmentsCount = 0,\n  withExtraGap = false,\n  readSegmentColor,\n  dpr,\n}: {\n  canvas: HTMLCanvasElement;\n  size: number;\n  color: string;\n  segmentsCount: number;\n  readSegmentsCount?: number;\n  withExtraGap?: boolean;\n  readSegmentColor: string;\n  dpr: number;\n}) {\n  if (segmentsCount > SEGMENTS_MAX) {\n    readSegmentsCount = Math.round(readSegmentsCount * (SEGMENTS_MAX / segmentsCount));\n\n    segmentsCount = SEGMENTS_MAX;\n  }\n\n  const strokeModifier = Math.max(Math.max(size - LARGE_AVATAR_SIZE * dpr, 0) / dpr / REM / 1.5, 1) * dpr;\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n\n  canvas.width = size;\n  canvas.height = size;\n  const centerCoordinate = size / 2;\n  const radius = (size - STROKE_WIDTH * strokeModifier) / 2;\n  const segmentAngle = (2 * Math.PI) / segmentsCount;\n  const gapSize = (GAP_PERCENT / 100) * (2 * Math.PI);\n  const gradient = ctx.createLinearGradient(\n    0,\n    0,\n    Math.ceil(size * Math.cos(Math.PI / 2)),\n    Math.ceil(size * Math.sin(Math.PI / 2)),\n  );\n\n  const colorStops = color === 'purple' ? PURPLE : color === 'green' ? GREEN : BLUE;\n  colorStops.forEach((colorStop, index) => {\n    gradient.addColorStop(index / (colorStops.length - 1), colorStop);\n  });\n\n  ctx.lineCap = 'round';\n  ctx.clearRect(0, 0, size, size);\n\n  Array.from({ length: segmentsCount }).forEach((_, i) => {\n    const isRead = i < readSegmentsCount;\n    let startAngle = i * segmentAngle - Math.PI / 2 + gapSize / 2;\n    let endAngle = startAngle + segmentAngle - (segmentsCount > 1 ? gapSize : 0);\n\n    ctx.strokeStyle = isRead ? readSegmentColor : gradient;\n    ctx.lineWidth = (isRead ? STROKE_WIDTH_READ : STROKE_WIDTH) * strokeModifier;\n\n    if (withExtraGap) {\n      if (startAngle >= EXTRA_GAP_START && endAngle <= EXTRA_GAP_END) { // Segment is inside extra gap\n        return;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_END) { // Extra gap is inside segment\n        ctx.beginPath();\n        ctx.arc(centerCoordinate, centerCoordinate, radius, EXTRA_GAP_END, endAngle);\n        ctx.stroke();\n\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_START) { // Segment ends in extra gap\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_END && endAngle > EXTRA_GAP_END) { // Segment starts in extra gap\n        startAngle = EXTRA_GAP_END;\n      }\n    }\n\n    ctx.beginPath();\n    ctx.arc(centerCoordinate, centerCoordinate, radius, startAngle, endAngle);\n    ctx.stroke();\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"KU67Uur0\",\"collapsed\":\"y_uRZXtA\",\"blockquote\":\"m3sD7_cn\",\"gradientContainer\":\"JNVT2DU9\",\"collapseIcon\":\"pyX4NpPB\",\"clickable\":\"RmvXwV0W\"};","import {\n  type TeactNode,\n  useRef,\n} from '../../lib/teact/teact';\n\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useCollapsibleLines from '../../hooks/element/useCollapsibleLines';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Icon from './icons/Icon';\n\nimport styles from './Blockquote.module.scss';\n\ntype OwnProps = {\n  canBeCollapsible?: boolean;\n  isToggleDisabled?: boolean;\n  children: TeactNode;\n};\n\nconst MAX_LINES = 4;\n\nconst Blockquote = ({ canBeCollapsible, isToggleDisabled, children }: OwnProps) => {\n  const ref = useRef<HTMLQuoteElement>();\n  const {\n    isCollapsed, isCollapsible, setIsCollapsed,\n  } = useCollapsibleLines(ref, MAX_LINES, undefined, !canBeCollapsible);\n\n  const canExpand = !isToggleDisabled && isCollapsed;\n\n  const handleExpand = useLastCallback(() => {\n    setIsCollapsed(false);\n  });\n\n  const handleToggle = useLastCallback(() => {\n    setIsCollapsed((prev) => !prev);\n  });\n\n  return (\n    <span\n      className={buildClassName(styles.root, isCollapsed && styles.collapsed)}\n      onClick={canExpand ? handleExpand : undefined}\n    >\n      <blockquote\n        className={styles.blockquote}\n        ref={ref}\n        data-entity-type={ApiMessageEntityTypes.Blockquote}\n      >\n        <div className={styles.gradientContainer}>\n          {children}\n        </div>\n        {isCollapsible && (\n          <div\n            className={buildClassName(styles.collapseIcon, !isToggleDisabled && styles.clickable)}\n            onClick={!isToggleDisabled ? handleToggle : undefined}\n            aria-hidden\n          >\n            <Icon name={isCollapsed ? 'down' : 'up'} />\n          </div>\n        )}\n      </blockquote>\n    </span>\n  );\n};\n\nexport default Blockquote;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CEFe1FhH\",\"withSparkles\":\"yjv4Sc_e\",\"sparkles\":\"iOlUvSI8\",\"placeholder\":\"DKi1177s\",\"thumb\":\"O_TaDxWg\",\"media\":\"wqju02hR\",\"highlight-catch\":\"a8dMNkh3\",\"highlightCatch\":\"a8dMNkh3\"};","import type { ElementRef, FC } from '../../lib/teact/teact';\nimport { memo, useRef, useState } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nimport { selectIsAlwaysHighPriorityEmoji } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport safePlay from '../../util/safePlay';\n\nimport useDynamicColorListener from '../../hooks/stickers/useDynamicColorListener';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useCustomEmoji from './hooks/useCustomEmoji';\n\nimport Sparkles from './Sparkles';\nimport StickerView from './StickerView';\n\nimport styles from './CustomEmoji.module.scss';\n\nimport blankImg from '../../assets/blank.png';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  documentId: string;\n  className?: string;\n  style?: string;\n  size?: number;\n  isBig?: boolean;\n  noPlay?: boolean;\n  noVideoOnMobile?: boolean;\n  loopLimit?: number;\n  isSelectable?: boolean;\n  withSharedAnimation?: boolean;\n  sharedCanvasRef?: ElementRef<HTMLCanvasElement>;\n  sharedCanvasHqRef?: ElementRef<HTMLCanvasElement>;\n  withTranslucentThumb?: boolean;\n  shouldPreloadPreview?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceAlways?: boolean;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  onClick?: NoneToVoidFunction;\n  onAnimationEnd?: NoneToVoidFunction;\n  withSparkles?: boolean;\n  sparklesClassName?: string;\n  sparklesStyle?: string;\n};\n\nconst STICKER_SIZE = 20;\n\nconst CustomEmoji: FC<OwnProps> = ({\n  ref,\n  documentId,\n  className,\n  style,\n  size = STICKER_SIZE,\n  isBig,\n  noPlay,\n  noVideoOnMobile,\n  loopLimit,\n  isSelectable,\n  withSharedAnimation,\n  sharedCanvasRef,\n  sharedCanvasHqRef,\n  withTranslucentThumb,\n  shouldPreloadPreview,\n  forceAlways,\n  forceOnHeavyAnimation,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  onClick,\n  onAnimationEnd,\n  withSparkles,\n  sparklesStyle,\n  sparklesClassName,\n}) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  // An alternative to `withGlobal` to avoid adding numerous global containers\n  const { customEmoji, canPlay } = useCustomEmoji(documentId);\n\n  const loopCountRef = useRef(0);\n  const [shouldPlay, setShouldPlay] = useState(true);\n\n  const hasCustomColor = customEmoji?.shouldUseTextColor;\n  const customColor = useDynamicColorListener(containerRef, undefined, !hasCustomColor);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    if (!loopLimit) return;\n\n    loopCountRef.current += 1;\n\n    if (loopCountRef.current >= loopLimit) {\n      setShouldPlay(false);\n      e.currentTarget.currentTime = 0;\n    } else {\n      // Loop manually\n      safePlay(e.currentTarget);\n    }\n  });\n\n  const handleStickerLoop = useLastCallback(() => {\n    if (!loopLimit) return;\n\n    loopCountRef.current += 1;\n\n    if (loopCountRef.current >= loopLimit) {\n      setShouldPlay(false);\n    }\n  });\n\n  const isHq = customEmoji?.stickerSetInfo && selectIsAlwaysHighPriorityEmoji(getGlobal(), customEmoji.stickerSetInfo);\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(\n        styles.root,\n        withSparkles && styles.withSparkles,\n        className,\n        'custom-emoji',\n        'emoji',\n      )}\n      onClick={onClick}\n      onAnimationEnd={onAnimationEnd}\n      data-entity-type={ApiMessageEntityTypes.CustomEmoji}\n      data-document-id={documentId}\n      data-alt={customEmoji?.emoji}\n      style={style}\n    >\n      {withSparkles && (\n        <Sparkles\n          className={buildClassName(\n            styles.sparkles,\n            sparklesClassName,\n          )}\n          style={sparklesStyle}\n          preset=\"button\"\n        />\n      )}\n      {isSelectable && (\n        <img\n          className={styles.highlightCatch}\n          src={blankImg}\n          alt={customEmoji?.emoji}\n          data-entity-type={ApiMessageEntityTypes.CustomEmoji}\n          data-document-id={documentId}\n          draggable={false}\n        />\n      )}\n      {!customEmoji ? (\n        <div className={buildClassName(styles.placeholder)} draggable={false} />\n      ) : (\n        <StickerView\n          containerRef={containerRef}\n          sticker={customEmoji}\n          isSmall={!isBig}\n          size={size}\n          noPlay={noPlay || !(shouldPlay && canPlay)}\n          noVideoOnMobile={noVideoOnMobile}\n          thumbClassName={styles.thumb}\n          fullMediaClassName={styles.media}\n          shouldLoop\n          loopLimit={loopLimit}\n          shouldPreloadPreview={shouldPreloadPreview || noPlay || !canPlay}\n          forceOnHeavyAnimation={forceOnHeavyAnimation}\n          forceAlways={forceAlways}\n          observeIntersectionForLoading={observeIntersectionForLoading}\n          observeIntersectionForPlaying={observeIntersectionForPlaying}\n          withSharedAnimation={withSharedAnimation}\n          sharedCanvasRef={isHq ? sharedCanvasHqRef : sharedCanvasRef}\n          withTranslucentThumb={withTranslucentThumb}\n          onVideoEnded={handleVideoEnded}\n          onAnimatedStickerLoop={handleStickerLoop}\n          customColor={customColor}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(CustomEmoji);\n","import { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type {\n  ApiFormattedText, ApiMessage, ApiPoll, ApiTypeStory,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport {\n  extractMessageText,\n  getMessagePollId,\n  groupStatefulContent,\n  isActionMessage,\n} from '../../global/helpers';\nimport {\n  getMessageSummaryDescription,\n  getMessageSummaryEmoji,\n  getMessageSummaryText,\n  TRUNCATED_SUMMARY_LENGTH,\n} from '../../global/helpers/messageSummary';\nimport { selectPeerStory, selectPollFromMessage } from '../../global/selectors';\nimport trimText from '../../util/trimText';\nimport renderText from './helpers/renderText';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport ActionMessageText from '../middle/message/ActionMessageText';\nimport MessageText from './MessageText';\n\ntype OwnProps = {\n  message: ApiMessage;\n  translatedText?: ApiFormattedText;\n  noEmoji?: boolean;\n  highlight?: string;\n  truncateLength?: number;\n  withTranslucentThumbs?: boolean;\n  inChatList?: boolean;\n  emojiSize?: number;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  poll?: ApiPoll;\n  story?: ApiTypeStory;\n};\n\nfunction MessageSummary({\n  message,\n  translatedText,\n  noEmoji = false,\n  highlight,\n  truncateLength = TRUNCATED_SUMMARY_LENGTH,\n  withTranslucentThumbs = false,\n  inChatList = false,\n  emojiSize,\n  poll,\n  story,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n}: OwnProps & StateProps) {\n  const lang = useOldLang();\n  const extractedText = extractMessageText(message, inChatList);\n  const hasPoll = Boolean(getMessagePollId(message));\n  const isAction = isActionMessage(message);\n\n  const statefulContent = groupStatefulContent({ poll, story });\n\n  if (!extractedText && !hasPoll && !isAction) {\n    const summaryText = translatedText?.text\n      || getMessageSummaryText(lang, message, statefulContent, noEmoji, truncateLength);\n    const trimmedText = trimText(summaryText, truncateLength);\n\n    return (\n      <span>\n        {highlight ? (\n          renderText(trimmedText, ['emoji', 'highlight'], { highlight })\n        ) : (\n          renderText(trimmedText)\n        )}\n      </span>\n    );\n  }\n\n  function renderMessageText() {\n    if (isAction) {\n      return <ActionMessageText message={message} asPreview />;\n    }\n\n    return (\n      <MessageText\n        messageOrStory={message}\n        translatedText={translatedText}\n        highlight={highlight}\n        asPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        withTranslucentThumbs={withTranslucentThumbs}\n        truncateLength={truncateLength}\n        inChatList={inChatList}\n        emojiSize={emojiSize}\n      />\n    );\n  }\n\n  const emoji = !noEmoji && getMessageSummaryEmoji(message);\n\n  return (\n    <>\n      {[\n        emoji ? renderText(`${emoji} `) : undefined,\n        getMessageSummaryDescription(lang, message, statefulContent, renderMessageText()),\n      ].flat().filter(Boolean)}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message }): StateProps => {\n    const poll = selectPollFromMessage(global, message);\n    const storyData = message.content.storyData;\n    const story = storyData && selectPeerStory(global, storyData.peerId, storyData.id);\n\n    return {\n      poll,\n      story,\n    };\n  },\n)(MessageSummary));\n","import {\n  memo, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport type { ApiFormattedText, ApiMessage, ApiStory } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { ThreadId } from '../../types';\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nimport { CONTENT_NOT_SUPPORTED } from '../../config';\nimport { extractMessageText, stripCustomEmoji } from '../../global/helpers';\nimport trimText from '../../util/trimText';\nimport { insertTextEntity, renderTextWithEntities } from './helpers/renderTextWithEntities';\n\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useUniqueId from '../../hooks/useUniqueId';\n\ninterface OwnProps {\n  messageOrStory: ApiMessage | ApiStory;\n  threadId?: ThreadId;\n  translatedText?: ApiFormattedText;\n  isForAnimation?: boolean;\n  emojiSize?: number;\n  highlight?: string;\n  asPreview?: boolean;\n  truncateLength?: number;\n  isProtected?: boolean;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  withTranslucentThumbs?: boolean;\n  shouldRenderAsHtml?: boolean;\n  inChatList?: boolean;\n  forcePlayback?: boolean;\n  focusedQuote?: string;\n  focusedQuoteOffset?: number;\n  isInSelectMode?: boolean;\n  canBeEmpty?: boolean;\n  maxTimestamp?: number;\n}\n\nconst MIN_CUSTOM_EMOJIS_FOR_SHARED_CANVAS = 3;\n\nfunction MessageText({\n  messageOrStory,\n  translatedText,\n  isForAnimation,\n  emojiSize,\n  highlight,\n  asPreview,\n  truncateLength,\n  isProtected,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  withTranslucentThumbs,\n  shouldRenderAsHtml,\n  inChatList,\n  forcePlayback,\n  focusedQuote,\n  focusedQuoteOffset,\n  isInSelectMode,\n  canBeEmpty,\n  maxTimestamp,\n  threadId,\n}: OwnProps) {\n  const sharedCanvasRef = useRef<HTMLCanvasElement>();\n  const sharedCanvasHqRef = useRef<HTMLCanvasElement>();\n\n  const textCacheBusterRef = useRef(0);\n\n  const formattedText = translatedText || extractMessageText(messageOrStory, inChatList);\n  const adaptedFormattedText = isForAnimation && formattedText ? stripCustomEmoji(formattedText) : formattedText;\n  const { text, entities } = adaptedFormattedText || {};\n\n  const entitiesWithFocusedQuote = useMemo(() => {\n    if (!text || !focusedQuote) return entities;\n\n    const offsetIndex = text.indexOf(focusedQuote, focusedQuoteOffset);\n    const index = offsetIndex >= 0 ? offsetIndex : text.indexOf(focusedQuote); // Fallback to first occurrence\n    const lendth = focusedQuote.length;\n    if (index >= 0) {\n      return insertTextEntity(entities || [], {\n        offset: index,\n        length: lendth,\n        type: ApiMessageEntityTypes.QuoteFocus,\n      });\n    }\n\n    return entities;\n  }, [text, entities, focusedQuote, focusedQuoteOffset]);\n\n  const containerId = useUniqueId();\n\n  useSyncEffect(() => {\n    textCacheBusterRef.current += 1;\n  }, [text, entitiesWithFocusedQuote]);\n\n  const withSharedCanvas = useMemo(() => {\n    const hasSpoilers = entitiesWithFocusedQuote?.some((e) => e.type === ApiMessageEntityTypes.Spoiler);\n    if (hasSpoilers) {\n      return false;\n    }\n\n    const customEmojisCount = entitiesWithFocusedQuote\n      ?.filter((e) => e.type === ApiMessageEntityTypes.CustomEmoji).length || 0;\n    return customEmojisCount >= MIN_CUSTOM_EMOJIS_FOR_SHARED_CANVAS;\n  }, [entitiesWithFocusedQuote]) || 0;\n\n  if (!text && !canBeEmpty) {\n    return <span className=\"content-unsupported\">{CONTENT_NOT_SUPPORTED}</span>;\n  }\n\n  return (\n    <>\n      {[\n        withSharedCanvas && <canvas ref={sharedCanvasRef} className=\"shared-canvas\" />,\n        withSharedCanvas && <canvas ref={sharedCanvasHqRef} className=\"shared-canvas\" />,\n        renderTextWithEntities({\n          text: trimText(text!, truncateLength),\n          entities: entitiesWithFocusedQuote,\n          highlight,\n          emojiSize,\n          shouldRenderAsHtml,\n          containerId,\n          asPreview,\n          isProtected,\n          observeIntersectionForLoading,\n          observeIntersectionForPlaying,\n          withTranslucentThumbs,\n          sharedCanvasRef,\n          sharedCanvasHqRef,\n          cacheBuster: textCacheBusterRef.current.toString(),\n          forcePlayback,\n          isInSelectMode,\n          maxTimestamp,\n          chatId: 'chatId' in messageOrStory ? messageOrStory.chatId : undefined,\n          messageId: messageOrStory.id,\n          threadId,\n        }),\n      ].flat().filter(Boolean)}\n    </>\n  );\n}\n\nexport default memo(MessageText);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"nRjVJOQv\"};","import type { ElementRef } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { memo } from '../../lib/teact/teact';\n\nimport type { ApiPeer, ApiPeerColor } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { getApiPeerColorClass, getPeerColorClass } from './helpers/peerColor';\n\nimport EmojiIconBackground from './embedded/EmojiIconBackground';\n\nimport styles from './PeerColorWrapper.module.scss';\n\ninterface OwnProps extends React.HTMLAttributes<HTMLDivElement> {\n  ref?: ElementRef<HTMLDivElement>;\n  peer?: ApiPeer;\n  peerColor?: ApiPeerColor;\n  noUserColors?: boolean;\n  shouldReset?: boolean;\n  className?: string;\n  emojiIconClassName?: string;\n  children: React.ReactNode;\n}\n\nfunction PeerColorWrapper({\n  peer, ref, peerColor, noUserColors,\n  shouldReset, className, emojiIconClassName,\n  children, ...otherProps\n}: OwnProps) {\n  const color = peerColor || peer?.color;\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        styles.root,\n        peer && getPeerColorClass(peer, noUserColors, shouldReset),\n        peerColor && getApiPeerColorClass(peerColor),\n        className,\n      )}\n\n      {...otherProps}\n    >\n      {color?.backgroundEmojiId && (\n        <EmojiIconBackground\n          className={emojiIconClassName}\n          emojiDocumentId={color.backgroundEmojiId}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(PeerColorWrapper);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nimport { ensureProtocol, getUnicodeUrl, isMixedScriptUrl } from '../../util/browser/url';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\ntype OwnProps = {\n  url?: string;\n  text: string;\n  className?: string;\n  children?: TeactNode;\n  isRtl?: boolean;\n  shouldSkipModal?: boolean;\n};\n\nconst SafeLink = ({\n  url,\n  text,\n  className,\n  children,\n  isRtl,\n  shouldSkipModal,\n}: OwnProps) => {\n  const { openUrl } = getActions();\n\n  const content = children || text;\n  const isRegularLink = url === text;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n    if (!url) return true;\n\n    e.preventDefault();\n\n    const isTrustedLink = isRegularLink && !isMixedScriptUrl(url);\n    openUrl({ url, shouldSkipModal: shouldSkipModal || isTrustedLink });\n\n    return false;\n  });\n\n  if (!url) {\n    return undefined;\n  }\n\n  const classNames = buildClassName(\n    className || 'text-entity-link',\n    isRegularLink && 'word-break-all',\n  );\n\n  return (\n    <a\n      href={ensureProtocol(url)}\n      title={getUnicodeUrl(url)}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className={classNames}\n      onClick={handleClick}\n      dir={isRtl ? 'rtl' : 'auto'}\n      data-entity-type={ApiMessageEntityTypes.Url}\n    >\n      {content}\n    </a>\n  );\n};\n\nexport default SafeLink;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"fWE9Tkfe\",\"progress\":\"F0JPgXgb\",\"button\":\"B94KQ3c0\",\"symbol\":\"wapdILU7\",\"sparkle\":\"AS3Scly3\"};","import { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport styles from './Sparkles.module.scss';\n\ntype ButtonParameters = {\n  preset: 'button';\n};\n\ntype ProgressParameters = {\n  preset: 'progress';\n};\n\ntype PresetParameters = ButtonParameters | ProgressParameters;\n\ntype OwnProps = {\n  className?: string;\n  style?: string;\n} & PresetParameters;\n\nconst SYMBOL = '✦';\nconst ANIMATION_DURATION = 5;\n\n// Values are in percents\nconst BUTTON_POSITIONS = [{\n  x: 20,\n  y: 0,\n  size: 100,\n  durationShift: 10,\n}, {\n  x: 15,\n  y: 15,\n  size: 75,\n  durationShift: 70,\n}, {\n  x: 10,\n  y: 35,\n  size: 75,\n  durationShift: 90,\n}, {\n  x: 20,\n  y: 70,\n  size: 125,\n  durationShift: 30,\n}, {\n  x: 40,\n  y: 10,\n  size: 125,\n  durationShift: 0,\n}, {\n  x: 45,\n  y: 60,\n  size: 75,\n  durationShift: 60,\n}, {\n  x: 60,\n  y: -10,\n  size: 100,\n  durationShift: 20,\n}, {\n  x: 55,\n  y: 40,\n  size: 75,\n  durationShift: 60,\n}, {\n  x: 70,\n  y: 65,\n  size: 100,\n  durationShift: 90,\n}, {\n  x: 80,\n  y: 10,\n  size: 75,\n  durationShift: 30,\n}, {\n  x: 80,\n  y: 45,\n  size: 125,\n  durationShift: 0,\n}];\nconst PROGRESS_POSITIONS = generateRandomProgressPositions(100);\n\nconst Sparkles = ({\n  className,\n  style,\n  ...presetSettings\n}: OwnProps) => {\n  if (presetSettings.preset === 'button') {\n    return (\n      <div className={buildClassName(styles.root, styles.button, className)} style={style}>\n        {BUTTON_POSITIONS.map((position) => {\n          const shiftX = Math.cos(Math.atan2(-50 + position.y, -50 + position.x)) * 100;\n          const shiftY = Math.sin(Math.atan2(-50 + position.y, -50 + position.x)) * 100;\n          return (\n            <div\n              className={styles.symbol}\n              style={buildStyle(\n                `top: ${position.y}%`,\n                `left: ${position.x}%`,\n                `--_duration-shift: ${(-position.durationShift / 100) * ANIMATION_DURATION}s`,\n                `--_shift-x: ${shiftX}%`,\n                `--_shift-y: ${shiftY}%`,\n                `scale: ${position.size}%`,\n              )}\n            >\n              {SYMBOL}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  if (presetSettings.preset === 'progress') {\n    return (\n      <div className={buildClassName(styles.root, styles.progress, className)} style={style}>\n        {PROGRESS_POSITIONS.map((position) => {\n          return (\n            <div\n              className={styles.symbol}\n              style={buildStyle(\n                `top: ${position.y}%`,\n                `left: ${position.x}%`,\n                `--_shift-x: ${position.velocityX}%`,\n                `--_shift-y: ${position.velocityY}%`,\n                `scale: ${position.scale}%`,\n                `--_duration-shift: ${(-position.durationShift / 100) * ANIMATION_DURATION}s`,\n              )}\n            >\n              {SYMBOL}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  return undefined;\n};\n\nfunction generateRandomProgressPositions(count: number) {\n  const positions = [];\n  for (let i = 0; i < count; i++) {\n    positions.push({\n      x: Math.random() * 100,\n      y: Math.random() * 100,\n      velocityX: (Math.random() * 5 + 15) * 100,\n      velocityY: (Math.random() * 10 - 5) * 100,\n      scale: (Math.random() * 0.5 + 0.5) * 100,\n      durationShift: Math.random() * 100,\n    });\n  }\n  return positions;\n}\n\nexport default memo(Sparkles);\n","// extracted by mini-css-extract-plugin\nexport default {\"thumb\":\"gYSfUe37\",\"thumb-opaque\":\"vbcXDDxa\",\"thumbOpaque\":\"vbcXDDxa\",\"no-transition\":\"AvU_FtMd\",\"noTransition\":\"AvU_FtMd\",\"media\":\"RrEzFxte\"};","import type { ElementRef, FC } from '../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport type { ApiSticker } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport { getStickerMediaHash } from '../../global/helpers';\nimport { selectIsAlwaysHighPriorityEmoji } from '../../global/selectors';\nimport { IS_ANDROID, IS_IOS, IS_WEBM_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport * as mediaLoader from '../../util/mediaLoader';\n\nimport useColorFilter from '../../hooks/stickers/useColorFilter';\nimport useCoordsInSharedCanvas from '../../hooks/useCoordsInSharedCanvas';\nimport useFlag from '../../hooks/useFlag';\nimport { useIsIntersecting } from '../../hooks/useIntersectionObserver';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useMountAfterHeavyAnimation from '../../hooks/useMountAfterHeavyAnimation';\nimport useThumbnail from '../../hooks/useThumbnail';\nimport useUniqueId from '../../hooks/useUniqueId';\nimport useDevicePixelRatio from '../../hooks/window/useDevicePixelRatio';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport AnimatedSticker from './AnimatedSticker';\n\nimport styles from './StickerView.module.scss';\n\ntype OwnProps = {\n  containerRef: ElementRef<HTMLDivElement>;\n  sticker: ApiSticker;\n  thumbClassName?: string;\n  fullMediaHash?: string;\n  fullMediaClassName?: string;\n  isSmall?: boolean;\n  size?: number;\n  customColor?: string;\n  loopLimit?: number;\n  shouldLoop?: boolean;\n  shouldPreloadPreview?: boolean;\n  forceAlways?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  noLoad?: boolean;\n  noPlay?: boolean;\n  noVideoOnMobile?: boolean;\n  withSharedAnimation?: boolean;\n  sharedCanvasRef?: ElementRef<HTMLCanvasElement>;\n  withTranslucentThumb?: boolean; // With shared canvas thumbs are opaque by default to provide better transition effect\n  onVideoEnded?: AnyToVoidFunction;\n  onAnimatedStickerLoop?: AnyToVoidFunction;\n};\n\nconst SHARED_PREFIX = 'shared';\nconst STICKER_SIZE = 24;\n\nconst StickerView: FC<OwnProps> = ({\n  containerRef,\n  sticker,\n  thumbClassName,\n  fullMediaHash,\n  fullMediaClassName,\n  isSmall,\n  size = STICKER_SIZE,\n  customColor,\n  loopLimit,\n  shouldLoop = false,\n  shouldPreloadPreview,\n  forceAlways,\n  forceOnHeavyAnimation,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  noLoad,\n  noPlay,\n  noVideoOnMobile,\n  withSharedAnimation,\n  withTranslucentThumb,\n  sharedCanvasRef,\n  onVideoEnded,\n  onAnimatedStickerLoop,\n}) => {\n  const {\n    id, isLottie, stickerSetInfo, emoji,\n  } = sticker;\n  const [isVideoBroken, markVideoBroken] = useFlag();\n  const isUnsupportedVideo = sticker.isVideo && (\n    !IS_WEBM_SUPPORTED\n    || (noVideoOnMobile && (IS_IOS || IS_ANDROID))\n  );\n  const isVideo = sticker.isVideo;\n  const isStatic = !isLottie && !isVideo;\n  const previewMediaHash = getStickerMediaHash(sticker, 'preview');\n\n  const dpr = useDevicePixelRatio();\n\n  const filterStyle = useColorFilter(customColor);\n\n  const isIntersectingForLoading = useIsIntersecting(containerRef, observeIntersectionForLoading);\n  const shouldLoad = isIntersectingForLoading && !noLoad;\n  const isIntersectingForPlaying = (\n    useIsIntersecting(containerRef, observeIntersectionForPlaying)\n    && isIntersectingForLoading\n  );\n  const shouldPlay = isIntersectingForPlaying && !noPlay;\n  const hasIntersectedForPlayingRef = useRef(isIntersectingForPlaying);\n  if (!hasIntersectedForPlayingRef.current && isIntersectingForPlaying) {\n    hasIntersectedForPlayingRef.current = true;\n  }\n\n  const cachedPreview = mediaLoader.getFromMemory(previewMediaHash);\n  const isReadyToMountFullMedia = useMountAfterHeavyAnimation(hasIntersectedForPlayingRef.current);\n  const shouldForcePreview = isUnsupportedVideo || (isStatic ? isSmall : noPlay);\n  const shouldLoadPreview = !customColor && !cachedPreview && (!isReadyToMountFullMedia || shouldForcePreview);\n  const previewMediaData = useMedia(previewMediaHash, !shouldLoadPreview);\n  const withPreview = shouldLoadPreview || cachedPreview;\n\n  const shouldSkipLoadingFullMedia = Boolean(shouldForcePreview || (\n    fullMediaHash === previewMediaHash && (cachedPreview || previewMediaData)\n  ));\n  const fullMediaData = useMedia(fullMediaHash || `sticker${id}`, !shouldLoad || shouldSkipLoadingFullMedia);\n  const shouldRenderFullMedia = isReadyToMountFullMedia && fullMediaData && !isVideoBroken;\n  const [isPlayerReady, markPlayerReady] = useFlag();\n  const isFullMediaReady = shouldRenderFullMedia && (isStatic || isPlayerReady);\n\n  const thumbDataUri = useThumbnail(sticker.thumbnail);\n  const thumbData = cachedPreview || previewMediaData || thumbDataUri;\n  const isThumbOpaque = sharedCanvasRef && !withTranslucentThumb;\n\n  const noCrossTransition = Boolean(isLottie && withPreview);\n  const thumbRef = useMediaTransition<HTMLImageElement>(thumbData && !isFullMediaReady, {\n    noCloseTransition: noCrossTransition,\n  });\n  const fullMediaRef = useMediaTransition<HTMLElement>(isFullMediaReady, {\n    noOpenTransition: noCrossTransition,\n  });\n\n  const coords = useCoordsInSharedCanvas(containerRef, sharedCanvasRef);\n\n  // Preload preview for Message Input and local message\n  useMedia(previewMediaHash, !shouldLoad || !shouldPreloadPreview);\n\n  const randomIdPrefix = useUniqueId();\n  const renderId = useMemo(() => ([\n    (withSharedAnimation ? SHARED_PREFIX : randomIdPrefix),\n    id,\n    size,\n    (withSharedAnimation ? customColor : undefined),\n    dpr,\n  ].filter(Boolean).join('_')\n  ), [id, size, customColor, dpr, withSharedAnimation, randomIdPrefix]);\n\n  return (\n    <>\n      <img\n        ref={thumbRef}\n        src={thumbData}\n        className={buildClassName(\n          styles.thumb,\n          noCrossTransition && styles.noTransition,\n          isThumbOpaque && styles.thumbOpaque,\n          thumbClassName,\n          'sticker-media',\n        )}\n        style={filterStyle}\n        alt=\"\"\n        draggable={false}\n      />\n      {shouldRenderFullMedia && (isLottie ? (\n        <AnimatedSticker\n          ref={fullMediaRef as ElementRef<HTMLDivElement>}\n          key={renderId}\n          renderId={renderId}\n          size={size}\n          className={buildClassName(\n            styles.media,\n            (noCrossTransition || isThumbOpaque) && styles.noTransition,\n            fullMediaClassName,\n          )}\n          tgsUrl={fullMediaData}\n          play={shouldPlay}\n          noLoop={!shouldLoop}\n          forceOnHeavyAnimation={forceAlways || forceOnHeavyAnimation}\n          forceAlways={forceAlways}\n          isLowPriority={isSmall && !selectIsAlwaysHighPriorityEmoji(getGlobal(), stickerSetInfo)}\n          sharedCanvas={sharedCanvasRef?.current || undefined}\n          sharedCanvasCoords={coords}\n          onLoad={markPlayerReady}\n          onLoop={onAnimatedStickerLoop}\n          onEnded={onAnimatedStickerLoop}\n          color={customColor}\n        />\n      ) : isVideo ? (\n        <OptimizedVideo\n          ref={fullMediaRef as ElementRef<HTMLVideoElement>}\n          canPlay={shouldPlay}\n          className={buildClassName(styles.media, fullMediaClassName, 'sticker-media')}\n          src={fullMediaData}\n          playsInline\n          muted\n          loop={shouldLoop && !loopLimit}\n          isPriority={forceAlways}\n          disablePictureInPicture\n          onReady={markPlayerReady}\n          onBroken={markVideoBroken}\n          onEnded={onVideoEnded}\n          style={filterStyle}\n        />\n      ) : (\n        <img\n          ref={fullMediaRef as ElementRef<HTMLImageElement>}\n          className={buildClassName(styles.media, fullMediaClassName, 'sticker-media')}\n          src={fullMediaData}\n          alt={emoji}\n          style={filterStyle}\n          draggable={false}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default memo(StickerView);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A72KeAmh\",\"icon\":\"eLEPgwPj\",\"title\":\"ZQJO2BKn\"};","import type { FC } from '../../lib/teact/teact';\nimport { memo } from '../../lib/teact/teact';\n\nimport type { ThreadId } from '../../types';\n\nimport { GENERAL_TOPIC_ID } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { getTopicDefaultIcon } from '../../util/forumColors';\nimport { getFirstLetters } from '../../util/textFormat';\nimport renderText from './helpers/renderText';\n\nimport Icon from './icons/Icon';\n\nimport styles from './TopicDefaultIcon.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  letterClassName?: string;\n  topicId: ThreadId;\n  iconColor?: number;\n  title: string;\n  onClick?: NoneToVoidFunction;\n};\n\nconst TopicDefaultIcon: FC<OwnProps> = ({\n  className,\n  letterClassName,\n  topicId,\n  iconColor,\n  title,\n  onClick,\n}) => {\n  const iconSrc = getTopicDefaultIcon(iconColor);\n\n  if (topicId === GENERAL_TOPIC_ID) {\n    return (\n      <Icon\n        name=\"hashtag\"\n        className={buildClassName(styles.root, className, 'general-forum-icon')}\n        onClick={onClick}\n      />\n    );\n  }\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={onClick}>\n      <img className={styles.icon} src={iconSrc} alt=\"\" draggable={false} />\n      <div className={buildClassName(styles.title, letterClassName, 'topic-icon-letter')}>\n        {renderText(getFirstLetters(title, 1))}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(TopicDefaultIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"mask\":\"U9MowLv_\",\"main\":\"RcG6eRZw\",\"left\":\"oL7XcRwI\",\"middle\":\"LYe7IaQO\",\"right\":\"wYSGQZXX\",\"blank\":\"kN2M6u9m\"};","import type { FC } from \"../../lib/teact/teact\";\nimport type React from \"../../lib/teact/teact\";\nimport { getActions, getGlobal, withGlobal } from \"../../global\";\n\nimport type { TabState } from \"../../global/types\";\nimport { ApiMediaFormat } from \"../../api/types\";\n\nimport { getChatAvatarHash } from \"../../global/helpers/chats\"; // Direct import for better module splitting\nimport {\n  selectIsRightColumnShown,\n  selectTabState,\n} from \"../../global/selectors\";\nimport buildClassName from \"../../util/buildClassName\";\nimport { preloadImage } from \"../../util/files\";\nimport preloadFonts from \"../../util/fonts\";\nimport { localizationReadyPromise } from \"../../util/localization\";\nimport * as mediaLoader from \"../../util/mediaLoader\";\nimport { Bundles, loadModule } from \"../../util/moduleLoader\";\nimport { pause } from \"../../util/schedulers\";\n\nimport useEffectOnce from \"../../hooks/useEffectOnce\";\nimport useFlag from \"../../hooks/useFlag\";\nimport useShowTransitionDeprecated from \"../../hooks/useShowTransitionDeprecated\";\n\n// Workaround for incorrect bundling by Webpack: force including in the main chunk\nimport \"../ui/Modal.scss\";\nimport \"./Avatar.scss\";\nimport appStyles from \"../App.module.scss\";\nimport styles from \"./UiLoader.module.scss\";\n\nimport lockPreviewPath from \"../../assets/lock.png\";\nimport monkeyPath from \"../../assets/monkey.svg\";\nimport spoilerMaskPath from \"../../assets/spoilers/mask.svg\";\nimport telegramLogoPath from \"../../assets/telegram-logo.svg\";\n\nexport type UiLoaderPage =\n  | \"main\"\n  | \"lock\"\n  | \"inactive\"\n  | \"authCode\"\n  | \"authPassword\"\n  | \"authPhoneNumber\"\n  | \"authQrCode\"\n  | \"authWalletCreated\";\n\ntype OwnProps = {\n  page?: UiLoaderPage;\n  children: React.ReactNode;\n  isMobile?: boolean;\n};\n\ntype StateProps = Pick<\n  TabState,\n  \"uiReadyState\" | \"shouldSkipHistoryAnimations\"\n> & {\n  isRightColumnShown?: boolean;\n  leftColumnWidth?: number;\n};\n\nconst MAX_PRELOAD_DELAY = 700;\nconst SECOND_STATE_DELAY = 1000;\nconst AVATARS_TO_PRELOAD = 10;\n\nfunction preloadAvatars() {\n  const { listIds, byId } = getGlobal().chats;\n  if (!listIds.active) {\n    return undefined;\n  }\n\n  return Promise.all(\n    listIds.active.slice(0, AVATARS_TO_PRELOAD).map((chatId) => {\n      const chat = byId[chatId];\n      if (!chat) {\n        return undefined;\n      }\n\n      const avatarHash = getChatAvatarHash(chat);\n      if (!avatarHash) {\n        return undefined;\n      }\n\n      return mediaLoader.fetch(avatarHash, ApiMediaFormat.BlobUrl);\n    })\n  );\n}\n\nconst preloadTasks = {\n  main: () =>\n    Promise.all([\n      loadModule(Bundles.Main).then(preloadFonts),\n      preloadAvatars(),\n      preloadImage(spoilerMaskPath),\n      localizationReadyPromise,\n    ]),\n  authPhoneNumber: () =>\n    Promise.all([preloadFonts(), preloadImage(telegramLogoPath)]),\n  authCode: () => preloadImage(monkeyPath),\n  authPassword: () => preloadImage(monkeyPath),\n  authQrCode: preloadFonts,\n  authWalletCreated: preloadFonts,\n  lock: () => Promise.all([preloadFonts(), preloadImage(lockPreviewPath)]),\n  inactive: () => {},\n};\n\nconst UiLoader: FC<OwnProps & StateProps> = ({\n  page,\n  children,\n  isRightColumnShown,\n  shouldSkipHistoryAnimations,\n  leftColumnWidth,\n}) => {\n  const { setIsUiReady } = getActions();\n\n  const [isReady, markReady] = useFlag();\n  const { shouldRender: shouldRenderMask, transitionClassNames } =\n    useShowTransitionDeprecated(!isReady, undefined, true);\n\n  useEffectOnce(() => {\n    let timeout: number | undefined;\n\n    const safePreload = async () => {\n      try {\n        await preloadTasks[page!]();\n      } catch (err) {\n        // Do nothing\n      }\n    };\n\n    Promise.race([\n      pause(MAX_PRELOAD_DELAY),\n      page ? safePreload() : Promise.resolve(),\n    ]).then(() => {\n      markReady();\n      setIsUiReady({ uiReadyState: 1 });\n\n      timeout = window.setTimeout(() => {\n        setIsUiReady({ uiReadyState: 2 });\n      }, SECOND_STATE_DELAY);\n    });\n\n    return () => {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = undefined;\n      }\n\n      setIsUiReady({ uiReadyState: 0 });\n    };\n  });\n\n  return (\n    <>\n      {children}\n      {shouldRenderMask && !shouldSkipHistoryAnimations && Boolean(page) && (\n        <div className={buildClassName(styles.mask, transitionClassNames)}>\n          {page === \"main\" ? (\n            <div className={styles.main}>\n              <div\n                className={styles.left}\n                style={\n                  leftColumnWidth ? `width: ${leftColumnWidth}px` : undefined\n                }\n              />\n              <div className={buildClassName(styles.middle, appStyles.bg)} />\n              {isRightColumnShown && <div className={styles.right} />}\n            </div>\n          ) : page === \"inactive\" || page === \"lock\" ? (\n            <div className={buildClassName(styles.blank, appStyles.bg)} />\n          ) : (\n            <div className={styles.blank} />\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default withGlobal<OwnProps>((global, { isMobile }): StateProps => {\n  const tabState = selectTabState(global);\n\n  return {\n    shouldSkipHistoryAnimations: tabState.shouldSkipHistoryAnimations,\n    uiReadyState: tabState.uiReadyState,\n    isRightColumnShown: selectIsRightColumnShown(global, isMobile),\n    leftColumnWidth: global.leftColumnWidth,\n  };\n})(UiLoader);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useCallback, useState } from '../../../lib/teact/teact';\n\nimport { ApiMessageEntityTypes } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { getPrettyCodeLanguageName } from '../../../util/prettyCodeLanguageNames';\n\nimport useAsync from '../../../hooks/useAsync';\n\nimport PeerColorWrapper from '../PeerColorWrapper';\nimport CodeOverlay from './CodeOverlay';\n\nimport './CodeBlock.scss';\n\nexport type OwnProps = {\n  text: string;\n  language?: string;\n  noCopy?: boolean;\n};\n\nconst CodeBlock: FC<OwnProps> = ({ text, language, noCopy }) => {\n  const [isWordWrap, setWordWrap] = useState(true);\n\n  const { result: highlighted } = useAsync(() => {\n    if (!language) return Promise.resolve(undefined);\n    return import('../../../util/highlightCode')\n      .then((lib) => lib.default(text, language));\n  }, [language, text]);\n\n  const handleWordWrapToggle = useCallback((wrap) => {\n    setWordWrap(wrap);\n  }, []);\n\n  const blockClass = buildClassName(\n    'code-block',\n    !isWordWrap && 'no-word-wrap',\n  );\n\n  return (\n    <PeerColorWrapper\n      className=\"CodeBlock\"\n    >\n      {language && (<p className=\"code-title\">{getPrettyCodeLanguageName(language)}</p>)}\n      <pre className={blockClass} data-entity-type={ApiMessageEntityTypes.Pre} data-language={language}>\n        {highlighted ?? text}\n        <CodeOverlay\n          text={text}\n          className=\"code-overlay\"\n          onWordWrapToggle={handleWordWrapToggle}\n          noCopy={noCopy}\n        />\n      </pre>\n    </PeerColorWrapper>\n  );\n};\n\nexport default memo(CodeBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"pMUccFN9\",\"copy\":\"auCNtLQ4\",\"wrap\":\"a44ZN3hD\",\"wrapOn\":\"jq1KLfVD\",\"content\":\"L95Dh7wN\",\"hidden\":\"zctwFUQ8\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { areLinesWrapping } from '../helpers/renderText';\n\nimport useOldLang from '../../../hooks/useOldLang';\nimport useWindowSize from '../../../hooks/window/useWindowSize';\n\nimport Icon from '../icons/Icon';\n\nimport styles from './CodeOverlay.module.scss';\n\nexport type OwnProps = {\n  className?: string;\n  text: string;\n  noCopy?: boolean;\n  onWordWrapToggle?: (wrap: boolean) => void;\n};\n\nconst CodeOverlay: FC<OwnProps> = ({\n  text, className, noCopy, onWordWrapToggle,\n}) => {\n  const { showNotification } = getActions();\n  const ref = useRef<HTMLDivElement>();\n  const windowSize = useWindowSize();\n  const lang = useOldLang();\n  const [isWordWrap, setIsWordWrap] = useState(true);\n  const [withWordWrapButton, setWithWordWrapButton] = useState(false);\n\n  const checkWordWrap = useCallback(() => {\n    const isWrap = areLinesWrapping(text, ref.current!.parentElement!);\n    setWithWordWrapButton(isWrap);\n  }, [text]);\n\n  useEffect(() => {\n    if (isWordWrap) {\n      checkWordWrap();\n    }\n  }, [checkWordWrap, isWordWrap, text, windowSize]);\n\n  const handleCopy = useCallback(() => {\n    copyTextToClipboard(text);\n    showNotification({\n      message: lang('TextCopied'),\n    });\n  }, [lang, showNotification, text]);\n\n  const handleWordWrapClick = useCallback(() => {\n    setIsWordWrap(!isWordWrap);\n    onWordWrapToggle?.(!isWordWrap);\n  }, [isWordWrap, onWordWrapToggle]);\n\n  const contentClass = buildClassName(styles.content, !withWordWrapButton && noCopy && styles.hidden);\n  const overlayClass = buildClassName(styles.overlay, className);\n  const wrapClass = buildClassName(styles.wrap, isWordWrap && styles.wrapOn);\n\n  return (\n    <div className={overlayClass} ref={ref}>\n      <div className={contentClass}>\n        {withWordWrapButton && (\n          <div className={wrapClass} onClick={handleWordWrapClick} title=\"Word Wrap\">\n            <Icon name=\"word-wrap\" />\n          </div>\n        )}\n        {!noCopy && (\n          <div className={styles.copy} onClick={handleCopy} title={lang('Copy')}>\n            <Icon name=\"copy\" />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(CodeOverlay);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"pTWe_CYU\"};","import {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { getStickerMediaHash } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { preloadImage } from '../../../util/files';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { useThrottleForHeavyAnimation } from '../../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\nimport useDevicePixelRatio from '../../../hooks/window/useDevicePixelRatio';\nimport useCustomEmoji from '../hooks/useCustomEmoji';\n\nimport styles from './EmojiIconBackground.module.scss';\n\ntype IconPosition = {\n  inline: number;\n  block: number;\n  opacity: number;\n  scale: number;\n};\n\nconst ICON_POSITIONS: IconPosition[] = [\n  {\n    inline: 22, block: 38, opacity: 0.35, scale: 0.75,\n  },\n  {\n    inline: 32, block: 12, opacity: 0.3, scale: 1,\n  },\n  {\n    inline: 60, block: 22, opacity: 0.25, scale: 0.75,\n  },\n  {\n    inline: 75, block: 44, opacity: 0.25, scale: 1,\n  },\n  {\n    inline: 75, block: 2, opacity: 0.2, scale: 0.625,\n  },\n  {\n    inline: 95, block: 18, opacity: 0.2, scale: 1,\n  },\n  {\n    inline: 115, block: 38, opacity: 0.2, scale: 0.625,\n  },\n  {\n    inline: 125, block: 12, opacity: 0.1, scale: 0.75,\n  },\n];\n\nconst EMOJI_SIZE = REM;\nconst LOTTIE_TINT_OPACITY = 'ff';\nconst NON_LOTTIE_TINT_OPACITY = 'bb';\n\ntype OwnProps = {\n  emojiDocumentId: string;\n  className?: string;\n};\n\nconst EmojiIconBackground = ({\n  emojiDocumentId,\n  className,\n}: OwnProps) => {\n  const canvasRef = useRef<HTMLCanvasElement>();\n  const containerRef = useRef<HTMLDivElement>();\n\n  const [emojiImage, setEmojiImage] = useState<HTMLImageElement | undefined>();\n\n  const dpr = useDevicePixelRatio();\n\n  const lang = useOldLang();\n\n  const { customEmoji } = useCustomEmoji(emojiDocumentId);\n  const previewMediaHash = customEmoji ? getStickerMediaHash(customEmoji, 'preview') : undefined;\n  const previewUrl = useMedia(previewMediaHash);\n\n  const customColor = useDynamicColorListener(containerRef);\n\n  const preloadAfterHeavyAnimation = useThrottleForHeavyAnimation(() => {\n    if (!previewUrl) return;\n    preloadImage(previewUrl).then(setEmojiImage);\n  }, [previewUrl]);\n\n  useEffect(() => {\n    preloadAfterHeavyAnimation();\n  }, [preloadAfterHeavyAnimation]);\n\n  const updateCanvas = useLastCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !emojiImage || !customColor) return;\n\n    const context = canvas.getContext('2d')!;\n    const { width, height } = canvas;\n\n    context.clearRect(0, 0, width, height);\n\n    ICON_POSITIONS.forEach(({\n      inline, block, opacity, scale,\n    }) => {\n      const x = (lang.isRtl ? inline : width / dpr - inline) * dpr;\n      const y = block * dpr;\n\n      const emojiSize = EMOJI_SIZE * dpr;\n\n      context.save();\n      context.globalAlpha = opacity;\n      context.translate(x, y);\n      context.scale(scale, scale);\n      context.drawImage(emojiImage, -emojiSize / 2, -emojiSize / 2, emojiSize, emojiSize);\n      context.restore();\n    });\n\n    const tintColor = `${customColor}${customEmoji!.isLottie ? LOTTIE_TINT_OPACITY : NON_LOTTIE_TINT_OPACITY}`;\n\n    context.save();\n    context.fillStyle = tintColor;\n    context.globalCompositeOperation = 'source-atop';\n    context.fillRect(0, 0, width, height);\n    context.restore();\n  });\n\n  const updateCanvasAfterHeavyAnimation = useThrottleForHeavyAnimation(updateCanvas, [updateCanvas]);\n\n  useEffect(() => {\n    updateCanvasAfterHeavyAnimation();\n  }, [emojiImage, lang.isRtl, customColor, updateCanvasAfterHeavyAnimation]);\n\n  const updateCanvasSize = useThrottleForHeavyAnimation((parentWidth: number, parentHeight: number) => {\n    requestMutation(() => {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n\n      canvas.width = parentWidth * dpr;\n      canvas.height = parentHeight * dpr;\n\n      canvas.style.width = `${parentWidth}px`;\n      canvas.style.height = `${parentHeight}px`;\n\n      updateCanvas();\n    });\n  }, [dpr]);\n\n  const handleResize = useThrottleForHeavyAnimation((entry: ResizeObserverEntry) => {\n    const { width, height } = entry.contentRect;\n\n    updateCanvasSize(width, height);\n  }, [updateCanvasSize]);\n\n  useResizeObserver(containerRef, handleResize);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const { width, height } = container.getBoundingClientRect();\n\n    updateCanvasSize(width, height);\n  }, [updateCanvasSize]);\n\n  return (\n    <div className={buildClassName(styles.root, className)} ref={containerRef}>\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default memo(EmojiIconBackground);\n","import QrPlane from '../../../assets/tgs/auth/QrPlane.tgs';\nimport BannedDuck from '../../../assets/tgs/BannedDuck.tgs';\nimport CameraFlip from '../../../assets/tgs/calls/CameraFlip.tgs';\nimport HandFilled from '../../../assets/tgs/calls/HandFilled.tgs';\nimport HandOutline from '../../../assets/tgs/calls/HandOutline.tgs';\nimport Speaker from '../../../assets/tgs/calls/Speaker.tgs';\nimport VoiceAllowTalk from '../../../assets/tgs/calls/VoiceAllowTalk.tgs';\nimport VoiceMini from '../../../assets/tgs/calls/VoiceMini.tgs';\nimport VoiceMuted from '../../../assets/tgs/calls/VoiceMuted.tgs';\nimport VoiceOutlined from '../../../assets/tgs/calls/VoiceOutlined.tgs';\nimport Diamond from '../../../assets/tgs/Diamond.tgs';\nimport Flame from '../../../assets/tgs/general/Flame.tgs';\nimport Fragment from '../../../assets/tgs/general/Fragment.tgs';\nimport Mention from '../../../assets/tgs/general/Mention.tgs';\nimport PartyPopper from '../../../assets/tgs/general/PartyPopper.tgs';\nimport Invite from '../../../assets/tgs/invites/Invite.tgs';\nimport JoinRequest from '../../../assets/tgs/invites/Requests.tgs';\nimport LastSeen from '../../../assets/tgs/LastSeen.tgs';\nimport MonkeyClose from '../../../assets/tgs/monkeys/TwoFactorSetupMonkeyClose.tgs';\nimport MonkeyIdle from '../../../assets/tgs/monkeys/TwoFactorSetupMonkeyIdle.tgs';\nimport MonkeyPeek from '../../../assets/tgs/monkeys/TwoFactorSetupMonkeyPeek.tgs';\nimport MonkeyTracking from '../../../assets/tgs/monkeys/TwoFactorSetupMonkeyTracking.tgs';\nimport ReadTime from '../../../assets/tgs/ReadTime.tgs';\nimport Report from '../../../assets/tgs/Report.tgs';\nimport SearchingDuck from '../../../assets/tgs/SearchingDuck.tgs';\nimport Congratulations from '../../../assets/tgs/settings/Congratulations.tgs';\nimport DiscussionGroups from '../../../assets/tgs/settings/DiscussionGroupsDucks.tgs';\nimport Experimental from '../../../assets/tgs/settings/Experimental.tgs';\nimport FoldersAll from '../../../assets/tgs/settings/FoldersAll.tgs';\nimport FoldersNew from '../../../assets/tgs/settings/FoldersNew.tgs';\nimport FoldersShare from '../../../assets/tgs/settings/FoldersShare.tgs';\nimport Lock from '../../../assets/tgs/settings/Lock.tgs';\nimport StarReaction from '../../../assets/tgs/stars/StarReaction.tgs';\nimport StarReactionEffect from '../../../assets/tgs/stars/StarReactionEffect.tgs';\nimport Unlock from '../../../assets/tgs/Unlock.tgs';\n\nexport const LOCAL_TGS_URLS = {\n  MonkeyIdle,\n  MonkeyTracking,\n  MonkeyClose,\n  MonkeyPeek,\n  FoldersAll,\n  FoldersNew,\n  FoldersShare,\n  DiscussionGroups,\n  Lock,\n  CameraFlip,\n  HandFilled,\n  HandOutline,\n  Speaker,\n  VoiceAllowTalk,\n  VoiceMini,\n  VoiceMuted,\n  VoiceOutlined,\n  JoinRequest,\n  Invite,\n  QrPlane,\n  Congratulations,\n  Experimental,\n  PartyPopper,\n  Flame,\n  ReadTime,\n  Unlock,\n  LastSeen,\n  Mention,\n  Fragment,\n  StarReactionEffect,\n  StarReaction,\n  Report,\n  SearchingDuck,\n  BannedDuck,\n  Diamond,\n};\n","import type { ApiDocument } from '../../../api/types';\n\nconst ONE_GIGABYTE = 1024 * 1024 * 1024;\nconst ONE_MEGABYTE = 1024 * 1024;\n\nexport function getFileSizeString(bytes: number) {\n  if (bytes > (ONE_GIGABYTE / 2)) {\n    return `${(bytes / ONE_GIGABYTE).toFixed(1)} GB`;\n  }\n  if (bytes > (ONE_MEGABYTE / 2)) {\n    return `${(bytes / ONE_MEGABYTE).toFixed(1)} MB`;\n  }\n  return `${(bytes / (1024)).toFixed(1)} KB`;\n}\n\nexport function getDocumentExtension(document: ApiDocument) {\n  const { fileName, mimeType } = document;\n\n  return getFileExtension(fileName, mimeType);\n}\n\nexport function getFileExtension(fileName: string, mimeType: string) {\n  if (fileName && fileName.indexOf('.') !== -1) {\n    return fileName.split('.').pop();\n  } else {\n    return mimeType.split('/').pop();\n  }\n}\n\nexport function getColorFromExtension(extension: string) {\n  switch (extension) {\n    case 'apk':\n    case 'xls':\n    case 'xlsx':\n    case 'ods':\n      return 'green';\n    case 'zip':\n    case 'rar':\n    case '7z':\n    case 'tar':\n    case 'gz':\n    case 'bz2':\n    case 'liz':\n    case 'lz4':\n    case 'lz5':\n    case 'xz':\n    case 'zst':\n    case 'wim':\n    case 'ppt':\n    case 'pptx':\n    case 'odp':\n      return 'orange';\n    case 'pdf':\n    case 'xps':\n      return 'red';\n    default:\n      return 'default';\n  }\n}\n\nexport function getDocumentHasPreview(document: ApiDocument) {\n  return Boolean(document.previewBlobUrl || document.thumbnail);\n}\n","import type {\n  ApiDimensions, ApiMediaExtendedPreview, ApiPhoto, ApiSticker, ApiVideo,\n} from '../../../api/types';\n\nimport { STICKER_SIZE_INLINE_DESKTOP_FACTOR, STICKER_SIZE_INLINE_MOBILE_FACTOR } from '../../../config';\nimport { getPhotoInlineDimensions, getVideoDimensions } from '../../../global/helpers';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nexport const MEDIA_VIEWER_MEDIA_QUERY = '(max-height: 640px)';\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const ROUND_VIDEO_DIMENSIONS_PX = 240;\nexport const GIF_MIN_WIDTH = 300;\nexport const AVATAR_FULL_DIMENSIONS = { width: 640, height: 640 };\nexport const VIDEO_AVATAR_FULL_DIMENSIONS = { width: 800, height: 800 };\nexport const LIKE_STICKER_ID = '4986041492570112461';\n\nconst DEFAULT_MEDIA_DIMENSIONS: ApiDimensions = { width: 100, height: 100 };\nconst MOBILE_SCREEN_NO_AVATARS_MESSAGE_EXTRA_WIDTH_REM = 4.5;\nconst MOBILE_SCREEN_MESSAGE_EXTRA_WIDTH_REM = 7;\nconst MESSAGE_MAX_WIDTH_REM = 29;\nconst MESSAGE_OWN_MAX_WIDTH_REM = 30;\n\nlet cachedMaxWidthOwn: number | undefined;\nlet cachedMaxWidth: number | undefined;\nlet cachedMaxWidthNoAvatar: number | undefined;\n\nfunction getMaxMessageWidthRem(fromOwnMessage?: boolean, noAvatars?: boolean, isMobile?: boolean) {\n  const regularMaxWidth = fromOwnMessage ? MESSAGE_OWN_MAX_WIDTH_REM : MESSAGE_MAX_WIDTH_REM;\n  if (!isMobile) {\n    return regularMaxWidth;\n  }\n\n  const { width: windowWidth } = windowSize.get();\n\n  // @optimization Limitation: changing device screen width not supported\n  if (!cachedMaxWidthOwn) {\n    cachedMaxWidthOwn = Math.min(\n      MESSAGE_OWN_MAX_WIDTH_REM,\n      windowWidth / REM - MOBILE_SCREEN_NO_AVATARS_MESSAGE_EXTRA_WIDTH_REM,\n    );\n  }\n  if (!cachedMaxWidth) {\n    cachedMaxWidth = Math.min(\n      MESSAGE_MAX_WIDTH_REM,\n      windowWidth / REM - MOBILE_SCREEN_MESSAGE_EXTRA_WIDTH_REM,\n    );\n  }\n  if (!cachedMaxWidthNoAvatar) {\n    cachedMaxWidthNoAvatar = Math.min(\n      MESSAGE_MAX_WIDTH_REM,\n      windowWidth / REM - MOBILE_SCREEN_NO_AVATARS_MESSAGE_EXTRA_WIDTH_REM,\n    );\n  }\n\n  return fromOwnMessage\n    ? cachedMaxWidthOwn\n    : (noAvatars ? cachedMaxWidthNoAvatar : cachedMaxWidth);\n}\n\nexport function getAvailableWidth(\n  fromOwnMessage?: boolean,\n  isWebPageMedia?: boolean,\n  noAvatars?: boolean,\n  isMobile?: boolean,\n) {\n  const extraPaddingRem = isWebPageMedia ? 1.625 : 0;\n  const availableWidthRem = getMaxMessageWidthRem(fromOwnMessage, noAvatars, isMobile) - extraPaddingRem;\n\n  return availableWidthRem * REM;\n}\n\nfunction getAvailableHeight(isGif?: boolean, aspectRatio?: number) {\n  if (\n    isGif && aspectRatio\n    && aspectRatio >= 0.75 && aspectRatio <= 1.25\n  ) {\n    return 20 * REM;\n  }\n\n  return 27 * REM;\n}\n\nexport function calculateDimensionsForMessageMedia({\n  width,\n  height,\n  fromOwnMessage,\n  isWebPageMedia,\n  isGif,\n  noAvatars,\n  isMobile,\n}: {\n  width: number;\n  height: number;\n  fromOwnMessage?: boolean;\n  asForwarded?: boolean;\n  isWebPageMedia?: boolean;\n  isGif?: boolean;\n  noAvatars?: boolean;\n  isMobile?: boolean;\n}): ApiDimensions {\n  const aspectRatio = height / width;\n  const availableWidth = getAvailableWidth(fromOwnMessage, isWebPageMedia, noAvatars, isMobile);\n  const availableHeight = getAvailableHeight(isGif, aspectRatio);\n  const mediaWidth = isGif ? Math.max(GIF_MIN_WIDTH, width) : width;\n  const mediaHeight = isGif ? height * (mediaWidth / width) : height;\n\n  return calculateDimensions(availableWidth, availableHeight, mediaWidth, mediaHeight);\n}\n\nexport function getMediaViewerAvailableDimensions(withFooter: boolean, isVideo: boolean): ApiDimensions {\n  const mql = window.matchMedia(MEDIA_VIEWER_MEDIA_QUERY);\n  const { width: windowWidth, height: windowHeight } = windowSize.get();\n  let occupiedHeightRem = isVideo && mql.matches ? 10 : 8.25;\n  if (withFooter && !IS_TOUCH_ENV) {\n    occupiedHeightRem = mql.matches ? 10 : 12.5;\n  }\n  return {\n    width: windowWidth,\n    height: windowHeight - occupiedHeightRem * REM,\n  };\n}\n\nexport function calculateInlineImageDimensions(\n  photo: ApiPhoto,\n  fromOwnMessage?: boolean,\n  asForwarded?: boolean,\n  isWebPageMedia?: boolean,\n  noAvatars?: boolean,\n  isMobile?: boolean,\n) {\n  const { width, height } = getPhotoInlineDimensions(photo) || DEFAULT_MEDIA_DIMENSIONS;\n\n  return calculateDimensionsForMessageMedia({\n    width,\n    height,\n    fromOwnMessage,\n    asForwarded,\n    isWebPageMedia,\n    noAvatars,\n    isMobile,\n  });\n}\n\nexport function calculateVideoDimensions(\n  video: ApiVideo,\n  fromOwnMessage?: boolean,\n  asForwarded?: boolean,\n  isWebPageMedia?: boolean,\n  noAvatars?: boolean,\n  isMobile?: boolean,\n) {\n  const { width, height } = getVideoDimensions(video) || DEFAULT_MEDIA_DIMENSIONS;\n\n  return calculateDimensionsForMessageMedia({\n    width,\n    height,\n    fromOwnMessage,\n    asForwarded,\n    isWebPageMedia,\n    isGif: video.isGif,\n    noAvatars,\n    isMobile,\n  });\n}\n\nexport function calculateExtendedPreviewDimensions(\n  preview: ApiMediaExtendedPreview,\n  fromOwnMessage?: boolean,\n  asForwarded?: boolean,\n  isWebPageMedia?: boolean,\n  noAvatars?: boolean,\n  isMobile?: boolean,\n) {\n  const { width = DEFAULT_MEDIA_DIMENSIONS.width, height = DEFAULT_MEDIA_DIMENSIONS.height } = preview;\n\n  return calculateDimensionsForMessageMedia({\n    width,\n    height,\n    fromOwnMessage,\n    asForwarded,\n    isWebPageMedia,\n    noAvatars,\n    isMobile,\n  });\n}\n\nexport function getPictogramDimensions(): ApiDimensions {\n  return {\n    width: 2 * REM,\n    height: 2 * REM,\n  };\n}\n\nexport function getDocumentThumbnailDimensions(smaller?: boolean): ApiDimensions {\n  if (smaller) {\n    return {\n      width: 3 * REM,\n      height: 3 * REM,\n    };\n  }\n\n  return {\n    width: 3.375 * REM,\n    height: 3.375 * REM,\n  };\n}\n\nexport function getStickerDimensions(sticker: ApiSticker, isMobile?: boolean): ApiDimensions {\n  const { width } = sticker;\n  let { height } = sticker;\n\n  // For some reason this sticker has some weird `height` value\n  if (sticker.id === LIKE_STICKER_ID) {\n    height = width;\n  }\n\n  const aspectRatio = (height && width) && height / width;\n  const baseWidth = REM * (\n    isMobile\n      ? STICKER_SIZE_INLINE_MOBILE_FACTOR\n      : STICKER_SIZE_INLINE_DESKTOP_FACTOR\n  );\n  const calculatedHeight = aspectRatio ? baseWidth * aspectRatio : baseWidth;\n\n  if (aspectRatio && calculatedHeight > baseWidth) {\n    return {\n      width: Math.round(baseWidth / aspectRatio),\n      height: baseWidth,\n    };\n  }\n\n  return {\n    width: baseWidth,\n    height: calculatedHeight,\n  };\n}\n\nexport function calculateMediaViewerDimensions(\n  { width, height }: ApiDimensions, withFooter: boolean, isVideo: boolean = false,\n): ApiDimensions {\n  const { width: availableWidth, height: availableHeight } = getMediaViewerAvailableDimensions(withFooter, isVideo);\n\n  return calculateDimensions(availableWidth, availableHeight, width, height);\n}\n\nexport function calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n): ApiDimensions {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n","import type { ApiPeer, ApiPeerColor } from '../../../api/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { getPeerColorCount, getPeerColorKey } from '../../../global/helpers';\n\nexport function getPeerColorClass(peer?: ApiPeer | CustomPeer, noUserColors?: boolean, shouldReset?: boolean) {\n  if (!peer) {\n    if (!shouldReset) return undefined;\n    return noUserColors ? 'peer-color-count-1' : 'peer-color-0';\n  }\n\n  if ('isCustomPeer' in peer) {\n    if (peer.peerColorId === undefined) return undefined;\n    return `peer-color-${peer.peerColorId}`;\n  }\n  return noUserColors ? `peer-color-count-${getPeerColorCount(peer)}` : `peer-color-${getPeerColorKey(peer)}`;\n}\n\nexport function getApiPeerColorClass(color: ApiPeerColor) {\n  return `peer-color-${color.color}`;\n}\n","import type { TeactNode } from '../../../lib/teact/teact';\n\nimport type { TextPart } from '../../../types';\n\nimport {\n  BASE_URL, IS_PACKAGED_ELECTRON, RE_LINK_TEMPLATE, RE_MENTION_TEMPLATE,\n} from '../../../config';\nimport EMOJI_REGEX from '../../../lib/twemojiRegex';\nimport { IS_EMOJI_SUPPORTED } from '../../../util/browser/windowEnvironment';\nimport buildClassName from '../../../util/buildClassName';\nimport { isDeepLink } from '../../../util/deepLinkParser';\nimport {\n  handleEmojiLoad,\n  LOADED_EMOJIS,\n  nativeToUnifiedExtendedWithCache,\n} from '../../../util/emoji/emoji';\nimport fixNonStandardEmoji from '../../../util/emoji/fixNonStandardEmoji';\nimport { compact } from '../../../util/iteratees';\n\nimport MentionLink from '../../middle/message/MentionLink';\nimport SafeLink from '../SafeLink';\n\nexport type TextFilter = (\n  'escape_html' | 'hq_emoji' | 'emoji' | 'emoji_html' | 'br' | 'br_html' | 'highlight' | 'links' |\n  'simple_markdown' | 'simple_markdown_html' | 'tg_links'\n  );\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TextPart,\n  filters: Array<TextFilter> = ['emoji'],\n  params?: {\n    highlight?: string;\n    markdownPostProcessor?: (part: string) => TeactNode;\n  },\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'escape_html':\n        return escapeHtml(text);\n\n      case 'hq_emoji':\n        EMOJI_REGEX.lastIndex = 0;\n        return replaceEmojis(text, 'big', 'jsx');\n\n      case 'emoji':\n        EMOJI_REGEX.lastIndex = 0;\n        return replaceEmojis(text, 'small', 'jsx');\n\n      case 'emoji_html':\n        EMOJI_REGEX.lastIndex = 0;\n        return replaceEmojis(text, 'small', 'html');\n\n      case 'br':\n        return addLineBreaks(text, 'jsx');\n\n      case 'br_html':\n        return addLineBreaks(text, 'html');\n\n      case 'highlight':\n        return addHighlight(text, params!.highlight);\n\n      case 'links':\n        return addLinks(text);\n\n      case 'tg_links':\n        return addLinks(text, true);\n\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text, 'jsx', params?.markdownPostProcessor);\n\n      case 'simple_markdown_html':\n        return replaceSimpleMarkdown(text, 'html');\n    }\n\n    return text;\n  }, [part] as TextPart[]));\n}\n\nfunction escapeHtml(textParts: TextPart[]): TextPart[] {\n  const divEl = document.createElement('div');\n  return textParts.reduce((result: TextPart[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    divEl.innerText = part;\n    result.push(divEl.innerHTML);\n\n    return result;\n  }, []);\n}\n\nfunction replaceEmojis(textParts: TextPart[], size: 'big' | 'small', type: 'jsx' | 'html'): TextPart[] {\n  if (IS_EMOJI_SUPPORTED) {\n    return textParts;\n  }\n\n  return textParts.reduce((result: TextPart[], part: TextPart) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    part = fixNonStandardEmoji(part);\n    const parts = part.split(EMOJI_REGEX);\n    const emojis: string[] = part.match(EMOJI_REGEX) || [];\n    result.push(parts[0]);\n\n    return emojis.reduce((emojiResult: TextPart[], emoji, i) => {\n      const code = nativeToUnifiedExtendedWithCache(emoji);\n      if (!code) {\n        emojiResult.push(emoji);\n      } else {\n        const baseSrcUrl = IS_PACKAGED_ELECTRON ? BASE_URL : '.';\n        const src = `${baseSrcUrl}/img-apple-${size === 'big' ? '160' : '64'}/${code}.png`;\n        const className = buildClassName(\n          'emoji',\n          size === 'small' && 'emoji-small',\n        );\n\n        if (type === 'jsx') {\n          const isLoaded = LOADED_EMOJIS.has(src);\n\n          emojiResult.push(\n            <img\n              src={src}\n              className={`${className}${!isLoaded ? ' opacity-transition slow shown' : ''}`}\n              alt={emoji}\n              data-path={src}\n              draggable={false}\n              onLoad={!isLoaded ? handleEmojiLoad : undefined}\n            />,\n          );\n        }\n        if (type === 'html') {\n          emojiResult.push(\n            `<img\\\n            draggable=\"false\"\\\n            class=\"${className}\"\\\n            src=\"${src}\"\\\n            alt=\"${emoji}\"\\\n          />`,\n          );\n        }\n      }\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        emojiResult.push(parts[index]);\n      }\n\n      return emojiResult;\n    }, result);\n  }, [] as TextPart[]);\n}\n\nfunction addLineBreaks(textParts: TextPart[], type: 'jsx' | 'html'): TextPart[] {\n  return textParts.reduce((result: TextPart[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TextPart[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimLeft();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(\n            type === 'jsx' ? <br /> : '<br />',\n          );\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n\nfunction addHighlight(textParts: TextPart[], highlight: string | undefined): TextPart[] {\n  return textParts.reduce<TextPart[]>((result, part) => {\n    if (typeof part !== 'string' || !highlight) {\n      result.push(part);\n      return result;\n    }\n\n    const lowerCaseText = part.toLowerCase();\n    const queryPosition = lowerCaseText.indexOf(highlight.toLowerCase());\n    if (queryPosition < 0) {\n      result.push(part);\n      return result;\n    }\n\n    const newParts: TextPart[] = [];\n    newParts.push(part.substring(0, queryPosition));\n    newParts.push(\n      <span className=\"matching-text-highlight\">\n        {part.substring(queryPosition, queryPosition + highlight.length)}\n      </span>,\n    );\n    newParts.push(part.substring(queryPosition + highlight.length));\n    return [...result, ...newParts];\n  }, []);\n}\n\nconst RE_LINK = new RegExp(`${RE_LINK_TEMPLATE}|${RE_MENTION_TEMPLATE}`, 'ig');\n\nfunction addLinks(textParts: TextPart[], allowOnlyTgLinks?: boolean): TextPart[] {\n  return textParts.reduce<TextPart[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const links = part.match(RE_LINK);\n    if (!links || !links.length) {\n      result.push(part);\n      return result;\n    }\n\n    const content: TextPart[] = [];\n\n    let nextLink = links.shift();\n    let lastIndex = 0;\n    while (nextLink) {\n      const index = part.indexOf(nextLink, lastIndex);\n      content.push(part.substring(lastIndex, index));\n      if (nextLink.startsWith('@')) {\n        content.push(\n          <MentionLink username={nextLink}>\n            {nextLink}\n          </MentionLink>,\n        );\n      } else {\n        if (nextLink.endsWith('?')) {\n          nextLink = nextLink.slice(0, nextLink.length - 1);\n        }\n\n        if (!allowOnlyTgLinks || isDeepLink(nextLink)) {\n          content.push(\n            <SafeLink text={nextLink} url={nextLink} />,\n          );\n        } else {\n          content.push(nextLink);\n        }\n      }\n      lastIndex = index + nextLink.length;\n      nextLink = links.shift();\n    }\n    content.push(part.substring(lastIndex));\n\n    return [...result, ...content];\n  }, []);\n}\n\nfunction replaceSimpleMarkdown(\n  textParts: TextPart[], type: 'jsx' | 'html', postProcessor?: (part: string) => TeactNode,\n): TextPart[] {\n  // Currently supported only for JSX. If needed, add typings to support HTML as well.\n  const postProcess = postProcessor || ((part: string) => part);\n\n  return textParts.reduce<TextPart[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(postProcess(parts[0]));\n\n    return entities.reduce((entityResult: TextPart[], entity, i) => {\n      if (type === 'jsx') {\n        entityResult.push(\n          entity.startsWith('**')\n            ? <b>{postProcess(entity.replace(/\\*\\*/g, ''))}</b>\n            : <i>{postProcess(entity.replace(/__/g, ''))}</i>,\n        );\n      } else {\n        entityResult.push(\n          entity.startsWith('**')\n            ? `<b>${entity.replace(/\\*\\*/g, '')}</b>`\n            : `<i>${entity.replace(/__/g, '')}</i>`,\n        );\n      }\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(postProcess(parts[index]));\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nexport function areLinesWrapping(text: string, element: HTMLElement) {\n  const lines = (text.trim().match(/\\n/g) || '').length + 1;\n  const { lineHeight } = getComputedStyle(element);\n  const lineHeightParsed = parseFloat(lineHeight.split('px')[0]);\n\n  return element.clientHeight >= (lines + 1) * lineHeightParsed;\n}\n","import type { ElementRef } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiFormattedText, ApiMessageEntity } from '../../../api/types';\nimport type { ObserveFn } from '../../../hooks/useIntersectionObserver';\nimport type { TextPart, ThreadId } from '../../../types';\nimport type { TextFilter } from './renderText';\nimport { ApiMessageEntityTypes } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { oldTranslate } from '../../../util/oldLangProvider';\nimport { buildCustomEmojiHtmlFromEntity } from '../../middle/composer/helpers/customEmoji';\nimport renderText from './renderText';\n\nimport MentionLink from '../../middle/message/MentionLink';\nimport Blockquote from '../Blockquote';\nimport CodeBlock from '../code/CodeBlock';\nimport CustomEmoji from '../CustomEmoji';\nimport SafeLink from '../SafeLink';\nimport Spoiler from '../spoiler/Spoiler';\n\ninterface IOrganizedEntity {\n  entity: ApiMessageEntity;\n  organizedIndexes: Set<number>;\n  nestedEntities: IOrganizedEntity[];\n}\ntype RenderTextParams = Parameters<typeof renderText>[2];\n\nconst HQ_EMOJI_THRESHOLD = 64;\n\nexport function renderTextWithEntities({\n  text,\n  entities,\n  highlight,\n  emojiSize,\n  shouldRenderAsHtml,\n  containerId,\n  asPreview,\n  isProtected,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  withTranslucentThumbs,\n  sharedCanvasRef,\n  sharedCanvasHqRef,\n  cacheBuster,\n  forcePlayback,\n  noCustomEmojiPlayback,\n  isInSelectMode,\n  chatId,\n  messageId,\n  threadId,\n  maxTimestamp,\n}: {\n  text: string;\n  entities?: ApiMessageEntity[];\n  highlight?: string;\n  emojiSize?: number;\n  shouldRenderAsHtml?: boolean;\n  containerId?: string;\n  asPreview?: boolean;\n  isProtected?: boolean;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  withTranslucentThumbs?: boolean;\n  sharedCanvasRef?: ElementRef<HTMLCanvasElement>;\n  sharedCanvasHqRef?: ElementRef<HTMLCanvasElement>;\n  cacheBuster?: string;\n  forcePlayback?: boolean;\n  noCustomEmojiPlayback?: boolean;\n  isInSelectMode?: boolean;\n  chatId?: string;\n  messageId?: number;\n  threadId?: ThreadId;\n  maxTimestamp?: number;\n}) {\n  if (!entities?.length) {\n    return renderMessagePart({\n      content: text,\n      highlight,\n      emojiSize,\n      shouldRenderAsHtml,\n      asPreview,\n    });\n  }\n\n  const result: TextPart[] = [];\n  let deleteLineBreakAfterPre = false;\n\n  const organizedEntities = organizeEntities(entities);\n\n  // Recursive function to render regular and nested entities\n  function renderEntity(\n    textPartStart: number,\n    textPartEnd: number,\n    organizedEntity: IOrganizedEntity,\n    isLastEntity: boolean,\n  ) {\n    const renderResult: TextPart[] = [];\n    const { entity, nestedEntities } = organizedEntity;\n    const { offset, length, type } = entity;\n\n    // Render text before the entity\n    let textBefore = text.substring(textPartStart, offset);\n    const textBeforeLength = textBefore.length;\n    if (textBefore) {\n      if (deleteLineBreakAfterPre && textBefore.length > 0 && textBefore[0] === '\\n') {\n        textBefore = textBefore.substr(1);\n        deleteLineBreakAfterPre = false;\n      }\n      if (textBefore) {\n        renderResult.push(...renderMessagePart({\n          content: textBefore,\n          highlight,\n          emojiSize,\n          shouldRenderAsHtml,\n          asPreview,\n        }));\n      }\n    }\n\n    const entityStartIndex = textPartStart + textBeforeLength;\n    const entityEndIndex = entityStartIndex + length;\n\n    let entityContent: TextPart = text.substring(offset, offset + length);\n    const nestedEntityContent: TextPart[] = [];\n\n    if (deleteLineBreakAfterPre && entityContent.length > 0 && entityContent[0] === '\\n') {\n      entityContent = entityContent.substr(1);\n      deleteLineBreakAfterPre = false;\n    }\n\n    if (type === ApiMessageEntityTypes.Pre) {\n      deleteLineBreakAfterPre = true;\n    }\n\n    // Render nested entities, if any\n    if (nestedEntities.length) {\n      let nestedIndex = entityStartIndex;\n\n      nestedEntities.forEach((nestedEntity, nestedEntityIndex) => {\n        const {\n          renderResult: nestedResult,\n          entityEndIndex: nestedEntityEndIndex,\n        } = renderEntity(\n          nestedIndex,\n          entityEndIndex,\n          nestedEntity,\n          nestedEntityIndex === nestedEntities.length - 1,\n        );\n\n        nestedEntityContent.push(...nestedResult);\n        nestedIndex = nestedEntityEndIndex;\n      });\n    }\n\n    // Render the entity itself\n    const newEntity = shouldRenderAsHtml\n      ? processEntityAsHtml(entity, entityContent, nestedEntityContent)\n      : processEntity({\n        entity,\n        entityContent,\n        nestedEntityContent,\n        highlight,\n        containerId,\n        asPreview,\n        isProtected,\n        observeIntersectionForLoading,\n        observeIntersectionForPlaying,\n        withTranslucentThumbs,\n        emojiSize,\n        sharedCanvasRef,\n        sharedCanvasHqRef,\n        cacheBuster,\n        forcePlayback,\n        noCustomEmojiPlayback,\n        isInSelectMode,\n        chatId,\n        messageId,\n        threadId,\n        maxTimestamp,\n      });\n\n    if (Array.isArray(newEntity)) {\n      renderResult.push(...newEntity);\n    } else {\n      renderResult.push(newEntity);\n    }\n\n    // Render text after the entity, if it is the last entity in the text,\n    // or the last nested entity inside of another entity\n    if (isLastEntity && entityEndIndex < textPartEnd) {\n      let textAfter = text.substring(entityEndIndex, textPartEnd);\n      if (deleteLineBreakAfterPre && textAfter.length > 0 && textAfter[0] === '\\n') {\n        textAfter = textAfter.substring(1);\n      }\n      if (textAfter) {\n        renderResult.push(...renderMessagePart({\n          content: textAfter,\n          highlight,\n          emojiSize,\n          shouldRenderAsHtml,\n          asPreview,\n        }));\n      }\n    }\n\n    return {\n      renderResult,\n      entityEndIndex,\n    };\n  }\n\n  // Process highest-level entities\n  let index = 0;\n\n  organizedEntities.forEach((entity, arrayIndex) => {\n    const { renderResult, entityEndIndex } = renderEntity(\n      index,\n      text.length,\n      entity,\n      arrayIndex === organizedEntities.length - 1,\n    );\n\n    result.push(...renderResult);\n    index = entityEndIndex;\n  });\n\n  return result;\n}\n\nexport function getTextWithEntitiesAsHtml(formattedText?: ApiFormattedText) {\n  const { text, entities } = formattedText || {};\n  if (!text) {\n    return '';\n  }\n\n  const result = renderTextWithEntities({\n    text,\n    entities,\n    shouldRenderAsHtml: true,\n  }) as string[];\n\n  if (Array.isArray(result)) {\n    return result.join('');\n  }\n\n  return result;\n}\n\nfunction renderMessagePart({\n  content,\n  highlight,\n  focusedQuote,\n  emojiSize,\n  shouldRenderAsHtml,\n  asPreview,\n}: {\n  content: TextPart | TextPart[];\n  highlight?: string;\n  focusedQuote?: string;\n  emojiSize?: number;\n  shouldRenderAsHtml?: boolean;\n  asPreview?: boolean;\n}) {\n  if (Array.isArray(content)) {\n    const result: TextPart[] = [];\n\n    content.forEach((c) => {\n      result.push(...renderMessagePart({\n        content: c,\n        highlight,\n        focusedQuote,\n        emojiSize,\n        shouldRenderAsHtml,\n        asPreview,\n      }));\n    });\n\n    return result;\n  }\n\n  if (shouldRenderAsHtml) {\n    return renderText(content, ['escape_html', 'emoji_html', 'br_html']);\n  }\n\n  const emojiFilter = emojiSize && emojiSize > HQ_EMOJI_THRESHOLD ? 'hq_emoji' : 'emoji';\n\n  const filters: TextFilter[] = [emojiFilter];\n  const params: RenderTextParams = {};\n  if (!asPreview) {\n    filters.push('br');\n  }\n\n  if (highlight) {\n    filters.push('highlight');\n    params.highlight = highlight;\n  }\n\n  return renderText(content, filters, params);\n}\n\nexport function insertTextEntity(entities: ApiMessageEntity[], newEntity: ApiMessageEntity) {\n  const resultEntities: ApiMessageEntity[] = [];\n\n  const newEntityStart = newEntity.offset;\n  const newEntityEnd = newEntity.offset + newEntity.length;\n\n  for (const existingEntity of entities) {\n    const existingEntityStart = existingEntity.offset;\n    const existingEntityEnd = existingEntity.offset + existingEntity.length;\n    // Push as is if edges do not overlap\n    if (existingEntityEnd <= newEntityStart\n      || existingEntityStart > newEntityEnd\n      || (existingEntityStart > newEntityStart\n        && existingEntityEnd < newEntityEnd)\n      || (existingEntityStart === newEntityStart && existingEntityEnd === newEntityEnd)) {\n      resultEntities.push(existingEntity);\n      continue;\n    }\n\n    // If start edge overlaps\n    if (existingEntityStart < newEntityStart && existingEntityEnd > newEntityStart) {\n      // Split entity in two\n      resultEntities.push({\n        ...existingEntity,\n        length: newEntityStart - existingEntityStart,\n      });\n      resultEntities.push({\n        ...existingEntity,\n        offset: newEntityStart,\n        length: existingEntityEnd - newEntityStart,\n      });\n    }\n\n    // If end edge overlaps\n    if (existingEntityStart < newEntityEnd\n      && existingEntityEnd > newEntityEnd) {\n      // Split entity in two\n      resultEntities.push({\n        ...existingEntity,\n        offset: newEntityEnd,\n        length: existingEntityEnd - newEntityStart - newEntity.length,\n      });\n      resultEntities.push({\n        ...existingEntity,\n        length: newEntityEnd - existingEntityStart,\n      });\n    }\n  }\n\n  resultEntities.push(newEntity);\n  // Sort entities by offset, longer entities first\n  return resultEntities.sort((a, b) => a.offset - b.offset || b.length - a.length);\n}\n\n// Organize entities in a tree-like structure to better represent how the text will be displayed\nfunction organizeEntities(entities: ApiMessageEntity[]) {\n  const organizedEntityIndexes = new Set<number>();\n  const organizedEntities: IOrganizedEntity[] = [];\n\n  entities.forEach((entity, index) => {\n    if (organizedEntityIndexes.has(index)) {\n      return;\n    }\n\n    const organizedEntity = organizeEntity(entity, index, entities, organizedEntityIndexes);\n    if (organizedEntity) {\n      organizedEntity.organizedIndexes.forEach((organizedIndex) => {\n        organizedEntityIndexes.add(organizedIndex);\n      });\n\n      organizedEntities.push(organizedEntity);\n    }\n  });\n\n  return organizedEntities;\n}\n\nfunction organizeEntity(\n  entity: ApiMessageEntity,\n  index: number,\n  entities: ApiMessageEntity[],\n  organizedEntityIndexes: Set<number>,\n): IOrganizedEntity | undefined {\n  const { offset, length } = entity;\n  const organizedIndexes = new Set([index]);\n\n  if (organizedEntityIndexes.has(index)) {\n    return undefined;\n  }\n\n  // Determine any nested entities inside current entity\n  const nestedEntities: IOrganizedEntity[] = [];\n  const parsedNestedEntities = entities\n    .filter((e, i) => i > index && e.offset >= offset && e.offset < offset + length)\n    .map((e) => organizeEntity(e, entities.indexOf(e), entities, organizedEntityIndexes))\n    .filter(Boolean);\n\n  parsedNestedEntities.forEach((parsedEntity) => {\n    let isChanged = false;\n\n    parsedEntity.organizedIndexes.forEach((organizedIndex) => {\n      if (!isChanged && !organizedIndexes.has(organizedIndex)) {\n        isChanged = true;\n      }\n\n      organizedIndexes.add(organizedIndex);\n    });\n\n    if (isChanged) {\n      nestedEntities.push(parsedEntity);\n    }\n  });\n\n  return {\n    entity,\n    organizedIndexes,\n    nestedEntities,\n  };\n}\n\nfunction processEntity({\n  entity,\n  entityContent,\n  nestedEntityContent,\n  highlight,\n  containerId,\n  asPreview,\n  isProtected,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  withTranslucentThumbs,\n  emojiSize,\n  sharedCanvasRef,\n  sharedCanvasHqRef,\n  cacheBuster,\n  forcePlayback,\n  noCustomEmojiPlayback,\n  isInSelectMode,\n  chatId,\n  messageId,\n  threadId,\n  maxTimestamp,\n}: {\n  entity: ApiMessageEntity;\n  entityContent: TextPart;\n  nestedEntityContent: TextPart[];\n  highlight?: string;\n  focusedQuote?: string;\n  containerId?: string;\n  asPreview?: boolean;\n  isProtected?: boolean;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  withTranslucentThumbs?: boolean;\n  emojiSize?: number;\n  sharedCanvasRef?: ElementRef<HTMLCanvasElement>;\n  sharedCanvasHqRef?: ElementRef<HTMLCanvasElement>;\n  cacheBuster?: string;\n  forcePlayback?: boolean;\n  noCustomEmojiPlayback?: boolean;\n  isInSelectMode?: boolean;\n  chatId?: string;\n  messageId?: number;\n  threadId?: ThreadId;\n  maxTimestamp?: number;\n}) {\n  const entityText = typeof entityContent === 'string' && entityContent;\n  const renderedContent = nestedEntityContent.length ? nestedEntityContent : entityContent;\n\n  function renderNestedMessagePart() {\n    return renderMessagePart({\n      content: renderedContent,\n      highlight,\n      emojiSize,\n      asPreview,\n    });\n  }\n\n  if (!entityText) {\n    return renderNestedMessagePart();\n  }\n\n  if (asPreview) {\n    const text = renderNestedMessagePart();\n    if (entity.type === ApiMessageEntityTypes.Spoiler) {\n      return <Spoiler>{text}</Spoiler>;\n    }\n\n    if (entity.type === ApiMessageEntityTypes.CustomEmoji) {\n      return (\n        <CustomEmoji\n          key={cacheBuster ? `${cacheBuster}-${entity.offset}` : undefined}\n          documentId={entity.documentId}\n          size={emojiSize}\n          isSelectable\n          withSharedAnimation\n          sharedCanvasRef={sharedCanvasRef}\n          sharedCanvasHqRef={sharedCanvasHqRef}\n          observeIntersectionForLoading={observeIntersectionForLoading}\n          observeIntersectionForPlaying={observeIntersectionForPlaying}\n          withTranslucentThumb={withTranslucentThumbs}\n          forceAlways={forcePlayback}\n          noPlay={noCustomEmojiPlayback}\n        />\n      );\n    }\n    return text;\n  }\n\n  switch (entity.type) {\n    case ApiMessageEntityTypes.Bold:\n      return <strong data-entity-type={entity.type}>{renderNestedMessagePart()}</strong>;\n    case ApiMessageEntityTypes.Blockquote:\n      return (\n        <Blockquote canBeCollapsible={entity.canCollapse} isToggleDisabled={isInSelectMode}>\n          {renderNestedMessagePart()}\n        </Blockquote>\n      );\n    case ApiMessageEntityTypes.BotCommand:\n      return (\n        <a\n          onClick={handleBotCommandClick}\n          className=\"text-entity-link\"\n          dir=\"auto\"\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </a>\n      );\n    case ApiMessageEntityTypes.Hashtag: {\n      const [tag, username] = entityContent.split('@');\n      return (\n        <a\n          onClick={() => handleHashtagClick(tag, username)}\n          className=\"text-entity-link\"\n          dir=\"auto\"\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </a>\n      );\n    }\n    case ApiMessageEntityTypes.Cashtag: {\n      const [tag, username] = entityContent.split('@');\n      return (\n        <a\n          onClick={() => handleHashtagClick(tag, username)}\n          className=\"text-entity-link\"\n          dir=\"auto\"\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </a>\n      );\n    }\n    case ApiMessageEntityTypes.Code:\n      return (\n        <code\n          className={buildClassName('text-entity-code', 'clickable')}\n          onClick={handleCodeClick}\n          role=\"textbox\"\n          tabIndex={0}\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </code>\n      );\n    case ApiMessageEntityTypes.Email:\n      return (\n        <a\n          href={`mailto:${entityText}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-entity-link\"\n          dir=\"auto\"\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </a>\n      );\n    case ApiMessageEntityTypes.Italic:\n      return <em data-entity-type={entity.type}>{renderNestedMessagePart()}</em>;\n    case ApiMessageEntityTypes.MentionName:\n      return (\n        <MentionLink userId={entity.userId}>\n          {renderNestedMessagePart()}\n        </MentionLink>\n      );\n    case ApiMessageEntityTypes.Mention:\n      return (\n        <MentionLink username={entityText}>\n          {renderNestedMessagePart()}\n        </MentionLink>\n      );\n    case ApiMessageEntityTypes.Phone:\n      return (\n        <a\n          href={`tel:${entityText}`}\n          className=\"text-entity-link\"\n          dir=\"auto\"\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </a>\n      );\n    case ApiMessageEntityTypes.Pre:\n      return <CodeBlock text={entityText} language={entity.language} noCopy={isProtected} />;\n    case ApiMessageEntityTypes.Strike:\n      return <del data-entity-type={entity.type}>{renderNestedMessagePart()}</del>;\n    case ApiMessageEntityTypes.TextUrl:\n    case ApiMessageEntityTypes.Url:\n      return (\n        <SafeLink\n          url={getLinkUrl(entityText, entity)}\n          text={entityText}\n        >\n          {renderNestedMessagePart()}\n        </SafeLink>\n      );\n    case ApiMessageEntityTypes.Underline:\n      return <ins data-entity-type={entity.type}>{renderNestedMessagePart()}</ins>;\n    case ApiMessageEntityTypes.Timestamp:\n      if (!chatId || !messageId || !maxTimestamp || entity.timestamp > maxTimestamp) {\n        return renderNestedMessagePart();\n      }\n\n      return (\n        <a\n          onClick={() => handleTimecodeClick(chatId, messageId, threadId, entity.timestamp)}\n          className=\"text-entity-link\"\n          dir=\"auto\"\n          data-entity-type={entity.type}\n        >\n          {renderNestedMessagePart()}\n        </a>\n      );\n    case ApiMessageEntityTypes.Spoiler:\n      return <Spoiler containerId={containerId}>{renderNestedMessagePart()}</Spoiler>;\n    case ApiMessageEntityTypes.CustomEmoji:\n      return (\n        <CustomEmoji\n          key={cacheBuster ? `${cacheBuster}-${entity.offset}` : undefined}\n          documentId={entity.documentId}\n          size={emojiSize}\n          isSelectable\n          withSharedAnimation\n          sharedCanvasRef={sharedCanvasRef}\n          sharedCanvasHqRef={sharedCanvasHqRef}\n          observeIntersectionForLoading={observeIntersectionForLoading}\n          observeIntersectionForPlaying={observeIntersectionForPlaying}\n          withTranslucentThumb={withTranslucentThumbs}\n          forceAlways={forcePlayback}\n          noPlay={noCustomEmojiPlayback}\n        />\n      );\n    case ApiMessageEntityTypes.QuoteFocus:\n      return (\n        <span className=\"matching-text-highlight is-quote\">{renderNestedMessagePart()}</span>\n      );\n    default:\n      return renderNestedMessagePart();\n  }\n}\n\nfunction processEntityAsHtml(\n  entity: ApiMessageEntity,\n  entityContent: TextPart,\n  nestedEntityContent: TextPart[],\n) {\n  const rawEntityText = typeof entityContent === 'string' ? entityContent : undefined;\n\n  // Prevent adding newlines when editing\n  const content = entity.type === ApiMessageEntityTypes.Pre ? (entityContent as string).trimEnd() : entityContent;\n\n  const renderedContent = nestedEntityContent.length\n    ? (nestedEntityContent as string[]).join('')\n    : (renderText(content, ['escape_html', 'emoji_html', 'br_html']) as string[]).join('');\n\n  if (!rawEntityText) {\n    return renderedContent;\n  }\n\n  switch (entity.type) {\n    case ApiMessageEntityTypes.Bold:\n      return `<b>${renderedContent}</b>`;\n    case ApiMessageEntityTypes.Italic:\n      return `<i>${renderedContent}</i>`;\n    case ApiMessageEntityTypes.Underline:\n      return `<u>${renderedContent}</u>`;\n    case ApiMessageEntityTypes.Code:\n      return `<code class=\"text-entity-code\">${renderedContent}</code>`;\n    case ApiMessageEntityTypes.Pre:\n      // eslint-disable-next-line @stylistic/max-len\n      return `\\`\\`\\`${renderText(entity.language || '', ['escape_html'])[0] as string}<br/>${renderedContent}<br/>\\`\\`\\`<br/>`;\n    case ApiMessageEntityTypes.Strike:\n      return `<del>${renderedContent}</del>`;\n    case ApiMessageEntityTypes.MentionName:\n      return `<a\n        class=\"text-entity-link\"\n        data-entity-type=\"${ApiMessageEntityTypes.MentionName}\"\n        data-user-id=\"${entity.userId}\"\n        contenteditable=\"false\"\n        dir=\"auto\"\n      >${renderedContent}</a>`;\n    case ApiMessageEntityTypes.Url:\n    case ApiMessageEntityTypes.TextUrl:\n      return `<a\n        class=\"text-entity-link\"\n        href=${getLinkUrl(rawEntityText, entity)}\n        data-entity-type=\"${entity.type}\"\n        dir=\"auto\"\n      >${renderedContent}</a>`;\n    case ApiMessageEntityTypes.Spoiler:\n      return `<span\n        class=\"spoiler\"\n        data-entity-type=\"${ApiMessageEntityTypes.Spoiler}\"\n        >${renderedContent}</span>`;\n    case ApiMessageEntityTypes.CustomEmoji:\n      return buildCustomEmojiHtmlFromEntity(rawEntityText, entity);\n    case ApiMessageEntityTypes.Blockquote:\n      return `<blockquote\n        class=\"blockquote\"\n        data-entity-type=\"${ApiMessageEntityTypes.Blockquote}\"\n        >${renderedContent}</blockquote>`;\n    default:\n      return renderedContent;\n  }\n}\n\nfunction getLinkUrl(entityContent: string, entity: ApiMessageEntity) {\n  const { type } = entity;\n  return type === ApiMessageEntityTypes.TextUrl && entity.url ? entity.url : entityContent;\n}\n\nfunction handleBotCommandClick(e: React.MouseEvent<HTMLAnchorElement>) {\n  getActions().sendBotCommand({ command: e.currentTarget.innerText });\n}\n\nfunction handleHashtagClick(hashtag?: string, username?: string) {\n  if (!hashtag) return;\n  if (username) {\n    getActions().openChatByUsername({\n      username,\n      onChatChanged: {\n        action: 'searchHashtag',\n        payload: { hashtag },\n      },\n    });\n    return;\n  }\n  getActions().searchHashtag({ hashtag });\n}\n\nfunction handleCodeClick(e: React.MouseEvent<HTMLElement>) {\n  copyTextToClipboard(e.currentTarget.innerText);\n  getActions().showNotification({\n    message: oldTranslate('TextCopied'),\n  });\n}\n\nfunction handleTimecodeClick(\n  chatId: string, messageId: number, threadId: ThreadId | undefined, timestamp: number,\n) {\n  getActions().openMediaFromTimestamp({\n    chatId, messageId, threadId, timestamp,\n  });\n}\n","import { useEffect, useState } from '../../../lib/teact/teact';\nimport { getGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { GlobalState } from '../../../global/types';\n\nimport { selectCanPlayAnimatedEmojis } from '../../../global/selectors';\nimport { addCustomEmojiCallback, removeCustomEmojiCallback } from '../../../util/emoji/customEmojiManager';\n\nimport useEnsureCustomEmoji from '../../../hooks/useEnsureCustomEmoji';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport default function useCustomEmoji(documentId?: string) {\n  const [customEmoji, setCustomEmoji] = useState<ApiSticker | undefined>(\n    documentId ? getGlobal().customEmojis.byId[documentId] : undefined,\n  );\n  const [canPlay, setCanPlay] = useState(selectCanPlayAnimatedEmojis(getGlobal()));\n\n  useEnsureCustomEmoji(documentId);\n\n  const handleGlobalChange = useLastCallback((customEmojis?: GlobalState['customEmojis']) => {\n    if (!documentId) return;\n\n    const newGlobal = getGlobal();\n    setCustomEmoji((customEmojis ?? newGlobal.customEmojis).byId[documentId]);\n    setCanPlay(selectCanPlayAnimatedEmojis(newGlobal));\n  });\n\n  useEffect(handleGlobalChange, [documentId, handleGlobalChange]);\n\n  useEffect(() => {\n    if (!documentId) return undefined;\n\n    addCustomEmojiCallback(handleGlobalChange, documentId);\n\n    return () => {\n      removeCustomEmojiCallback(handleGlobalChange);\n    };\n  }, [customEmoji, documentId, handleGlobalChange]);\n\n  return { customEmoji, canPlay };\n}\n","import type { AriaRole } from 'react';\nimport type { ElementRef } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\n\nimport type { IconName } from '../../../types/icons';\n\nimport buildClassName from '../../../util/buildClassName';\n\ntype OwnProps = {\n  name: IconName;\n  className?: string;\n  style?: string;\n  role?: AriaRole;\n  ariaLabel?: string;\n  character?: string;\n  ref?: ElementRef<HTMLElement>;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n};\n\nconst Icon = ({\n  name,\n  ref,\n  className,\n  style,\n  role,\n  ariaLabel,\n  character,\n  onClick,\n}: OwnProps) => {\n  return (\n    <i\n      ref={ref}\n      className={buildClassName(`icon icon-${name}`, className)}\n      style={style}\n      aria-hidden={!ariaLabel}\n      aria-label={ariaLabel}\n      data-char={character}\n      role={role}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default Icon;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"qEhgJEpm\",\"middle\":\"GjxPnwZR\",\"big\":\"HRLrnZvQ\",\"adaptive\":\"ebO2WJkv\",\"svg\":\"lbK6aMGA\",\"clickable\":\"hqg1cKl7\"};","import type { FC } from '../../../lib/teact/teact';\nimport { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useUniqueId from '../../../hooks/useUniqueId';\n\nimport styles from './StarIcon.module.scss';\n\ntype OwnProps = {\n  type?: 'gold' | 'premium' | 'regular';\n  size?: 'small' | 'middle' | 'big' | 'adaptive';\n  className?: string;\n  style?: string;\n  onClick?: VoidFunction;\n};\n\n/* eslint-disable @stylistic/max-len */\nconst STAR_PATH = 'M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z';\n/* eslint-enable @stylistic/max-len */\n\nconst StarIcon: FC<OwnProps> = ({\n  type = 'regular',\n  size = 'small',\n  className,\n  style,\n  onClick,\n}) => {\n  const randomId = useUniqueId();\n  const validSvgRandomId = `svg-${randomId}`; // ID must start with a letter\n\n  const renderIcon = () => {\n    switch (type) {\n      case 'gold':\n        return <GoldStarIcon randomId={validSvgRandomId} />;\n      case 'premium':\n        return <PremiumStarIcon randomId={validSvgRandomId} />;\n      default:\n        return <RegularStarIcon />;\n    }\n  };\n\n  return (\n    <i\n      onClick={onClick}\n      className={buildClassName(\n        'StarIcon',\n        styles.root,\n        className,\n        onClick && styles.clickable,\n        styles[size],\n      )}\n      style={style}\n    >\n      {renderIcon()}\n    </i>\n  );\n};\n\nfunction GoldStarIcon({ randomId }: { randomId: string }) {\n  const mask1Id = `${randomId}-mask1`;\n  const mask2Id = `${randomId}-mask2`;\n  const gradient1Id = `${randomId}-gradient1`;\n  const gradient2Id = `${randomId}-gradient2`;\n  const gradient3Id = `${randomId}-gradient3`;\n\n  return (\n    <svg className={styles.svg} width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n      <g clip-path=\"url(#clip0_4913_7387)\">\n        <mask id={mask1Id} style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"-2\" y=\"-2\" width=\"24\" height=\"24\">\n          <path d=\"M21.416 -1.42493H-1.08398V21.0751H21.416V-1.42493Z\" fill=\"white\" />\n        </mask>\n        <g mask={`url(#${mask1Id})`}>\n          <mask\n            id={mask2Id}\n            style=\"mask-type:luminance\"\n            maskUnits=\"userSpaceOnUse\"\n            x=\"-2\"\n            y=\"-2\"\n            width=\"24\"\n            height=\"24\"\n          >\n            <path d=\"M-1.08398 -1.42493H21.416V21.0751H-1.08398V-1.42493Z\" fill=\"white\" />\n          </mask>\n          <g mask={`url(#${mask2Id})`}>\n            <path d=\"M7.26843 6.25162L9.28943 2.22541C9.52311 1.76121 10.0884 1.5749 10.5494 1.80857C10.7294 1.90015 10.8747 2.04857 10.9662 2.23172L12.8767 6.11583C13.0314 6.43477 13.3378 6.64951 13.6883 6.69056L17.6829 7.17055C18.2261 7.23686 18.6145 7.73264 18.5513 8.27894C18.5229 8.50314 18.4218 8.71156 18.2608 8.86945L15.0998 11.9862C14.9703 12.1125 14.9103 12.2894 14.9324 12.4694L15.4598 16.6756C15.5356 17.2787 15.1093 17.8282 14.5093 17.904C14.2819 17.9324 14.0546 17.8913 13.8525 17.7808L10.5147 15.9556C10.2715 15.823 9.98099 15.8198 9.73784 15.9461L6.27687 17.7208C5.79057 17.9703 5.1969 17.7745 4.94743 17.285C4.8527 17.1019 4.82112 16.8966 4.84954 16.6945L5.12427 14.7619C5.26006 13.8177 5.84425 12.9967 6.69055 12.5641L10.5305 10.6031C10.6315 10.5526 10.6726 10.4263 10.622 10.322C10.581 10.2431 10.4957 10.1957 10.4073 10.2084L5.70847 10.8841C4.99164 10.9852 4.26535 10.7831 3.7001 10.322L2.13698 9.04629C1.69173 8.68314 1.6191 8.02 1.98225 7.57159C2.15277 7.36317 2.39592 7.22739 2.66118 7.19265L6.6716 6.67793C6.92739 6.64319 7.15159 6.4853 7.26843 6.25162Z\" fill={`url(#${gradient1Id})`} />\n            <path d=\"M10.8242 2.9422C10.4168 2.85062 9.98417 3.0464 9.78839 3.43797L7.76423 7.46419C7.64739 7.69787 7.42634 7.85576 7.1674 7.89049L3.15698 8.40837C2.89804 8.44311 2.6612 8.56942 2.49384 8.76837L3.97801 9.98097C4.44537 10.3631 5.05167 10.5304 5.64849 10.4452L10.3442 9.77255C10.6221 9.73466 10.8936 9.8736 11.0168 10.1231C11.1778 10.442 11.0515 10.8336 10.7326 10.9978L9.50734 11.623L10.9031 11.4209C10.9915 11.4083 11.0799 11.4557 11.1178 11.5346C11.1715 11.6388 11.1273 11.7651 11.0263 11.8157L7.18635 13.7767C6.34006 14.2093 5.75586 15.0303 5.62007 15.9745L5.44008 17.2282C5.60428 17.3924 5.86322 17.4366 6.07796 17.326L9.53261 15.5514C9.90839 15.3587 10.3536 15.365 10.7231 15.5671L14.0609 17.3924C14.1809 17.4587 14.3199 17.4839 14.4556 17.4682C14.8093 17.4239 15.0651 17.0955 15.0209 16.7324L14.4967 12.523C14.4588 12.2072 14.5662 11.8946 14.7904 11.6736L17.9513 8.55679C18.005 8.50311 18.0461 8.43995 18.0745 8.37048L14.1841 7.90312C13.8336 7.86207 13.5304 7.64418 13.3725 7.3284L13.2209 7.01578C12.902 6.87683 12.6399 6.63052 12.482 6.31159L10.8242 2.9422Z\" fill={`url(#${gradient2Id})`} />\n            <path d=\"M10.7484 1.41397C10.0663 1.06977 9.23893 1.3445 8.89789 2.02659L6.87373 6.05596C6.8232 6.15701 6.72531 6.22649 6.61478 6.23912L2.60436 6.757C2.22542 6.80437 1.87806 7.00015 1.63807 7.29699C1.12334 7.93486 1.22124 8.86958 1.85596 9.38746L3.42223 10.6664C4.08222 11.2032 4.93167 11.44 5.77165 11.32L9.09051 10.8432L6.48847 12.1727C5.51271 12.6716 4.84325 13.6126 4.68852 14.6989L4.41063 16.6315C4.36958 16.9252 4.41695 17.222 4.55273 17.4873C4.90956 18.1915 5.77481 18.4725 6.479 18.1125L9.93681 16.3378C10.0505 16.2778 10.1863 16.281 10.3 16.3441L13.6378 18.1662C13.9188 18.3209 14.2441 18.3841 14.563 18.343C15.4061 18.2357 15.9998 17.462 15.8956 16.622L15.3714 12.4126C15.3651 12.3716 15.3809 12.3274 15.4093 12.299L18.5703 9.1822C18.8008 8.95168 18.9492 8.65169 18.9871 8.32959C19.0787 7.5433 18.5229 6.82963 17.7366 6.73489L13.7388 6.25491C13.5399 6.2328 13.363 6.10649 13.2715 5.92334L11.3641 2.03606C11.2315 1.76765 11.0136 1.54976 10.7484 1.41397ZM9.68418 2.42132C9.80734 2.17501 10.1073 2.07712 10.3505 2.20027C10.4452 2.24764 10.5242 2.32974 10.5715 2.42763L12.482 6.31175C12.7031 6.76332 13.1357 7.06962 13.6346 7.12962L17.6324 7.60961C17.9324 7.64435 18.1471 7.91908 18.1124 8.22538C18.0966 8.3517 18.0398 8.46854 17.9513 8.55695L14.7904 11.6737C14.5662 11.8948 14.4588 12.2074 14.4967 12.5232L15.0209 16.7325C15.0651 17.0957 14.8093 17.4241 14.4556 17.4683C14.3199 17.4841 14.1809 17.4588 14.0609 17.3925L10.7231 15.5673C10.3536 15.3652 9.90839 15.362 9.53261 15.5547L6.0748 17.3294C5.80638 17.4652 5.47797 17.3578 5.33903 17.0862C5.2885 16.9852 5.26956 16.8683 5.28534 16.7546L5.56007 14.8252C5.67376 14.0231 6.17269 13.3253 6.88952 12.959L10.7294 10.9979C11.0515 10.8337 11.1778 10.4422 11.0168 10.1232C10.8905 9.87376 10.6221 9.73482 10.3442 9.77271L5.64534 10.4453C5.04851 10.5306 4.44537 10.3632 3.97801 9.98113L2.41489 8.70221C2.15595 8.49064 2.1149 8.10854 2.32647 7.8496C2.42436 7.72961 2.56331 7.65066 2.71488 7.63171L6.72531 7.11383C7.12951 7.06331 7.48003 6.81384 7.66318 6.45069L9.68418 2.42132Z\" fill={`url(#${gradient3Id})`} />\n          </g>\n        </g>\n      </g>\n      <defs>\n        <linearGradient\n          id={gradient1Id}\n          x1=\"10.1547\"\n          y1=\"1.70752\"\n          x2=\"10.1547\"\n          y2=\"17.9134\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#FFF0C2\" />\n          <stop offset=\"1\" stop-color=\"#FFEBBA\" />\n        </linearGradient>\n        <linearGradient\n          id={gradient2Id}\n          x1=\"10.2842\"\n          y1=\"2.92009\"\n          x2=\"14.7304\"\n          y2=\"17.4713\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#FFD147\" />\n          <stop offset=\"1\" stop-color=\"#FFB526\" />\n        </linearGradient>\n        <linearGradient\n          id={gradient3Id}\n          x1=\"10.1547\"\n          y1=\"1.26556\"\n          x2=\"14.0546\"\n          y2=\"18.3525\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stop-color=\"#E58F0D\" />\n          <stop offset=\"1\" stop-color=\"#EB7814\" />\n        </linearGradient>\n        <clipPath id=\"clip0_4913_7387\">\n          <rect width=\"20\" height=\"20\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n}\n\nfunction PremiumStarIcon({ randomId }: { randomId: string }) {\n  return (\n    <svg className={styles.svg} width=\"14\" height=\"15\" viewBox=\"0 0 14 15\" fill=\"none\">\n      <defs>\n        <linearGradient id={randomId} x1=\"3\" y1=\"63.5001\" x2=\"84.1475\" y2=\"-1.32262\" gradientUnits=\"userSpaceOnUse\">\n          <stop stop-color=\"#6B93FF\" />\n          <stop offset=\"0.439058\" stop-color=\"#976FFF\" />\n          <stop offset=\"1\" stop-color=\"#E46ACE\" />\n        </linearGradient>\n      </defs>\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d={STAR_PATH} fill={`url(#${randomId})`} />\n    </svg>\n  );\n}\n\nfunction RegularStarIcon() {\n  return (\n    <svg className={styles.svg} width=\"14\" height=\"15\" viewBox=\"0 0 14 15\" fill=\"none\">\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d={STAR_PATH} fill=\"var(--color-fill)\" />\n    </svg>\n  );\n}\n\nexport default memo(StarIcon);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { TeactNode } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport { memo, useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { ApiMessageEntityTypes } from '../../../api/types';\n\nimport { createClassNameBuilder } from '../../../util/buildClassName';\nimport stopEvent from '../../../util/stopEvent';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport './Spoiler.scss';\n\ntype OwnProps = {\n  children?: TeactNode;\n  containerId?: string;\n};\n\nconst revealByContainerId = new Map<string, VoidFunction[]>();\n\nconst buildClassName = createClassNameBuilder('Spoiler');\n\nconst Spoiler = ({\n  children,\n  containerId,\n}: OwnProps) => {\n  const contentRef = useRef<HTMLDivElement>();\n\n  const [isRevealed, revealSpoiler] = useFlag();\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (!containerId) return;\n\n    if (!isRevealed) {\n      stopEvent(e);\n    }\n\n    revealByContainerId.get(containerId)?.forEach((reveal) => reveal());\n  });\n\n  useEffect(() => {\n    if (!containerId) {\n      return undefined;\n    }\n\n    if (revealByContainerId.has(containerId)) {\n      revealByContainerId.get(containerId)!.push(revealSpoiler);\n    } else {\n      revealByContainerId.set(containerId, [revealSpoiler]);\n    }\n\n    return () => {\n      revealByContainerId.delete(containerId);\n    };\n  }, [containerId]);\n\n  return (\n    <span\n      className={buildClassName(\n        '&',\n        !isRevealed && 'concealed',\n        !isRevealed && Boolean(containerId) && 'animated',\n      )}\n      onClick={containerId && !isRevealed ? handleClick : undefined}\n      data-entity-type={ApiMessageEntityTypes.Spoiler}\n    >\n      <span className={buildClassName('content')} ref={contentRef}>\n        {children}\n      </span>\n    </span>\n  );\n};\n\nexport default memo(Spoiler);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../lib/teact/teact';\nimport { useCallback } from '../../lib/teact/teact';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\n\nimport Button from '../ui/Button';\n\nimport './AppInactive.scss';\n\nimport appInactivePath from '../../assets/app-inactive.png';\n\nconst AppInactive: FC = () => {\n  const handleReload = useCallback(() => {\n    window.location.reload();\n  }, []);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: handleReload,\n    shouldResetUrlHash: true,\n  });\n\n  return (\n    <div id=\"AppInactive\">\n      <div className=\"content\">\n        <img src={appInactivePath} alt=\"\" />\n        <h3 className=\"title\">Such error, many tabs</h3>\n        <div className=\"description\">\n          Telegram supports only one active tab with the app.\n          <br />\n          Please reload this page to continue using this tab or close it.\n        </div>\n        <div className=\"actions\">\n          <Button isText ripple onClick={handleReload}>\n            Reload app\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AppInactive;\n","import type { FC } from '../../lib/teact/teact';\n\nimport type { OwnProps } from './LockScreen';\n\nimport { Bundles } from '../../util/moduleLoader';\n\nimport useModuleLoader from '../../hooks/useModuleLoader';\n\nconst LockScreenAsync: FC<OwnProps> = (props) => {\n  const { isLocked } = props;\n  const LockScreen = useModuleLoader(Bundles.Main, 'LockScreen', !isLocked);\n\n  return LockScreen ? <LockScreen {...props} /> : undefined;\n};\n\nexport default LockScreenAsync;\n","import type { FC } from '../../lib/teact/teact';\n\nimport type { OwnProps } from './Main';\n\nimport { Bundles } from '../../util/moduleLoader';\n\nimport useModuleLoader from '../../hooks/useModuleLoader';\n\nconst MainAsync: FC<OwnProps> = (props) => {\n  const Main = useModuleLoader(Bundles.Main, 'Main');\n\n  return Main ? <Main {...props} /> : undefined;\n};\n\nexport default MainAsync;\n","import { getGlobal } from '../../../../global';\n\nimport type { ApiMessageEntityCustomEmoji, ApiSticker } from '../../../../api/types';\nimport { ApiMessageEntityTypes } from '../../../../api/types';\n\nimport { EMOJI_SIZES } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getInputCustomEmojiParams } from '../../../../util/emoji/customEmojiManager';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nexport const INPUT_CUSTOM_EMOJI_SELECTOR = 'img[data-document-id]';\n\nexport function buildCustomEmojiHtml(emoji: ApiSticker) {\n  const [isPlaceholder, src, uniqueId] = getInputCustomEmojiParams(emoji);\n\n  const className = buildClassName(\n    'custom-emoji', 'emoji', 'emoji-small', isPlaceholder && 'placeholder', emoji.shouldUseTextColor && 'colorable',\n  );\n\n  return `<img\n    class=\"${className}\"\n    draggable=\"false\"\n    alt=\"${emoji.emoji}\"\n    data-document-id=\"${emoji.id}\"\n    ${uniqueId ? `data-unique-id=\"${uniqueId}\"` : ''}\n    data-entity-type=\"${ApiMessageEntityTypes.CustomEmoji}\"\n    src=\"${src}\"\n  />`;\n}\n\nexport function buildCustomEmojiHtmlFromEntity(rawText: string, entity: ApiMessageEntityCustomEmoji) {\n  const customEmoji = getGlobal().customEmojis.byId[entity.documentId];\n  const [isPlaceholder, src, uniqueId] = getInputCustomEmojiParams(customEmoji);\n\n  const className = buildClassName(\n    'custom-emoji',\n    'emoji',\n    'emoji-small',\n    isPlaceholder && 'placeholder',\n    customEmoji?.shouldUseTextColor && 'colorable',\n  );\n\n  return `<img\n    class=\"${className}\"\n    draggable=\"false\"\n    alt=\"${rawText}\"\n    data-document-id=\"${entity.documentId}\"\n    ${uniqueId ? `data-unique-id=\"${uniqueId}\"` : ''}\n    data-entity-type=\"${ApiMessageEntityTypes.CustomEmoji}\"\n    src=\"${src}\"\n  />`;\n}\n\nexport function getCustomEmojiSize(maxEmojisInLine?: number): number | undefined {\n  if (!maxEmojisInLine) return undefined;\n\n  // Should be the same as in _message-content.scss\n  if (maxEmojisInLine > EMOJI_SIZES) return 2.25 * REM;\n  if (maxEmojisInLine === 1) return 7 * REM;\n  return Math.min(7.5 - (maxEmojisInLine * 0.75), 5.625) * REM;\n}\n","import type React from '../../../lib/teact/teact';\n\nimport { EDITABLE_INPUT_ID } from '../../../config';\nimport { IS_IOS } from '../../../util/browser/windowEnvironment';\n\nexport function preventMessageInputBlur(e: React.MouseEvent<HTMLElement>, withBubbling = false) {\n  if (\n    IS_IOS\n    || !document.activeElement\n    || document.activeElement.id !== EDITABLE_INPUT_ID\n    || (!withBubbling && e.target !== e.currentTarget)\n  ) {\n    return;\n  }\n\n  e.preventDefault();\n}\n\nexport function preventMessageInputBlurWithBubbling(e: React.MouseEvent<HTMLElement>) {\n  preventMessageInputBlur(e, true);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"W4ndaFuS\",\"contentBox\":\"qIESjPFU\",\"textContent\":\"cgQoy2xy\",\"hasFullContent\":\"x0D811xX\",\"inlineWrapper\":\"CrZTrncJ\",\"singleLine\":\"j1bGIpWD\",\"strong\":\"d5ep97lr\",\"messageLink\":\"Soqky8rY\",\"noEllipsis\":\"m6kJl7zG\",\"contextContainer\":\"Rz1leKMF\",\"fluidMultiline\":\"oL3NoM4Y\",\"fluidBackground\":\"faqkTF52\",\"info\":\"Jcta1qBG\",\"stickerWrapper\":\"F8w9vDlr\",\"channelPhoto\":\"wnjg6GZj\",\"suggestedAvatar\":\"ClHX4zX1\",\"suggestedText\":\"jT6o01vL\",\"actionButton\":\"LB5i9s3a\",\"title\":\"Cp_BJqe5\",\"subtitle\":\"VCJyqpS8\",\"starGift\":\"lcncBNHa\",\"uniqueGift\":\"jxcv_A2w\",\"uniqueBackgroundWrapper\":\"lsTgPDw1\",\"uniqueBackground\":\"uzTnIOE7\",\"uniqueValue\":\"pae10ItJ\",\"suggestedPostContainer\":\"eNm2vJJr\",\"suggestedPostTitle\":\"mp_JlS2o\",\"suggestedPostInfo\":\"S5yKhYOF\",\"suggestedPostBalanceTooLowBox\":\"lYK4izyG\",\"suggestedPostRejectedContentBox\":\"b_UHz9Pn\",\"suggestedPostContentBox\":\"HiG8V3U2\",\"hoverable\":\"Ohq5zfvI\",\"suggestedPostBalanceTooLowTitle\":\"v8H6hMhz\",\"suggestedPostApprovalTitle\":\"sx65zyR6\",\"suggestedPostApprovalSection\":\"jmVfnkV0\",\"suggestedPostRejectedComment\":\"hrUNI578\",\"suggestedPostRejectedTitle\":\"xm2OfRXs\",\"rejectedIcon\":\"PnwAfQgJ\"};","import { memo, type TeactNode } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiMessage, ApiPeer } from '../../../api/types';\n\nimport {\n  GENERAL_TOPIC_ID,\n  SERVICE_NOTIFICATIONS_USER_ID,\n  STARS_CURRENCY_CODE,\n  TME_LINK_PREFIX,\n  TON_CURRENCY_CODE,\n} from '../../../config';\nimport {\n  getMainUsername,\n  getMessageInvoice, getMessageText, isChatChannel,\n} from '../../../global/helpers';\nimport { getMessageContent } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { getMessageReplyInfo } from '../../../global/helpers/replies';\nimport {\n  selectChat,\n  selectChatMessage,\n  selectMonoforumChannel,\n  selectPeer,\n  selectSender,\n  selectThreadIdFromMessage,\n  selectTopic,\n} from '../../../global/selectors';\nimport { ensureProtocol } from '../../../util/browser/url';\nimport { formatDateTimeToString, formatScheduledDateTime, formatShortDuration } from '../../../util/dates/dateFormat';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { convertTonFromNanos } from '../../../util/formatCurrency';\nimport { formatStarsAsText, formatTonAsText } from '../../../util/localization/format';\nimport { conjuctionWithNodes } from '../../../util/localization/utils';\nimport { getServerTime } from '../../../util/serverTime';\nimport renderText from '../../common/helpers/renderText';\nimport { renderTextWithEntities } from '../../common/helpers/renderTextWithEntities';\nimport {\n  getCallMessageKey,\n  getPinnedMediaValue,\n  renderMessageLink,\n  renderPeerLink,\n  translateWithYou,\n} from './helpers/messageActions';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport CustomEmoji from '../../common/CustomEmoji';\nimport TopicDefaultIcon from '../../common/TopicDefaultIcon';\nimport Link from '../../ui/Link';\n\nimport styles from './ActionMessage.module.scss';\n\ntype OwnProps = {\n  message: ApiMessage;\n  isInsideTopic?: boolean;\n  asPreview?: boolean;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  sender?: ApiPeer;\n  replyMessage?: ApiMessage;\n  chat?: ApiChat;\n};\n\nconst NBSP = '\\u00A0';\nconst DEFAULT_TOPIC_ICON_ID = '0';\n\nconst UNSUPPORTED_LANG_KEY = 'ActionUnsupported';\n\nconst ActionMessageText = ({\n  message,\n  currentUserId,\n  sender,\n  chat,\n  replyMessage,\n  isInsideTopic,\n  asPreview,\n}: OwnProps & StateProps) => {\n  const {\n    openThread,\n    openTelegramLink,\n    openUrl,\n  } = getActions();\n  const { chatId, isOutgoing } = message;\n  const action = message.content.action!;\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  function renderStrong(text: TeactNode) {\n    if (asPreview) return text;\n    return <span className={styles.strong}>{text}</span>;\n  }\n\n  const renderActionText = useLastCallback(() => {\n    const global = getGlobal();\n\n    const isServiceNotificationsChat = chatId === SERVICE_NOTIFICATIONS_USER_ID;\n    const isSavedMessages = chatId === currentUserId;\n\n    const isChannel = chat && isChatChannel(chat);\n    const senderTitle = sender && getPeerTitle(lang, sender);\n    const chatTitle = chat && getPeerTitle(lang, chat);\n\n    const userFallbackText = lang('ActionFallbackUser');\n    const chatFallbackText = lang('ActionFallbackChat');\n    const channelFallbackText = lang('ActionFallbackChannel');\n\n    const senderLink = renderPeerLink(sender?.id, senderTitle || userFallbackText, asPreview);\n    const chatLink = renderPeerLink(chat?.id, chatTitle || chatFallbackText, asPreview);\n\n    switch (action.type) {\n      case 'pinMessage': {\n        if (replyMessage) {\n          const formattedText = getMessageText(replyMessage);\n          if (formattedText) {\n            const textLink = renderMessageLink(\n              replyMessage,\n              renderTextWithEntities({\n                text: formattedText.text,\n                entities: formattedText.entities,\n                asPreview: true,\n              }),\n              asPreview,\n            );\n\n            return translateWithYou(\n              lang, 'ActionPinnedText', isOutgoing, { text: textLink, from: senderLink },\n            );\n          }\n\n          const mediaValue = getPinnedMediaValue(lang, replyMessage);\n          if (mediaValue) {\n            const messageLink = renderMessageLink(replyMessage, mediaValue, asPreview);\n            return translateWithYou(\n              lang, 'ActionPinnedMedia', isOutgoing, { from: senderLink, media: messageLink },\n            );\n          }\n        }\n\n        return translateWithYou(\n          lang,\n          'ActionPinnedNotFound',\n          isOutgoing,\n          { from: senderLink },\n        );\n      }\n\n      case 'gameScore': {\n        const { score } = action;\n\n        const gameTitle = replyMessage?.content.game?.title;\n        const gameLink = gameTitle && renderMessageLink(replyMessage, renderText(gameTitle), asPreview);\n\n        if (gameLink) {\n          return translateWithYou(\n            lang,\n            'ActionGameScore',\n            isOutgoing,\n            { from: senderLink, count: score, game: gameLink },\n            { pluralValue: score },\n          );\n        }\n\n        return translateWithYou(\n          lang, 'ActionGameScoreNoGame', isOutgoing, { from: senderLink, count: score }, { pluralValue: score },\n        );\n      }\n\n      case 'chatJoinedByLink':\n        return lang('ActionUserJoinedByLink', { from: senderLink }, { withNodes: true });\n\n      case 'chatJoinedByRequest':\n        return translateWithYou(lang, 'ActionJoinedByRequest', isOutgoing, { from: senderLink });\n\n      case 'channelJoined': {\n        const { isViaRequest, inviterId } = action;\n        const inviter = inviterId ? selectPeer(global, inviterId) : undefined;\n        if (inviter && inviterId !== currentUserId) {\n          const inviterLink = renderPeerLink(inviterId, getPeerTitle(lang, inviter) || userFallbackText, asPreview);\n          return lang('ActionAddYou', { from: inviterLink }, { withNodes: true });\n        }\n\n        return lang(isViaRequest ? 'ActionChannelJoinedByRequestChannelYou' : 'ActionChannelJoinedYou');\n      }\n\n      case 'chatEditTitle': {\n        const { title } = action;\n        if (isChannel) return lang('ActionChangedTitleChannel', { title });\n        return translateWithYou(lang, 'ActionChangedTitle', isOutgoing, { title, from: senderLink });\n      }\n\n      case 'chatDeletePhoto':\n        return isChannel ? lang('ActionRemovedPhotoChannel')\n          : translateWithYou(lang, 'ActionRemovedPhoto', isOutgoing, { from: senderLink });\n\n      case 'chatEditPhoto':\n        return isChannel ? lang('ActionChangedPhotoChannel')\n          : translateWithYou(lang, 'ActionChangedPhoto', isOutgoing, { from: senderLink });\n\n      case 'chatCreate': {\n        const { title } = action;\n        return lang('ActionCreatedChat', { title, from: senderLink }, { withNodes: true });\n      }\n\n      case 'channelCreate': {\n        const { title } = action;\n        return isChannel ? lang('ActionCreatedChannel')\n          : translateWithYou(lang, 'ActionCreatedChat', isOutgoing, { title, from: senderLink });\n      }\n\n      case 'chatMigrateTo': {\n        const { channelId } = action;\n        const channel = selectChat(global, channelId)!;\n        const channelLink = renderPeerLink(channelId, getPeerTitle(lang, channel)!, asPreview);\n        return lang('ActionMigratedTo', { chat: channelLink }, { withNodes: true });\n      }\n\n      case 'channelMigrateFrom': {\n        const { chatId: originalChatId, title } = action;\n        const originalChatLink = renderPeerLink(originalChatId, title || chatFallbackText, asPreview);\n        return lang('ActionMigratedFrom', { chat: originalChatLink }, { withNodes: true });\n      }\n\n      case 'topicCreate': {\n        const { title, iconColor, iconEmojiId } = action;\n\n        const topicId = selectThreadIdFromMessage(global, message);\n\n        const topicLink = (\n          <Link\n            className={styles.topicLink}\n\n            onClick={() => openThread({ chatId, threadId: topicId })}\n          >\n            {iconEmojiId ? <CustomEmoji documentId={iconEmojiId} isSelectable />\n              : <TopicDefaultIcon topicId={topicId} title={title} iconColor={iconColor} />}\n            {NBSP}\n            {renderText(title)}\n          </Link>\n        );\n        return lang('ActionTopicCreated', { topic: topicLink }, { withNodes: true });\n      }\n\n      case 'topicEdit': {\n        const {\n          iconEmojiId, isClosed, isHidden, title,\n        } = action;\n\n        const topicId = selectThreadIdFromMessage(global, message);\n        const currentTopic = selectTopic(global, chatId, topicId);\n        const topicLink = (\n          <Link\n            className={styles.topicLink}\n\n            onClick={() => openThread({ chatId, threadId: topicId })}\n          >\n            {iconEmojiId && iconEmojiId !== DEFAULT_TOPIC_ICON_ID\n              ? <CustomEmoji documentId={iconEmojiId} isSelectable />\n              : (\n                <TopicDefaultIcon\n                  topicId={topicId}\n                  title={title || currentTopic?.title || lang('ActionTopicPlaceholder')}\n                  iconColor={currentTopic?.iconColor}\n                />\n              )}\n            {topicId !== GENERAL_TOPIC_ID && NBSP}\n            {renderText(title || currentTopic?.title || lang('ActionTopicPlaceholder'))}\n          </Link>\n        );\n\n        const topicPlaceholderLink = (\n          <Link\n            className={styles.topicLink}\n\n            onClick={() => openThread({ chatId, threadId: topicId })}\n          >\n            {lang('ActionTopicPlaceholder')}\n          </Link>\n        );\n\n        if (isClosed !== undefined) {\n          if (isInsideTopic) {\n            return lang(isClosed ? 'ActionTopicClosedInside' : 'ActionTopicReopenedInside');\n          }\n\n          return lang(\n            isClosed ? 'ActionTopicClosed' : 'ActionTopicReopened',\n            { from: senderLink, topic: topicLink },\n            { withNodes: true },\n          );\n        }\n\n        if (isHidden !== undefined) {\n          if (isInsideTopic) {\n            return lang(isHidden ? 'ActionTopicHiddenInside' : 'ActionTopicUnhiddenInside');\n          }\n          return lang(\n            isHidden ? 'ActionTopicHidden' : 'ActionTopicUnhidden',\n            { topic: topicLink },\n            { withNodes: true },\n          );\n        }\n\n        if (title && iconEmojiId) {\n          return lang(\n            'ActionTopicIconAndRenamed',\n            {\n              from: senderLink,\n              link: topicPlaceholderLink,\n              topic: topicLink,\n            },\n            { withNodes: true },\n          );\n        }\n\n        if (title === undefined) {\n          if (!iconEmojiId || iconEmojiId === DEFAULT_TOPIC_ICON_ID) {\n            return lang(\n              'ActionTopicIconRemoved', { from: senderLink, link: topicPlaceholderLink }, { withNodes: true },\n            );\n          }\n          return lang(\n            'ActionTopicIconChanged',\n            {\n              from: senderLink,\n              link: topicPlaceholderLink,\n              emoji: <CustomEmoji documentId={iconEmojiId} loopLimit={2} />,\n            },\n            { withNodes: true },\n          );\n        }\n\n        return lang('ActionTopicRenamed', { from: senderLink, link: topicPlaceholderLink, title }, { withNodes: true });\n      }\n\n      case 'boostApply':\n        return translateWithYou(\n          lang,\n          'ActionBoostApply',\n          isOutgoing,\n          { from: senderLink, count: action.boosts },\n          { pluralValue: action.boosts },\n        );\n\n      case 'chatAddUser': {\n        const { userIds } = action;\n\n        if (sender?.id === userIds[0]) {\n          return translateWithYou(lang, 'ActionUserJoined', isOutgoing, { from: senderLink });\n        }\n\n        if (userIds.length === 1) {\n          const user = selectPeer(global, userIds[0]);\n          const userTitle = (user && getPeerTitle(lang, user)) || userFallbackText;\n          const userLink = renderPeerLink(user?.id, userTitle, asPreview);\n          return translateWithYou(lang, 'ActionAddUser', isOutgoing, { from: senderLink, user: userLink });\n        }\n\n        const users = userIds.map((userId) => selectPeer(global, userId)).filter(Boolean);\n\n        if (!users.length) {\n          return translateWithYou(lang, 'ActionAddUser', isOutgoing, { from: senderLink, user: userFallbackText });\n        }\n\n        const userLinks = users.map((user) => (\n          renderPeerLink(user.id, getPeerTitle(lang, user) || userFallbackText, asPreview)\n        ));\n\n        return translateWithYou(\n          lang, 'ActionAddUsersMany', isOutgoing, { from: senderLink, users: conjuctionWithNodes(lang, userLinks) },\n        );\n      }\n\n      case 'chatDeleteUser': {\n        const { userId } = action;\n        if (sender?.id === userId) {\n          return translateWithYou(lang, 'ActionUserLeft', isOutgoing, { from: senderLink });\n        }\n\n        const user = selectPeer(global, userId);\n        const userTitle = (user && getPeerTitle(lang, user)) || userFallbackText;\n        const userLink = renderPeerLink(user?.id, userTitle, asPreview);\n        return translateWithYou(lang, 'ActionKickUser', isOutgoing, { from: senderLink, user: userLink });\n      }\n\n      case 'botAllowed': {\n        const {\n          app, domain, isAttachMenu, isFromRequest,\n        } = action;\n        if (isAttachMenu) return lang('ActionAttachMenuBotAllowed');\n        if (isFromRequest) return lang('ActionWebappBotAllowed');\n        if (app) {\n          const senderUsername = sender && getMainUsername(sender);\n          const link = senderUsername && `${TME_LINK_PREFIX + senderUsername}/${app.shortName}`;\n          const appLink = link\n            ? <Link onClick={() => openTelegramLink({ url: link })}>{app.title}</Link>\n            : lang('ActionBotAppPlaceholder');\n          return lang('ActionBotAllowedFromApp', { app: appLink }, { withNodes: true });\n        }\n\n        if (!domain) return lang(UNSUPPORTED_LANG_KEY);\n\n        const url = ensureProtocol(domain);\n\n        const link = <Link onClick={() => openUrl({ url })}>{domain}</Link>;\n        return lang('ActionBotAllowedFromDomain', { domain: link }, { withNodes: true });\n      }\n\n      case 'giveawayLaunch': {\n        const { stars } = action;\n\n        if (stars) {\n          return lang(\n            isChannel ? 'ActionGiveawayStarsStarted' : 'ActionGiveawayStarsStartedGroup',\n            { from: senderLink, amount: renderStrong(formatStarsAsText(lang, stars)) },\n            { withNodes: true },\n          );\n        }\n\n        return lang(\n          isChannel ? 'ActionGiveawayStarted' : 'ActionGiveawayStartedGroup',\n          { from: senderLink },\n          { withNodes: true },\n        );\n      }\n\n      case 'giveawayResults': {\n        const { winnersCount, isStars, unclaimedCount } = action;\n        if (!winnersCount) return lang('ActionGiveawayResultsNone');\n        if (unclaimedCount) {\n          return lang(isStars ? 'ActionGiveawayResultsStarsSome' : 'ActionGiveawayResultsSome');\n        }\n\n        return lang(\n          isStars ? 'ActionGiveawayResultsStars' : 'ActionGiveawayResults',\n          { count: winnersCount },\n          { pluralValue: winnersCount },\n        );\n      }\n\n      case 'giftStars':\n      case 'giftPremium':\n      case 'giftTon': {\n        const {\n          amount, currency, cryptoAmount, cryptoCurrency, type,\n        } = action;\n\n        const price = formatCurrency(lang, amount, currency, { asFontIcon: true });\n        const cryptoPrice = cryptoAmount && type !== 'giftTon'\n          ? formatCurrency(lang, cryptoAmount, cryptoCurrency!) : undefined;\n\n        const cost = cryptoPrice ? lang('ActionGiftCostCrypto', { price, cryptoPrice }, { withNodes: true }) : price;\n\n        if (isServiceNotificationsChat) {\n          return lang('ActionGiftTextCostAnonymous', { cost }, { withNodes: true });\n        }\n        return translateWithYou(\n          lang, 'ActionGiftTextCost', isOutgoing, { from: senderLink, cost: renderStrong(cost) },\n        );\n      }\n\n      case 'prizeStars':\n      case 'giftCode': {\n        return translateWithYou(lang, 'ActionGiftTextUnknown', isOutgoing, undefined);\n      }\n\n      case 'groupCall': {\n        const { duration } = action;\n        const durationText = duration ? formatShortDuration(lang, duration) : undefined;\n        if (durationText) {\n          if (isChannel) {\n            return lang('ActionGroupCallFinishedChannel', { duration: durationText });\n          }\n          return lang(\n            'ActionGroupCallFinishedGroup', { from: senderLink, duration: durationText }, { withNodes: true },\n          );\n        }\n\n        if (isChannel) return lang('ActionGroupCallStartedChannel');\n        return lang('ActionGroupCallStartedGroup', { from: senderLink }, { withNodes: true });\n      }\n\n      case 'groupCallScheduled': {\n        const { scheduleDate } = action;\n        const formattedDate = formatDateTimeToString(scheduleDate * 1000, lang.code, true);\n\n        if (isChannel) return lang('ActionGroupCallScheduledChannel', { date: formattedDate });\n        return lang('ActionGroupCallScheduledGroup', { from: senderLink, date: formattedDate }, { withNodes: true });\n      }\n\n      case 'inviteToGroupCall': {\n        const { userIds } = action;\n\n        if (userIds.length === 1) {\n          const user = selectPeer(global, userIds[0]);\n          const userTitle = (user && getPeerTitle(lang, user)) || userFallbackText;\n          const userLink = renderPeerLink(user?.id, userTitle, asPreview);\n          return translateWithYou(lang, 'ActionVideoInvited', isOutgoing, { from: senderLink, user: userLink });\n        }\n\n        const users = userIds.map((userId) => selectPeer(global, userId)).filter(Boolean);\n\n        if (!users.length) {\n          return translateWithYou(\n            lang, 'ActionVideoInvited', isOutgoing, { from: senderLink, user: userFallbackText },\n          );\n        }\n\n        const userLinks = users.map((user) => (\n          renderPeerLink(user.id, getPeerTitle(lang, user) || userFallbackText, asPreview)\n        ));\n\n        return translateWithYou(\n          lang, 'ActionVideoInvitedMany', isOutgoing, { from: senderLink, users: conjuctionWithNodes(lang, userLinks) },\n        );\n      }\n\n      case 'paymentSent': {\n        const {\n          currency, totalAmount, isRecurringInit, isRecurringUsed,\n        } = action;\n\n        const cost = renderStrong(formatCurrency(lang, totalAmount, currency, { asFontIcon: true }));\n        const invoice = replyMessage && getMessageInvoice(replyMessage);\n        const invoiceTitle = invoice?.title;\n\n        if (isRecurringUsed) {\n          return lang('ActionPaymentUsedRecurring', { amount: cost }, { withNodes: true });\n        }\n\n        if (!invoiceTitle) {\n          if (isRecurringInit) {\n            return lang('ActionPaymentInitRecurring', { amount: cost, user: chatLink }, { withNodes: true });\n          }\n\n          return lang('ActionPaymentDone', { amount: cost, user: chatLink }, { withNodes: true });\n        }\n\n        if (isRecurringInit) {\n          return lang(\n            'ActionPaymentInitRecurringFor',\n            { amount: cost, user: chatLink, invoice: renderMessageLink(replyMessage, invoiceTitle, asPreview) },\n            { withNodes: true },\n          );\n        }\n\n        return lang(\n          'ActionPaymentDoneFor',\n          { amount: cost, user: chatLink, invoice: renderMessageLink(replyMessage, invoiceTitle, asPreview) },\n          { withNodes: true },\n        );\n      }\n\n      case 'paymentRefunded': {\n        const { currency, totalAmount, peerId } = action;\n        const peer = selectPeer(global, peerId);\n        const peerTitle = (peer && getPeerTitle(lang, peer)) || userFallbackText;\n        const peerLink = renderPeerLink(peer?.id, peerTitle, asPreview);\n        const amount = formatCurrency(lang, totalAmount, currency, { asFontIcon: true });\n\n        return lang('ActionPaymentRefunded', { peer: peerLink, amount }, { withNodes: true });\n      }\n\n      case 'starGift': {\n        const {\n          gift, alreadyPaidUpgradeStars, peerId, savedId, fromId,\n        } = action;\n        const isToChannel = Boolean(peerId && savedId);\n\n        const fromPeer = fromId ? selectPeer(global, fromId) : sender;\n        const fromTitle = (fromPeer && getPeerTitle(lang, fromPeer)) || userFallbackText;\n        const fromLink = renderPeerLink(fromPeer?.id, fromTitle, asPreview);\n\n        const starsAmount = gift.stars + (alreadyPaidUpgradeStars || 0);\n        const cost = renderStrong(formatStarsAsText(lang, starsAmount));\n\n        if (isToChannel) {\n          const channelPeer = selectPeer(global, peerId!);\n          const isYou = fromPeer?.id === currentUserId;\n\n          const channelTitle = (channelPeer && getPeerTitle(lang, channelPeer)) || channelFallbackText;\n          const channelLink = renderPeerLink(peerId, channelTitle, asPreview);\n          return translateWithYou(\n            lang, 'ActionStarGiftSentChannel', isYou, { user: fromLink, channel: channelLink, cost },\n          );\n        }\n\n        if (isServiceNotificationsChat) {\n          return lang('ActionStarGiftReceivedAnonymous', { cost }, { withNodes: true });\n        }\n\n        if (isSavedMessages) {\n          return lang('ActionStarGiftSelfBought', { cost }, { withNodes: true });\n        }\n\n        if (isOutgoing) {\n          return lang('ActionStarGiftSent', { cost }, { withNodes: true });\n        }\n\n        return lang('ActionStarGiftReceived', { user: senderLink, cost }, { withNodes: true });\n      }\n\n      case 'starGiftUnique': {\n        const {\n          isTransferred, isUpgrade, savedId, peerId, fromId, resaleStars, gift,\n        } = action;\n\n        const isToChannel = Boolean(peerId && savedId);\n\n        const fromPeer = fromId ? selectPeer(global, fromId) : sender;\n        const fromTitle = (fromPeer && getPeerTitle(lang, fromPeer)) || userFallbackText;\n        const fromLink = renderPeerLink(fromPeer?.id, fromTitle, asPreview);\n\n        if (resaleStars) {\n          return lang(\n            isOutgoing\n              ? 'ApiMessageMessageActionResaleStarGiftUniqueOutgoing'\n              : 'ApiMessageMessageActionResaleStarGiftUniqueIncoming',\n            {\n              gift: lang('GiftUnique', { title: gift.title, number: gift.number }),\n              stars: renderStrong(formatStarsAsText(lang, resaleStars)),\n            },\n            { withNodes: true },\n          );\n        }\n\n        if (isToChannel) {\n          const channelPeer = selectPeer(global, peerId!);\n          const isYou = fromPeer?.id === currentUserId;\n          const isAnonymous = fromPeer?.id === SERVICE_NOTIFICATIONS_USER_ID;\n\n          const channelTitle = (channelPeer && getPeerTitle(lang, channelPeer)) || channelFallbackText;\n          const channelLink = renderPeerLink(peerId, channelTitle, asPreview);\n\n          if (isUpgrade) {\n            return translateWithYou(\n              lang, 'ActionStarGiftUpgradedChannel', isYou, { user: fromLink, channel: channelLink },\n            );\n          }\n\n          if (isTransferred) {\n            if (isAnonymous) {\n              return lang('ActionStarGiftTransferredUnknownChannel', { channel: channelLink }, { withNodes: true });\n            }\n\n            return translateWithYou(\n              lang, 'ActionStarGiftTransferredChannel', isYou, { user: fromLink, channel: channelLink },\n            );\n          }\n        }\n\n        if (isSavedMessages) {\n          if (isUpgrade) return lang('ActionStarGiftUpgradedSelf');\n          if (isTransferred) return lang('ActionStarGiftTransferredSelf');\n        }\n\n        if (isUpgrade) {\n          if (isOutgoing) {\n            return lang('ActionStarGiftUpgradedMine', { user: chatLink }, { withNodes: true });\n          }\n\n          if (isSavedMessages) {\n            return lang('ActionStarGiftUpgradedSelf');\n          }\n\n          return lang('ActionStarGiftUpgradedUser', { user: senderLink }, { withNodes: true });\n        }\n\n        if (isTransferred) {\n          if (sender?.id === SERVICE_NOTIFICATIONS_USER_ID) {\n            return lang('ActionStarGiftTransferredUnknown');\n          }\n\n          if (isSavedMessages) {\n            return lang('ActionStarGiftTransferredSelf');\n          }\n\n          if (isOutgoing) {\n            return lang('ActionStarGiftTransferredMine', { user: chatLink }, { withNodes: true });\n          }\n\n          return lang('ActionStarGiftTransferred', { user: senderLink }, { withNodes: true });\n        }\n\n        if (isOutgoing) {\n          return lang('ActionGiftUniqueSent');\n        }\n\n        return lang('ActionGiftUniqueReceived', { user: senderLink }, { withNodes: true });\n      }\n\n      case 'suggestProfilePhoto': {\n        const actionPeer = (isOutgoing ? chat : sender)!;\n        const actionPeerLink = renderPeerLink(\n          actionPeer.id, getPeerTitle(lang, actionPeer) || userFallbackText, asPreview,\n        );\n\n        return translateWithYou(lang, 'ActionSuggestedPhoto', isOutgoing, { user: actionPeerLink });\n      }\n\n      case 'webViewDataSent':\n        return lang('ActionWebviewDataDone', { text: action.text });\n\n      case 'expired': {\n        const { isRoundVideo, isVoice } = action;\n        if (isVoice) return lang('ActionExpiredVoice');\n        if (isRoundVideo) return lang('ActionExpiredVideo');\n\n        return lang(UNSUPPORTED_LANG_KEY);\n      }\n\n      case 'historyClear':\n        return lang('ActionHistoryCleared');\n\n      case 'screenshotTaken':\n        return translateWithYou(lang, 'ActionScreenshotTaken', isOutgoing, { from: senderLink });\n\n      case 'contactSignUp':\n        return lang('ActionUserRegistered', { from: senderLink }, { withNodes: true });\n\n      case 'customAction':\n        return action.message;\n\n      case 'paidMessagesPrice': {\n        const { stars, isAllowedInChannel } = action;\n        if (stars === 0) {\n          if (isChannel) {\n            return lang(\n              isAllowedInChannel ? 'ActionMessageChannelFree' : 'ActionMessageChannelDisabled',\n              { peer: chatLink },\n              { withNodes: true },\n            );\n          }\n          return translateWithYou(lang, 'ActionPaidMessagePriceFree', isOutgoing, { peer: senderLink });\n        }\n        return translateWithYou(lang, 'ActionPaidMessagePrice', isOutgoing, {\n          peer: senderLink,\n          amount: formatStarsAsText(lang, stars),\n        }, { withMarkdown: true });\n      }\n\n      case 'paidMessagesRefunded': {\n        const { stars } = action;\n        const user = selectPeer(global, chatId);\n        const userTitle = (user && getPeerTitle(lang, user)) || userFallbackText;\n\n        const key = isOutgoing\n          ? 'ApiMessageActionPaidMessagesRefundedOutgoing'\n          : 'ApiMessageActionPaidMessagesRefundedIncoming';\n\n        return lang(key, {\n          stars: formatStarsAsText(lang, stars),\n          user: renderPeerLink(user?.id, userTitle),\n        }, { withNodes: true, withMarkdown: true });\n      }\n\n      case 'suggestedPostSuccess': {\n        const { amount: price } = action;\n        const currency = price?.currency || STARS_CURRENCY_CODE;\n        const amount = price?.amount || 0;\n\n        const channel = chat?.isMonoforum ? selectMonoforumChannel(global, chatId) : chat;\n        const channelTitle = channel && getPeerTitle(lang, channel);\n        const channelLink = renderPeerLink(channel?.id, channelTitle || channelFallbackText, asPreview);\n\n        const formattedAmount = currency === TON_CURRENCY_CODE\n          ? formatTonAsText(lang, convertTonFromNanos(amount))\n          : formatStarsAsText(lang, amount);\n\n        return lang('ActionSuggestedPostSuccess', {\n          channel: channelLink,\n          amount: formattedAmount,\n        }, { withNodes: true });\n      }\n      case 'suggestedPostRefund': {\n        const { payerInitiated } = action;\n\n        const replyMessage = message.replyInfo?.type === 'message' && message.replyInfo.replyToMsgId\n          ? selectChatMessage(global, chatId, message.replyInfo.replyToMsgId)\n          : undefined;\n\n        const postSender = replyMessage ? selectSender(global, replyMessage) : sender;\n        const postSenderTitle = postSender && getPeerTitle(lang, postSender);\n        const postSenderLink = renderPeerLink(postSender?.id, postSenderTitle || userFallbackText, asPreview);\n\n        const price = replyMessage?.suggestedPostInfo?.price;\n        const currency = price?.currency || STARS_CURRENCY_CODE;\n        const amount = price?.amount || 0;\n\n        const channel = chat?.isMonoforum ? selectMonoforumChannel(global, chatId) : chat;\n        const channelTitle = channel && getPeerTitle(lang, channel);\n        const channelLink = renderPeerLink(channel?.id, channelTitle || channelFallbackText, asPreview);\n\n        const formattedAmount = currency === TON_CURRENCY_CODE\n          ? formatTonAsText(lang, convertTonFromNanos(amount))\n          : formatStarsAsText(lang, amount);\n\n        if (payerInitiated) {\n          return lang('SuggestedPostRefundedByUser', {\n            amount: formattedAmount,\n            user: postSenderLink,\n            channel: channelLink,\n          }, { withNodes: true, withMarkdown: true });\n        }\n\n        return lang('SuggestedPostRefundedByChannel', {\n          amount: formattedAmount,\n          peer: postSenderLink,\n          channel: channelLink,\n        }, { withNodes: true, withMarkdown: true });\n      }\n      case 'suggestedPostApproval': {\n        const { isRejected, isBalanceTooLow, rejectComment } = action;\n\n        if (isRejected) {\n          const senderTitle = sender && getPeerTitle(lang, sender);\n          const senderLink = renderPeerLink(sender?.id, senderTitle || userFallbackText, asPreview);\n\n          return translateWithYou(\n            lang,\n            rejectComment ? 'SuggestedPostRejectedWithReason' : 'SuggestedPostRejected',\n            isOutgoing,\n            { peer: senderLink },\n            { withMarkdown: true },\n          );\n        }\n\n        if (isBalanceTooLow) {\n          const replyMessage = message.replyInfo?.type === 'message' && message.replyInfo.replyToMsgId\n            ? selectChatMessage(global, chatId, message.replyInfo.replyToMsgId)\n            : undefined;\n\n          const replyMessageSender = replyMessage ? selectSender(global, replyMessage) : sender;\n          const replyPeerTitle = replyMessageSender && getPeerTitle(lang, replyMessageSender);\n          const userLink = renderPeerLink(replyMessageSender?.id, replyPeerTitle || userFallbackText, asPreview);\n\n          const currency = replyMessage?.suggestedPostInfo?.price?.currency || STARS_CURRENCY_CODE;\n          const currencyName = currency === TON_CURRENCY_CODE ? lang('CurrencyTon') : lang('CurrencyStars');\n\n          return lang('SuggestedPostBalanceTooLow', {\n            peer: userLink,\n            currency: currencyName,\n          }, { withNodes: true, withMarkdown: true });\n        }\n\n        const channel = chat?.isMonoforum ? selectMonoforumChannel(global, chatId) : chat;\n        const channelTitle = channel && getPeerTitle(lang, channel);\n        const channelLink = renderPeerLink(channel?.id, channelTitle || channelFallbackText, asPreview);\n\n        const { scheduleDate } = action;\n        if (scheduleDate) {\n          const publishDate = formatScheduledDateTime(scheduleDate, lang, oldLang);\n          const isPostPublished = scheduleDate <= getServerTime();\n\n          return translateWithYou(\n            lang,\n            isPostPublished ? 'SuggestedPostPublished' : 'SuggestedPostPublishSchedule',\n            isOutgoing,\n            { peer: channelLink, date: publishDate },\n            { withMarkdown: true },\n          );\n        }\n\n        return lang(UNSUPPORTED_LANG_KEY);\n      }\n      case 'todoCompletions': {\n        const { completedIds, incompletedIds } = action;\n\n        let completedItem;\n        let incompletedItem;\n        const { todo } = replyMessage ? getMessageContent(replyMessage) : {};\n        if (todo) {\n          const todoItems = todo.todo.items;\n          completedItem = todoItems.find((item) => completedIds.includes(item.id));\n          incompletedItem = todoItems.find((item) => incompletedIds.includes(item.id));\n        }\n\n        if (incompletedItem) {\n          const incompletedTaskTitle = incompletedItem.title;\n\n          const incompletedTaskLink = renderMessageLink(\n            replyMessage,\n            renderTextWithEntities({\n              text: incompletedTaskTitle.text,\n              entities: incompletedTaskTitle.entities,\n              asPreview: true,\n            }),\n            asPreview,\n          );\n\n          return translateWithYou(lang, 'MessageActionTodoCompletionsAsNotDone', isOutgoing, {\n            peer: senderLink,\n            task: incompletedTaskLink,\n          });\n        }\n\n        if (completedItem) {\n          const completedTaskTitle = completedItem.title;\n          const completedTaskLink = renderMessageLink(\n            replyMessage,\n            renderTextWithEntities({\n              text: completedTaskTitle.text,\n              entities: completedTaskTitle.entities,\n              asPreview: true,\n            }),\n            asPreview,\n          );\n\n          return translateWithYou(lang, 'MessageActionTodoCompletionsAsDone', isOutgoing, {\n            peer: senderLink,\n            task: completedTaskLink,\n          });\n        }\n\n        if (completedIds) {\n          const completedText = lang('MessageActionTodoTaskCount', {\n            count: completedIds.length,\n          }, { pluralValue: completedIds.length });\n          const completedLink = renderMessageLink(\n            replyMessage,\n            renderTextWithEntities({\n              text: completedText,\n              asPreview: true,\n            }),\n            asPreview,\n            { noEllipsis: true },\n          );\n          return translateWithYou(lang, 'MessageActionTodoCompletionsAsDone', isOutgoing, {\n            peer: senderLink,\n            task: completedLink,\n          });\n        }\n\n        const incompletedText = lang('MessageActionTodoTaskCount', {\n          count: incompletedIds.length,\n        }, { pluralValue: incompletedIds.length });\n        const incompletedLink = renderMessageLink(\n          replyMessage,\n          renderTextWithEntities({\n            text: incompletedText,\n            asPreview: true,\n          }),\n          asPreview,\n          { noEllipsis: true },\n        );\n\n        return translateWithYou(lang, 'MessageActionTodoCompletionsAsNotDone', isOutgoing, {\n          peer: senderLink,\n          task: incompletedLink,\n        });\n      }\n\n      case 'todoAppendTasks': {\n        const { items } = action;\n        const { todo } = replyMessage ? getMessageContent(replyMessage) : {};\n\n        const listTitle = todo?.todo.title.text || '';\n        const listLink = renderMessageLink(\n          replyMessage,\n          renderTextWithEntities({\n            text: listTitle,\n            asPreview: true,\n          }),\n          asPreview,\n        );\n\n        if (items.length === 1) {\n          const taskTitle = items[0].title;\n          const taskLink = renderMessageLink(\n            replyMessage,\n            renderTextWithEntities({\n              text: taskTitle.text,\n              entities: taskTitle.entities,\n              asPreview: true,\n            }),\n            asPreview,\n          );\n\n          return translateWithYou(lang, 'MessageActionAppendTodo', isOutgoing, {\n            peer: senderLink,\n            task: taskLink,\n            list: listLink,\n          });\n        }\n\n        const tasksText = lang('MessageActionTodoTaskCount', {\n          count: items.length,\n        }, { pluralValue: items.length });\n        const tasksLink = renderMessageLink(\n          replyMessage,\n          renderTextWithEntities({\n            text: tasksText,\n            asPreview: true,\n          }),\n          asPreview,\n          { noEllipsis: true },\n        );\n\n        return translateWithYou(lang, 'MessageActionAppendTodoMultiple', isOutgoing, {\n          peer: senderLink,\n          tasks: tasksLink,\n          list: listLink,\n        });\n      }\n\n      case 'phoneCall': // Rendered as a regular message, but considered an action for the summary\n        return lang(getCallMessageKey(action, isOutgoing));\n      default:\n        return lang(UNSUPPORTED_LANG_KEY);\n    }\n  });\n\n  return renderActionText();\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message }): StateProps => {\n    const chat = selectChat(global, message.chatId);\n    const sender = selectSender(global, message);\n\n    const { replyToMsgId, replyToPeerId } = getMessageReplyInfo(message) || {};\n    const replyMessage = replyToMsgId\n      ? selectChatMessage(global, replyToPeerId || message.chatId, replyToMsgId) : undefined;\n\n    return {\n      currentUserId: global.currentUserId,\n      replyMessage,\n      chat,\n      sender,\n    };\n  },\n)(ActionMessageText));\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiPeer } from '../../../api/types';\nimport { ApiMessageEntityTypes } from '../../../api/types';\n\nimport { selectUser } from '../../../global/selectors';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\n\ntype OwnProps = {\n  userId?: string;\n  username?: string;\n  children: TeactNode;\n};\n\ntype StateProps = {\n  userOrChat?: ApiPeer;\n};\n\nconst MentionLink = ({\n  userId,\n  username,\n  userOrChat,\n  children,\n}: OwnProps & StateProps) => {\n  const {\n    openChat,\n    openChatByUsername,\n    closeStoryViewer,\n    setShouldCloseRightColumn,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n\n  const handleClick = () => {\n    if (isMobile) {\n      setShouldCloseRightColumn({\n        value: true,\n      });\n    }\n\n    if (userOrChat) {\n      openChat({ id: userOrChat.id });\n    } else if (username) {\n      closeStoryViewer();\n      openChatByUsername({ username: username.substring(1) });\n    }\n  };\n\n  return (\n    <a\n      onClick={handleClick}\n      className=\"text-entity-link\"\n      dir=\"auto\"\n      data-entity-type={userId ? ApiMessageEntityTypes.MentionName : ApiMessageEntityTypes.Mention}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    return {\n      userOrChat: userId ? selectUser(global, userId) : undefined,\n    };\n  },\n)(MentionLink);\n","import { type TeactNode } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiMessage } from '../../../../api/types';\nimport type { ApiMessageActionPhoneCall } from '../../../../api/types/messageActions';\nimport type {\n  LangKey,\n  LangPairPluralWithVariables,\n  LangPairWithVariables,\n  PluralLangKeyWithVariables,\n  RegularLangKey,\n  RegularLangKeyWithVariables,\n} from '../../../../types/language';\nimport type { LangFn } from '../../../../util/localization';\n\nimport { getMessageContent } from '../../../../global/helpers';\nimport { IS_SAFARI } from '../../../../util/browser/windowEnvironment';\nimport buildClassName from '../../../../util/buildClassName';\nimport renderText from '../../../common/helpers/renderText';\n\nimport Link from '../../../ui/Link';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype SuffixKey<T, K extends keyof T> = `${K & string}You` extends keyof T ? T[`${K & string}You`] : never;\ntype VariablesForKey<K extends LangKey> =\n  K extends RegularLangKeyWithVariables\n    ? LangPairWithVariables<TeactNode | undefined>[K] | SuffixKey<LangPairWithVariables, K>\n    : K extends PluralLangKeyWithVariables\n      ? LangPairPluralWithVariables<TeactNode | undefined>[K] | SuffixKey<LangPairPluralWithVariables, K>\n      : undefined;\n\nexport function translateWithYou<K extends LangKey>(\n  lang: LangFn,\n  key: K,\n  isYou: boolean,\n  variables: VariablesForKey<K>,\n  options?: {\n    pluralValue?: number;\n    asText?: boolean;\n    withMarkdown?: boolean;\n    renderTextFilters?: string[];\n  },\n): TeactNode {\n  const { pluralValue, asText, withMarkdown, renderTextFilters } = options || {};\n  const translationKey = isYou ? (`${key}You` as LangKey) : key;\n\n  return lang(\n    // @ts-ignore -- I have no idea if this even possible to type correctly\n    translationKey,\n    variables,\n    {\n      withNodes: !asText, withMarkdown, pluralValue, renderTextFilters,\n    },\n  );\n}\n\nexport function getPinnedMediaValue(lang: LangFn, message: ApiMessage) {\n  const {\n    audio, contact, document, game, giveaway, giveawayResults, paidMedia, storyData,\n    invoice, location, photo, pollId, sticker, video, voice,\n  } = getMessageContent(message);\n\n  if (message.groupedId || paidMedia) return lang('ActionPinnedMediaAlbum');\n  if (photo) return lang('ActionPinnedMediaPhoto');\n  if (audio) return lang('ActionPinnedMediaAudio');\n  if (voice) return lang('ActionPinnedMediaVoice');\n  if (video?.isRound) return lang('ActionPinnedMediaVideoMessage');\n  if (video?.isGif) return lang('ActionPinnedMediaGif');\n  if (video) return lang('ActionPinnedMediaVideo');\n  if (sticker) return lang('ActionPinnedMediaSticker');\n  if (document) return lang('ActionPinnedMediaFile');\n  if (contact) return lang('ActionPinnedMediaContact');\n  if (location) return lang('ActionPinnedMediaLocation');\n  if (storyData) return lang('ActionPinnedMediaStory');\n  if (invoice) return lang('ActionPinnedMediaInvoice');\n  if (game) return lang('ActionPinnedMediaGame', { game: game.title });\n  if (pollId) return lang('ActionPinnedMediaPoll');\n  if (giveaway) return lang('ActionPinnedMediaGiveaway');\n  if (giveawayResults) return lang('ActionPinnedMediaGiveawayResults');\n\n  return undefined;\n}\n\nexport function renderPeerLink(peerId: string | undefined, text: string, asPreview?: boolean) {\n  if (!peerId || asPreview) {\n    return renderText(text);\n  }\n\n  return (\n    <Link\n      className={buildClassName(styles.peerLink, styles.strong)}\n\n      onClick={(e) => {\n        e.stopPropagation();\n        getActions().openChat({ id: peerId });\n      }}\n      // box-decoration-break: clone; is broken when child has `dir` attribute\n      withMultilineFix={IS_SAFARI}\n    >\n      {renderText(text)}\n    </Link>\n  );\n}\n\nexport function renderMessageLink(\n  targetMessage: ApiMessage | undefined,\n  text: TeactNode,\n  asPreview: boolean | undefined,\n  params?: {\n    noEllipsis?: boolean;\n  },\n) {\n  const { noEllipsis } = params || {};\n\n  if (asPreview || !targetMessage) return text;\n\n  return (\n    <Link\n      className={buildClassName(styles.messageLink, noEllipsis && styles.noEllipsis)}\n      onClick={(e) => {\n        e.stopPropagation();\n        getActions().focusMessage({ chatId: targetMessage.chatId, messageId: targetMessage.id });\n      }}\n      withMultilineFix={IS_SAFARI}\n    >\n      {text}\n    </Link>\n  );\n}\n\nexport function getCallMessageKey(action: ApiMessageActionPhoneCall, isOutgoing: boolean): RegularLangKey {\n  const isMissed = action.reason === 'missed';\n  const isCancelled = action.reason === 'busy' || action.duration === undefined;\n  if (action.isVideo) {\n    if (isMissed) return isOutgoing ? 'CallMessageVideoOutgoingMissed' : 'CallMessageVideoIncomingMissed';\n    if (isCancelled) return 'CallMessageVideoIncomingDeclined';\n\n    return isOutgoing ? 'CallMessageVideoOutgoing' : 'CallMessageVideoIncoming';\n  } else {\n    if (isMissed) return isOutgoing ? 'CallMessageOutgoingMissed' : 'CallMessageIncomingMissed';\n    if (isCancelled) return 'CallMessageIncomingDeclined';\n\n    return isOutgoing ? 'CallMessageOutgoing' : 'CallMessageIncoming';\n  }\n}\n","import type { ElementRef } from '../../../../lib/teact/teact';\nimport { getIsHeavyAnimating, useEffect, useRef } from '../../../../lib/teact/teact';\n\nimport { requestMeasure } from '../../../../lib/fasterdom/fasterdom';\n\nimport useHeavyAnimation from '../../../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../../../hooks/usePriorityPlaybackCheck';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../../../hooks/window/useBackgroundMode';\n\nexport default function useVideoAutoPause(\n  playerRef: ElementRef<HTMLVideoElement>, canPlay: boolean, isPriority?: boolean,\n) {\n  const canPlayRef = useRef();\n  canPlayRef.current = canPlay;\n\n  const { play, pause } = usePlayPause(playerRef);\n\n  const unfreezePlaying = useLastCallback(() => {\n    if (canPlayRef.current && (isPriority || !isFrozen())) {\n      play();\n    }\n  });\n\n  const unfreezePlayingOnRaf = useLastCallback(() => {\n    requestMeasure(unfreezePlaying);\n  });\n\n  useBackgroundMode(pause, unfreezePlayingOnRaf, !canPlay || isPriority);\n  useHeavyAnimation(pause, unfreezePlaying, !canPlay || isPriority);\n  usePriorityPlaybackCheck(pause, unfreezePlaying, !canPlay || isPriority);\n\n  const handlePlaying = useLastCallback(() => {\n    if (!canPlayRef.current || (!isPriority && isFrozen())) {\n      pause();\n    }\n  });\n\n  useEffect(() => {\n    if (canPlay) {\n      if (isPriority || !isFrozen()) {\n        play();\n      }\n    } else {\n      pause();\n    }\n  }, [canPlay, play, pause, isPriority]);\n\n  return { handlePlaying };\n}\n\nfunction usePlayPause(mediaRef: ElementRef<HTMLMediaElement>) {\n  const shouldPauseRef = useRef(false);\n  const isLoadingPlayRef = useRef(false);\n\n  const play = useLastCallback(() => {\n    shouldPauseRef.current = false;\n    if (mediaRef.current && !isLoadingPlayRef.current && document.body.contains(mediaRef.current)) {\n      isLoadingPlayRef.current = true;\n      mediaRef.current.play().then(() => {\n        isLoadingPlayRef.current = false;\n        if (shouldPauseRef.current) {\n          mediaRef.current?.pause();\n          shouldPauseRef.current = false;\n        }\n      }).catch((e) => {\n        // eslint-disable-next-line no-console\n        console.warn(e);\n      });\n    }\n  });\n\n  const pause = useLastCallback(() => {\n    if (isLoadingPlayRef.current) {\n      shouldPauseRef.current = true;\n    } else {\n      mediaRef.current?.pause();\n    }\n  });\n\n  return { play, pause };\n}\n\nfunction isFrozen() {\n  return getIsHeavyAnimating() || isPriorityPlaybackActive() || isBackgroundModeActive();\n}\n","// extracted by mini-css-extract-plugin\nexport {};","import type { MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { useRef, useState } from '../../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Sparkles from '../common/Sparkles';\nimport RippleEffect from './RippleEffect';\nimport Spinner from './Spinner';\n\nimport './Button.scss';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLButtonElement | HTMLAnchorElement>;\n  type?: 'button' | 'submit' | 'reset';\n  children: React.ReactNode;\n  size?: 'default' | 'smaller' | 'tiny';\n  color?: (\n    'primary' | 'secondary' | 'gray' | 'danger' | 'translucent' | 'translucent-white' | 'translucent-black'\n    | 'translucent-bordered' | 'dark' | 'green' | 'adaptive' | 'stars' | 'bluredStarsBadge'\n  );\n  backgroundImage?: string;\n  id?: string;\n  className?: string;\n  round?: boolean;\n  pill?: boolean;\n  badge?: boolean;\n  fluid?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  ariaControls?: string;\n  hasPopup?: boolean;\n  href?: string;\n  download?: string;\n  disabled?: boolean;\n  nonInteractive?: boolean;\n  allowDisabledClick?: boolean;\n  noFastClick?: boolean;\n  ripple?: boolean;\n  faded?: boolean;\n  tabIndex?: number;\n  isRtl?: boolean;\n  isShiny?: boolean;\n  isRectangular?: boolean;\n  withPremiumGradient?: boolean;\n  withSparkleEffect?: boolean;\n  noPreventDefault?: boolean;\n  noForcedUpperCase?: boolean;\n  shouldStopPropagation?: boolean;\n  style?: string;\n  onClick?: (e: ReactMouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  onContextMenu?: (e: ReactMouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  onMouseDown?: (e: ReactMouseEvent<HTMLButtonElement>) => void;\n  onMouseUp?: (e: ReactMouseEvent<HTMLButtonElement>) => void;\n  onMouseEnter?: (e: ReactMouseEvent<HTMLButtonElement>) => void;\n  onMouseLeave?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onTransitionEnd?: NoneToVoidFunction;\n};\n\n// Longest animation duration;\nconst CLICKED_TIMEOUT = 400;\n\nconst Button: FC<OwnProps> = ({\n  ref,\n  type = 'button',\n  id,\n  onClick,\n  onContextMenu,\n  onMouseDown,\n  onMouseUp,\n  onMouseEnter,\n  onMouseLeave,\n  onFocus,\n  children,\n  size = 'default',\n  color = 'primary',\n  backgroundImage,\n  className,\n  round,\n  pill,\n  badge,\n  fluid,\n  isText,\n  isLoading,\n  isShiny,\n  withPremiumGradient,\n  withSparkleEffect,\n  onTransitionEnd,\n  ariaLabel,\n  ariaControls,\n  hasPopup,\n  href,\n  download,\n  disabled,\n  nonInteractive,\n  allowDisabledClick,\n  noFastClick = color === 'danger',\n  ripple,\n  faded,\n  tabIndex,\n  isRtl,\n  isRectangular,\n  noPreventDefault,\n  shouldStopPropagation,\n  noForcedUpperCase,\n  style,\n}) => {\n  let elementRef = useRef<HTMLButtonElement | HTMLAnchorElement>();\n  if (ref) {\n    elementRef = ref;\n  }\n\n  const lang = useOldLang();\n\n  const [isClicked, setIsClicked] = useState(false);\n\n  const isNotInteractive = disabled || nonInteractive;\n\n  const fullClassName = buildClassName(\n    'Button',\n    className,\n    size,\n    color,\n    round && 'round',\n    pill && 'pill',\n    fluid && 'fluid',\n    badge && 'badge',\n    isNotInteractive && 'disabled',\n    nonInteractive && 'non-interactive',\n    allowDisabledClick && 'click-allowed',\n    isText && 'text',\n    isLoading && 'loading',\n    ripple && 'has-ripple',\n    faded && 'faded',\n    isClicked && 'clicked',\n    backgroundImage && 'with-image',\n    isShiny && 'shiny',\n    withPremiumGradient && 'premium',\n    isRectangular && 'rectangular',\n    noForcedUpperCase && 'no-upper-case',\n  );\n\n  const handleClick = useLastCallback((e: ReactMouseEvent<HTMLButtonElement, MouseEvent>) => {\n    if ((allowDisabledClick || !isNotInteractive) && onClick) {\n      onClick(e);\n    }\n\n    if (shouldStopPropagation) e.stopPropagation();\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const handleMouseDown = useLastCallback((e: ReactMouseEvent<HTMLButtonElement>) => {\n    if (!noPreventDefault) e.preventDefault();\n\n    if ((allowDisabledClick || !isNotInteractive) && onMouseDown) {\n      onMouseDown(e);\n    }\n\n    if (!IS_TOUCH_ENV && e.button === MouseButton.Main && !noFastClick) {\n      handleClick(e);\n    }\n  });\n\n  const content = (\n    <>\n      {withSparkleEffect && <Sparkles preset=\"button\" />}\n      {isLoading ? (\n        <div>\n          <span dir={isRtl ? 'auto' : undefined}>{lang('Cache.ClearProgress')}</span>\n          <Spinner color={isText ? 'blue' : 'white'} />\n        </div>\n      ) : children}\n      {!isNotInteractive && ripple && (\n        <RippleEffect />\n      )}\n    </>\n  );\n\n  if (href) {\n    return (\n      <a\n        ref={elementRef as ElementRef<HTMLAnchorElement>}\n        id={id}\n        className={fullClassName}\n        href={href}\n        title={ariaLabel}\n        download={download}\n        tabIndex={tabIndex}\n        dir={isRtl ? 'rtl' : undefined}\n        aria-label={ariaLabel}\n        aria-controls={ariaControls}\n        style={style}\n        onTransitionEnd={onTransitionEnd}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        {content}\n      </a>\n    );\n  }\n\n  return (\n    <button\n      ref={elementRef as ElementRef<HTMLButtonElement>}\n      id={id}\n      type={type}\n      className={fullClassName}\n      onClick={IS_TOUCH_ENV || noFastClick ? handleClick : undefined}\n      onContextMenu={onContextMenu}\n      onMouseDown={handleMouseDown}\n      onMouseUp={onMouseUp}\n      onMouseEnter={onMouseEnter && !isNotInteractive ? onMouseEnter : undefined}\n      onMouseLeave={onMouseLeave && !isNotInteractive ? onMouseLeave : undefined}\n      onTransitionEnd={onTransitionEnd}\n      onFocus={onFocus && !isNotInteractive ? onFocus : undefined}\n      aria-label={ariaLabel}\n      aria-controls={ariaControls}\n      aria-haspopup={hasPopup}\n      title={ariaLabel}\n      tabIndex={tabIndex}\n      dir={isRtl ? 'rtl' : undefined}\n      style={buildStyle(style, backgroundImage && `background-image: url(${backgroundImage})`) || undefined}\n    >\n      {content}\n    </button>\n  );\n};\n\nexport default Button;\n","// extracted by mini-css-extract-plugin\nexport {};","import type { ChangeEvent } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  memo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\n\nimport type { ApiUser } from '../../api/types';\nimport type { IconName } from '../../types/icons';\nimport type { IRadioOption } from './CheckboxGroup';\n\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from '../common/helpers/mediaDimensions';\nimport renderText from '../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\nimport Icon from '../common/icons/Icon';\nimport Button from './Button';\nimport Spinner from './Spinner';\n\nimport './Checkbox.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  user?: ApiUser;\n  label?: TeactNode;\n  labelText?: TeactNode;\n  subLabel?: string;\n  checked?: boolean;\n  rightIcon?: IconName;\n  disabled?: boolean;\n  tabIndex?: number;\n  withIcon?: boolean;\n  blocking?: boolean;\n  permissionGroup?: boolean;\n  isLoading?: boolean;\n  withCheckedCallback?: boolean;\n  onlyInput?: boolean;\n  isRound?: boolean;\n  className?: string;\n  nestedCheckbox?: boolean;\n  nestedCheckboxCount?: number | undefined;\n  nestedOptionList?: IRadioOption[];\n  leftElement?: TeactNode;\n  values?: string[];\n  onChange?: (e: ChangeEvent<HTMLInputElement>, nestedOptionList?: IRadioOption[]) => void;\n  onCheck?: (isChecked: boolean) => void;\n  onClickLabel?: (e: React.MouseEvent, value?: string) => void;\n};\nconst AVATAR_SIZE = 1.25 * REM;\n\nconst Checkbox: FC<OwnProps> = ({\n  id,\n  name,\n  value,\n  label,\n  user,\n  labelText,\n  subLabel,\n  checked,\n  tabIndex,\n  disabled,\n  withIcon,\n  blocking,\n  permissionGroup,\n  isLoading,\n  className,\n  rightIcon,\n  onlyInput,\n  isRound,\n  nestedCheckbox,\n  nestedCheckboxCount,\n  nestedOptionList,\n  leftElement,\n  values,\n  onChange,\n  onCheck,\n  onClickLabel,\n}) => {\n  const lang = useOldLang();\n  const labelRef = useRef<HTMLLabelElement>();\n  const [showNested, setShowNested] = useState(false);\n  const renderingUser = useCurrentOrPrev(user, true);\n\n  const handleChange = useLastCallback((event: ChangeEvent<HTMLInputElement>) => {\n    if (disabled) {\n      return;\n    }\n\n    if (onChange) {\n      onChange(event, nestedOptionList);\n    }\n\n    if (onCheck) {\n      onCheck(event.currentTarget.checked);\n    }\n  });\n\n  const toggleNested = useLastCallback(() => {\n    setShowNested(!showNested);\n  });\n\n  function handleClick(event: React.MouseEvent) {\n    if (event.target !== labelRef.current) {\n      onClickLabel?.(event, value);\n    }\n  }\n\n  function handleInputClick(event: React.MouseEvent) {\n    event.stopPropagation();\n  }\n\n  const labelClassName = buildClassName(\n    'Checkbox',\n    disabled && 'disabled',\n    withIcon && 'withIcon',\n    isLoading && 'loading',\n    blocking && 'blocking',\n    nestedCheckbox && 'nested',\n    subLabel && 'withSubLabel',\n    permissionGroup && 'permission-group',\n    Boolean(leftElement) && 'avatar',\n    onlyInput && 'onlyInput',\n    isRound && 'round',\n    Boolean(rightIcon) && 'withNestedList',\n    className,\n  );\n\n  return (\n    <>\n      {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}\n      <label\n        className={labelClassName}\n        dir={lang.isRtl ? 'rtl' : undefined}\n        onClick={onClickLabel ? handleClick : undefined}\n        ref={labelRef}\n      >\n        <input\n          type=\"checkbox\"\n          id={id}\n          name={name}\n          value={value}\n          checked={checked}\n          disabled={disabled}\n          tabIndex={tabIndex}\n          onChange={handleChange}\n          onClick={onClickLabel ? handleInputClick : undefined}\n        />\n        <div className={buildClassName(\n          'Checkbox-main',\n          Boolean(leftElement) && 'Nested-avatar-list',\n        )}\n        >\n          <div className={buildClassName('user-avatar', renderingUser && 'user-avatar-visible')}>\n            {renderingUser && (\n              <Avatar\n                peer={renderingUser}\n                size={AVATAR_SIZE}\n              />\n            )}\n          </div>\n          <span className=\"label\" dir=\"auto\">\n            {leftElement}\n            {typeof label === 'string' ? renderText(label) : label}\n            {Boolean(labelText) && <span className=\"ml-1\">{renderText(labelText)}</span>}\n          </span>\n          {subLabel && <span className=\"subLabel\" dir=\"auto\">{renderText(subLabel)}</span>}\n          {rightIcon && <Icon name={rightIcon} className=\"right-icon\" />}\n        </div>\n        {nestedCheckbox && (\n          <span className=\"nestedButton\" dir=\"auto\">\n            <Button className=\"button\" color=\"translucent\" size=\"smaller\" onClick={toggleNested}>\n              <Icon name=\"group-filled\" className=\"group-icon\" />\n              {nestedCheckboxCount}\n              <Icon name={showNested ? 'up' : 'down'} />\n            </Button>\n          </span>\n        )}\n        {isLoading && <Spinner />}\n      </label>\n      {nestedCheckbox && (\n        <div\n          className={buildClassName('nested-checkbox-group', showNested && 'nested-checkbox-group-open')}\n        >\n          {nestedOptionList?.map((nestedOption) => (\n            <Checkbox\n              key={nestedOption.value}\n              leftElement={leftElement}\n              onChange={handleChange}\n              checked={values?.indexOf(nestedOption.value) !== -1}\n              values={values}\n\n              {...nestedOption}\n            />\n          ))}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  useCallback, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport Icon from '../common/icons/Icon';\nimport Button from './Button';\nimport Menu from './Menu';\n\nimport './DropdownMenu.scss';\n\ntype OwnProps = {\n  className?: string;\n  bubbleClassName?: string;\n  trigger?: FC<{ onTrigger: () => void; isOpen?: boolean }>;\n  transformOriginX?: number;\n  transformOriginY?: number;\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  footer?: string;\n  forceOpen?: boolean;\n  onOpen?: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n  onHide?: NoneToVoidFunction;\n  onTransitionEnd?: NoneToVoidFunction;\n  onMouseEnterBackdrop?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  children: React.ReactNode;\n  autoClose?: boolean;\n};\n\nconst DropdownMenu: FC<OwnProps> = ({\n  trigger,\n  className,\n  bubbleClassName,\n  children,\n  transformOriginX,\n  transformOriginY,\n  positionX = 'left',\n  positionY = 'top',\n  footer,\n  forceOpen,\n  onOpen,\n  onClose,\n  onTransitionEnd,\n  onMouseEnterBackdrop,\n  onHide,\n  autoClose = true,\n}) => {\n  const menuRef = useRef<HTMLDivElement>();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const toggleIsOpen = () => {\n    setIsOpen(!isOpen);\n\n    if (isOpen) {\n      onClose?.();\n    } else {\n      onOpen?.();\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<any>) => {\n    const menu = menuRef.current;\n\n    if (!isOpen || e.keyCode !== 40 || !menu) {\n      return;\n    }\n\n    const focusedElement = document.activeElement;\n    const elementChildren = Array.from(menu.children);\n\n    if (!focusedElement || elementChildren.indexOf(focusedElement) === -1) {\n      (elementChildren[0] as HTMLElement).focus();\n    }\n  };\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n    onClose?.();\n  }, [onClose]);\n\n  const triggerComponent: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    if (trigger) return trigger;\n\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent\"\n        className={isMenuOpen ? 'active' : ''}\n        onClick={onTrigger}\n        ariaLabel=\"More actions\"\n      >\n        <Icon name=\"more\" />\n      </Button>\n    );\n  }, [trigger]);\n\n  return (\n    <div\n      className={`DropdownMenu ${className || ''}`}\n      onKeyDown={handleKeyDown}\n      onTransitionEnd={onTransitionEnd}\n    >\n      {triggerComponent({ onTrigger: toggleIsOpen, isOpen })}\n\n      <Menu\n        ref={menuRef}\n        isOpen={isOpen || Boolean(forceOpen)}\n        className={className || ''}\n        bubbleClassName={bubbleClassName || ''}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        positionX={positionX}\n        positionY={positionY}\n        footer={footer}\n        autoClose={autoClose}\n        onClose={handleClose}\n        onCloseAnimationEnd={onHide}\n        onMouseEnterBackdrop={onMouseEnterBackdrop}\n      >\n        {children}\n      </Menu>\n    </div>\n  );\n};\n\nexport default DropdownMenu;\n","import type {\n  ChangeEvent, FormEvent,\n} from 'react';\nimport type { ElementRef, FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useOldLang from '../../hooks/useOldLang';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLInputElement>;\n  id?: string;\n  className?: string;\n  value?: string;\n  label?: string;\n  error?: string;\n  success?: string;\n  disabled?: boolean;\n  readOnly?: boolean;\n  placeholder?: string;\n  autoComplete?: string;\n  maxLength?: number;\n  tabIndex?: number;\n  teactExperimentControlled?: boolean;\n  inputMode?: 'text' | 'none' | 'tel' | 'url' | 'email' | 'numeric' | 'decimal' | 'search';\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onInput?: (e: FormEvent<HTMLInputElement>) => void;\n  onKeyPress?: (e: React.KeyboardEvent<HTMLInputElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<HTMLInputElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement>) => void;\n  onPaste?: (e: React.ClipboardEvent<HTMLInputElement>) => void;\n};\n\nconst InputText: FC<OwnProps> = ({\n  ref,\n  id,\n  className,\n  value,\n  label,\n  error,\n  success,\n  disabled,\n  readOnly,\n  placeholder,\n  autoComplete,\n  inputMode,\n  maxLength,\n  tabIndex,\n  teactExperimentControlled,\n  onChange,\n  onInput,\n  onKeyPress,\n  onKeyDown,\n  onBlur,\n  onPaste,\n}) => {\n  const lang = useOldLang();\n  const labelText = error || success || label;\n  const fullClassName = buildClassName(\n    'input-group',\n    value && 'touched',\n    error ? 'error' : success && 'success',\n    disabled && 'disabled',\n    readOnly && 'disabled',\n    labelText && 'with-label',\n    className,\n  );\n\n  return (\n    <div className={fullClassName} dir={lang.isRtl ? 'rtl' : undefined}>\n      <input\n        ref={ref}\n        className=\"form-control\"\n        type=\"text\"\n        id={id}\n        dir=\"auto\"\n        value={value || ''}\n        tabIndex={tabIndex}\n        placeholder={placeholder}\n        maxLength={maxLength}\n        autoComplete={autoComplete}\n        inputMode={inputMode}\n        disabled={disabled}\n        readOnly={readOnly}\n        onChange={onChange}\n        onInput={onInput}\n        onKeyPress={onKeyPress}\n        onKeyDown={onKeyDown}\n        onBlur={onBlur}\n        onPaste={onPaste}\n        aria-label={labelText}\n        teactExperimentControlled={teactExperimentControlled}\n      />\n      {labelText && (\n        <label htmlFor={id}>{labelText}</label>\n      )}\n    </div>\n  );\n};\n\nexport default memo(InputText);\n","// extracted by mini-css-extract-plugin\nexport default {\"link\":\"swBnOk1h\",\"isPrimary\":\"Jz1SC8nz\"};","import type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Link.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  className?: string;\n  isRtl?: boolean;\n  isPrimary?: boolean;\n  withMultilineFix?: boolean;\n  onClick?: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n};\n\nconst Link: FC<OwnProps> = ({\n  children, isPrimary, className, isRtl, withMultilineFix, onClick,\n}) => {\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    onClick!(e);\n  });\n\n  return (\n    <a\n      href=\"#\"\n      className={buildClassName('Link', styles.link, className, isPrimary && styles.isPrimary)}\n      dir={!withMultilineFix ? (isRtl ? 'rtl' : 'auto') : undefined}\n      onClick={onClick ? handleClick : undefined}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default Link;\n","// extracted by mini-css-extract-plugin\nexport {};","import { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Spinner from './Spinner';\n\nimport './Loading.scss';\n\ntype OwnProps = {\n  color?: 'blue' | 'white' | 'black' | 'yellow';\n  backgroundColor?: 'light' | 'dark';\n  className?: string;\n  onClick?: NoneToVoidFunction;\n};\n\nconst Loading = ({\n  color = 'blue', backgroundColor, className, onClick,\n}: OwnProps) => {\n  return (\n    <div className={buildClassName('Loading', onClick && 'interactive', className)} onClick={onClick}>\n      <Spinner color={color} backgroundColor={backgroundColor} />\n    </div>\n  );\n};\n\nexport default memo(Loading);\n","// extracted by mini-css-extract-plugin\nexport {};","import type {\n  ElementRef } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  beginHeavyAnimation,\n  type FC, memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { MenuPositionOptions } from '../../hooks/useMenuPosition';\n\nimport { IS_BACKDROP_BLUR_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { preventMessageInputBlurWithBubbling } from '../middle/helpers/preventMessageInputBlur';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useKeyboardListNavigation from '../../hooks/useKeyboardListNavigation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMenuPosition from '../../hooks/useMenuPosition';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport './Menu.scss';\n\nexport type { MenuPositionOptions } from '../../hooks/useMenuPosition';\n\ntype OwnProps =\n  {\n    ref?: ElementRef<HTMLDivElement>;\n    isOpen: boolean;\n    shouldCloseFast?: boolean;\n    id?: string;\n    className?: string;\n    bubbleClassName?: string;\n    ariaLabelledBy?: string;\n    autoClose?: boolean;\n    footer?: string;\n    noCloseOnBackdrop?: boolean;\n    backdropExcludedSelector?: string;\n    noCompact?: boolean;\n    onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n    onCloseAnimationEnd?: () => void;\n    onClose: () => void;\n    onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n    onMouseEnterBackdrop?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n    onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n    withPortal?: boolean;\n    children?: React.ReactNode;\n  }\n  & MenuPositionOptions;\n\nconst ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  ref: externalRef,\n  shouldCloseFast,\n  isOpen,\n  id,\n  className,\n  bubbleClassName,\n  ariaLabelledBy,\n  children,\n  autoClose = false,\n  footer,\n  noCloseOnBackdrop = false,\n  backdropExcludedSelector,\n  noCompact,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n  withPortal,\n  onMouseEnterBackdrop,\n  ...positionOptions\n}) => {\n  const { isTouchScreen } = useAppLayout();\n\n  const containerRef = useRef<HTMLDivElement>();\n\n  const { ref: bubbleRef } = useShowTransition({\n    isOpen,\n    ref: externalRef,\n    onCloseAnimationEnd,\n  });\n\n  useMenuPosition(isOpen, containerRef, bubbleRef, positionOptions);\n\n  useEffect(\n    () => (isOpen ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  const handleKeyDown = useKeyboardListNavigation(bubbleRef, isOpen, autoClose ? onClose : undefined, undefined, true);\n\n  useVirtualBackdrop(\n    isOpen,\n    containerRef,\n    noCloseOnBackdrop ? undefined : onClose,\n    undefined,\n    backdropExcludedSelector,\n  );\n\n  const bubbleFullClassName = buildClassName(\n    'bubble menu-container custom-scroll',\n    footer && 'with-footer',\n    bubbleClassName,\n    shouldCloseFast && 'close-fast',\n  );\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    if (autoClose) {\n      onClose();\n    }\n  });\n\n  const menu = (\n    <div\n      ref={containerRef}\n      id={id}\n      className={buildClassName(\n        'Menu',\n        !noCompact && !isTouchScreen && 'compact',\n        !IS_BACKDROP_BLUR_SUPPORTED && 'no-blur',\n        withPortal && 'in-portal',\n        className,\n      )}\n      aria-labelledby={ariaLabelledBy}\n      role={ariaLabelledBy ? 'menu' : undefined}\n      onKeyDown={isOpen ? handleKeyDown : undefined}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && (\n        // This only prevents click events triggering on underlying elements\n        <div\n          className=\"backdrop\"\n          onMouseDown={preventMessageInputBlurWithBubbling}\n          onMouseEnter={onMouseEnterBackdrop}\n        />\n      )}\n      <div\n        role=\"presentation\"\n        ref={bubbleRef}\n        className={bubbleFullClassName}\n        onClick={handleClick}\n      >\n        {children}\n        {footer && <div className=\"footer\">{footer}</div>}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default memo(Menu);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\n\nimport type { IconName } from '../../types/icons';\n\nimport { IS_TEST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Icon from '../common/icons/Icon';\n\nimport './MenuItem.scss';\n\nexport type MenuItemProps = {\n  customIcon?: React.ReactNode;\n  className?: string;\n  children: React.ReactNode;\n  onClick?: (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: number) => void;\n  clickArg?: number;\n  onContextMenu?: (e: React.UIEvent) => void;\n  href?: string;\n  rel?: string;\n  target?: string;\n  download?: string;\n  disabled?: boolean;\n  destructive?: boolean;\n  ariaLabel?: string;\n  withWrap?: boolean;\n  withPreventDefaultOnMouseDown?: boolean;\n} & ({\n  icon: 'A' | 'K';\n  isCharIcon: true;\n} | {\n  icon?: IconName;\n  isCharIcon?: false;\n});\n\nconst MenuItem: FC<MenuItemProps> = (props) => {\n  const {\n    icon,\n    isCharIcon,\n    customIcon,\n    className,\n    children,\n    onClick,\n    href,\n    target,\n    download,\n    disabled,\n    destructive,\n    ariaLabel,\n    withWrap,\n    rel = 'noopener noreferrer',\n    onContextMenu,\n    clickArg,\n    withPreventDefaultOnMouseDown,\n  } = props;\n\n  const lang = useOldLang();\n  const { isTouchScreen } = useAppLayout();\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (disabled || !onClick) {\n      e.preventDefault();\n      return;\n    }\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.keyCode !== 13 && e.keyCode !== 32) {\n      return;\n    }\n\n    if (disabled || !onClick) {\n      e.preventDefault();\n\n      return;\n    }\n    onClick(e, clickArg);\n  });\n  const handleMouseDown = useLastCallback((e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>) => {\n    if (withPreventDefaultOnMouseDown) {\n      e.preventDefault();\n    }\n  });\n\n  const fullClassName = buildClassName(\n    'MenuItem',\n    className,\n    disabled && 'disabled',\n    destructive && 'destructive',\n    !isTouchScreen && 'compact',\n    withWrap && 'wrap',\n  );\n\n  const content = (\n    <>\n      {!customIcon && icon && (\n        <Icon name={isCharIcon ? 'char' : icon} character={isCharIcon ? icon : undefined} />\n      )}\n      {customIcon}\n      {children}\n    </>\n  );\n\n  if (href && !disabled) {\n    return (\n      <a\n        tabIndex={0}\n        className={fullClassName}\n        href={href}\n        download={download}\n        aria-label={ariaLabel}\n        title={ariaLabel}\n        target={target || (href.startsWith(window.location.origin) || IS_TEST ? '_self' : '_blank')}\n        rel={rel}\n        dir={lang.isRtl ? 'rtl' : undefined}\n        onClick={onClick}\n        onMouseDown={handleMouseDown}\n      >\n        {content}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"menuitem\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      onMouseDown={handleMouseDown}\n      onContextMenu={onContextMenu}\n      aria-label={ariaLabel}\n      title={ariaLabel}\n      dir={lang.isRtl ? 'rtl' : undefined}\n    >\n      {content}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","// extracted by mini-css-extract-plugin\nexport {};","import type { ElementRef } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../lib/teact/teact';\n\nimport useBuffering from '../../hooks/useBuffering';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useVideoCleanup from '../../hooks/useVideoCleanup';\nimport useVideoAutoPause from '../middle/message/hooks/useVideoAutoPause';\n\ntype VideoProps = React.DetailedHTMLProps<React.VideoHTMLAttributes<HTMLVideoElement>, HTMLVideoElement>;\n\ntype OwnProps =\n  {\n    ref?: ElementRef<HTMLVideoElement>;\n    isPriority?: boolean;\n    canPlay: boolean;\n    children?: React.ReactNode;\n    onReady?: NoneToVoidFunction;\n    onBroken?: NoneToVoidFunction;\n  }\n  & VideoProps;\n\nfunction OptimizedVideo({\n  ref,\n  isPriority,\n  canPlay,\n  children,\n  onReady,\n  onBroken,\n  onTimeUpdate,\n  ...restProps\n}: OwnProps) {\n  const localRef = useRef<HTMLVideoElement>();\n  if (!ref) {\n    ref = localRef;\n  }\n\n  const { handlePlaying: handlePlayingForAutoPause } = useVideoAutoPause(ref, canPlay, isPriority);\n\n  const isReadyRef = useRef(false);\n  const handleReady = useLastCallback(() => {\n    if (!isReadyRef.current) {\n      onReady?.();\n      isReadyRef.current = true;\n    }\n  });\n\n  // This is only needed for browsers not allowing autoplay\n  const { isBuffered, bufferingHandlers } = useBuffering(true, onTimeUpdate, onBroken);\n  const { onPlaying: handlePlayingForBuffering, ...otherBufferingHandlers } = bufferingHandlers;\n  useSyncEffect(([prevIsBuffered]) => {\n    if (prevIsBuffered === undefined) {\n      return;\n    }\n\n    handleReady();\n  }, [isBuffered, handleReady]);\n\n  const handlePlaying = useLastCallback((e) => {\n    handlePlayingForAutoPause();\n    handlePlayingForBuffering(e);\n    handleReady();\n    restProps.onPlaying?.(e);\n  });\n\n  const mergedOtherBufferingHandlers = useMemo(() => {\n    const mergedHandlers: Record<string, AnyFunction> = {};\n    Object.keys(otherBufferingHandlers).forEach((keyString) => {\n      const key = keyString as keyof typeof otherBufferingHandlers;\n      mergedHandlers[key] = (event: Event) => {\n        restProps[key as keyof typeof restProps]?.(event);\n        otherBufferingHandlers[key]?.(event);\n      };\n    });\n\n    return mergedHandlers;\n  }, [otherBufferingHandlers, restProps]);\n\n  useVideoCleanup(ref, mergedOtherBufferingHandlers);\n\n  return (\n\n    <video ref={ref} autoPlay {...restProps} {...mergedOtherBufferingHandlers} onPlaying={handlePlaying}>\n      {children}\n    </video>\n  );\n}\n\nexport default memo(OptimizedVideo);\n","import type { FC, VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerSelector?: string;\n  className?: string;\n  children: VirtualElement;\n};\n\nconst Portal: FC<OwnProps> = ({ containerSelector, className, children }) => {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerSelector || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n    if (className) {\n      element.classList.add(className);\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, containerSelector]);\n\n  return TeactDOM.render(children, elementRef.current);\n};\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport { debounce } from '../../util/schedulers';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport './RippleEffect.scss';\n\ninterface Ripple {\n  x: number;\n  y: number;\n  size: number;\n}\n\nconst ANIMATION_DURATION_MS = 700;\n\nconst RippleEffect: FC = () => {\n  const [ripples, setRipples] = useState<Ripple[]>([]);\n\n  const cleanUpDebounced = useMemo(() => {\n    return debounce(() => {\n      setRipples([]);\n    }, ANIMATION_DURATION_MS, false);\n  }, []);\n\n  const handleMouseDown = useLastCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (e.button !== 0) {\n      return;\n    }\n\n    const container = e.currentTarget;\n    const position = container.getBoundingClientRect();\n    const rippleSize = container.offsetWidth / 2;\n\n    setRipples([\n      ...ripples,\n      {\n        x: e.clientX - position.x - (rippleSize / 2),\n        y: e.clientY - position.y - (rippleSize / 2),\n        size: rippleSize,\n      },\n    ]);\n\n    cleanUpDebounced();\n  });\n\n  return (\n    <div className=\"ripple-container\" onMouseDown={handleMouseDown}>\n      {ripples.map(({ x, y, size }) => (\n        <div\n          className=\"ripple-wave\"\n          style={`left: ${x}px; top: ${y}px; width: ${size}px; height: ${size}px;`}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default memo(RippleEffect);\n","// extracted by mini-css-extract-plugin\nexport {};","import type { FC } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport './Spinner.scss';\n\nconst Spinner: FC<{\n  color?: 'blue' | 'white' | 'black' | 'green' | 'gray' | 'yellow';\n  backgroundColor?: 'light' | 'dark';\n  className?: string;\n}> = ({\n  color = 'blue',\n  backgroundColor,\n  className,\n}) => {\n  return (\n    <div className={buildClassName(\n      'Spinner', className, color, backgroundColor && 'with-background', backgroundColor && `bg-${backgroundColor}`,\n    )}\n    >\n      <div className=\"Spinner__inner\" />\n    </div>\n  );\n};\n\nexport default Spinner;\n","// extracted by mini-css-extract-plugin\nexport {};","import type {\n  ElementRef } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  beginHeavyAnimation, useEffect, useLayoutEffect, useRef,\n} from '../../lib/teact/teact';\nimport {\n  addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass,\n} from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCanAnimateInterface } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport forceReflow from '../../util/forceReflow';\nimport { omit } from '../../util/iteratees';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePreviousDeprecated from '../../hooks/usePreviousDeprecated';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'zoomBounceSemiFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => React.ReactNode;\nexport type TransitionProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  activeKey: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  cleanupOnlyKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  isBlockingAnimation?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  children: React.ReactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = 1000;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nconst DISABLEABLE_ANIMATIONS = new Set<AnimationName>([\n  'slide', 'slideRtl', 'slideFade', 'zoomFade', 'zoomBounceSemiFade', 'slideLayers', 'pushSlide', 'reveal',\n  'slideOptimized', 'slideOptimizedRtl', 'slideVertical', 'slideVerticalFade',\n]);\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  cleanupOnlyKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  isBlockingAnimation,\n  onStart,\n  onStop,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const shouldDisableAnimation = DISABLEABLE_ANIMATIONS.has(name)\n    && !selectCanAnimateInterface(getGlobal());\n\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, React.ReactNode | ChildrenFn>>({});\n  const prevActiveKey = usePreviousDeprecated<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n      if (cleanupExceptionKey !== undefined) {\n        rendersRef.current = { [cleanupExceptionKey]: rendersRef.current[cleanupExceptionKey] };\n      } else if (cleanupOnlyKey !== undefined) {\n        rendersRef.current = omit(rendersRef.current, [cleanupOnlyKey]);\n      } else {\n        rendersRef.current = {};\n      }\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        isBlockingAnimation,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation(undefined, isBlockingAnimation);\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n    isBlockingAnimation,\n    cleanupOnlyKey,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`:scope > .${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`:scope > .${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight, clientWidth } = activeElement || {};\n    if (!clientHeight || !clientWidth) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  isBlockingAnimation?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation(undefined, isBlockingAnimation);\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","import type {\n  ApiLimitType,\n  ApiLimitTypeForPromo,\n  ApiPremiumSection,\n  ApiReactionEmoji,\n} from \"./api/types\";\nimport type {\n  GiftProfileFilterOptions,\n  ResaleGiftsFilterOptions,\n} from \"./types\";\n\nexport const APP_CODE_NAME = \"A\";\nexport const APP_NAME = process.env.APP_NAME || `Telegram Web ${APP_CODE_NAME}`;\nexport const RELEASE_DATETIME = process.env.RELEASE_DATETIME;\n\nexport const PRODUCTION_HOSTNAME = \"web.telegram.org\";\nexport const PRODUCTION_URL = \"https://web.telegram.org/a\";\nexport const WEB_VERSION_BASE = \"https://web.telegram.org/\"; // Used to redirect to other versions\nexport const BASE_URL = process.env.BASE_URL;\nexport const ACCOUNT_QUERY = \"account\";\n\nexport const IS_MOCKED_CLIENT = process.env.APP_MOCKED_CLIENT === \"1\";\nexport const IS_BYPASS_AUTH = process.env.APP_BYPASS_AUTH === \"1\";\nexport const IS_WALLET_CREATED = process.env.APP_WALLET_CREATED === \"1\";\nexport const IS_DEV = process.env.APP_ENV === \"development\";\nexport const IS_TEST = process.env.APP_ENV === \"test\";\nexport const IS_PERF = process.env.APP_ENV === \"perf\";\nexport const IS_BETA = process.env.APP_ENV === \"staging\";\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON;\n\nexport const ELECTRON_WINDOW_DRAG_EVENT_START = \"tt-electron-window-drag-start\";\nexport const ELECTRON_WINDOW_DRAG_EVENT_END = \"tt-electron-window-drag-end\";\nexport const PAID_MESSAGES_PURPOSE = \"paid_messages\";\n\nexport const DEBUG = process.env.APP_ENV !== \"production\";\nexport const DEBUG_MORE = false;\nexport const DEBUG_LOG_FILENAME = \"tt-log.json\";\nexport const STRICTERDOM_ENABLED = DEBUG;\nexport const BOT_VERIFICATION_PEERS_LIMIT = 20;\n\nexport const BETA_CHANGELOG_URL = \"https://telegra.ph/WebA-Beta-03-20\";\nexport const ELECTRON_HOST_URL = process.env.ELECTRON_HOST_URL!;\n\nexport const DEBUG_ALERT_MSG =\n  \"Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.\";\nexport const DEBUG_GRAMJS = false;\n\nexport const PAGE_TITLE = process.env.APP_TITLE!;\nexport const VIVA_API_KEY = process.env.VIVA_API_KEY || \"\";\nexport const INACTIVE_MARKER = \"[Inactive]\";\n\nexport const DEBUG_PAYMENT_SMART_GLOCAL = false;\n\nexport const SESSION_LEGACY_USER_KEY = \"user_auth\";\nexport const SESSION_ACCOUNT_PREFIX = \"account\";\nexport const LEGACY_PASSCODE_CACHE_NAME = \"tt-passcode\";\n\nexport const MULTIACCOUNT_MAX_SLOTS = 6;\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_PREFIX = \"tt-global-state\";\nexport const SHARED_STATE_CACHE_KEY = \"tt-shared-state\";\nexport const GLOBAL_STATE_CACHE_USER_LIST_LIMIT = 500;\nexport const GLOBAL_STATE_CACHE_CHAT_LIST_LIMIT = 200;\nexport const GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT = 10;\nexport const GLOBAL_STATE_CACHE_CUSTOM_EMOJI_LIMIT = 150;\n\nexport const IS_SCREEN_LOCKED_CACHE_KEY = \"tt-is-screen-locked\";\n\nexport const MEDIA_CACHE_DISABLED = false;\nexport const MEDIA_CACHE_NAME = \"tt-media\";\nexport const MEDIA_CACHE_NAME_AVATARS = \"tt-media-avatars\";\nexport const MEDIA_PROGRESSIVE_CACHE_DISABLED = false;\nexport const MEDIA_PROGRESSIVE_CACHE_NAME = \"tt-media-progressive\";\nexport const MEDIA_CACHE_MAX_BYTES = 512 * 1024; // 512 KB\nexport const CUSTOM_BG_CACHE_NAME = \"tt-custom-bg\";\nexport const LANG_CACHE_NAME = \"tt-lang-packs-v50\";\nexport const ASSET_CACHE_NAME = \"tt-assets\";\nexport const AUTODOWNLOAD_FILESIZE_MB_LIMITS = [1, 5, 10, 50, 100, 500];\nexport const DATA_BROADCAST_CHANNEL_PREFIX = \"tt-global\";\nexport const ESTABLISH_BROADCAST_CHANNEL_PREFIX = \"tt-establish\";\nexport const MULTITAB_LOCALSTORAGE_KEY_PREFIX = \"tt-multitab\";\nexport const DC_IDS = [1, 2, 3, 4, 5] as const;\n\nexport const DOWNLOAD_WORKERS = 16;\nexport const UPLOAD_WORKERS = 16;\n\nconst isBigScreen = typeof window !== \"undefined\" && window.innerHeight >= 900;\n\nexport const MIN_PASSWORD_LENGTH = 1;\n\nexport const MESSAGE_LIST_SLICE = isBigScreen ? 60 : 40;\nexport const MESSAGE_LIST_VIEWPORT_LIMIT = MESSAGE_LIST_SLICE * 2;\n\nexport const ARCHIVE_MINIMIZED_HEIGHT = 36;\nexport const CHAT_HEIGHT_PX = 72;\nexport const TOPIC_HEIGHT_PX = 65;\nexport const PEER_PICKER_ITEM_HEIGHT_PX = 56;\nexport const CHAT_LIST_SLICE = isBigScreen ? 30 : 25;\nexport const CHAT_LIST_LOAD_SLICE = 100;\nexport const SHARED_MEDIA_SLICE = 42;\nexport const CHAT_MEDIA_SLICE = 42;\nexport const MESSAGE_SEARCH_SLICE = 42;\nexport const GLOBAL_SEARCH_SLICE = 20;\nexport const GLOBAL_TOPIC_SEARCH_SLICE = 5;\nexport const GLOBAL_SEARCH_CONTACTS_LIMIT = 20;\nexport const MEMBERS_SLICE = 30;\nexport const MEMBERS_LOAD_SLICE = 200;\nexport const PINNED_MESSAGES_LIMIT = 50;\nexport const BLOCKED_LIST_LIMIT = 100;\nexport const PROFILE_SENSITIVE_AREA = 500;\nexport const TOPIC_LIST_SENSITIVE_AREA = 600;\nexport const GROUP_CALL_PARTICIPANTS_LIMIT = 100;\nexport const STORY_LIST_LIMIT = 100;\nexport const API_GENERAL_ID_LIMIT = 100;\nexport const STATISTICS_PUBLIC_FORWARDS_LIMIT = 50;\nexport const RESALE_GIFTS_LIMIT = 50;\nexport const TODO_ITEMS_LIMIT = 30;\nexport const TODO_TITLE_LENGTH_LIMIT = 32;\nexport const TODO_ITEM_LENGTH_LIMIT = 64;\n\n// Suggested Posts defaults\nexport const STARS_SUGGESTED_POST_AMOUNT_MAX = 100000;\nexport const STARS_SUGGESTED_POST_AMOUNT_MIN = 5;\nexport const STARS_SUGGESTED_POST_COMMISSION_PERMILLE = 850;\nexport const STARS_SUGGESTED_POST_AGE_MIN = 86400; // 24 hours in seconds\nexport const STARS_SUGGESTED_POST_FUTURE_MAX = 2678400; // 31 days in seconds\nexport const STARS_SUGGESTED_POST_FUTURE_MIN = 300; // 5 minutes in seconds\nexport const TON_CURRENCY_CODE = \"TON\";\nexport const TON_SUGGESTED_POST_COMMISSION_PERMILLE = 850;\nexport const TON_USD_RATE_DEFAULT = 3;\nexport const VERIFY_AGE_MIN_DEFAULT = 18;\nexport const TON_TOPUP_URL_DEFAULT = \"https://fragment.com/ads/topup\";\nexport const TON_SUGGESTED_POST_AMOUNT_MIN = 10000000; // 0.01 TON in nanos\nexport const TON_SUGGESTED_POST_AMOUNT_MAX = 10000000000000; // 10 000 TON in nanos\n\nexport const STORY_VIEWS_MIN_SEARCH = 15;\nexport const STORY_MIN_REACTIONS_SORT = 10;\nexport const STORY_VIEWS_MIN_CONTACTS_FILTER = 20;\n\nexport const MEDIA_TIMESTAMP_SAVE_MINIMUM_DURATION = 30; // 30s\n\nexport const GLOBAL_SUGGESTED_CHANNELS_ID = \"global\";\n\n// As in Telegram for Android\n// https://github.com/DrKLO/Telegram/blob/51e9947527/TMessagesProj/src/main/java/org/telegram/messenger/MediaDataController.java#L7799\nexport const TOP_REACTIONS_LIMIT = 100;\n\n// As in Telegram for Android\n// https://github.com/DrKLO/Telegram/blob/51e9947527/TMessagesProj/src/main/java/org/telegram/messenger/MediaDataController.java#L7781\nexport const RECENT_REACTIONS_LIMIT = 50;\nexport const REACTION_LIST_LIMIT = 100;\nexport const REACTION_UNREAD_SLICE = 100;\nexport const MENTION_UNREAD_SLICE = 100;\nexport const TOPICS_SLICE = 20;\nexport const TOPICS_SLICE_SECOND_LOAD = 500;\n\nexport const TOP_CHAT_MESSAGES_PRELOAD_LIMIT = 20;\n\nexport const SPONSORED_MESSAGE_CACHE_MS = 300000; // 5 min\n\nexport const DEFAULT_CHARGE_FOR_MESSAGES = 250;\nexport const MINIMUM_CHARGE_FOR_MESSAGES = 1;\nexport const DEFAULT_MAXIMUM_CHARGE_FOR_MESSAGES = 10000;\n\nexport const DEFAULT_VOLUME = 1;\nexport const DEFAULT_PLAYBACK_RATE = 1;\nexport const PLAYBACK_RATE_FOR_AUDIO_MIN_DURATION = 20 * 60; // 20 min\n\nexport const ANIMATION_LEVEL_CUSTOM = -1;\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\n\nexport const DEFAULT_MESSAGE_TEXT_SIZE_PX = 16;\nexport const IOS_DEFAULT_MESSAGE_TEXT_SIZE_PX = 17;\nexport const MACOS_DEFAULT_MESSAGE_TEXT_SIZE_PX = 15;\n\nexport const PREVIEW_AVATAR_COUNT = 3;\n\nexport const DRAFT_DEBOUNCE = 10000; // 10s\nexport const SEND_MESSAGE_ACTION_INTERVAL = 3000; // 3s\n// 10000s from https://corefork.telegram.org/api/url-authorization#automatic-authorization\nexport const APP_CONFIG_REFETCH_INTERVAL = 10000 * 1000;\nexport const GENERAL_REFETCH_INTERVAL = 60 * 60 * 1000; // 1h\n\nexport const EDITABLE_INPUT_ID = \"editable-message-text\";\nexport const EDITABLE_INPUT_MODAL_ID = \"editable-message-text-modal\";\nexport const EDITABLE_STORY_INPUT_ID = \"editable-story-input-text\";\n// eslint-disable-next-line @stylistic/max-len\nexport const EDITABLE_INPUT_CSS_SELECTOR = `.messages-layout .Transition_slide-active #${EDITABLE_INPUT_ID}, .messages-layout .Transition > .Transition_slide-to #${EDITABLE_INPUT_ID}`;\nexport const EDITABLE_INPUT_MODAL_CSS_SELECTOR = `#${EDITABLE_INPUT_MODAL_ID}`;\nexport const EDITABLE_STORY_INPUT_CSS_SELECTOR = `#${EDITABLE_STORY_INPUT_ID}`;\n\nexport const CUSTOM_APPENDIX_ATTRIBUTE = \"data-has-custom-appendix\";\nexport const MESSAGE_CONTENT_CLASS_NAME = \"message-content\";\nexport const MESSAGE_CONTENT_SELECTOR = \".message-content\";\nexport const VIEW_TRANSITION_CLASS_NAME = \"active-view-transition\";\n\nexport const RESIZE_HANDLE_CLASS_NAME = \"resizeHandle\";\nexport const RESIZE_HANDLE_SELECTOR = `.${RESIZE_HANDLE_CLASS_NAME}`;\n\nexport const SNAP_EFFECT_CONTAINER_ID = \"snap-effect-container\";\nexport const SNAP_EFFECT_ID = \"snap-effect\";\n\nexport const STARS_ICON_PLACEHOLDER = \"⭐\";\nexport const STARS_CURRENCY_CODE = \"XTR\";\n\nexport const MIN_SCREEN_WIDTH_FOR_STATIC_RIGHT_COLUMN = 1275; // px\nexport const MIN_SCREEN_WIDTH_FOR_STATIC_LEFT_COLUMN = 925; // px\nexport const MOBILE_SCREEN_MAX_WIDTH = 600; // px\nexport const MOBILE_SCREEN_LANDSCAPE_MAX_WIDTH = 950; // px\nexport const MOBILE_SCREEN_LANDSCAPE_MAX_HEIGHT = 450; // px\n\nexport const MAX_INT_32 = 2 ** 31 - 1;\nexport const TMP_CHAT_ID = \"0\";\n\nexport const ANIMATION_END_DELAY = 100;\nexport const ANIMATION_WAVE_MIN_INTERVAL = 200;\nexport const MESSAGE_APPEARANCE_DELAY = 10;\nexport const PAID_SEND_DELAY = 5000;\n\nexport const SCROLL_MIN_DURATION = 300;\nexport const SCROLL_MAX_DURATION = 600;\nexport const SCROLL_MAX_DISTANCE = 800;\nexport const SCROLL_SHORT_TRANSITION_MAX_DISTANCE = 300; // px\n\n// Average duration of message sending animation\nexport const API_UPDATE_THROTTLE = Math.round(\n  (SCROLL_MIN_DURATION + SCROLL_MAX_DURATION) / 2\n);\nexport const API_THROTTLE_RESET_UPDATES = new Set([\n  \"newMessage\",\n  \"newScheduledMessage\",\n  \"deleteMessages\",\n  \"deleteScheduledMessages\",\n  \"deleteHistory\",\n  \"deleteParticipantHistory\",\n]);\n\nexport const LOCK_SCREEN_ANIMATION_DURATION_MS = 200;\n\nexport const STICKER_SIZE_INLINE_DESKTOP_FACTOR = 13;\nexport const STICKER_SIZE_INLINE_MOBILE_FACTOR = 11;\nexport const STICKER_SIZE_AUTH = 160;\nexport const STICKER_SIZE_AUTH_MOBILE = 120;\nexport const STICKER_SIZE_PICKER = 72;\nexport const EMOJI_SIZE_PICKER = 36;\nexport const COMPOSER_EMOJI_SIZE_PICKER = 32;\nexport const STICKER_SIZE_GENERAL_SETTINGS = 40;\nexport const STICKER_SIZE_PICKER_HEADER = 32;\nexport const STICKER_PICKER_MAX_SHARED_COVERS = 20;\nexport const STICKER_SIZE_SEARCH = 72;\nexport const STICKER_SIZE_MODAL = 72;\nexport const EMOJI_SIZE_MODAL = 36;\nexport const STICKER_SIZE_TWO_FA = 160;\nexport const STICKER_SIZE_PASSCODE = 160;\nexport const STICKER_SIZE_DISCUSSION_GROUPS = 140;\nexport const STICKER_SIZE_FOLDER_SETTINGS = 100;\nexport const STICKER_SIZE_INLINE_BOT_RESULT = 100;\nexport const STICKER_SIZE_JOIN_REQUESTS = 140;\nexport const STICKER_SIZE_INVITES = 140;\nexport const RECENT_STICKERS_LIMIT = 20;\nexport const RECENT_STATUS_LIMIT = 20;\nexport const EMOJI_STATUS_LOOP_LIMIT = 2;\nexport const EMOJI_SIZES = 7;\nexport const TOP_SYMBOL_SET_ID = \"top\";\nexport const POPULAR_SYMBOL_SET_ID = \"popular\";\nexport const RECENT_SYMBOL_SET_ID = \"recent\";\nexport const COLLECTIBLE_STATUS_SET_ID = \"collectibleStatus\";\nexport const FAVORITE_SYMBOL_SET_ID = \"favorite\";\nexport const EFFECT_STICKERS_SET_ID = \"effectStickers\";\nexport const EFFECT_EMOJIS_SET_ID = \"effectEmojis\";\nexport const CHAT_STICKER_SET_ID = \"chatStickers\";\nexport const DEFAULT_TOPIC_ICON_STICKER_ID = \"topic-default-icon\";\nexport const DEFAULT_STATUS_ICON_ID = \"status-default-icon\";\nexport const EMOJI_IMG_REGEX =\n  /<img[^>]+alt=\"([^\"]+)\"(?![^>]*data-document-id)[^>]*>/gm;\n\nexport const BASE_EMOJI_KEYWORD_LANG = \"en\";\n\nexport const MENU_TRANSITION_DURATION = 200;\nexport const SLIDE_TRANSITION_DURATION = 450;\n\nexport const BIRTHDAY_NUMBERS_SET = \"FestiveFontEmoji\";\nexport const RESTRICTED_EMOJI_SET = \"RestrictedEmoji\";\n\nexport const SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nexport const SVG_EXTENSIONS = new Set([\"svg\", \"svgz\"]);\n\nexport const VIDEO_WEBM_TYPE = \"video/webm\";\nexport const GIF_MIME_TYPE = \"image/gif\";\n\nexport const LOTTIE_STICKER_MIME_TYPE = \"application/x-tgsticker\";\nexport const VIDEO_STICKER_MIME_TYPE = VIDEO_WEBM_TYPE;\n\nexport const SUPPORTED_PHOTO_CONTENT_TYPES = new Set([\n  \"image/png\",\n  \"image/jpeg\",\n  GIF_MIME_TYPE,\n]);\n\nexport const SUPPORTED_VIDEO_CONTENT_TYPES = new Set([\n  \"video/mp4\",\n  \"video/quicktime\",\n]);\n\nexport const SUPPORTED_AUDIO_CONTENT_TYPES = new Set([\n  \"audio/mp3\",\n  \"audio/ogg\",\n  \"audio/wav\",\n  \"audio/mpeg\",\n  \"audio/flac\",\n  \"audio/aac\",\n  \"audio/m4a\",\n  \"audio/mp4\",\n  \"audio/x-m4a\",\n]);\n\nexport const CONTENT_TYPES_WITH_PREVIEW = new Set([\n  ...SUPPORTED_PHOTO_CONTENT_TYPES,\n  ...SUPPORTED_VIDEO_CONTENT_TYPES,\n]);\n\nexport const CONTENT_NOT_SUPPORTED =\n  \"The message is not supported on this version of Telegram.\";\n\n// Taken from https://github.com/telegramdesktop/tdesktop/blob/41d9a9fcbd0c809c60ddbd9350791b1436aff7d9/Telegram/SourceFiles/ui/boxes/choose_language_box.cpp#L28\nexport const SUPPORTED_TRANSLATION_LANGUAGES = [\n  // Official\n  \"en\",\n  \"ar\",\n  \"be\",\n  \"ca\",\n  \"zh\",\n  \"nl\",\n  \"fr\",\n  \"de\",\n  \"id\",\n  \"it\",\n  \"ja\",\n  \"ko\",\n  \"pl\",\n  \"pt\",\n  \"ru\",\n  \"es\",\n  \"uk\",\n  // Unofficial\n  \"af\",\n  \"sq\",\n  \"am\",\n  \"hy\",\n  \"az\",\n  \"eu\",\n  \"bn\",\n  \"bs\",\n  \"bg\",\n  \"ceb\",\n  \"zh-CN\",\n  \"zh-TW\",\n  \"co\",\n  \"hr\",\n  \"cs\",\n  \"da\",\n  \"eo\",\n  \"et\",\n  \"fi\",\n  \"fy\",\n  \"gl\",\n  \"ka\",\n  \"el\",\n  \"gu\",\n  \"ht\",\n  \"ha\",\n  \"haw\",\n  \"he\",\n  \"iw\",\n  \"hi\",\n  \"hmn\",\n  \"hu\",\n  \"is\",\n  \"ig\",\n  \"ga\",\n  \"jv\",\n  \"kn\",\n  \"kk\",\n  \"km\",\n  \"rw\",\n  \"ku\",\n  \"ky\",\n  \"lo\",\n  \"la\",\n  \"lv\",\n  \"lt\",\n  \"lb\",\n  \"mk\",\n  \"mg\",\n  \"ms\",\n  \"ml\",\n  \"mt\",\n  \"mi\",\n  \"mr\",\n  \"mn\",\n  \"my\",\n  \"ne\",\n  \"no\",\n  \"ny\",\n  \"or\",\n  \"ps\",\n  \"fa\",\n  \"pa\",\n  \"ro\",\n  \"sm\",\n  \"gd\",\n  \"sr\",\n  \"st\",\n  \"sn\",\n  \"sd\",\n  \"si\",\n  \"sk\",\n  \"sl\",\n  \"so\",\n  \"su\",\n  \"sw\",\n  \"sv\",\n  \"tl\",\n  \"tg\",\n  \"ta\",\n  \"tt\",\n  \"te\",\n  \"th\",\n  \"tr\",\n  \"tk\",\n  \"ur\",\n  \"ug\",\n  \"uz\",\n  \"vi\",\n  \"cy\",\n  \"xh\",\n  \"yi\",\n  \"yo\",\n  \"zu\",\n];\n\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_LINK_TEMPLATE =\n  \"((ftp|https?):\\\\/\\\\/)?((www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)\";\nexport const RE_MENTION_TEMPLATE = \"(@[\\\\w\\\\d_-]+)\";\nexport const RE_TG_LINK = /^tg:(\\/\\/)?/i;\nexport const RE_TME_LINK =\n  /^(https?:\\/\\/)?([-a-zA-Z0-9@:%_+~#=]{1,32}\\.)?t\\.me/i;\nexport const RE_TELEGRAM_LINK = /^(https?:\\/\\/)?telegram\\.org\\//i;\nexport const TME_LINK_PREFIX = \"https://t.me/\";\nexport const BOT_FATHER_USERNAME = \"botfather\";\nexport const USERNAME_PURCHASE_ERROR = \"USERNAME_PURCHASE_AVAILABLE\";\nexport const MESSAGE_ID_REQUIRED_ERROR = \"MESSAGE_ID_REQUIRED\";\nexport const PURCHASE_USERNAME = \"auction\";\nexport const ACCEPTABLE_USERNAME_ERRORS = new Set([\n  USERNAME_PURCHASE_ERROR,\n  \"USERNAME_INVALID\",\n]);\nexport const TME_WEB_DOMAINS = new Set([\n  \"t.me\",\n  \"web.t.me\",\n  \"a.t.me\",\n  \"k.t.me\",\n  \"z.t.me\",\n]);\nexport const WEB_APP_PLATFORM = \"weba\";\nexport const LANG_PACK = \"weba\";\n\nexport const NSFW_RESTRICTION_REASON = \"sensitive\";\n\n// eslint-disable-next-line @stylistic/max-len\nexport const COUNTRIES_WITH_12H_TIME_FORMAT = new Set([\n  \"AU\",\n  \"BD\",\n  \"CA\",\n  \"CO\",\n  \"EG\",\n  \"HN\",\n  \"IE\",\n  \"IN\",\n  \"JO\",\n  \"MX\",\n  \"MY\",\n  \"NI\",\n  \"NZ\",\n  \"PH\",\n  \"PK\",\n  \"SA\",\n  \"SV\",\n  \"US\",\n]);\n\nexport const API_CHAT_TYPES = [\n  \"bots\",\n  \"channels\",\n  \"chats\",\n  \"users\",\n  \"groups\",\n] as const;\n\nexport const HEART_REACTION: ApiReactionEmoji = {\n  type: \"emoji\",\n  emoticon: \"❤\",\n};\n\n// MTProto constants\nexport const SERVICE_NOTIFICATIONS_USER_ID = \"777000\";\nexport const REPLIES_USER_ID = \"1271266957\"; // TODO For Test connection ID must be equal to 708513\nexport const VERIFICATION_CODES_USER_ID = \"489000\";\nexport const ANONYMOUS_USER_ID = \"2666000\";\nexport const RESTRICTED_EMOJI_SET_ID = \"7173162320003080\";\nexport const CHANNEL_ID_BASE = 10 ** 12;\nexport const DEFAULT_GIF_SEARCH_BOT_USERNAME = \"gif\";\nexport const ALL_FOLDER_ID = 0;\nexport const ARCHIVED_FOLDER_ID = 1;\nexport const SAVED_FOLDER_ID = -1;\nexport const DELETED_COMMENTS_CHANNEL_ID = \"-1000000000777\";\nexport const MAX_MEDIA_FILES_FOR_ALBUM = 10;\nexport const MAX_ACTIVE_PINNED_CHATS = 5;\nexport const SCHEDULED_WHEN_ONLINE = 0x7ffffffe;\nexport const LANG_PACKS = [\"android\", \"ios\", \"tdesktop\", \"macos\"] as const;\nexport const FEEDBACK_URL = \"https://bugs.telegram.org/?tag_ids=41&sort=time\";\nexport const FAQ_URL = \"https://telegram.org/faq\";\nexport const PRIVACY_URL = \"https://telegram.org/privacy\";\nexport const MINI_APP_TOS_URL = \"https://telegram.org/tos/mini-apps\";\nexport const FRAGMENT_ADS_URL = \"https://fragment.com/ads\";\nexport const GENERAL_TOPIC_ID = 1;\nexport const STORY_EXPIRE_PERIOD = 86400; // 1 day\nexport const STORY_VIEWERS_EXPIRE_PERIOD = 86400; // 1 day\nexport const FRESH_AUTH_PERIOD = 86400; // 1 day\nexport const GIVEAWAY_BOOST_PER_PREMIUM = 4;\nexport const GIVEAWAY_MAX_ADDITIONAL_CHANNELS = 10;\nexport const GIVEAWAY_MAX_ADDITIONAL_USERS = 10;\nexport const GIVEAWAY_MAX_ADDITIONAL_COUNTRIES = 10;\nexport const BOOST_PER_SENT_GIFT = 3;\nexport const FRAGMENT_PHONE_CODE = \"888\";\nexport const FRAGMENT_PHONE_LENGTH = 11;\n\nexport const LIGHT_THEME_BG_COLOR = \"#99BA92\";\nexport const DARK_THEME_BG_COLOR = \"#0F0F0F\";\nexport const DEFAULT_PATTERN_COLOR = \"#4A8E3A8C\";\nexport const DARK_THEME_PATTERN_COLOR = \"#0A0A0A8C\";\nexport const PEER_COLOR_BG_OPACITY = \"1a\";\nexport const PEER_COLOR_BG_ACTIVE_OPACITY = \"2b\";\nexport const PEER_COLOR_GRADIENT_STEP = 5; // px\nexport const MAX_UPLOAD_FILEPART_SIZE = 524288;\nexport const MAX_UNIQUE_REACTIONS = 11;\n\nexport const IGNORE_UNHANDLED_ERRORS = new Set([\"USER_CANCELED\"]);\n\n// Group calls\nexport const GROUP_CALL_VOLUME_MULTIPLIER = 100;\nexport const GROUP_CALL_DEFAULT_VOLUME = 100 * GROUP_CALL_VOLUME_MULTIPLIER;\n\nexport const DEFAULT_LIMITS: Record<ApiLimitType, readonly [number, number]> = {\n  uploadMaxFileparts: [4000, 8000],\n  stickersFaved: [5, 10],\n  savedGifs: [200, 400],\n  dialogFiltersChats: [100, 200],\n  dialogFilters: [10, 20],\n  dialogFolderPinned: [5, 10],\n  captionLength: [1024, 4096],\n  channels: [500, 1000],\n  channelsPublic: [10, 20],\n  aboutLength: [70, 140],\n  chatlistInvites: [3, 100],\n  chatlistJoined: [2, 20],\n  recommendedChannels: [10, 100],\n  savedDialogsPinned: [5, 100],\n  moreAccounts: [3, MULTIACCOUNT_MAX_SLOTS],\n};\nexport const DEFAULT_MAX_MESSAGE_LENGTH = 4096;\n\nexport const ONE_TIME_MEDIA_TTL_SECONDS = 2147483647;\n\n// Premium\nexport const PREMIUM_FEATURE_SECTIONS = [\n  \"stories\",\n  \"double_limits\",\n  \"more_upload\",\n  \"faster_download\",\n  \"voice_to_text\",\n  \"no_ads\",\n  \"infinite_reactions\",\n  \"premium_stickers\",\n  \"animated_emoji\",\n  \"advanced_chat_management\",\n  \"profile_badge\",\n  \"animated_userpics\",\n  \"emoji_status\",\n  \"translations\",\n  \"saved_tags\",\n  \"last_seen\",\n  \"message_privacy\",\n  \"effects\",\n  \"todo\",\n] as const;\n\nexport const PREMIUM_BOTTOM_VIDEOS: ApiPremiumSection[] = [\n  \"faster_download\",\n  \"voice_to_text\",\n  \"advanced_chat_management\",\n  \"infinite_reactions\",\n  \"profile_badge\",\n  \"animated_userpics\",\n  \"emoji_status\",\n  \"translations\",\n  \"saved_tags\",\n  \"last_seen\",\n  \"message_privacy\",\n  \"effects\",\n  \"todo\",\n];\n\nexport const PREMIUM_LIMITS_ORDER: ApiLimitTypeForPromo[] = [\n  \"channels\",\n  \"dialogFolderPinned\",\n  \"channelsPublic\",\n  \"savedGifs\",\n  \"stickersFaved\",\n  \"aboutLength\",\n  \"captionLength\",\n  \"dialogFilters\",\n  \"dialogFiltersChats\",\n  \"moreAccounts\",\n  \"recommendedChannels\",\n];\n\nexport const DEFAULT_GIFT_PROFILE_FILTER_OPTIONS: GiftProfileFilterOptions = {\n  sortType: \"byDate\",\n  shouldIncludeUnlimited: true,\n  shouldIncludeLimited: true,\n  shouldIncludeUnique: true,\n  shouldIncludeDisplayed: true,\n  shouldIncludeHidden: true,\n} as const;\n\nexport const DEFAULT_RESALE_GIFTS_FILTER_OPTIONS: ResaleGiftsFilterOptions = {\n  sortType: \"byDate\",\n};\n\nexport const ACCOUNT_TTL_OPTIONS = [1, 3, 6, 12, 18, 24];\n","import type { ActionReturnType } from \"../../types\";\nimport { ManagementProgress } from \"../../../types\";\n\nimport {\n  CUSTOM_BG_CACHE_NAME,\n  IS_BYPASS_AUTH,\n  LANG_CACHE_NAME,\n  LOCK_SCREEN_ANIMATION_DURATION_MS,\n  MEDIA_CACHE_NAME,\n  MEDIA_CACHE_NAME_AVATARS,\n  MEDIA_PROGRESSIVE_CACHE_NAME,\n} from \"../../../config\";\nimport { updateAppBadge } from \"../../../util/appBadge\";\nimport { PASSCODE_IDB_STORE } from \"../../../util/browser/idb\";\nimport {\n  IS_WEBM_SUPPORTED,\n  MAX_BUFFER_SIZE,\n  PLATFORM_ENV,\n} from \"../../../util/browser/windowEnvironment\";\nimport * as cacheApi from \"../../../util/cacheApi\";\nimport { getCurrentTabId } from \"../../../util/establishMultitabRole\";\nimport { ACCOUNT_SLOT, getAccountsInfo } from \"../../../util/multiaccount\";\nimport { unsubscribe } from \"../../../util/notifications\";\nimport {\n  clearEncryptedSession,\n  encryptSession,\n  forgetPasscode,\n} from \"../../../util/passcode\";\nimport {\n  parseInitialLocationHash,\n  resetInitialLocationHash,\n  resetLocationHash,\n} from \"../../../util/routing\";\nimport { pause } from \"../../../util/schedulers\";\nimport {\n  clearStoredSession,\n  loadStoredSession,\n  storeSession,\n} from \"../../../util/sessions\";\nimport { forceWebsync } from \"../../../util/websync\";\nimport {\n  callApi,\n  callApiLocal,\n  initApi,\n  setShouldEnableDebugLog,\n} from \"../../../api/gramjs\";\nimport {\n  removeGlobalFromCache,\n  removeSharedStateFromCache,\n  serializeGlobal,\n} from \"../../cache\";\nimport { addActionHandler, getGlobal, setGlobal } from \"../../index\";\nimport {\n  clearGlobalForLockScreen,\n  updateManagementProgress,\n  updatePasscodeSettings,\n} from \"../../reducers\";\nimport { selectSharedSettings } from \"../../selectors/sharedState\";\nimport { destroySharedStatePort } from \"../../shared/sharedStateConnector\";\n\naddActionHandler(\"initApi\", (global, actions): ActionReturnType => {\n  // Skip API initialization in bypass auth mode\n  if (IS_BYPASS_AUTH) {\n    console.log(\">>> SKIPPING INIT API - BYPASS AUTH MODE\");\n    return global;\n  }\n\n  const initialLocationHash = parseInitialLocationHash();\n  const {\n    shouldAllowHttpTransport,\n    shouldForceHttpTransport,\n    shouldDebugExportedSenders,\n    shouldCollectDebugLogs,\n    language,\n  } = selectSharedSettings(global);\n\n  const hasTestParam =\n    window.location.search.includes(\"test\") ||\n    initialLocationHash?.tgWebAuthTest === \"1\";\n\n  const isTestServer = global.config?.isTestServer;\n  const accountsInfo = getAccountsInfo();\n  const accountIds = Object.values(accountsInfo)\n    .filter((info) => info.isTest === isTestServer)\n    .map(({ userId }) => userId)\n    .filter(Boolean);\n\n  void initApi(actions.apiUpdate, {\n    userAgent: navigator.userAgent,\n    platform: PLATFORM_ENV,\n    sessionData: loadStoredSession(),\n    isWebmSupported: IS_WEBM_SUPPORTED,\n    maxBufferSize: MAX_BUFFER_SIZE,\n    webAuthToken: initialLocationHash?.tgWebAuthToken,\n    dcId: initialLocationHash?.tgWebAuthDcId\n      ? Number(initialLocationHash?.tgWebAuthDcId)\n      : undefined,\n    mockScenario: initialLocationHash?.mockScenario,\n    shouldAllowHttpTransport,\n    shouldForceHttpTransport,\n    shouldDebugExportedSenders,\n    langCode: language,\n    isTestServerRequested: hasTestParam,\n    accountIds,\n  });\n\n  void setShouldEnableDebugLog(Boolean(shouldCollectDebugLogs));\n});\n\naddActionHandler(\n  \"setAuthPhoneNumber\",\n  (global, actions, payload): ActionReturnType => {\n    const { phoneNumber } = payload;\n\n    void callApi(\"provideAuthPhoneNumber\", phoneNumber.replace(/[^\\d]/g, \"\"));\n\n    return {\n      ...global,\n      authIsLoading: true,\n      authErrorKey: undefined,\n    };\n  }\n);\n\naddActionHandler(\n  \"setAuthCode\",\n  (global, actions, payload): ActionReturnType => {\n    const { code } = payload;\n\n    void callApi(\"provideAuthCode\", code);\n\n    return {\n      ...global,\n      authIsLoading: true,\n      authErrorKey: undefined,\n    };\n  }\n);\n\naddActionHandler(\n  \"setAuthPassword\",\n  (global, actions, payload): ActionReturnType => {\n    const { password } = payload;\n\n    void callApi(\"provideAuthPassword\", password);\n\n    return {\n      ...global,\n      authIsLoading: true,\n      authErrorKey: undefined,\n    };\n  }\n);\n\naddActionHandler(\n  \"uploadProfilePhoto\",\n  async (global, actions, payload): Promise<void> => {\n    const {\n      file,\n      isFallback,\n      isVideo,\n      videoTs,\n      bot,\n      tabId = getCurrentTabId(),\n    } = payload;\n\n    global = updateManagementProgress(\n      global,\n      ManagementProgress.InProgress,\n      tabId\n    );\n    setGlobal(global);\n\n    const result = await callApi(\n      \"uploadProfilePhoto\",\n      file,\n      isFallback,\n      isVideo,\n      videoTs,\n      bot\n    );\n    if (!result) return;\n\n    global = getGlobal();\n    global = updateManagementProgress(\n      global,\n      ManagementProgress.Complete,\n      tabId\n    );\n    setGlobal(global);\n\n    actions.loadFullUser({ userId: global.currentUserId! });\n  }\n);\n\naddActionHandler(\"signUp\", (global, actions, payload): ActionReturnType => {\n  const { firstName, lastName } = payload;\n\n  void callApi(\"provideAuthRegistration\", { firstName, lastName });\n\n  return {\n    ...global,\n    authIsLoading: true,\n    authErrorKey: undefined,\n  };\n});\n\naddActionHandler(\"returnToAuthPhoneNumber\", (global): ActionReturnType => {\n  void callApi(\"restartAuth\");\n\n  return {\n    ...global,\n    authErrorKey: undefined,\n  };\n});\n\naddActionHandler(\"goToAuthQrCode\", (global): ActionReturnType => {\n  void callApi(\"restartAuthWithQr\");\n\n  return {\n    ...global,\n    authIsLoadingQrCode: true,\n    authErrorKey: undefined,\n  };\n});\n\naddActionHandler(\n  \"saveSession\",\n  (global, actions, payload): ActionReturnType => {\n    if (global.passcode.isScreenLocked) {\n      return;\n    }\n\n    const { sessionData } = payload;\n    if (sessionData) {\n      storeSession(sessionData);\n    } else {\n      clearStoredSession();\n    }\n  }\n);\n\naddActionHandler(\"signOut\", async (global, actions, payload): Promise<void> => {\n  if (\"hangUp\" in actions) actions.hangUp({ tabId: getCurrentTabId() });\n  if (\"leaveGroupCall\" in actions)\n    actions.leaveGroupCall({ tabId: getCurrentTabId() });\n\n  try {\n    resetInitialLocationHash();\n    resetLocationHash();\n    await unsubscribe();\n    await Promise.race([callApi(\"destroy\"), pause(3000)]);\n    await forceWebsync(false);\n  } catch (err) {\n    // Do nothing\n  }\n\n  actions.reset();\n\n  if (payload?.forceInitApi) {\n    actions.initApi();\n  }\n});\n\naddActionHandler(\n  \"requestChannelDifference\",\n  (global, actions, payload): ActionReturnType => {\n    const { chatId } = payload;\n\n    void callApi(\"requestChannelDifference\", chatId);\n  }\n);\n\naddActionHandler(\"reset\", (global, actions): ActionReturnType => {\n  clearStoredSession(ACCOUNT_SLOT);\n  clearEncryptedSession();\n\n  void cacheApi.clear(MEDIA_CACHE_NAME);\n  void cacheApi.clear(MEDIA_CACHE_NAME_AVATARS);\n  void cacheApi.clear(MEDIA_PROGRESSIVE_CACHE_NAME);\n  void cacheApi.clear(CUSTOM_BG_CACHE_NAME);\n\n  removeGlobalFromCache();\n  destroySharedStatePort();\n\n  // Check if there are any accounts left\n  const accounts = getAccountsInfo();\n  if (!Object.values(accounts).length) {\n    PASSCODE_IDB_STORE.clear();\n    removeSharedStateFromCache();\n  }\n\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, \"\");\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [\"0\"])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? \"\" : i}`);\n  }\n\n  updateAppBadge(0);\n\n  actions.initShared({ force: true });\n  Object.values(global.byTabId).forEach(({ id: otherTabId, isMasterTab }) => {\n    actions.init({ tabId: otherTabId, isMasterTab });\n  });\n});\n\naddActionHandler(\"disconnect\", (): ActionReturnType => {\n  void callApiLocal(\"disconnect\");\n});\n\naddActionHandler(\"destroyConnection\", (): ActionReturnType => {\n  void callApiLocal(\"destroy\", true, true);\n});\n\naddActionHandler(\"loadNearestCountry\", async (global): Promise<void> => {\n  if (global.connectionState !== \"connectionStateReady\") {\n    return;\n  }\n\n  const authNearestCountry = await callApi(\"fetchNearestCountry\");\n\n  global = getGlobal();\n  global = {\n    ...global,\n    authNearestCountry,\n  };\n  setGlobal(global);\n});\n\naddActionHandler(\n  \"setDeviceToken\",\n  (global, actions, payload): ActionReturnType => {\n    const { token } = payload;\n    return {\n      ...global,\n      push: {\n        deviceToken: token,\n        subscribedAt: Date.now(),\n      },\n    };\n  }\n);\n\naddActionHandler(\"deleteDeviceToken\", (global): ActionReturnType => {\n  return {\n    ...global,\n    push: undefined,\n  };\n});\n\naddActionHandler(\"lockScreen\", async (global): Promise<void> => {\n  const sessionJson = JSON.stringify({\n    ...loadStoredSession(),\n    userId: global.currentUserId,\n  });\n  const globalJson = serializeGlobal(global);\n\n  await encryptSession(sessionJson, globalJson);\n  forgetPasscode();\n  clearStoredSession();\n  updateAppBadge(0);\n\n  global = getGlobal();\n  global = updatePasscodeSettings(global, {\n    isScreenLocked: true,\n    invalidAttemptsCount: 0,\n    timeoutUntil: undefined,\n  });\n  setGlobal(global);\n\n  setTimeout(() => {\n    global = getGlobal();\n    global = clearGlobalForLockScreen(global);\n    setGlobal(global);\n  }, LOCK_SCREEN_ANIMATION_DURATION_MS);\n\n  try {\n    await unsubscribe();\n    await callApi(\"destroy\", true);\n  } catch (err) {\n    // Do nothing\n  }\n});\n","import type { ApiPrivacySettings, ApiUsername } from '../../../api/types';\nimport type { ActionReturnType } from '../../types';\nimport {\n  ProfileEditProgress,\n  UPLOADING_WALLPAPER_SLUG,\n} from '../../../types';\n\nimport { APP_CONFIG_REFETCH_INTERVAL, COUNTRIES_WITH_12H_TIME_FORMAT, MAX_INT_32 } from '../../../config';\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport { requestPermission, subscribe, unsubscribe } from '../../../util/notifications';\nimport { setTimeFormat } from '../../../util/oldLangProvider';\nimport requestActionTimeout from '../../../util/requestActionTimeout';\nimport { getServerTime } from '../../../util/serverTime';\nimport { callApi } from '../../../api/gramjs';\nimport { buildApiInputPrivacyRules } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addBlockedUser, addNotifyException, addNotifyExceptions, deletePeerPhoto,\n  removeBlockedUser, replaceSettings, updateChat,\n  updateSharedSettings, updateUser, updateUserFullInfo,\n} from '../../reducers';\nimport { updateTabState } from '../../reducers/tabs';\nimport {\n  selectChat, selectIsCurrentUserFrozen,\n  selectTabState, selectUser,\n} from '../../selectors';\nimport { selectSharedSettings } from '../../selectors/sharedState';\n\naddActionHandler('updateProfile', async (global, actions, payload): Promise<void> => {\n  const {\n    photo, firstName, lastName, bio: about, username,\n    tabId = getCurrentTabId(),\n  } = payload;\n\n  const { currentUserId } = global;\n  if (!currentUserId) {\n    return;\n  }\n\n  global = updateTabState(global, {\n    profileEdit: {\n      progress: ProfileEditProgress.InProgress,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  if (photo) {\n    await callApi('uploadProfilePhoto', photo);\n  }\n\n  if (firstName || lastName || about) {\n    const result = await callApi('updateProfile', { firstName, lastName, about });\n    if (result) {\n      global = getGlobal();\n      const currentUser = currentUserId && selectUser(global, currentUserId);\n\n      if (currentUser) {\n        global = updateUser(\n          global,\n          currentUser.id,\n          {\n            firstName,\n            lastName,\n          },\n        );\n        global = updateUserFullInfo(global, currentUser.id, { bio: about });\n        setGlobal(global);\n      }\n    }\n  }\n\n  if (username !== undefined) {\n    const result = await callApi('updateUsername', username);\n    global = getGlobal();\n    const currentUser = currentUserId && selectUser(global, currentUserId);\n\n    if (result && currentUser) {\n      const shouldUsernameUpdate = currentUser.usernames?.find((u) => u.isEditable);\n      const usernames = shouldUsernameUpdate\n        ? currentUser.usernames?.map((u) => (u.isEditable ? { ...u, username } : u))\n        : [{ username, isEditable: true, isActive: true } as ApiUsername, ...currentUser.usernames || []];\n      global = updateUser(global, currentUserId, { usernames });\n      setGlobal(global);\n    }\n  }\n\n  global = getGlobal();\n  global = updateTabState(global, {\n    profileEdit: {\n      progress: ProfileEditProgress.Complete,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  if (photo) {\n    actions.loadFullUser({ userId: currentUserId, withPhotos: true });\n  }\n});\n\naddActionHandler('updateProfilePhoto', async (global, actions, payload): Promise<void> => {\n  const { photo, isFallback } = payload;\n  const { currentUserId } = global;\n  if (!currentUserId) return;\n  const currentUser = selectUser(global, currentUserId);\n  if (!currentUser) return;\n\n  global = updateUser(global, currentUserId, { avatarPhotoId: undefined });\n  global = updateUserFullInfo(global, currentUserId, { profilePhoto: undefined });\n\n  setGlobal(global);\n\n  const result = await callApi('updateProfilePhoto', photo, isFallback);\n  if (!result) return;\n\n  actions.loadFullUser({ userId: currentUserId, withPhotos: true });\n});\n\naddActionHandler('deleteProfilePhoto', async (global, actions, payload): Promise<void> => {\n  const { photo } = payload;\n  const { currentUserId } = global;\n  if (!currentUserId) return;\n\n  const isDeleted = await callApi('deleteProfilePhotos', [photo]);\n  if (!isDeleted) return;\n\n  global = getGlobal();\n  global = deletePeerPhoto(global, currentUserId, photo.id);\n  setGlobal(global);\n\n  actions.loadFullUser({ userId: currentUserId, withPhotos: true });\n});\n\naddActionHandler('checkUsername', async (global, actions, payload): Promise<void> => {\n  const { username, tabId = getCurrentTabId() } = payload;\n\n  let tabState = selectTabState(global, tabId);\n  // No need to check the username if profile update is already in progress\n  if (tabState.profileEdit && tabState.profileEdit.progress === ProfileEditProgress.InProgress) {\n    return;\n  }\n\n  global = updateTabState(global, {\n    profileEdit: {\n      progress: tabState.profileEdit ? tabState.profileEdit.progress : ProfileEditProgress.Idle,\n      checkedUsername: undefined,\n      isUsernameAvailable: undefined,\n      error: undefined,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  const { result, error } = (await callApi('checkUsername', username));\n\n  global = getGlobal();\n  tabState = selectTabState(global, tabId);\n  global = updateTabState(global, {\n    profileEdit: {\n      ...tabState.profileEdit!,\n      checkedUsername: username,\n      isUsernameAvailable: result === true,\n      error,\n    },\n  }, tabId);\n  setGlobal(global);\n});\n\naddActionHandler('loadWallpapers', async (global): Promise<void> => {\n  const result = await callApi('fetchWallpapers');\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      loadedWallpapers: result.wallpapers,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('uploadWallpaper', async (global, actions, payload): Promise<void> => {\n  const file = payload;\n  const previewBlobUrl = URL.createObjectURL(file);\n\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      loadedWallpapers: [\n        {\n          slug: UPLOADING_WALLPAPER_SLUG,\n          document: {\n            mediaType: 'document',\n            fileName: '',\n            size: file.size,\n            mimeType: file.type,\n            previewBlobUrl,\n          },\n        },\n        ...(global.settings.loadedWallpapers || []),\n      ],\n    },\n  };\n  setGlobal(global);\n\n  const result = await callApi('uploadWallpaper', file);\n  if (!result) {\n    return;\n  }\n\n  const { wallpaper } = result;\n\n  global = getGlobal();\n  if (!global.settings.loadedWallpapers) {\n    return;\n  }\n\n  const firstWallpaper = global.settings.loadedWallpapers[0];\n  if (!firstWallpaper || firstWallpaper.slug !== UPLOADING_WALLPAPER_SLUG) {\n    return;\n  }\n\n  const withLocalMedia = {\n    ...wallpaper,\n    document: {\n      ...wallpaper.document,\n      previewBlobUrl,\n    },\n  };\n\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      loadedWallpapers: [\n        withLocalMedia,\n        ...global.settings.loadedWallpapers.slice(1),\n      ],\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('loadBlockedUsers', async (global): Promise<void> => {\n  const result = await callApi('fetchBlockedUsers', {});\n  if (!result) return;\n\n  global = getGlobal();\n\n  global = {\n    ...global,\n    blocked: {\n      ids: result.blockedIds,\n      totalCount: result.totalCount,\n    },\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('blockUser', async (global, actions, payload): Promise<void> => {\n  const { userId, isOnlyStories } = payload;\n\n  const user = selectUser(global, userId);\n  if (!user) return;\n\n  const result = await callApi('blockUser', {\n    user,\n    isOnlyStories: isOnlyStories || undefined,\n  });\n  if (!result) return;\n\n  global = getGlobal();\n  global = addBlockedUser(global, userId);\n  setGlobal(global);\n});\n\naddActionHandler('unblockUser', async (global, actions, payload): Promise<void> => {\n  const { userId, isOnlyStories } = payload;\n\n  const user = selectUser(global, userId);\n  if (!user) return;\n\n  const result = await callApi('unblockUser', {\n    user,\n    isOnlyStories: isOnlyStories || undefined,\n  });\n  if (!result) return;\n\n  global = getGlobal();\n  global = removeBlockedUser(global, userId);\n  setGlobal(global);\n});\n\naddActionHandler('loadNotificationExceptions', async (global): Promise<void> => {\n  const result = await callApi('fetchNotificationExceptions');\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = addNotifyExceptions(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('loadNotificationSettings', async (global): Promise<void> => {\n  const [signUpNotification, notifyDefaults] = await Promise.all([\n    callApi('fetchContactSignUpSetting'),\n    callApi('fetchNotifyDefaultSettings'),\n  ]);\n\n  if (!notifyDefaults) return;\n\n  global = getGlobal();\n  global = replaceSettings(global, {\n    hasContactJoinedNotifications: signUpNotification,\n  });\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      notifyDefaults,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('updateNotificationSettings', async (global, actions, payload): Promise<void> => {\n  const { peerType, isMuted, shouldShowPreviews } = payload;\n\n  const result = await callApi('updateNotificationSettings', peerType, { isMuted, shouldShowPreviews });\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = addNotifyException(global, peerType, {\n    mutedUntil: isMuted ? MAX_INT_32 : undefined,\n    shouldShowPreviews,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateWebNotificationSettings', async (global, actions, payload): Promise<void> => {\n  const oldSettings = global.settings.byKey;\n  global = replaceSettings(global, payload);\n  setGlobal(global);\n  const { hasWebNotifications, hasPushNotifications } = global.settings.byKey;\n  if (!oldSettings.hasPushNotifications && hasPushNotifications) {\n    await subscribe();\n  }\n  if (oldSettings.hasPushNotifications && !hasPushNotifications) {\n    await unsubscribe();\n  }\n  if (!oldSettings.hasWebNotifications && hasWebNotifications) {\n    const isGranted = await requestPermission();\n    if (!isGranted) {\n      global = getGlobal();\n      global = replaceSettings(global, { hasWebNotifications: false });\n      setGlobal(global);\n    }\n  }\n});\n\naddActionHandler('updateContactSignUpNotification', async (global, actions, payload): Promise<void> => {\n  const { isSilent } = payload;\n\n  const result = await callApi('updateContactSignUpNotification', isSilent);\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = replaceSettings(global, { hasContactJoinedNotifications: !isSilent });\n  setGlobal(global);\n});\n\naddActionHandler('loadLanguages', async (global): Promise<void> => {\n  const result = await callApi('fetchLanguages');\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateSharedSettings(global, { languages: result });\n  setGlobal(global);\n});\n\naddActionHandler('loadPrivacySettings', async (global): Promise<void> => {\n  if (selectIsCurrentUserFrozen(global)) return;\n\n  const result = await Promise.all([\n    callApi('fetchPrivacySettings', 'phoneNumber'),\n    callApi('fetchPrivacySettings', 'addByPhone'),\n    callApi('fetchPrivacySettings', 'lastSeen'),\n    callApi('fetchPrivacySettings', 'profilePhoto'),\n    callApi('fetchPrivacySettings', 'forwards'),\n    callApi('fetchPrivacySettings', 'chatInvite'),\n    callApi('fetchPrivacySettings', 'phoneCall'),\n    callApi('fetchPrivacySettings', 'phoneP2P'),\n    callApi('fetchPrivacySettings', 'voiceMessages'),\n    callApi('fetchPrivacySettings', 'bio'),\n    callApi('fetchPrivacySettings', 'birthday'),\n    callApi('fetchPrivacySettings', 'gifts'),\n    callApi('fetchPrivacySettings', 'noPaidMessages'),\n  ]);\n\n  if (result.some((e) => e === undefined)) {\n    return;\n  }\n\n  const [\n    phoneNumberSettings,\n    addByPhoneSettings,\n    lastSeenSettings,\n    profilePhotoSettings,\n    forwardsSettings,\n    chatInviteSettings,\n    phoneCallSettings,\n    phoneP2PSettings,\n    voiceMessagesSettings,\n    bioSettings,\n    birthdaySettings,\n    giftsSettings,\n    noPaidMessagesSettings,\n  ] = result as {\n    rules: ApiPrivacySettings;\n  }[];\n\n  global = getGlobal();\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      privacy: {\n        ...global.settings.privacy,\n        phoneNumber: phoneNumberSettings.rules,\n        addByPhone: addByPhoneSettings.rules,\n        lastSeen: lastSeenSettings.rules,\n        profilePhoto: profilePhotoSettings.rules,\n        forwards: forwardsSettings.rules,\n        chatInvite: chatInviteSettings.rules,\n        phoneCall: phoneCallSettings.rules,\n        phoneP2P: phoneP2PSettings.rules,\n        voiceMessages: voiceMessagesSettings.rules,\n        bio: bioSettings.rules,\n        birthday: birthdaySettings.rules,\n        gifts: giftsSettings.rules,\n        noPaidMessages: noPaidMessagesSettings.rules,\n      },\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('setPrivacyVisibility', async (global, actions, payload): Promise<void> => {\n  const { privacyKey, visibility, onSuccess } = payload;\n\n  if (!global.settings.privacy[privacyKey]) {\n    const result = await callApi('fetchPrivacySettings', privacyKey);\n    if (!result) {\n      return;\n    }\n\n    global = getGlobal();\n    global = {\n      ...global,\n      settings: {\n        ...global.settings,\n        privacy: {\n          ...global.settings.privacy,\n          [privacyKey]: result.rules,\n        },\n      },\n    };\n    setGlobal(global);\n  }\n\n  const {\n    privacy: { [privacyKey]: settings },\n  } = global.settings;\n\n  if (!settings) {\n    return;\n  }\n\n  const rules = buildApiInputPrivacyRules(global, {\n    visibility,\n    allowedIds: [...settings.allowUserIds, ...settings.allowChatIds],\n    blockedIds: [...settings.blockUserIds, ...settings.blockChatIds],\n    botsPrivacy: settings.botsPrivacy,\n  });\n\n  const result = await callApi('setPrivacySettings', privacyKey, rules);\n  if (!result) {\n    return;\n  }\n\n  onSuccess?.();\n\n  global = getGlobal();\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      privacy: {\n        ...global.settings.privacy,\n        [privacyKey]: result.rules,\n      },\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('setPrivacySettings', async (global, actions, payload): Promise<void> => {\n  const {\n    privacyKey, isAllowList, updatedIds, isPremiumAllowed, botsPrivacy,\n  } = payload;\n  const {\n    privacy: { [privacyKey]: settings },\n  } = global.settings;\n\n  if (!settings) {\n    return;\n  }\n\n  if (privacyKey === 'noPaidMessages') {\n    global = getGlobal();\n    const idsForUpdate = [\n      ...updatedIds.filter((id) => !settings.allowUserIds.includes(id)),\n      ...settings.allowUserIds.filter((id) => !updatedIds.includes(id)),\n    ];\n\n    idsForUpdate.forEach((userId) => {\n      global = updateUserFullInfo(global, userId, {\n        settings: undefined,\n      });\n    });\n    setGlobal(global);\n  }\n\n  const rules = buildApiInputPrivacyRules(global, {\n    visibility: settings.visibility,\n    isUnspecified: settings.isUnspecified,\n    shouldAllowPremium: isPremiumAllowed,\n    allowedIds: isAllowList ? updatedIds : [...settings.allowUserIds, ...settings.allowChatIds],\n    blockedIds: !isAllowList ? updatedIds : [...settings.blockUserIds, ...settings.blockChatIds],\n    botsPrivacy,\n  });\n\n  const result = await callApi('setPrivacySettings', privacyKey, rules);\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    settings: {\n      ...global.settings,\n      privacy: {\n        ...global.settings.privacy,\n        [privacyKey]: result.rules,\n      },\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('updateIsOnline', (global, actions, payload): ActionReturnType => {\n  if (global.connectionState !== 'connectionStateReady') return;\n  callApi('updateIsOnline', payload.isOnline);\n});\n\naddActionHandler('loadContentSettings', async (global): Promise<void> => {\n  if (selectIsCurrentUserFrozen(global)) return;\n\n  const result = await callApi('fetchContentSettings');\n  if (!result) return;\n\n  global = getGlobal();\n  global = replaceSettings(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('updateContentSettings', async (global, actions, payload): Promise<void> => {\n  global = replaceSettings(global, { isSensitiveEnabled: payload.isSensitiveEnabled });\n  setGlobal(global);\n\n  const result = await callApi('updateContentSettings', payload.isSensitiveEnabled);\n  if (!result) {\n    global = getGlobal();\n    global = replaceSettings(global, { isSensitiveEnabled: !payload.isSensitiveEnabled });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('loadCountryList', async (global, actions, payload): Promise<void> => {\n  let { langCode } = payload;\n  if (!langCode) langCode = selectSharedSettings(global).language;\n\n  const countryList = await callApi('fetchCountryList', { langCode });\n  if (!countryList) return;\n\n  global = getGlobal();\n  global = {\n    ...global,\n    countryList,\n  };\n  setGlobal(global);\n});\n\naddActionHandler('ensureTimeFormat', async (global, actions): Promise<void> => {\n  if (global.authNearestCountry) {\n    const timeFormat = COUNTRIES_WITH_12H_TIME_FORMAT\n      .has(global.authNearestCountry.toUpperCase()) ? '12h' : '24h';\n    actions.setSharedSettingOption({ timeFormat });\n    setTimeFormat(timeFormat);\n  }\n\n  if (selectSharedSettings(global).wasTimeFormatSetManually) {\n    return;\n  }\n\n  const nearestCountryCode = await callApi('fetchNearestCountry');\n  if (nearestCountryCode) {\n    const timeFormat = COUNTRIES_WITH_12H_TIME_FORMAT.has(nearestCountryCode.toUpperCase()) ? '12h' : '24h';\n    actions.setSharedSettingOption({ timeFormat });\n    setTimeFormat(timeFormat);\n  }\n});\n\naddActionHandler('loadAppConfig', async (global, actions, payload): Promise<void> => {\n  const hash = payload?.hash;\n\n  const appConfig = await callApi('fetchAppConfig', hash);\n  if (!appConfig) return;\n\n  requestActionTimeout({\n    action: 'loadAppConfig',\n    payload: { hash: appConfig.hash },\n  }, APP_CONFIG_REFETCH_INTERVAL);\n\n  global = getGlobal();\n  global = {\n    ...global,\n    appConfig,\n    isAppConfigLoaded: true,\n  };\n  setGlobal(global);\n});\n\naddActionHandler('loadConfig', async (global): Promise<void> => {\n  const config = await callApi('fetchConfig');\n  if (!config) return;\n\n  global = getGlobal();\n  const timeout = config.expiresAt - getServerTime();\n  requestActionTimeout({\n    action: 'loadConfig',\n    payload: undefined,\n  }, timeout * 1000);\n\n  global = {\n    ...global,\n    config,\n  };\n  setGlobal(global);\n});\n\naddActionHandler('loadPeerColors', async (global): Promise<void> => {\n  const hash = global.peerColors?.generalHash;\n  const result = await callApi('fetchPeerColors', hash);\n  if (!result) return;\n\n  global = getGlobal();\n  global = {\n    ...global,\n    peerColors: {\n      ...global.peerColors,\n      general: result.colors,\n      generalHash: result.hash,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('loadTimezones', async (global): Promise<void> => {\n  const hash = global.timezones?.hash;\n  const result = await callApi('fetchTimezones', hash);\n  if (!result) return;\n\n  global = getGlobal();\n  global = {\n    ...global,\n    timezones: {\n      byId: buildCollectionByKey(result.timezones, 'id'),\n      hash: result.hash,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('loadGlobalPrivacySettings', async (global): Promise<void> => {\n  const globalSettings = await callApi('fetchGlobalPrivacySettings');\n  if (!globalSettings) {\n    return;\n  }\n\n  global = getGlobal();\n  global = replaceSettings(global, { ...globalSettings });\n  setGlobal(global);\n});\n\naddActionHandler('updateGlobalPrivacySettings', async (global, actions, payload): Promise<void> => {\n  const shouldArchiveAndMuteNewNonContact = payload.shouldArchiveAndMuteNewNonContact\n    ?? Boolean(global.settings.byKey.shouldArchiveAndMuteNewNonContact);\n  const shouldHideReadMarks = payload.shouldHideReadMarks ?? Boolean(global.settings.byKey.shouldHideReadMarks);\n  const shouldNewNonContactPeersRequirePremium = payload.shouldNewNonContactPeersRequirePremium\n    ?? Boolean(global.settings.byKey.shouldNewNonContactPeersRequirePremium);\n    // eslint-disable-next-line no-null/no-null\n  const nonContactPeersPaidStars = payload.nonContactPeersPaidStars === null ? undefined\n    : payload.nonContactPeersPaidStars || global.settings.byKey.nonContactPeersPaidStars;\n  const shouldDisplayGiftsButton = payload.shouldDisplayGiftsButton\n    ?? Boolean(global.settings.byKey.shouldDisplayGiftsButton);\n  const disallowedGifts = payload.disallowedGifts\n    ?? global.settings.byKey.disallowedGifts;\n\n  // eslint-disable-next-line no-null/no-null\n  const shouldUpdateUsersSettings = (payload.nonContactPeersPaidStars === null)\n    || payload.nonContactPeersPaidStars;\n\n  global = getGlobal();\n  global = replaceSettings(global, {\n    shouldArchiveAndMuteNewNonContact,\n    shouldHideReadMarks,\n    shouldNewNonContactPeersRequirePremium,\n    nonContactPeersPaidStars,\n    shouldDisplayGiftsButton,\n    disallowedGifts,\n  });\n  setGlobal(global);\n\n  const result = await callApi('updateGlobalPrivacySettings', {\n    shouldArchiveAndMuteNewNonContact,\n    shouldHideReadMarks,\n    shouldNewNonContactPeersRequirePremium,\n    nonContactPeersPaidStars,\n    shouldDisplayGiftsButton,\n    disallowedGifts,\n  });\n\n  global = getGlobal();\n  global = replaceSettings(global, {\n    shouldArchiveAndMuteNewNonContact: !result\n      ? !shouldArchiveAndMuteNewNonContact\n      : result.shouldArchiveAndMuteNewNonContact,\n    shouldHideReadMarks: !result ? !shouldHideReadMarks : result.shouldHideReadMarks,\n    shouldNewNonContactPeersRequirePremium: !result\n      ? !shouldNewNonContactPeersRequirePremium\n      : result.shouldNewNonContactPeersRequirePremium,\n    nonContactPeersPaidStars: !result\n      ? undefined\n      : result.nonContactPeersPaidStars,\n    shouldDisplayGiftsButton: !result ? !shouldDisplayGiftsButton : result.shouldDisplayGiftsButton,\n    disallowedGifts: !result ? disallowedGifts : result.disallowedGifts,\n  });\n\n  if (shouldUpdateUsersSettings) {\n    Object.keys(global.users.fullInfoById).forEach((userId) => {\n      global = updateUserFullInfo(global, userId, {\n        settings: undefined,\n      });\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('toggleUsername', async (global, actions, payload): Promise<void> => {\n  const { username, isActive } = payload;\n  const { currentUserId } = global;\n  if (!currentUserId) {\n    return;\n  }\n\n  const currentUser = selectUser(global, currentUserId);\n  if (!currentUser?.usernames) {\n    return;\n  }\n\n  const usernames = currentUser.usernames.map((item) => {\n    if (item.username !== username) {\n      return item;\n    }\n\n    return { ...item, isActive: isActive || undefined };\n  });\n\n  global = updateUser(global, currentUserId, { usernames });\n  setGlobal(global);\n\n  const result = await callApi('toggleUsername', { username, isActive });\n\n  if (!result) {\n    actions.loadFullUser({ userId: currentUserId });\n  }\n});\n\naddActionHandler('toggleChatUsername', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, username, isActive,\n  } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat?.usernames) {\n    return;\n  }\n\n  const usernames = chat.usernames.map((item) => {\n    if (item.username !== username) {\n      return item;\n    }\n\n    return { ...item, isActive: isActive || undefined };\n  });\n\n  global = updateChat(global, chatId, { usernames });\n  setGlobal(global);\n\n  const result = await callApi('toggleUsername', {\n    chatId: chat.id,\n    accessHash: chat.accessHash,\n    username,\n    isActive,\n  });\n\n  if (!result) {\n    actions.loadFullChat({ chatId });\n  }\n});\n\naddActionHandler('sortUsernames', async (global, actions, payload): Promise<void> => {\n  const { usernames } = payload;\n  const { currentUserId } = global;\n  if (!currentUserId) {\n    return;\n  }\n\n  const result = await callApi('reorderUsernames', { usernames });\n\n  // After saving the order of usernames, server sends an update with the necessary data,\n  // so there is no need to update the state in this place\n  if (!result) {\n    actions.loadUser({ userId: currentUserId });\n  }\n});\n\naddActionHandler('sortChatUsernames', async (global, actions, payload): Promise<void> => {\n  const { chatId, usernames } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const prevUsernames = [...chat.usernames!];\n  const sortedUsernames = chat.usernames!.reduce((res, currentUsername) => {\n    const idx = usernames.findIndex((username) => username === currentUsername.username);\n    res[idx] = currentUsername;\n\n    return res;\n  }, [] as ApiUsername[]);\n\n  global = updateChat(global, chatId, { usernames: sortedUsernames });\n  setGlobal(global);\n\n  const result = await callApi('reorderUsernames', {\n    chatId: chat.id,\n    accessHash: chat.accessHash,\n    usernames,\n  });\n\n  if (!result) {\n    global = getGlobal();\n    global = updateChat(global, chatId, { usernames: prevUsernames });\n    setGlobal(global);\n  }\n});\n","import type {\n  ApiUpdateAuthorizationError,\n  ApiUpdateAuthorizationState,\n  ApiUpdateConnectionState,\n  ApiUpdateCurrentUser,\n  ApiUpdateServerTimeOffset,\n  ApiUpdateSession,\n} from \"../../../api/types\";\nimport type { LangCode } from \"../../../types\";\nimport type { RequiredGlobalActions } from \"../../index\";\nimport type { ActionReturnType, GlobalState } from \"../../types\";\n\nimport { IS_BYPASS_AUTH, IS_WALLET_CREATED } from \"../../../config\";\nimport { getCurrentTabId } from \"../../../util/establishMultitabRole\";\nimport {\n  getShippingError,\n  shouldClosePaymentModal,\n} from \"../../../util/getReadableErrorText\";\nimport { unique } from \"../../../util/iteratees\";\nimport { oldSetLanguage } from \"../../../util/oldLangProvider\";\nimport { clearWebTokenAuth } from \"../../../util/routing\";\nimport { setServerTimeOffset } from \"../../../util/serverTime\";\nimport { updateSessionUserId } from \"../../../util/sessions\";\nimport { forceWebsync } from \"../../../util/websync\";\nimport { isChatChannel, isChatSuperGroup } from \"../../helpers\";\nimport { addActionHandler, getGlobal, setGlobal } from \"../../index\";\nimport { updateUser, updateUserFullInfo } from \"../../reducers\";\nimport { updateTabState } from \"../../reducers/tabs\";\nimport { selectTabState } from \"../../selectors\";\nimport { selectSharedSettings } from \"../../selectors/sharedState\";\n\naddActionHandler(\"apiUpdate\", (global, actions, update): ActionReturnType => {\n  switch (update[\"@type\"]) {\n    case \"updateApiReady\":\n      onUpdateApiReady(global);\n      break;\n\n    case \"updateAuthorizationState\":\n      onUpdateAuthorizationState(global, update, actions);\n      break;\n\n    case \"updateAuthorizationError\":\n      onUpdateAuthorizationError(global, update);\n      break;\n\n    case \"updateWebAuthTokenFailed\":\n      onUpdateWebAuthTokenFailed(global);\n      break;\n\n    case \"updateConnectionState\":\n      onUpdateConnectionState(global, actions, update);\n      break;\n\n    case \"updateSession\":\n      onUpdateSession(global, actions, update);\n      break;\n\n    case \"updateServerTimeOffset\":\n      onUpdateServerTimeOffset(update);\n      break;\n\n    case \"updateCurrentUser\":\n      onUpdateCurrentUser(global, update, actions);\n      break;\n\n    case \"requestReconnectApi\":\n      global = { ...global, isSynced: false };\n      setGlobal(global);\n\n      onUpdateConnectionState(global, actions, {\n        \"@type\": \"updateConnectionState\",\n        connectionState: \"connectionStateConnecting\",\n      });\n      actions.initApi();\n      break;\n\n    case \"requestSync\":\n      actions.sync();\n      break;\n\n    case \"updateFetchingDifference\":\n      global = { ...global, isFetchingDifference: update.isFetching };\n      setGlobal(global);\n      break;\n\n    case \"error\": {\n      // Suppress errors in bypass auth mode\n      if (IS_BYPASS_AUTH) {\n        console.log(\">>> SUPPRESSING ERROR - BYPASS AUTH MODE:\", update.error);\n        break;\n      }\n\n      Object.values(global.byTabId).forEach(({ id: tabId }) => {\n        const paymentShippingError = getShippingError(update.error);\n        if (paymentShippingError) {\n          actions.addPaymentError({ error: paymentShippingError, tabId });\n        } else if (shouldClosePaymentModal(update.error)) {\n          actions.closePaymentModal({ tabId });\n        } else if (actions.showDialog) {\n          actions.showDialog({ data: update.error, tabId });\n        }\n      });\n\n      break;\n    }\n\n    case \"notSupportedInFrozenAccount\": {\n      actions.showNotification({\n        title: {\n          key: \"NotificationTitleNotSupportedInFrozenAccount\",\n        },\n        message: {\n          key: \"NotificationMessageNotSupportedInFrozenAccount\",\n        },\n        tabId: getCurrentTabId(),\n      });\n      break;\n    }\n  }\n});\n\nfunction onUpdateApiReady<T extends GlobalState>(global: T) {\n  void oldSetLanguage(selectSharedSettings(global).language as LangCode);\n}\n\nfunction onUpdateAuthorizationState<T extends GlobalState>(\n  global: T,\n  update: ApiUpdateAuthorizationState,\n  actions?: RequiredGlobalActions\n) {\n  global = getGlobal();\n\n  const wasAuthReady = global.authState === \"authorizationStateReady\";\n  const previousAuthState = global.authState;\n  const authState = update.authorizationState;\n\n  // In dev:WalletCreated mode, don't override ready state with other auth states\n  // This prevents API from forcing back to auth flow after user clicks Create\n  if (\n    IS_WALLET_CREATED &&\n    global.authState === \"authorizationStateReady\" &&\n    authState !== \"authorizationStateReady\"\n  ) {\n    console.log(\"Preventing auth state override in dev:WalletCreated mode\", {\n      currentState: global.authState,\n      attemptedState: authState,\n    });\n    return;\n  }\n\n  // Mark loading finished but defer changing authState to per-case handlers below\n  global = {\n    ...global,\n    authIsLoading: false,\n  };\n  setGlobal(global);\n\n  global = getGlobal();\n\n  switch (authState) {\n    case \"authorizationStateLoggingOut\":\n      void forceWebsync(false);\n\n      global = {\n        ...global,\n        authState: \"authorizationStateLoggingOut\",\n        isLoggingOut: true,\n      };\n      setGlobal(global);\n      break;\n    case \"authorizationStateWaitCode\":\n      global = {\n        ...global,\n        authState: \"authorizationStateWaitCode\",\n        authIsCodeViaApp: update.isCodeViaApp,\n      };\n      setGlobal(global);\n      break;\n    case \"authorizationStateWaitPassword\":\n      global = {\n        ...global,\n        authState: \"authorizationStateWaitPassword\",\n        authHint: update.hint,\n      };\n\n      if (update.noReset) {\n        global = {\n          ...global,\n          hasWebAuthTokenPasswordRequired: true,\n        };\n      }\n\n      setGlobal(global);\n      break;\n    case \"authorizationStateWaitQrCode\":\n      global = {\n        ...global,\n        authState: \"authorizationStateWaitQrCode\",\n        authIsLoadingQrCode: false,\n        authQrCode: update.qrCode,\n      };\n      setGlobal(global);\n      break;\n    case \"authorizationStateReady\": {\n      console.log(\n        \"Authorization state ready. wasAuthReady:\",\n        wasAuthReady,\n        \"previousAuthState:\",\n        previousAuthState\n      );\n      if (wasAuthReady) {\n        // Already in ready state; ensure it's set and exit\n        global = {\n          ...global,\n          authState: \"authorizationStateReady\",\n        };\n        setGlobal(global);\n        break;\n      }\n\n      void forceWebsync(true);\n\n      // On first successful authorization, always show WalletCreated screen.\n      // If returning from WalletCreated (user pressed Continue), proceed to ready.\n      if (previousAuthState !== \"authorizationStateWalletCreated\") {\n        global = {\n          ...global,\n          isLoggingOut: false,\n          authState: \"authorizationStateWalletCreated\",\n        };\n        setGlobal(global);\n        break;\n      }\n\n      // Coming back from WalletCreated → finish to ready and activate tabs\n      global = {\n        ...global,\n        isLoggingOut: false,\n        authState: \"authorizationStateReady\",\n      };\n      Object.values(global.byTabId).forEach(({ id: tabId }) => {\n        global = updateTabState(\n          global,\n          {\n            isInactive: false,\n          },\n          tabId\n        );\n      });\n      setGlobal(global);\n\n      break;\n    }\n    case \"authorizationStateWalletCreated\": {\n      // Wallet creation state - user stays here until they proceed\n      global = {\n        ...global,\n        authState: \"authorizationStateWalletCreated\",\n        isLoggingOut: false,\n      };\n      setGlobal(global);\n      break;\n    }\n  }\n}\n\nfunction onUpdateAuthorizationError<T extends GlobalState>(\n  global: T,\n  update: ApiUpdateAuthorizationError\n) {\n  // TODO: Investigate why TS is not happy with spread for lang related types\n  global = {\n    ...global,\n  };\n  global.authErrorKey = update.errorKey;\n  setGlobal(global);\n}\n\nfunction onUpdateWebAuthTokenFailed<T extends GlobalState>(global: T) {\n  clearWebTokenAuth();\n  global = getGlobal();\n\n  global = {\n    ...global,\n    hasWebAuthTokenFailed: true,\n  };\n  setGlobal(global);\n}\n\nfunction onUpdateConnectionState<T extends GlobalState>(\n  global: T,\n  actions: RequiredGlobalActions,\n  update: ApiUpdateConnectionState\n) {\n  const { connectionState } = update;\n\n  global = getGlobal();\n  const tabState = selectTabState(global, getCurrentTabId());\n  if (\n    connectionState === \"connectionStateReady\" &&\n    tabState.isMasterTab &&\n    tabState.multitabNextAction\n  ) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (actions as any)[tabState.multitabNextAction.action](\n      tabState.multitabNextAction.payload\n    );\n    actions.clearMultitabNextAction({ tabId: tabState.id });\n  }\n\n  if (connectionState === global.connectionState) {\n    return;\n  }\n\n  global = {\n    ...global,\n    connectionState,\n  };\n  setGlobal(global);\n\n  if (global.isSynced) {\n    const channelStackIds = Object.values(global.byTabId)\n      .flatMap((tab) => tab.messageLists)\n      .map((messageList) => messageList.chatId)\n      .filter((chatId) => {\n        const chat = global.chats.byId[chatId];\n        return chat && (isChatChannel(chat) || isChatSuperGroup(chat));\n      });\n    if (connectionState === \"connectionStateReady\" && channelStackIds.length) {\n      unique(channelStackIds).forEach((chatId) => {\n        actions.requestChannelDifference({ chatId });\n      });\n    }\n  }\n\n  if (connectionState === \"connectionStateBroken\") {\n    actions.signOut({ forceInitApi: true });\n  }\n}\n\nfunction onUpdateSession<T extends GlobalState>(\n  global: T,\n  actions: RequiredGlobalActions,\n  update: ApiUpdateSession\n) {\n  const { sessionData } = update;\n  const { authRememberMe, authState } = global;\n  const isEmpty = !sessionData || !sessionData.mainDcId;\n\n  const isTest = sessionData?.isTest;\n  if (isTest) {\n    global = {\n      ...global,\n      config: {\n        ...global.config,\n        isTestServer: isTest,\n      },\n    };\n    setGlobal(global);\n  }\n\n  if (!authRememberMe || authState !== \"authorizationStateReady\" || isEmpty) {\n    return;\n  }\n\n  actions.saveSession({ sessionData });\n}\n\nfunction onUpdateServerTimeOffset(update: ApiUpdateServerTimeOffset) {\n  setServerTimeOffset(update.serverTimeOffset);\n}\n\nfunction onUpdateCurrentUser<T extends GlobalState>(\n  global: T,\n  update: ApiUpdateCurrentUser,\n  actions?: RequiredGlobalActions\n) {\n  const { currentUser, currentUserFullInfo } = update;\n\n  global = {\n    ...updateUser(global, currentUser.id, currentUser),\n    currentUserId: currentUser.id,\n  };\n  global = updateUserFullInfo(global, currentUser.id, currentUserFullInfo);\n  setGlobal(global);\n\n  updateSessionUserId(currentUser.id);\n\n  // Check wallet after user is set and if we're in a state that should proceed to wallet creation\n  const currentGlobal = getGlobal();\n  console.log(\n    \"Current user set:\",\n    currentUser.id,\n    \"Auth state:\",\n    currentGlobal.authState\n  );\n\n  if (\n    currentGlobal.authState === \"authorizationStateWalletCreated\" &&\n    actions?.checkWallet\n  ) {\n    console.log(\"Calling checkWallet for current user:\", currentUser.id);\n    actions.checkWallet({ telegramUserId: currentUser.id });\n  }\n}\n","import './ui/initial';\nimport './ui/settings';\nimport './api/initial';\nimport './api/settings';\nimport './apiUpdaters/initial';\n","import { addCallback } from \"../../../lib/teact/teactn\";\n\nimport type { LangCode } from \"../../../types\";\nimport type { ActionReturnType, GlobalState } from \"../../types\";\n\nimport { requestMutation } from \"../../../lib/fasterdom/fasterdom\";\nimport { IS_MULTIACCOUNT_SUPPORTED } from \"../../../util/browser/globalEnvironment\";\nimport {\n  IS_ANDROID,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_SAFARI,\n  IS_TOUCH_ENV,\n  IS_WINDOWS,\n} from \"../../../util/browser/windowEnvironment\";\nimport { getCurrentTabId } from \"../../../util/establishMultitabRole\";\nimport { subscribe, unsubscribe } from \"../../../util/notifications\";\nimport { oldSetLanguage } from \"../../../util/oldLangProvider\";\nimport { decryptSessionByCurrentHash } from \"../../../util/passcode\";\nimport { applyPerformanceSettings } from \"../../../util/perfomanceSettings\";\nimport { hasStoredSession, storeSession } from \"../../../util/sessions\";\nimport switchTheme from \"../../../util/switchTheme\";\nimport {\n  getSystemTheme,\n  setSystemThemeChangeCallback,\n} from \"../../../util/systemTheme\";\nimport { startWebsync, stopWebsync } from \"../../../util/websync\";\nimport { callApi } from \"../../../api/gramjs\";\nimport { clearCaching, setupCaching } from \"../../cache\";\nimport { addActionHandler, getGlobal, setGlobal } from \"../../index\";\nimport { updateSharedSettings } from \"../../reducers\";\nimport { updateTabState } from \"../../reducers/tabs\";\nimport {\n  selectCanAnimateInterface,\n  selectPerformanceSettings,\n  selectSettingsKeys,\n  selectTabState,\n  selectTheme,\n} from \"../../selectors\";\nimport { selectSharedSettings } from \"../../selectors/sharedState\";\nimport {\n  destroySharedStatePort,\n  initSharedState,\n} from \"../../shared/sharedStateConnector\";\n\nconst HISTORY_ANIMATION_DURATION = 450;\n\nsetSystemThemeChangeCallback((theme) => {\n  let global = getGlobal();\n\n  if (!global.isInited || !selectSharedSettings(global).shouldUseSystemTheme)\n    return;\n\n  global = updateSharedSettings(global, { theme });\n  setGlobal(global);\n});\n\naddActionHandler(\n  \"switchMultitabRole\",\n  async (global, actions, payload): Promise<void> => {\n    const { isMasterTab, tabId = getCurrentTabId() } = payload;\n\n    if (isMasterTab === selectTabState(global, tabId).isMasterTab) {\n      callApi(\"broadcastLocalDbUpdateFull\");\n      return;\n    }\n\n    global = updateTabState(\n      global,\n      {\n        isMasterTab,\n      },\n      tabId\n    );\n    setGlobal(global, { forceSyncOnIOs: true });\n\n    if (!isMasterTab) {\n      void unsubscribe();\n      actions.destroyConnection();\n      stopWebsync();\n      destroySharedStatePort();\n      clearCaching();\n      actions.onSomeTabSwitchedMultitabRole();\n    } else {\n      if (global.passcode.hasPasscode && !global.passcode.isScreenLocked) {\n        const { sessionJson } = await decryptSessionByCurrentHash();\n        const session = JSON.parse(sessionJson);\n        storeSession(session);\n      }\n\n      if (hasStoredSession()) {\n        setupCaching();\n      }\n\n      global = getGlobal();\n      if (!global.passcode.hasPasscode || !global.passcode.isScreenLocked) {\n        if (global.connectionState === \"connectionStateReady\") {\n          global = {\n            ...global,\n            connectionState: \"connectionStateConnecting\",\n          };\n          setGlobal(global);\n        }\n        actions.initApi();\n      }\n\n      startWebsync();\n      if (IS_MULTIACCOUNT_SUPPORTED) {\n        initSharedState(global.sharedState);\n      }\n    }\n  }\n);\n\naddActionHandler(\n  \"onSomeTabSwitchedMultitabRole\",\n  async (global): Promise<void> => {\n    if (global.passcode.hasPasscode && !global.passcode.isScreenLocked) {\n      const { sessionJson } = await decryptSessionByCurrentHash();\n      const session = JSON.parse(sessionJson);\n      storeSession(session);\n    }\n\n    callApi(\"broadcastLocalDbUpdateFull\");\n  }\n);\n\naddActionHandler(\"initShared\", (): ActionReturnType => {\n  startWebsync();\n});\n\naddActionHandler(\"initMain\", (global): ActionReturnType => {\n  const { hasWebNotifications, hasPushNotifications } =\n    selectSettingsKeys(global);\n  if (hasWebNotifications && hasPushNotifications) {\n    // Most of the browsers only show the notifications permission prompt after the first user gesture.\n    const events = [\"click\", \"keypress\"];\n    const subscribeAfterUserGesture = () => {\n      void subscribe();\n      events.forEach((event) => {\n        document.removeEventListener(event, subscribeAfterUserGesture);\n      });\n    };\n    events.forEach((event) => {\n      document.addEventListener(event, subscribeAfterUserGesture, {\n        once: true,\n      });\n    });\n  }\n});\n\naddCallback((global: GlobalState) => {\n  let isUpdated = false;\n  const tabState = selectTabState(global, getCurrentTabId());\n  if (!tabState?.shouldInit) return;\n\n  global = getGlobal();\n\n  global = updateTabState(\n    global,\n    {\n      shouldInit: false,\n    },\n    tabState.id\n  );\n\n  const { messageTextSize, language, shouldUseSystemTheme } =\n    selectSharedSettings(global);\n\n  const globalTheme = selectTheme(global);\n  const systemTheme = getSystemTheme();\n  const theme = shouldUseSystemTheme ? systemTheme : globalTheme;\n\n  const performanceType = selectPerformanceSettings(global);\n\n  void oldSetLanguage(language as LangCode, undefined, true);\n\n  requestMutation(() => {\n    document.documentElement.style.setProperty(\n      \"--composer-text-size\",\n      `${Math.max(messageTextSize, IS_IOS ? 16 : 15)}px`\n    );\n    document.documentElement.style.setProperty(\n      \"--message-meta-height\",\n      `${Math.floor(messageTextSize * 1.3125)}px`\n    );\n    document.documentElement.style.setProperty(\n      \"--message-text-size\",\n      `${messageTextSize}px`\n    );\n    document.documentElement.setAttribute(\n      \"data-message-text-size\",\n      messageTextSize.toString()\n    );\n    document.body.classList.add(\"initial\");\n    document.body.classList.add(\n      IS_TOUCH_ENV ? \"is-touch-env\" : \"is-pointer-env\"\n    );\n    applyPerformanceSettings(performanceType);\n\n    if (IS_IOS) {\n      document.body.classList.add(\"is-ios\");\n    } else if (IS_ANDROID) {\n      document.body.classList.add(\"is-android\");\n    } else if (IS_MAC_OS) {\n      document.body.classList.add(\"is-macos\");\n    } else if (IS_WINDOWS) {\n      document.body.classList.add(\"is-windows\");\n    } else if (IS_LINUX) {\n      document.body.classList.add(\"is-linux\");\n    }\n    if (IS_SAFARI) {\n      document.body.classList.add(\"is-safari\");\n    }\n    if (IS_ELECTRON) {\n      document.body.classList.add(\"is-electron\");\n    }\n  });\n\n  const canAnimate = selectCanAnimateInterface(global);\n\n  switchTheme(theme, canAnimate);\n  // Make sure global has the latest theme. Will cause `switchTheme` on change\n  global = updateSharedSettings(global, { theme });\n\n  startWebsync();\n\n  isUpdated = true;\n\n  if (isUpdated) setGlobal(global);\n});\n\naddActionHandler(\n  \"setInstallPrompt\",\n  (global, actions, payload): ActionReturnType => {\n    const { canInstall, tabId = getCurrentTabId() } = payload;\n    return updateTabState(\n      global,\n      {\n        canInstall,\n      },\n      tabId\n    );\n  }\n);\n\naddActionHandler(\n  \"setIsUiReady\",\n  (global, actions, payload): ActionReturnType => {\n    const { uiReadyState, tabId = getCurrentTabId() } = payload;\n\n    if (uiReadyState === 2) {\n      requestMutation(() => {\n        document.body.classList.remove(\"initial\");\n      });\n    }\n\n    return updateTabState(\n      global,\n      {\n        uiReadyState,\n      },\n      tabId\n    );\n  }\n);\n\naddActionHandler(\n  \"setAuthPhoneNumber\",\n  (global, actions, payload): ActionReturnType => {\n    const { phoneNumber } = payload;\n\n    return {\n      ...global,\n      authPhoneNumber: phoneNumber,\n    };\n  }\n);\n\naddActionHandler(\n  \"setAuthRememberMe\",\n  (global, actions, payload): ActionReturnType => {\n    return {\n      ...global,\n      authRememberMe: Boolean(payload.value),\n    };\n  }\n);\n\naddActionHandler(\"clearAuthErrorKey\", (global): ActionReturnType => {\n  return {\n    ...global,\n    authErrorKey: undefined,\n  };\n});\n\naddActionHandler(\n  \"checkWallet\",\n  async (global, actions, payload): Promise<void> => {\n    console.log(\"checkWallet\", payload);\n    const { telegramUserId } = payload;\n\n    // Check if we're in the WalletCreated development environment\n    const isWalletCreatedEnv = process.env.APP_WALLET_CREATED === \"1\";\n    const telegramUserIdTest = \"8214814881\";\n\n    try {\n      // Use relative path that can be proxied to backend or configure based on environment\n      const backendUrl = \"http://localhost:8888\";\n      const endpoint = isWalletCreatedEnv\n        ? \"/user/test-check-wallet\"\n        : \"/user/check-wallet\";\n\n      console.log(\n        \"Using endpoint:\",\n        endpoint,\n        \"WalletCreated env:\",\n        isWalletCreatedEnv\n      );\n\n      const response = await fetch(`${backendUrl}${endpoint}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: isWalletCreatedEnv\n          ? JSON.stringify({})\n          : JSON.stringify({ telegramUserId }),\n      });\n\n      const result = await response.json();\n\n      if (result.exists) {\n        // Wallet exists, skip to ready state\n        const globalUpdate: any = {\n          ...getGlobal(),\n          authState: \"authorizationStateReady\",\n        };\n        if (isWalletCreatedEnv) {\n          globalUpdate.currentUserId = telegramUserIdTest;\n        }\n        setGlobal(globalUpdate);\n      } else {\n        // Wallet doesn't exist, proceed to wallet creation\n        const globalUpdate: any = {\n          ...getGlobal(),\n          authState: \"authorizationStateWalletCreated\",\n        };\n        if (isWalletCreatedEnv) {\n          globalUpdate.currentUserId = telegramUserIdTest;\n        }\n        setGlobal(globalUpdate);\n      }\n    } catch (error) {\n      console.error(\"Failed to check wallet:\", error);\n      // On error, proceed to wallet creation to be safe\n      const globalUpdate: any = {\n        ...getGlobal(),\n        authState: \"authorizationStateWalletCreated\",\n      };\n      if (isWalletCreatedEnv) {\n        globalUpdate.currentUserId = telegramUserIdTest;\n      }\n      setGlobal(globalUpdate);\n    }\n  }\n);\n\naddActionHandler(\n  \"disableHistoryAnimations\",\n  (global, actions, payload): ActionReturnType => {\n    const { tabId = getCurrentTabId() } = payload || {};\n\n    setTimeout(() => {\n      global = getGlobal();\n      global = updateTabState(\n        global,\n        {\n          shouldSkipHistoryAnimations: false,\n        },\n        tabId\n      );\n      setGlobal(global);\n\n      requestMutation(() => {\n        document.body.classList.remove(\"no-animate\");\n      });\n    }, HISTORY_ANIMATION_DURATION);\n\n    global = updateTabState(\n      global,\n      {\n        shouldSkipHistoryAnimations: true,\n      },\n      tabId\n    );\n    setGlobal(global, { forceSyncOnIOs: true });\n  }\n);\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { ActionReturnType, GlobalState } from '../../types';\nimport { type LangCode, LeftColumnContent, SettingsScreens } from '../../../types';\n\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { IS_IOS } from '../../../util/browser/windowEnvironment';\nimport { disableDebugConsole, initDebugConsole } from '../../../util/debugConsole';\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { oldSetLanguage, setTimeFormat } from '../../../util/oldLangProvider';\nimport { applyPerformanceSettings } from '../../../util/perfomanceSettings';\nimport switchTheme from '../../../util/switchTheme';\nimport { updatePeerColors } from '../../../util/theme';\nimport { callApi, setShouldEnableDebugLog } from '../../../api/gramjs';\nimport {\n  addActionHandler, getActions, setGlobal,\n} from '../../index';\nimport { replaceSettings, updateSharedSettings, updateThemeSettings } from '../../reducers';\nimport { updateTabState } from '../../reducers/tabs';\nimport { selectCanAnimateInterface, selectChatFolder, selectTabState } from '../../selectors';\nimport { selectSharedSettings } from '../../selectors/sharedState';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  const { updatePageTitle, updateShouldDebugExportedSenders, updateShouldEnableDebugLog } = getActions();\n\n  const oldGlobal = prevGlobal;\n  prevGlobal = global;\n\n  if (!oldGlobal) return;\n\n  const oldSharedSettings = selectSharedSettings(oldGlobal);\n  const sharedSettings = selectSharedSettings(global);\n\n  const performance = sharedSettings.performance;\n  const prevPerformance = oldSharedSettings.performance;\n  const peerColors = global.peerColors;\n  const prevPeerColors = oldGlobal.peerColors;\n\n  if (peerColors && peerColors !== prevPeerColors) {\n    updatePeerColors(peerColors.general);\n  }\n\n  if (performance !== prevPerformance) {\n    requestMutation(() => {\n      applyPerformanceSettings(performance);\n    });\n  }\n\n  if (sharedSettings.theme !== oldSharedSettings.theme) {\n    const withAnimation = document.hasFocus() ? selectCanAnimateInterface(global) : false;\n    switchTheme(sharedSettings.theme, withAnimation);\n  }\n\n  if (sharedSettings.language !== oldSharedSettings.language) {\n    oldSetLanguage(sharedSettings.language as LangCode);\n  }\n\n  if (sharedSettings.timeFormat !== oldSharedSettings.timeFormat) {\n    setTimeFormat(sharedSettings.timeFormat);\n  }\n\n  if (sharedSettings.messageTextSize !== oldSharedSettings.messageTextSize) {\n    document.documentElement.style.setProperty(\n      '--composer-text-size', `${Math.max(sharedSettings.messageTextSize, IS_IOS ? 16 : 15)}px`,\n    );\n    document.documentElement.style.setProperty('--message-meta-height',\n      `${Math.floor(sharedSettings.messageTextSize * 1.3125)}px`);\n    document.documentElement.style.setProperty('--message-text-size', `${sharedSettings.messageTextSize}px`);\n    document.documentElement.setAttribute('data-message-text-size', sharedSettings.messageTextSize.toString());\n  }\n\n  if (sharedSettings.canDisplayChatInTitle !== oldSharedSettings.canDisplayChatInTitle) {\n    updatePageTitle();\n  }\n\n  if (sharedSettings.shouldForceHttpTransport !== oldSharedSettings.shouldForceHttpTransport) {\n    callApi('setForceHttpTransport', Boolean(sharedSettings.shouldForceHttpTransport));\n  }\n\n  if (sharedSettings.shouldAllowHttpTransport !== oldSharedSettings.shouldAllowHttpTransport) {\n    callApi('setAllowHttpTransport', Boolean(sharedSettings.shouldAllowHttpTransport));\n    if (!sharedSettings.shouldAllowHttpTransport && sharedSettings.shouldForceHttpTransport) {\n      global = updateSharedSettings(global, {\n        shouldForceHttpTransport: false,\n      });\n      setGlobal(global);\n    }\n  }\n\n  if (sharedSettings.shouldDebugExportedSenders !== oldSharedSettings.shouldDebugExportedSenders) {\n    updateShouldDebugExportedSenders();\n  }\n\n  if (sharedSettings.shouldCollectDebugLogs !== oldSharedSettings.shouldCollectDebugLogs) {\n    updateShouldEnableDebugLog();\n  }\n});\n\naddActionHandler('updateShouldEnableDebugLog', (global): ActionReturnType => {\n  const settings = selectSharedSettings(global);\n\n  if (settings.shouldCollectDebugLogs) {\n    setShouldEnableDebugLog(true);\n    initDebugConsole();\n  } else {\n    setShouldEnableDebugLog(false);\n    disableDebugConsole();\n  }\n});\n\naddActionHandler('updateShouldDebugExportedSenders', (global): ActionReturnType => {\n  const settings = selectSharedSettings(global);\n  callApi('setShouldDebugExportedSenders', Boolean(settings.shouldDebugExportedSenders));\n});\n\naddActionHandler('setSettingOption', (global, actions, payload): ActionReturnType => {\n  return replaceSettings(global, payload);\n});\n\naddActionHandler('setSharedSettingOption', (global, actions, payload): ActionReturnType => {\n  return updateSharedSettings(global, payload);\n});\n\naddActionHandler('updatePerformanceSettings', (global, actions, payload): ActionReturnType => {\n  const settings = selectSharedSettings(global);\n  global = updateSharedSettings(global, {\n    performance: {\n      ...settings.performance,\n      ...payload,\n    },\n  });\n\n  return global;\n});\n\naddActionHandler('setThemeSettings', (global, actions, payload): ActionReturnType => {\n  const { theme, ...settings } = payload;\n\n  return updateThemeSettings(global, theme, settings);\n});\n\naddActionHandler('requestNextFoldersAction', (global, actions, payload): ActionReturnType => {\n  const { foldersAction, tabId = getCurrentTabId() } = payload;\n  return updateTabState(global, {\n    nextFoldersAction: foldersAction,\n  }, tabId);\n});\n\naddActionHandler('openLeftColumnContent', (global, actions, payload): ActionReturnType => {\n  const { contentKey = LeftColumnContent.ChatList, tabId = getCurrentTabId() } = payload;\n  const tabState = selectTabState(global, tabId);\n  return updateTabState(global, {\n    leftColumn: {\n      ...tabState.leftColumn,\n      contentKey,\n    },\n  }, tabId);\n});\n\naddActionHandler('openSettingsScreen', (global, actions, payload): ActionReturnType => {\n  const { screen = SettingsScreens.Main, tabId = getCurrentTabId() } = payload;\n  const tabState = selectTabState(global, tabId);\n  // Force settings only if new screen is passed, do not on resets\n  if (payload.screen) actions.openLeftColumnContent({ contentKey: LeftColumnContent.Settings, tabId });\n  return updateTabState(global, {\n    leftColumn: {\n      ...tabState.leftColumn,\n      settingsScreen: screen,\n    },\n  }, tabId);\n});\n\naddActionHandler('openEditChatFolder', (global, actions, payload): ActionReturnType => {\n  const { folderId, isOnlyInvites, tabId = getCurrentTabId() } = payload;\n\n  const chatFolder = selectChatFolder(global, folderId);\n  if (!chatFolder) return;\n\n  actions.openSettingsScreen({\n    screen: isOnlyInvites ? SettingsScreens.FoldersEditFolderInvites : SettingsScreens.FoldersEditFolderFromChatList,\n    tabId,\n  });\n  actions.requestNextFoldersAction({\n    foldersAction: {\n      type: 'editFolder',\n      payload: chatFolder,\n    },\n    tabId,\n  });\n});\n\naddActionHandler('openShareChatFolderModal', (global, actions, payload): ActionReturnType => {\n  const {\n    folderId, url, noRequestNextScreen, tabId = getCurrentTabId(),\n  } = payload;\n\n  const chatFolder = selectChatFolder(global, folderId);\n  const isChatList = chatFolder?.isChatList;\n  if (isChatList && !noRequestNextScreen) {\n    actions.openEditChatFolder({ folderId, isOnlyInvites: true, tabId });\n    return undefined;\n  }\n\n  if (!noRequestNextScreen) actions.openSettingsScreen({ screen: SettingsScreens.FoldersShare, tabId });\n\n  return updateTabState(global, {\n    shareFolderScreen: {\n      folderId,\n      isFromSettings: Boolean(noRequestNextScreen),\n      url,\n    },\n  }, tabId);\n});\n\naddActionHandler('closeShareChatFolderModal', (global, actions, payload): ActionReturnType => {\n  const { tabId = getCurrentTabId() } = payload || {};\n\n  actions.openSettingsScreen({ screen: undefined, tabId });\n\n  return updateTabState(global, {\n    shareFolderScreen: undefined,\n  }, tabId);\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type {\n  ApiAvailableReaction,\n  ApiMessage,\n} from '../api/types';\nimport type { MessageList, ThreadId } from '../types';\nimport type { ActionReturnType, GlobalState, SharedState } from './types';\nimport { MAIN_THREAD_ID } from '../api/types';\n\nimport {\n  ALL_FOLDER_ID,\n  ARCHIVED_FOLDER_ID,\n  DEBUG,\n  DEFAULT_LIMITS,\n  GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT,\n  GLOBAL_STATE_CACHE_CHAT_LIST_LIMIT,\n  GLOBAL_STATE_CACHE_CUSTOM_EMOJI_LIMIT,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_USER_LIST_LIMIT,\n  IS_SCREEN_LOCKED_CACHE_KEY,\n  SAVED_FOLDER_ID,\n  SHARED_STATE_CACHE_KEY,\n} from '../config';\nimport { MAIN_IDB_STORE } from '../util/browser/idb';\nimport { isUserId } from '../util/entities/ids';\nimport { getOrderedIds } from '../util/folderManager';\nimport {\n  compact, pick, pickTruthy, unique,\n} from '../util/iteratees';\nimport { GLOBAL_STATE_CACHE_KEY } from '../util/multiaccount';\nimport { encryptSession } from '../util/passcode';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { hasStoredSession } from '../util/sessions';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_GLOBAL_STATE } from './initialState';\nimport { clearGlobalForLockScreen, clearSharedStateForLockScreen } from './reducers';\nimport {\n  selectChatLastMessageId,\n  selectChatMessages,\n  selectCurrentMessageList,\n  selectTopics,\n  selectViewportIds,\n  selectVisibleUsers,\n} from './selectors';\n\nimport { getIsMobile } from '../hooks/useAppLayout';\n\nconst UPDATE_THROTTLE = 5000;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet isRemovingCache = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\n\nexport function cacheGlobal(global: GlobalState) {\n  return MAIN_IDB_STORE.set(GLOBAL_STATE_CACHE_KEY, global);\n}\n\nexport function cacheSharedState(state: SharedState) {\n  return MAIN_IDB_STORE.set(SHARED_STATE_CACHE_KEY, state);\n}\n\nexport function loadCachedGlobal() {\n  return MAIN_IDB_STORE.get<GlobalState>(GLOBAL_STATE_CACHE_KEY);\n}\n\nexport function loadCachedSharedState() {\n  return MAIN_IDB_STORE.get<SharedState>(SHARED_STATE_CACHE_KEY);\n}\n\nexport function removeGlobalFromCache() {\n  return MAIN_IDB_STORE.del(GLOBAL_STATE_CACHE_KEY);\n}\n\nexport function removeSharedStateFromCache() {\n  return MAIN_IDB_STORE.del(SHARED_STATE_CACHE_KEY);\n}\n\nfunction cacheIsScreenLocked(global: GlobalState) {\n  if (global?.passcode?.isScreenLocked) localStorage.setItem(IS_SCREEN_LOCKED_CACHE_KEY, 'true');\n}\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  const resetCache = () => {\n    isRemovingCache = true;\n    removeGlobalFromCache().finally(() => {\n      localStorage.removeItem(IS_SCREEN_LOCKED_CACHE_KEY);\n      isRemovingCache = false;\n      if (!isCaching) {\n        return;\n      }\n\n      clearCaching();\n    });\n  };\n\n  addActionHandler('saveSession', (): ActionReturnType => {\n    if (isCaching) {\n      return;\n    }\n\n    setupCaching();\n    updateCacheForced();\n  });\n\n  addActionHandler('reset', resetCache);\n}\n\nexport async function loadCache(initialState: GlobalState): Promise<GlobalState | undefined> {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return undefined;\n  }\n\n  const cache = await readCache(initialState);\n\n  if (cache.passcode.hasPasscode || hasStoredSession()) {\n    setupCaching();\n\n    return cache;\n  } else {\n    clearCaching();\n\n    return undefined;\n  }\n}\n\nexport function setupCaching() {\n  isCaching = true;\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n  addCallback(updateCacheThrottled);\n}\n\nexport function clearCaching() {\n  isCaching = false;\n  removeCallback(updateCacheThrottled);\n  window.removeEventListener('blur', updateCacheForced);\n  if (unsubscribeFromBeforeUnload) {\n    unsubscribeFromBeforeUnload();\n  }\n}\n\nasync function readCache(initialState: GlobalState): Promise<GlobalState> {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  const cachedFromLocalStorage = json ? JSON.parse(json) as GlobalState : undefined;\n  if (cachedFromLocalStorage) localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n\n  let cached = cachedFromLocalStorage || await loadCachedGlobal();\n  const cachedSharedState = await loadCachedSharedState();\n  const sharedState = cachedSharedState || initialState.sharedState;\n\n  if (cached) {\n    cached = {\n      ...cached,\n      sharedState,\n    };\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    migrateCache(cached, initialState);\n  }\n\n  const newState: GlobalState = {\n    ...initialState,\n    ...cached,\n    sharedState: {\n      ...sharedState,\n      ...cached?.sharedState, // Allow migration to override shared state\n    },\n  };\n\n  return newState;\n}\n\nexport function migrateCache(cached: GlobalState, initialState: GlobalState) {\n  try {\n    unsafeMigrateCache(cached, initialState);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n}\n\nfunction unsafeMigrateCache(cached: GlobalState, initialState: GlobalState) {\n  const untypedCached = cached as any;\n  // Pre-fill settings with defaults\n  cached.settings.byKey = {\n    ...initialState.settings.byKey,\n    ...cached.settings.byKey,\n  };\n\n  cached.chatFolders = {\n    ...initialState.chatFolders,\n    ...cached.chatFolders,\n  };\n\n  if (cached.appConfig && !cached.appConfig.limits) {\n    cached.appConfig.limits = DEFAULT_LIMITS;\n  }\n\n  if (!cached.chats.similarChannelsById) {\n    cached.chats.similarChannelsById = initialState.chats.similarChannelsById;\n  }\n\n  if (!cached.chats.similarBotsById) {\n    cached.chats.similarBotsById = initialState.chats.similarBotsById;\n  }\n\n  if (!cached.chats.lastMessageIds) {\n    cached.chats.lastMessageIds = initialState.chats.lastMessageIds;\n  }\n\n  // Clear old color storage to optimize cache size\n  if (untypedCached?.appConfig?.peerColors) {\n    untypedCached.appConfig.peerColors = undefined;\n    untypedCached.appConfig.darkPeerColors = undefined;\n  }\n\n  if (!cached.fileUploads.byMessageKey) {\n    cached.fileUploads.byMessageKey = {};\n  }\n\n  if (!cached.reactions) {\n    cached.reactions = initialState.reactions;\n  }\n\n  if (!cached.quickReplies) {\n    cached.quickReplies = initialState.quickReplies;\n  }\n\n  if (!cached.users.previewMediaByBotId) {\n    cached.users.previewMediaByBotId = initialState.users.previewMediaByBotId;\n  }\n  if (!cached.chats.loadingParameters) {\n    cached.chats.loadingParameters = initialState.chats.loadingParameters;\n  }\n  if (!cached.topBotApps) {\n    cached.topBotApps = initialState.topBotApps;\n  }\n\n  if (!cached.reactions.defaultTags?.[0]?.type) {\n    cached.reactions = initialState.reactions;\n  }\n\n  if (!cached.users.commonChatsById) {\n    cached.users.commonChatsById = initialState.users.commonChatsById;\n  }\n  if (!cached.users.botAppPermissionsById) {\n    cached.users.botAppPermissionsById = initialState.users.botAppPermissionsById;\n  }\n  if (!cached.chats.topicsInfoById) {\n    cached.chats.topicsInfoById = initialState.chats.topicsInfoById;\n  }\n\n  if (!cached.messages.pollById) {\n    cached.messages.pollById = initialState.messages.pollById;\n  }\n  if (!cached.settings.botVerificationShownPeerIds) {\n    cached.settings.botVerificationShownPeerIds = initialState.settings.botVerificationShownPeerIds;\n  }\n\n  if (!cached.peers) {\n    cached.peers = initialState.peers;\n  }\n\n  if (!cached.settings.accountDaysTtl) {\n    cached.settings.accountDaysTtl = initialState.settings.accountDaysTtl;\n  }\n\n  if (!cached.cacheVersion) {\n    cached.cacheVersion = initialState.cacheVersion;\n    // Reset because of the new action message structure\n    cached.messages = initialState.messages;\n    cached.chats.listIds = initialState.chats.listIds;\n  }\n\n  if (!cached.messages.playbackByChatId) {\n    cached.messages.playbackByChatId = initialState.messages.playbackByChatId;\n  }\n\n  if (cached.cacheVersion < 2) {\n    if (untypedCached.settings.themes.dark) {\n      untypedCached.settings.themes.dark.patternColor = (initialState as any).settings.themes.dark!.patternColor;\n    }\n\n    if (untypedCached.settings.themes.light) {\n      untypedCached.settings.themes.light.patternColor = (initialState as any).settings.themes.light!.patternColor;\n    }\n\n    cached.cacheVersion = 2;\n  }\n\n  if (cached.appConfig?.limits && !cached.appConfig.limits.moreAccounts) {\n    cached.appConfig.limits.moreAccounts = DEFAULT_LIMITS.moreAccounts;\n  }\n  if (!cached.chats.notifyExceptionById) {\n    cached.chats.notifyExceptionById = initialState.chats.notifyExceptionById;\n  }\n\n  if (!cached.sharedState) {\n    cached.sharedState = initialState.sharedState;\n    cached.sharedState.settings = {\n      canDisplayChatInTitle: untypedCached.settings.byKey.canDisplayChatInTitle,\n      animationLevel: untypedCached.settings.byKey.animationLevel,\n      messageSendKeyCombo: untypedCached.settings.byKey.messageSendKeyCombo,\n      messageTextSize: untypedCached.settings.byKey.messageTextSize,\n      performance: untypedCached.settings.performance,\n      theme: untypedCached.settings.byKey.theme,\n      timeFormat: untypedCached.settings.byKey.timeFormat,\n      wasTimeFormatSetManually: untypedCached.settings.byKey.wasTimeFormatSetManually,\n      shouldUseSystemTheme: untypedCached.settings.byKey.shouldUseSystemTheme,\n      isConnectionStatusMinimized: untypedCached.settings.byKey.isConnectionStatusMinimized,\n      shouldForceHttpTransport: untypedCached.settings.byKey.shouldForceHttpTransport,\n      language: untypedCached.settings.byKey.language,\n      languages: untypedCached.settings.languages,\n      shouldSkipWebAppCloseConfirmation: untypedCached.settings.byKey.shouldSkipWebAppCloseConfirmation,\n      miniAppsCachedPosition: untypedCached.settings.miniAppsCachedPosition,\n      miniAppsCachedSize: untypedCached.settings.miniAppsCachedSize,\n      shouldAllowHttpTransport: untypedCached.settings.byKey.shouldAllowHttpTransport,\n      shouldCollectDebugLogs: untypedCached.settings.byKey.shouldCollectDebugLogs,\n      shouldDebugExportedSenders: untypedCached.settings.byKey.shouldDebugExportedSenders,\n      shouldWarnAboutSvg: untypedCached.settings.byKey.shouldWarnAboutSvg,\n    };\n  }\n\n  if (!cached.settings.themes) {\n    cached.settings.themes = initialState.settings.themes;\n  }\n}\n\nfunction updateCache(force?: boolean) {\n  const global = getGlobal();\n  if (isRemovingCache || !isCaching || global.isLoggingOut || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  forceUpdateCache();\n}\n\nexport function forceUpdateCache(noEncrypt = false) {\n  const global = getGlobal();\n  const { hasPasscode, isScreenLocked } = global.passcode;\n\n  if (hasPasscode) {\n    if (!isScreenLocked && !noEncrypt) {\n      const serializedGlobal = serializeGlobal(global);\n      void encryptSession(undefined, serializedGlobal);\n    }\n\n    cacheIsScreenLocked(global);\n    cacheGlobal(clearGlobalForLockScreen(global, false));\n    cacheSharedState(clearSharedStateForLockScreen(global.sharedState));\n    return;\n  }\n\n  cacheIsScreenLocked(global);\n  cacheGlobal(reduceGlobal(global));\n  cacheSharedState(reduceSharedState(global.sharedState));\n}\n\nfunction reduceGlobal<T extends GlobalState>(global: T) {\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_GLOBAL_STATE,\n    ...pick(global, [\n      'appConfig',\n      'config',\n      'authState',\n      'authPhoneNumber',\n      'authRememberMe',\n      'authNearestCountry',\n      'attachMenu',\n      'currentUserId',\n      'contactList',\n      'topPeers',\n      'topInlineBots',\n      'topBotApps',\n      'recentEmojis',\n      'recentCustomEmojis',\n      'push',\n      'serviceNotifications',\n      'attachmentSettings',\n      'leftColumnWidth',\n      'archiveSettings',\n      'mediaViewer',\n      'audioPlayer',\n      'shouldShowContextMenuHint',\n      'trustedBotIds',\n      'recentlyFoundChatIds',\n      'peerColors',\n      'savedReactionTags',\n      'timezones',\n      'availableEffectById',\n    ]),\n    lastIsChatInfoShown: !getIsMobile() ? global.lastIsChatInfoShown : undefined,\n    customEmojis: reduceCustomEmojis(global),\n    users: reduceUsers(global),\n    chats: reduceChats(global),\n    messages: reduceMessages(global),\n    settings: reduceSettings(global),\n    chatFolders: reduceChatFolders(global),\n    groupCalls: reduceGroupCalls(global),\n    reactions: {\n      ...pick(global.reactions, [\n        'defaultTags',\n        'recentReactions',\n        'topReactions',\n        'effectReactions',\n        'hash',\n      ]),\n      availableReactions: reduceAvailableReactions(global.reactions.availableReactions),\n    },\n    passcode: pick(global.passcode, [\n      'isScreenLocked',\n      'hasPasscode',\n      'invalidAttemptsCount',\n      'timeoutUntil',\n    ]),\n  };\n\n  return reducedGlobal;\n}\n\nfunction reduceSharedState(sharedState: SharedState): SharedState {\n  return {\n    ...sharedState,\n    settings: {\n      ...sharedState.settings,\n      languages: undefined,\n    },\n    isInitial: undefined,\n  };\n}\n\nexport function serializeGlobal<T extends GlobalState>(global: T) {\n  return JSON.stringify(reduceGlobal(global));\n}\n\nfunction reduceCustomEmojis<T extends GlobalState>(global: T): GlobalState['customEmojis'] {\n  const { lastRendered, byId } = global.customEmojis;\n  const idsToSave = lastRendered.slice(0, GLOBAL_STATE_CACHE_CUSTOM_EMOJI_LIMIT);\n  const byIdToSave = pick(byId, idsToSave);\n\n  return {\n    byId: byIdToSave,\n    lastRendered: idsToSave,\n    forEmoji: {},\n    added: {},\n    statusRecent: {},\n  };\n}\n\nfunction reduceUsers<T extends GlobalState>(global: T): GlobalState['users'] {\n  const {\n    users: {\n      byId, statusesById, fullInfoById, botAppPermissionsById,\n    }, currentUserId,\n  } = global;\n  const currentChatIds = compact(\n    Object.values(global.byTabId)\n      .map(({ id: tabId }) => selectCurrentMessageList(global, tabId)),\n  ).map(({ chatId }) => chatId).filter((chatId) => isUserId(chatId));\n\n  const visibleUserIds = unique(compact(Object.values(global.byTabId)\n    .flatMap(({ id: tabId }) => selectVisibleUsers(global, tabId)?.map((u) => u.id) || [])));\n\n  const chatStoriesUserIds = currentChatIds\n    .flatMap((chatId) => Object.values(selectChatMessages(global, chatId) || {}))\n    .map((message) => message.content.storyData?.peerId || message.content.webPage?.story?.peerId)\n    .filter((id): id is string => Boolean(id) && isUserId(id));\n\n  const attachBotIds = Object.keys(global.attachMenu?.bots || {});\n\n  const idsToSave = unique([\n    ...currentUserId ? [currentUserId] : [],\n    ...currentChatIds,\n    ...chatStoriesUserIds,\n    ...visibleUserIds || [],\n    ...attachBotIds,\n    ...global.topPeers.userIds || [],\n    ...global.recentlyFoundChatIds?.filter(isUserId) || [],\n    ...getOrderedIds(ARCHIVED_FOLDER_ID)?.slice(0, GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT).filter(isUserId) || [],\n    ...getOrderedIds(ALL_FOLDER_ID)?.filter(isUserId) || [],\n    ...global.contactList?.userIds || [],\n    ...Object.keys(byId),\n  ]).slice(0, GLOBAL_STATE_CACHE_USER_LIST_LIMIT);\n\n  return {\n    ...INITIAL_GLOBAL_STATE.users,\n    byId: pickTruthy(byId, idsToSave),\n    statusesById: pickTruthy(statusesById, idsToSave),\n    fullInfoById: pickTruthy(fullInfoById, idsToSave),\n    botAppPermissionsById,\n  };\n}\n\nfunction reduceChats<T extends GlobalState>(global: T): GlobalState['chats'] {\n  const { chats: { byId }, currentUserId } = global;\n  const currentChatIds = compact(\n    Object.values(global.byTabId)\n      .map(({ id: tabId }): MessageList | undefined => {\n        return selectCurrentMessageList(global, tabId);\n      }),\n  ).map(({ chatId }) => chatId);\n\n  const messagesChatIds = compact(Object.values(global.byTabId).flatMap(({ id: tabId }) => {\n    const messageList = selectCurrentMessageList(global, tabId);\n    if (!messageList) return undefined;\n\n    const messages = selectChatMessages(global, messageList.chatId);\n    const viewportIds = selectViewportIds(global, messageList.chatId, messageList.threadId, tabId);\n    return viewportIds?.map((id) => {\n      const message = messages[id];\n      if (!message) return undefined;\n      const content = message.content;\n      const replyPeer = message.replyInfo?.type === 'message' && message.replyInfo.replyToPeerId;\n      return content.storyData?.peerId || content.webPage?.story?.peerId || replyPeer;\n    });\n  }));\n\n  const unlinkedIdsToSave = [\n    ...currentUserId ? [currentUserId] : [],\n    ...currentChatIds,\n    ...messagesChatIds,\n    ...global.recentlyFoundChatIds || [],\n    ...getOrderedIds(ARCHIVED_FOLDER_ID)?.slice(0, GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT) || [],\n    ...getOrderedIds(ALL_FOLDER_ID) || [],\n    ...getOrderedIds(SAVED_FOLDER_ID) || [],\n    ...Object.keys(byId),\n  ];\n\n  let idsToSave: string[] = [];\n\n  for (const id of unlinkedIdsToSave) {\n    const chat = byId[id];\n    if (!chat) continue;\n\n    idsToSave.push(id);\n\n    if (chat.linkedMonoforumId) {\n      idsToSave.push(chat.linkedMonoforumId);\n    }\n  }\n\n  idsToSave = unique(idsToSave).slice(0, GLOBAL_STATE_CACHE_CHAT_LIST_LIMIT);\n\n  return {\n    ...global.chats,\n    similarChannelsById: {},\n    similarBotsById: {},\n    isFullyLoaded: {},\n    notifyExceptionById: pickTruthy(global.chats.notifyExceptionById, unlinkedIdsToSave),\n    loadingParameters: INITIAL_GLOBAL_STATE.chats.loadingParameters,\n    byId: pickTruthy(global.chats.byId, unlinkedIdsToSave),\n    fullInfoById: pickTruthy(global.chats.fullInfoById, unlinkedIdsToSave),\n    lastMessageIds: {\n      all: pickTruthy(global.chats.lastMessageIds.all || {}, unlinkedIdsToSave),\n      saved: global.chats.lastMessageIds.saved,\n    },\n    topicsInfoById: pickTruthy(global.chats.topicsInfoById, currentChatIds),\n  };\n}\n\nfunction reduceMessages<T extends GlobalState>(global: T): GlobalState['messages'] {\n  const { currentUserId } = global;\n  const byChatId: GlobalState['messages']['byChatId'] = {};\n  const currentChatIds = compact(\n    Object.values(global.byTabId)\n      .map(({ id: tabId }) => selectCurrentMessageList(global, tabId)),\n  ).map(({ chatId }) => chatId);\n  const forumPanelChatIds = compact(\n    Object.values(global.byTabId)\n      .map(({ forumPanelChatId }) => forumPanelChatId),\n  );\n  const chatIdsToSave = unique([\n    ...currentChatIds,\n    ...currentUserId ? [currentUserId] : [],\n    ...forumPanelChatIds,\n    ...getOrderedIds(ALL_FOLDER_ID) || [],\n    ...getOrderedIds(ARCHIVED_FOLDER_ID)?.slice(0, GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT) || [],\n  ]);\n\n  const openedChatThreadIds = Object.values(global.byTabId).reduce((acc, { id: tabId }) => {\n    const { chatId: tabChatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n    if (!tabChatId || !threadId || threadId === MAIN_THREAD_ID) {\n      return acc;\n    }\n    const current = acc[tabChatId] || new Set();\n    current.add(threadId);\n    acc[tabChatId] = current;\n\n    return acc;\n  }, {} as Record<string, Set<ThreadId>>);\n\n  const pollIdsToSave: string[] = [];\n\n  chatIdsToSave.forEach((chatId) => {\n    const current = global.messages.byChatId[chatId];\n    if (!current) {\n      return;\n    }\n\n    const chatLastMessageId = selectChatLastMessageId(global, chatId);\n\n    const openedThreadIds = Array.from(openedChatThreadIds[chatId] || []);\n    const commentThreadIds = Object.values(global.messages.byChatId[chatId].threadsById || {})\n      .map(({ threadInfo }) => (threadInfo?.isCommentsInfo ? threadInfo?.originMessageId : undefined))\n      .filter(Boolean);\n    const threadIds = unique(openedThreadIds.concat(commentThreadIds));\n\n    const threadsToSave = pickTruthy(current.threadsById, [MAIN_THREAD_ID, ...threadIds]);\n\n    const viewportIdsToSave = unique(Object.values(threadsToSave).flatMap((thread) => thread.lastViewportIds || []));\n    const topics = selectTopics(global, chatId);\n    const topicLastMessageIds = topics && forumPanelChatIds.includes(chatId)\n      ? Object.values(topics).map(({ lastMessageId }) => lastMessageId) : [];\n    const savedLastMessageIds = chatId === currentUserId && global.chats.lastMessageIds.saved\n      ? Object.values(global.chats.lastMessageIds.saved) : [];\n    const lastMessageIdsToSave = [chatLastMessageId].concat(topicLastMessageIds).concat(savedLastMessageIds)\n      .filter(Boolean);\n    const byId = pick(current.byId, viewportIdsToSave.concat(lastMessageIdsToSave));\n    const threadsById = Object.keys(threadsToSave).reduce((acc, key) => {\n      const thread = threadsToSave[Number(key)];\n      acc[Number(key)] = {\n        ...thread,\n        listedIds: thread.lastViewportIds,\n        pinnedIds: undefined,\n        typingStatus: undefined,\n      };\n      return acc;\n    }, {} as GlobalState['messages']['byChatId'][string]['threadsById']);\n\n    const cleanedById = Object.values(byId).reduce((acc, message) => {\n      if (!message) return acc;\n\n      let cleanedMessage = omitLocalMedia(message);\n      cleanedMessage = omitLocalPaidReactions(cleanedMessage);\n      acc[message.id] = cleanedMessage;\n\n      if (message.content.pollId) {\n        pollIdsToSave.push(message.content.pollId);\n      }\n\n      return acc;\n    }, {} as Record<number, ApiMessage>);\n\n    byChatId[chatId] = {\n      byId: cleanedById,\n      threadsById,\n    };\n  });\n\n  return {\n    byChatId,\n    pollById: pickTruthy(global.messages.pollById, pollIdsToSave),\n    sponsoredByChatId: {},\n    playbackByChatId: {},\n  };\n}\n\nfunction omitLocalPaidReactions(message: ApiMessage): ApiMessage {\n  if (!message.reactions?.results.length) return message;\n  return {\n    ...message,\n    reactions: {\n      ...message.reactions,\n      results: message.reactions.results.map((reaction) => {\n        if (reaction.localAmount) {\n          return {\n            ...reaction,\n            localAmount: undefined,\n          };\n        }\n        return reaction;\n      }),\n    },\n  };\n}\n\nfunction omitLocalMedia(message: ApiMessage): ApiMessage {\n  const {\n    photo, video, document, sticker,\n  } = message.content;\n\n  return {\n    ...message,\n    content: {\n      ...message.content,\n      photo: photo && {\n        ...photo,\n        blobUrl: undefined,\n      },\n      video: video && {\n        ...video,\n        blobUrl: undefined,\n        previewBlobUrl: undefined,\n      },\n      document: document && {\n        ...document,\n        previewBlobUrl: undefined,\n      },\n      sticker: sticker && {\n        ...sticker,\n        isPreloadedGlobally: undefined,\n      },\n    },\n    previousLocalId: undefined,\n  };\n}\n\nfunction reduceSettings<T extends GlobalState>(global: T): GlobalState['settings'] {\n  const {\n    byKey, botVerificationShownPeerIds, notifyDefaults, lastPremiumBandwithNotificationDate, themes, accountDaysTtl,\n  } = global.settings;\n\n  return {\n    byKey,\n    privacy: {},\n    botVerificationShownPeerIds,\n    lastPremiumBandwithNotificationDate,\n    notifyDefaults,\n    themes,\n    accountDaysTtl,\n  };\n}\n\nfunction reduceChatFolders<T extends GlobalState>(global: T): GlobalState['chatFolders'] {\n  return {\n    ...global.chatFolders,\n  };\n}\n\nfunction reduceGroupCalls<T extends GlobalState>(global: T): GlobalState['groupCalls'] {\n  return {\n    ...global.groupCalls,\n    byId: {},\n    activeGroupCallId: undefined,\n  };\n}\n\nfunction reduceAvailableReactions(availableReactions?: ApiAvailableReaction[]): ApiAvailableReaction[] | undefined {\n  return availableReactions\n    ?.map((r) => pick(r, ['reaction', 'staticIcon', 'title', 'isInactive']));\n}\n","import type { ApiChatType, ApiPhoto } from '../../api/types';\nimport type { WebApp } from '../../types/webapp';\n\nimport { REPLIES_USER_ID, VERIFICATION_CODES_USER_ID } from '../../config';\n\nexport function getBotCoverMediaHash(photo: ApiPhoto) {\n  return `photo${photo.id}?size=x`;\n}\n\nexport function convertToApiChatType(type: string): ApiChatType | undefined {\n  if (type === 'channels') return 'channels';\n  if (type === 'chats' || type === 'groups') return 'chats';\n  if (type === 'users') return 'users';\n  if (type === 'bots') return 'bots';\n  return undefined;\n}\n\nexport function getWebAppKey(webApp: Partial<WebApp>) {\n  if (webApp.requestUrl) return webApp.requestUrl;\n  if (webApp.appName) return `${webApp.botId}?appName=${webApp.appName}`;\n  return webApp.botId!;\n}\n\nexport function isSystemBot(botId: string) {\n  return botId === REPLIES_USER_ID || botId === VERIFICATION_CODES_USER_ID;\n}\n","import type {\n  ApiChat,\n  ApiChatAdminRights,\n  ApiChatBannedRights,\n  ApiChatFolder,\n  ApiChatFullInfo,\n  ApiChatInviteInfo,\n  ApiMessage,\n  ApiPeer,\n  ApiPreparedInlineMessage,\n  ApiTopic,\n} from '../../api/types';\nimport type { OldLangFn } from '../../hooks/useOldLang';\nimport type {\n  CustomPeer, ThreadId,\n} from '../../types';\nimport type { LangFn } from '../../util/localization';\nimport { MAIN_THREAD_ID } from '../../api/types';\n\nimport {\n  ANONYMOUS_USER_ID,\n  ARCHIVED_FOLDER_ID, GENERAL_TOPIC_ID, REPLIES_USER_ID, TME_LINK_PREFIX,\n  VERIFICATION_CODES_USER_ID,\n} from '../../config';\nimport { formatDateToString, formatTime } from '../../util/dates/dateFormat';\nimport { getPeerIdDividend, isUserId } from '../../util/entities/ids';\nimport { getServerTime } from '../../util/serverTime';\nimport { selectIsChatRestricted } from '../selectors';\nimport { getGlobal } from '..';\nimport { isSystemBot } from './bots';\nimport { getMainUsername } from './users';\n\nconst FOREVER_BANNED_DATE = Date.now() / 1000 + 31622400; // 366 days\n\nexport function isChatGroup(chat: ApiChat) {\n  return isChatBasicGroup(chat) || isChatSuperGroup(chat);\n}\n\nexport function isChatBasicGroup(chat: ApiChat) {\n  return chat.type === 'chatTypeBasicGroup';\n}\n\nexport function isChatSuperGroup(chat: ApiChat) {\n  return chat.type === 'chatTypeSuperGroup';\n}\n\nexport function isChatChannel(chat: ApiChat) {\n  return chat.type === 'chatTypeChannel';\n}\n\nexport function isChatMonoforum(chat: ApiChat) {\n  return chat.isMonoforum;\n}\n\nexport function isCommonBoxChat(chat: ApiChat) {\n  return chat.type === 'chatTypePrivate' || chat.type === 'chatTypeBasicGroup';\n}\n\nexport function isChatWithRepliesBot(chatId: string) {\n  return chatId === REPLIES_USER_ID;\n}\n\nexport function isChatWithVerificationCodesBot(chatId: string) {\n  return chatId === VERIFICATION_CODES_USER_ID;\n}\n\nexport function isAnonymousForwardsChat(chatId: string) {\n  return chatId === ANONYMOUS_USER_ID;\n}\n\nexport function getChatTypeString(chat: ApiChat) {\n  switch (chat.type) {\n    case 'chatTypePrivate':\n      return 'PrivateChat';\n    case 'chatTypeBasicGroup':\n    case 'chatTypeSuperGroup':\n      return 'AccDescrGroup';\n    case 'chatTypeChannel':\n      return 'AccDescrChannel';\n    default:\n      return 'Chat';\n  }\n}\n\nexport function getPrivateChatUserId(chat: ApiChat) {\n  if (chat.type !== 'chatTypePrivate' && chat.type !== 'chatTypeSecret') {\n    return undefined;\n  }\n  return chat.id;\n}\n\nexport function getChatTitle(lang: OldLangFn | LangFn, chat: ApiChat, isSelf = false) {\n  if (isSelf) {\n    return lang('SavedMessages');\n  }\n  return chat.title || lang('HiddenName');\n}\n\nexport function getChatLink(chat: ApiChat) {\n  const activeUsername = getMainUsername(chat);\n\n  return activeUsername ? `${TME_LINK_PREFIX}${activeUsername}` : undefined;\n}\n\nexport function getChatAvatarHash(\n  owner: ApiPeer,\n  size: 'normal' | 'big' = 'normal',\n  avatarPhotoId = owner.avatarPhotoId,\n) {\n  if (!avatarPhotoId) {\n    return undefined;\n  }\n\n  switch (size) {\n    case 'big':\n      return `profile${owner.id}?${avatarPhotoId}`;\n    default:\n      return `avatar${owner.id}?${avatarPhotoId}`;\n  }\n}\n\nexport function isChatAdmin(chat: ApiChat) {\n  return Boolean(chat.adminRights || chat.isCreator);\n}\n\nexport function getHasAdminRight(chat: ApiChat, key: keyof ApiChatAdminRights) {\n  return chat.adminRights?.[key] || false;\n}\n\nexport function getCanManageTopic(chat: ApiChat, topic: ApiTopic) {\n  if (topic.id === GENERAL_TOPIC_ID) return chat.isCreator;\n  return chat.isCreator || getHasAdminRight(chat, 'manageTopics') || topic.isOwner;\n}\n\nexport function isUserRightBanned(chat: ApiChat, key: keyof ApiChatBannedRights, chatFullInfo?: ApiChatFullInfo) {\n  const unrestrictedByBoosts = chatFullInfo?.boostsToUnrestrict\n    && (chatFullInfo.boostsApplied || 0) >= chatFullInfo.boostsToUnrestrict;\n  return Boolean(\n    (chat.currentUserBannedRights?.[key])\n    || (chat.defaultBannedRights?.[key] && !unrestrictedByBoosts),\n  );\n}\n\nexport function getCanPostInChat(\n  chat: ApiChat, topic?: ApiTopic, isMessageThread?: boolean, chatFullInfo?: ApiChatFullInfo,\n) {\n  if (topic) {\n    if (chat.isForum) {\n      if (chat.isNotJoined) {\n        return false;\n      }\n\n      if (topic?.isClosed && !topic.isOwner && !getHasAdminRight(chat, 'manageTopics')) {\n        return false;\n      }\n    }\n  }\n\n  const global = getGlobal();\n  const isRestricted = selectIsChatRestricted(global, chat.id);\n  if (isRestricted || chat.isForbidden || chat.migratedTo\n    || (chat.isNotJoined && !isChatMonoforum(chat) && !isMessageThread)\n    || isSystemBot(chat.id) || isAnonymousForwardsChat(chat.id)) {\n    return false;\n  }\n\n  if (chat.isCreator) {\n    return true;\n  }\n\n  if (isUserId(chat.id)) {\n    return true;\n  }\n\n  if (isChatChannel(chat)) {\n    return getHasAdminRight(chat, 'postMessages');\n  }\n\n  return isChatAdmin(chat) || !isUserRightBanned(chat, 'sendMessages', chatFullInfo);\n}\n\nexport interface IAllowedAttachmentOptions {\n  canAttachMedia: boolean;\n  canAttachPolls: boolean;\n  canSendStickers: boolean;\n  canSendGifs: boolean;\n  canAttachEmbedLinks: boolean;\n  canSendPhotos: boolean;\n  canSendVideos: boolean;\n  canSendRoundVideos: boolean;\n  canSendAudios: boolean;\n  canSendVoices: boolean;\n  canSendPlainText: boolean;\n  canSendDocuments: boolean;\n  canAttachToDoLists: boolean;\n}\n\nexport function getAllowedAttachmentOptions(\n  chat?: ApiChat,\n  chatFullInfo?: ApiChatFullInfo,\n  isChatWithBot = false,\n  isSavedMessages = false,\n  isStoryReply = false,\n  paidMessagesStars?: number,\n  isInScheduledList = false,\n): IAllowedAttachmentOptions {\n  if (!chat || (paidMessagesStars && isInScheduledList)) {\n    return {\n      canAttachMedia: false,\n      canAttachPolls: false,\n      canSendStickers: false,\n      canSendGifs: false,\n      canAttachEmbedLinks: false,\n      canSendPhotos: false,\n      canSendVideos: false,\n      canSendRoundVideos: false,\n      canSendAudios: false,\n      canSendVoices: false,\n      canSendPlainText: false,\n      canSendDocuments: false,\n      canAttachToDoLists: false,\n    };\n  }\n\n  const isAdmin = isChatAdmin(chat);\n\n  return {\n    canAttachMedia: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendMedia', chatFullInfo),\n    canAttachPolls: !isStoryReply && !chat.isMonoforum\n      && (isAdmin || !isUserRightBanned(chat, 'sendPolls', chatFullInfo))\n      && (!isUserId(chat.id) || isChatWithBot || isSavedMessages),\n    canAttachToDoLists: !isStoryReply && !chat.isMonoforum && !isChatChannel(chat),\n    canSendStickers: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendStickers', chatFullInfo),\n    canSendGifs: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendGifs', chatFullInfo),\n    canAttachEmbedLinks: !isStoryReply && (isAdmin || !isUserRightBanned(chat, 'embedLinks', chatFullInfo)),\n    canSendPhotos: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendPhotos', chatFullInfo),\n    canSendVideos: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendVideos', chatFullInfo),\n    canSendRoundVideos: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendRoundvideos', chatFullInfo),\n    canSendAudios: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendAudios', chatFullInfo),\n    canSendVoices: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendVoices', chatFullInfo),\n    canSendPlainText: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendPlain', chatFullInfo),\n    canSendDocuments: isAdmin || isStoryReply || !isUserRightBanned(chat, 'sendDocs', chatFullInfo),\n  };\n}\n\nexport function getMessageSendingRestrictionReason(\n  lang: OldLangFn,\n  currentUserBannedRights?: ApiChatBannedRights,\n  defaultBannedRights?: ApiChatBannedRights,\n) {\n  if (currentUserBannedRights?.sendMessages) {\n    const { untilDate } = currentUserBannedRights;\n    return untilDate && untilDate < FOREVER_BANNED_DATE\n      ? lang(\n        'Channel.Persmission.Denied.SendMessages.Until',\n        lang(\n          'formatDateAtTime',\n          [formatDateToString(new Date(untilDate * 1000), lang.code), formatTime(lang, untilDate * 1000)],\n        ),\n      )\n      : lang('Channel.Persmission.Denied.SendMessages.Forever');\n  }\n\n  if (defaultBannedRights?.sendMessages) {\n    return lang('Channel.Persmission.Denied.SendMessages.DefaultRestrictedText');\n  }\n\n  return undefined;\n}\n\nexport function getForumComposerPlaceholder(\n  lang: OldLangFn,\n  chat?: ApiChat,\n  threadId: ThreadId = MAIN_THREAD_ID,\n  topics?: Record<number, ApiTopic>,\n  isReplying?: boolean,\n) {\n  if (!chat?.isForum) {\n    return undefined;\n  }\n\n  if (threadId === MAIN_THREAD_ID) {\n    if (isReplying || (topics && !topics[GENERAL_TOPIC_ID]?.isClosed)) return undefined;\n    return lang('lng_forum_replies_only');\n  }\n\n  const topic = topics?.[Number(threadId)];\n  if (!topic) {\n    return undefined;\n  }\n\n  if (topic.isClosed && !topic.isOwner && !getHasAdminRight(chat, 'manageTopics')) {\n    return lang('TopicClosedByAdmin');\n  }\n\n  return undefined;\n}\n\nexport function isChatArchived(chat: ApiChat) {\n  return chat.folderId === ARCHIVED_FOLDER_ID;\n}\n\nexport function getCanDeleteChat(chat: ApiChat) {\n  return isChatBasicGroup(chat) || ((isChatSuperGroup(chat) || isChatChannel(chat)) && chat.isCreator);\n}\n\nexport function getFolderDescriptionText(lang: OldLangFn, folder: ApiChatFolder, chatsCount?: number) {\n  const {\n    excludedChatIds, includedChatIds,\n    bots, groups, contacts, nonContacts, channels,\n  } = folder;\n\n  const filters = [bots, groups, contacts, nonContacts, channels];\n\n  // If folder has multiple additive filters or uses include/exclude lists,\n  // we display folder chats count\n  if (\n    chatsCount !== undefined && (\n      Object.values(filters).filter(Boolean).length > 1\n      || (excludedChatIds?.length)\n      || (includedChatIds?.length)\n    )) {\n    return lang('Chats', chatsCount);\n  }\n\n  // Otherwise, we return a short description of a single filter\n  if (bots) {\n    return lang('FilterBots');\n  } else if (groups) {\n    return lang('FilterGroups');\n  } else if (channels) {\n    return lang('FilterChannels');\n  } else if (contacts) {\n    return lang('FilterContacts');\n  } else if (nonContacts) {\n    return lang('FilterNonContacts');\n  } else {\n    return undefined;\n  }\n}\n\nexport function isChatPublic(chat: ApiChat) {\n  return chat.hasUsername;\n}\n\nexport function getOrderedTopics(\n  topics: ApiTopic[], pinnedOrder?: number[], shouldSortByLastMessage = false,\n): ApiTopic[] {\n  if (shouldSortByLastMessage) {\n    return topics.sort((a, b) => b.lastMessageId - a.lastMessageId);\n  } else {\n    const pinned = topics.filter((topic) => topic.isPinned);\n    const ordered = topics\n      .filter((topic) => !topic.isPinned && !topic.isHidden)\n      .sort((a, b) => b.lastMessageId - a.lastMessageId);\n    const hidden = topics.filter((topic) => !topic.isPinned && topic.isHidden)\n      .sort((a, b) => b.lastMessageId - a.lastMessageId);\n\n    const pinnedOrdered = pinnedOrder\n      ? pinnedOrder.map((id) => pinned.find((topic) => topic.id === id)).filter(Boolean) : pinned;\n\n    return [...pinnedOrdered, ...ordered, ...hidden];\n  }\n}\n\nexport function getPeerColorKey(peer: ApiPeer | undefined) {\n  if (peer?.color?.color) return peer.color.color;\n\n  return peer ? getPeerIdDividend(peer.id) % 7 : 0;\n}\n\nexport function getPeerColorCount(peer: ApiPeer) {\n  const key = getPeerColorKey(peer);\n  const global = getGlobal();\n  return global.peerColors?.general[key].colors?.length || 1;\n}\n\nexport function getIsSavedDialog(chatId: string, threadId: ThreadId | undefined, currentUserId: string | undefined) {\n  return chatId === currentUserId && threadId !== MAIN_THREAD_ID;\n}\n\nexport function getGroupStatus(lang: OldLangFn, chat: ApiChat) {\n  const chatTypeString = lang(getChatTypeString(chat));\n  const { membersCount } = chat;\n\n  const global = getGlobal();\n  const isRestricted = selectIsChatRestricted(global, chat.id);\n  if (isRestricted) {\n    return chatTypeString === 'Channel' ? 'channel is inaccessible' : 'group is inaccessible';\n  }\n\n  if (!membersCount) {\n    return chatTypeString;\n  }\n\n  return chatTypeString === 'Channel'\n    ? lang('Subscribers', membersCount, 'i')\n    : lang('Members', membersCount, 'i');\n}\n\nexport function getCustomPeerFromInvite(invite: ApiChatInviteInfo): CustomPeer {\n  const {\n    title, color, isVerified, isFake, isScam,\n  } = invite;\n  return {\n    isCustomPeer: true,\n    title,\n    peerColorId: color,\n    isVerified,\n    fakeType: isFake ? 'fake' : isScam ? 'scam' : undefined,\n  };\n}\n\nexport function getMockPreparedMessageFromResult(botId: string, preparedMessage: ApiPreparedInlineMessage) {\n  const { result } = preparedMessage;\n\n  const inlineButtons = result?.sendMessage?.replyMarkup?.inlineButtons;\n\n  return {\n    chatId: botId,\n    content: result.sendMessage.content,\n    date: getServerTime(),\n    id: 0,\n    isOutgoing: true,\n    viaBotId: botId,\n    inlineButtons,\n  } satisfies ApiMessage;\n}\n","import type { MediaContent } from '../../api/types';\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nimport parseEmojiOnlyString from '../../util/emoji/parseEmojiOnlyString';\n\nexport function getEmojiOnlyCountForMessage(content: MediaContent, groupedId?: string): number | undefined {\n  if (!content.text) return undefined;\n  return (\n    !groupedId\n    && Object.keys(content).length === 1 // Only text is present\n    && !content.text.entities?.some((entity) => entity.type !== ApiMessageEntityTypes.CustomEmoji)\n    && parseEmojiOnlyString(content.text.text)\n  ) || undefined;\n}\n","export * from './users';\nexport * from './chats';\nexport * from './messages';\nexport * from './messageMedia';\nexport * from './middleSearch';\nexport * from './reactions';\nexport * from './bots';\nexport * from './media';\nexport * from './symbols';\nexport * from './misc';\n","import type { ApiStory, ApiVideo } from '../../api/types';\n\nimport { getPhotoMediaHash, getVideoMediaHash } from './messageMedia';\n\ntype StorySize = 'pictogram' | 'preview' | 'full' | 'download';\nconst STORY_ALT_VIDEO_WIDTH = 480;\n\nexport function getStoryMediaHash(\n  story: ApiStory, size: StorySize, isAlt: true,\n): string | undefined;\nexport function getStoryMediaHash(story: ApiStory): string;\nexport function getStoryMediaHash(story: ApiStory, size: StorySize): string;\nexport function getStoryMediaHash(\n  story: ApiStory, size: StorySize = 'preview', isAlt?: boolean,\n) {\n  const isVideo = Boolean(story.content.video);\n\n  if (isVideo) {\n    if (isAlt && !story.content.altVideos) return undefined;\n    const media = isAlt ? getPreferredAlt(story.content.altVideos!) : story.content.video!;\n    return getVideoMediaHash(media, size);\n  }\n\n  return getPhotoMediaHash(story.content.photo!, size);\n}\n\nfunction getPreferredAlt(alts: ApiVideo[]) {\n  const alt = alts.reduce((prev, curr) => (\n    Math.abs((curr.width || 0) - STORY_ALT_VIDEO_WIDTH) < Math.abs((prev.width || 0) - STORY_ALT_VIDEO_WIDTH)\n      ? curr : prev\n  ));\n  return alt;\n}\n\nexport function getStoryKey(chatId: string, storyId: number) {\n  return `story${chatId}-${storyId}`;\n}\n","import type {\n  ApiAttachment,\n  ApiAudio,\n  ApiDimensions,\n  ApiDocument,\n  ApiGame,\n  ApiLocation,\n  ApiMediaExtendedPreview,\n  ApiMessage,\n  ApiMessageSearchType,\n  ApiPhoto,\n  ApiSticker,\n  ApiVideo,\n  ApiVoice,\n  ApiWebDocument,\n  MediaContainer,\n} from '../../api/types';\nimport type { ActiveDownloads } from '../../types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport {\n  IS_OPFS_SUPPORTED,\n  IS_OPUS_SUPPORTED,\n  IS_PROGRESSIVE_SUPPORTED,\n  IS_SAFARI,\n  MAX_BUFFER_SIZE,\n} from '../../util/browser/windowEnvironment';\nimport { getDocumentHasPreview } from '../../components/common/helpers/documentInfo';\nimport { getAttachmentMediaType, matchLinkInMessageText } from './messages';\n\nexport type MediaWithThumbs = ApiPhoto | ApiVideo | ApiDocument | ApiSticker | ApiMediaExtendedPreview;\nexport type DownloadableMedia = ApiPhoto | ApiVideo | ApiDocument | ApiSticker | ApiAudio | ApiVoice | ApiWebDocument;\n\ntype Target =\n  'micro'\n  | 'pictogram'\n  | 'inline'\n  | 'preview'\n  | 'full'\n  | 'download';\n\nexport function getMessageContent(message: MediaContainer) {\n  return message.content;\n}\n\nexport function hasMessageMedia(message: MediaContainer) {\n  return Boolean((\n    getMessagePhoto(message)\n    || getMessageVideo(message)\n    || getMessageDocument(message)\n    || getMessageSticker(message)\n    || getMessageContact(message)\n    || getMessagePollId(message)\n    || getMessageTodo(message)\n    || getMessageAction(message)\n    || getMessageAudio(message)\n    || getMessageVoice(message)\n  ));\n}\n\nexport function canEditMedia(message: MediaContainer) {\n  const {\n    video, ...otherMedia\n  } = message.content;\n\n  return !video?.isRound && !Object.keys(otherMedia).length;\n}\n\nexport function getMessagePhoto(message: MediaContainer) {\n  return message.content.photo;\n}\n\nexport function getMessageActionPhoto(message: MediaContainer) {\n  return message.content.action?.type === 'suggestProfilePhoto' ? message.content.action.photo : undefined;\n}\n\nexport function getMessageVideo(message: MediaContainer) {\n  return message.content.video;\n}\n\nexport function getMessageRoundVideo(message: MediaContainer) {\n  const { video } = message.content;\n\n  return video?.isRound ? video : undefined;\n}\n\nexport function getMessageAction(message: MediaContainer) {\n  return message.content.action;\n}\n\nexport function getMessageAudio(message: MediaContainer) {\n  return message.content.audio;\n}\n\nexport function getMessageVoice(message: MediaContainer) {\n  return message.content.voice;\n}\n\nexport function getMessageSticker(message: MediaContainer) {\n  return message.content.sticker;\n}\n\nexport function getMessageDocument(message: MediaContainer) {\n  return message.content.document;\n}\n\nexport function getMessageWebPageDocument(message: MediaContainer) {\n  return getMessageWebPage(message)?.document;\n}\n\nexport function isDocumentPhoto(document: ApiDocument) {\n  return document.innerMediaType === 'photo';\n}\n\nexport function isDocumentVideo(document: ApiDocument) {\n  return document.innerMediaType === 'video';\n}\n\nexport function isMessageDocumentSticker(message: MediaContainer) {\n  const document = getMessageDocument(message);\n  return document ? document.mimeType === 'image/webp' : undefined;\n}\n\nexport function getMessageContact(message: MediaContainer) {\n  return message.content.contact;\n}\n\nexport function getMessagePollId(message: MediaContainer) {\n  return message.content.pollId;\n}\n\nexport function getMessageTodo(message: MediaContainer) {\n  return message.content.todo;\n}\n\nexport function getMessageInvoice(message: MediaContainer) {\n  return message.content.invoice;\n}\n\nexport function getMessageLocation(message: MediaContainer) {\n  return message.content.location;\n}\n\nexport function getMessageWebPage(message: MediaContainer) {\n  return message.content.webPage;\n}\n\nexport function getMessagePaidMedia(message: MediaContainer) {\n  return message.content.paidMedia;\n}\n\nexport function getMessageWebPagePhoto(message: MediaContainer) {\n  return getMessageWebPage(message)?.photo;\n}\n\nexport function getMessageDocumentPhoto(message: MediaContainer) {\n  const document = getMessageDocument(message);\n  return document && isDocumentPhoto(document) ? document : undefined;\n}\n\nexport function getMessageWebPageVideo(message: MediaContainer) {\n  return getMessageWebPage(message)?.video;\n}\n\nexport function getMessageWebPageAudio(message: MediaContainer) {\n  return getMessageWebPage(message)?.audio;\n}\n\nexport function getMessageDocumentVideo(message: MediaContainer) {\n  const document = getMessageDocument(message);\n  return document && isDocumentVideo(document) ? document : undefined;\n}\n\nexport function getMessageDownloadableMedia(message: MediaContainer): DownloadableMedia | undefined {\n  return (\n    getMessagePhoto(message)\n    || getMessageVideo(message)\n    || getMessageDocument(message)\n    || getMessageSticker(message)\n    || getMessageAudio(message)\n    || getMessageVoice(message)\n    || getMessageWebPagePhoto(message)\n    || getMessageWebPageVideo(message)\n    || getMessageWebPageAudio(message)\n  );\n}\n\nfunction getMessageMediaThumbnail(message: MediaContainer) {\n  const media = getMessagePhoto(message)\n    || getMessageVideo(message)\n    || getMessageDocument(message)\n    || getMessageSticker(message)\n    || getMessageWebPagePhoto(message)\n    || getMessageWebPageVideo(message)\n    || getMessageInvoice(message)?.extendedMedia;\n\n  if (!media) {\n    return undefined;\n  }\n\n  return media.thumbnail;\n}\n\nexport function getMessageMediaThumbDataUri(message: MediaContainer) {\n  return getMessageMediaThumbnail(message)?.dataUri;\n}\n\nexport function getMediaThumbUri(media: MediaWithThumbs) {\n  return media.thumbnail?.dataUri;\n}\n\nexport function getMessageIsSpoiler(message: MediaContainer) {\n  const media = getMessagePhoto(message)\n    || getMessageVideo(message);\n\n  const invoiceMedia = getMessageInvoice(message)?.extendedMedia;\n  return Boolean(invoiceMedia || media?.isSpoiler);\n}\n\nexport function buildStaticMapHash(\n  geo: ApiLocation['geo'],\n  width: number,\n  height: number,\n  zoom: number,\n  scale: number,\n) {\n  const {\n    long, lat, accessHash, accuracyRadius,\n  } = geo;\n\n  // eslint-disable-next-line @stylistic/max-len\n  return `staticMap:${accessHash}?lat=${lat}&long=${long}&w=${width}&h=${height}&zoom=${zoom}&scale=${scale}&accuracyRadius=${accuracyRadius}`;\n}\n\nexport function getMessageMediaHash(\n  message: MediaContainer,\n  target: Target,\n) {\n  const {\n    video, sticker, audio, voice, document,\n  } = message.content;\n\n  const messagePhoto = getMessagePhoto(message) || getMessageWebPagePhoto(message);\n  const actionPhoto = getMessageActionPhoto(message);\n  const messageVideo = video || getMessageWebPageVideo(message);\n  const messageDocument = document || getMessageWebPageDocument(message);\n  const messageAudio = audio || getMessageWebPageAudio(message);\n\n  if (messageVideo) {\n    return getVideoMediaHash(messageVideo, target);\n  }\n\n  if (messagePhoto || actionPhoto) {\n    return getPhotoMediaHash(messagePhoto || actionPhoto!, target, Boolean(actionPhoto));\n  }\n\n  if (messageDocument) {\n    return getDocumentMediaHash(messageDocument, target);\n  }\n\n  if (sticker) {\n    return getStickerMediaHash(sticker, target);\n  }\n\n  if (messageAudio) {\n    return getAudioMediaHash(messageAudio, target);\n  }\n\n  if (voice) {\n    return getVoiceMediaHash(voice, target);\n  }\n\n  return undefined;\n}\n\nexport function getPhotoMediaHash(photo: ApiPhoto | ApiDocument, target: Target, isAction?: boolean) {\n  const base = `photo${photo.id}`;\n  const isVideo = photo.mediaType === 'photo' && photo.isVideo;\n\n  switch (target) {\n    case 'micro':\n    case 'pictogram':\n      return `${base}?size=${isAction ? 'a' : 'm'}`;\n    case 'inline':\n      return !hasMediaLocalBlobUrl(photo) ? `${base}?size=${isAction ? 'b' : 'x'}` : undefined;\n    case 'preview':\n      return `${base}?size=${isAction ? 'b' : 'x'}`;\n    case 'download':\n      return !isVideo ? base : getVideoProfilePhotoMediaHash(photo);\n    case 'full':\n    default:\n      return base;\n  }\n}\n\nexport function getProfilePhotoMediaHash(photo: ApiPhoto) {\n  return `photo${photo.id}?size=c`;\n}\n\nexport function getVideoProfilePhotoMediaHash(photo: ApiPhoto) {\n  if (!photo.isVideo) return undefined;\n  return `photo${photo.id}?size=u`;\n}\n\nexport function getVideoMediaHash(video: ApiVideo | ApiDocument, target: Target) {\n  const base = `document${video.id}`;\n\n  switch (target) {\n    case 'micro':\n    case 'pictogram':\n      return `${base}?size=m`;\n    case 'inline':\n      return !hasMediaLocalBlobUrl(video) ? appendProgressiveQueryParameters(video, base) : undefined;\n    case 'preview':\n      return `${base}?size=x`;\n    case 'download':\n      return `${base}?download`;\n    case 'full':\n    default:\n      return appendProgressiveQueryParameters(video, base);\n  }\n}\n\nexport function getVideoPreviewMediaHash(video: ApiVideo) {\n  return video.hasVideoPreview ? `document${video.id}?size=v` : undefined;\n}\n\nexport function getDocumentMediaHash(document: ApiDocument, target: Target) {\n  const base = `document${document.id}`;\n\n  switch (target) {\n    case 'micro':\n    case 'pictogram':\n    case 'inline':\n    case 'preview':\n      if (!getDocumentHasPreview(document) || hasMediaLocalBlobUrl(document)) {\n        return undefined;\n      }\n\n      return `${base}?size=m`;\n    case 'full':\n    case 'download':\n    default:\n      return base;\n  }\n}\n\nexport function getAudioMediaHash(audio: ApiAudio, target: Target) {\n  const base = `document${audio.id}`;\n\n  switch (target) {\n    case 'micro':\n    case 'pictogram':\n      return getAudioHasCover(audio) ? `${base}?size=m` : undefined;\n    case 'inline':\n      return appendProgressiveQueryParameters(audio, base);\n    case 'download':\n      return `${base}?download`;\n    default:\n      return base;\n  }\n}\n\nexport function getVoiceMediaHash(voice: ApiVoice, target: Target) {\n  const base = `document${voice.id}`;\n\n  switch (target) {\n    case 'micro':\n    case 'pictogram':\n      return undefined;\n    case 'download':\n      return `${base}?download`;\n    case 'inline':\n    default:\n      return base;\n  }\n}\n\nexport function getWebDocumentHash(webDocument?: ApiWebDocument) {\n  if (!webDocument) return undefined;\n  return `webDocument:${webDocument.url}`;\n}\n\nexport function getStickerMediaHash(sticker: ApiSticker, target: Target) {\n  const base = `document${sticker.id}`;\n\n  switch (target) {\n    case 'micro':\n    case 'pictogram':\n      if (!sticker.previewPhotoSizes?.some((size) => size.type === 's')) {\n        return getStickerMediaHash(sticker, 'preview');\n      }\n      return `${base}?size=s`;\n    case 'preview':\n      return `${base}?size=m`;\n    case 'download':\n      return `${base}?download`;\n    case 'inline':\n    default:\n      return base;\n  }\n}\n\nexport function getMediaHash(media: DownloadableMedia, target: Target) {\n  switch (media.mediaType) {\n    case 'photo':\n      return getPhotoMediaHash(media, target);\n    case 'video':\n      return getVideoMediaHash(media, target);\n    case 'document':\n      return getDocumentMediaHash(media, target);\n    case 'audio':\n      return getAudioMediaHash(media, target);\n    case 'voice':\n      return getVoiceMediaHash(media, target);\n    case 'sticker':\n      return getStickerMediaHash(media, target);\n    case 'webDocument':\n      return getWebDocumentHash(media);\n    default:\n      return undefined;\n  }\n}\n\nexport function getGamePreviewPhotoHash(game: ApiGame) {\n  const { photo } = game;\n\n  if (photo) {\n    return `photo${photo.id}?size=x`;\n  }\n\n  return undefined;\n}\n\nexport function getGamePreviewVideoHash(game: ApiGame) {\n  const { document } = game;\n\n  if (document) {\n    return `document${document.id}`;\n  }\n\n  return undefined;\n}\n\nexport function appendProgressiveQueryParameters(media: ApiAudio | ApiVideo | ApiDocument, base: string) {\n  if (IS_PROGRESSIVE_SUPPORTED && IS_SAFARI) {\n    const url = new URL(base, window.location.href);\n    url.searchParams.append('fileSize', media.size.toString());\n    url.searchParams.append('mimeType', media.mimeType);\n    return url.toString();\n  }\n\n  return base;\n}\n\nexport function getAudioHasCover(media: ApiAudio) {\n  return media.thumbnailSizes && media.thumbnailSizes.length > 0;\n}\n\nexport function getMediaFormat(\n  media: DownloadableMedia, target: Target,\n): ApiMediaFormat {\n  const isDocument = media.mediaType === 'document';\n  const hasInnerVideo = isDocument && media.innerMediaType === 'video';\n  const isVideo = media.mediaType === 'video' || hasInnerVideo;\n  const isAudio = media.mediaType === 'audio';\n  const isVoice = media.mediaType === 'voice';\n\n  const size = getMediaFileSize(media) || 0; // Media types that do not have `size` are smaller than `MAX_BUFFER_SIZE`\n\n  if (target === 'download') {\n    if (IS_PROGRESSIVE_SUPPORTED && size > MAX_BUFFER_SIZE && !IS_OPFS_SUPPORTED) {\n      return ApiMediaFormat.DownloadUrl;\n    }\n    return ApiMediaFormat.BlobUrl;\n  }\n\n  if (isVideo && IS_PROGRESSIVE_SUPPORTED && (\n    target === 'full' || target === 'inline'\n  )) {\n    return ApiMediaFormat.Progressive;\n  }\n\n  if (isAudio || isVoice) {\n    // Safari\n    if (isVoice && !IS_OPUS_SUPPORTED) {\n      return ApiMediaFormat.BlobUrl;\n    }\n\n    return ApiMediaFormat.Progressive;\n  }\n\n  return ApiMediaFormat.BlobUrl;\n}\n\nexport function getMediaFileSize(media: DownloadableMedia) {\n  return 'size' in media ? media.size : undefined;\n}\n\nexport function hasMediaLocalBlobUrl(media: ApiPhoto | ApiVideo | ApiDocument) {\n  if ('blobUrl' in media) {\n    return Boolean(media.blobUrl);\n  }\n\n  if ('previewBlobUrl' in media) {\n    return Boolean(media.previewBlobUrl);\n  }\n\n  return false;\n}\n\nexport function getChatMediaMessageIds(\n  messages: Record<number, ApiMessage>, listedIds: number[], isFromSharedMedia = false,\n) {\n  return getMessageContentIds(messages, listedIds, isFromSharedMedia ? 'media' : 'inlineMedia');\n}\n\nexport function getPhotoFullDimensions(photo: Pick<ApiPhoto, 'sizes' | 'thumbnail'>): ApiDimensions | undefined {\n  return (\n    photo.sizes.find((size) => size.type === 'w')\n    || photo.sizes.find((size) => size.type === 'y')\n    || getPhotoInlineDimensions(photo)\n  );\n}\n\nexport function getPhotoInlineDimensions(photo: Pick<ApiPhoto, 'sizes' | 'thumbnail'>): ApiDimensions | undefined {\n  return (\n    photo.sizes.find((size) => size.type === 'x')\n    || photo.sizes.find((size) => size.type === 'm')\n    || photo.sizes.find((size) => size.type === 's')\n    || photo.thumbnail\n  );\n}\n\nexport function getVideoDimensions(video: ApiVideo): ApiDimensions | undefined {\n  if (video.width && video.height) {\n    return video as ApiDimensions;\n  }\n\n  return undefined;\n}\n\nexport function getMediaTransferState(\n  progress?: number, isLoadNeeded = false, isUploading = false,\n) {\n  const isTransferring = isUploading || isLoadNeeded;\n  const transferProgress = Number(progress);\n\n  return {\n    isUploading, isTransferring, transferProgress,\n  };\n}\n\nexport function getMessageContentIds(\n  messages: Record<number, ApiMessage>, messageIds: number[], contentType: ApiMessageSearchType | 'inlineMedia',\n) {\n  let validator: (message: ApiMessage) => unknown;\n\n  switch (contentType) {\n    case 'media':\n      validator = (message: ApiMessage) => {\n        const video = getMessageVideo(message);\n        return getMessagePhoto(message) || (video && !video.isRound && !video.isGif);\n      };\n      break;\n\n    case 'documents':\n      validator = getMessageDocument;\n      break;\n\n    case 'links':\n      validator = (message: ApiMessage) => getMessageWebPage(message) || matchLinkInMessageText(message);\n      break;\n\n    case 'audio':\n      validator = getMessageAudio;\n      break;\n\n    case 'voice':\n      validator = (message: ApiMessage) => {\n        const video = getMessageVideo(message);\n        return getMessageVoice(message) || (video && video.isRound);\n      };\n      break;\n\n    case 'inlineMedia':\n      validator = (message: ApiMessage) => {\n        const video = getMessageVideo(message);\n        const document = getMessageDocument(message);\n        return (\n          getMessagePhoto(message)\n          || (video && !video.isRound && !video.isGif)\n          || (document && isDocumentPhoto(document))\n          || (document && isDocumentVideo(document))\n        );\n      };\n      break;\n\n    default:\n      return [] as Array<number>;\n  }\n\n  return messageIds.reduce((result, messageId) => {\n    if (messages[messageId] && validator(messages[messageId])) {\n      result.push(messageId);\n    }\n\n    return result;\n  }, [] as Array<number>);\n}\n\nexport function getMediaDuration(message: ApiMessage) {\n  const { audio, voice, video } = getMessageContent(message);\n  const media = audio || voice || video || getMessageWebPageVideo(message) || getMessageWebPageAudio(message);\n  if (!media) {\n    return undefined;\n  }\n\n  return media.duration;\n}\n\nexport function canReplaceMessageMedia(message: ApiMessage, attachment: ApiAttachment) {\n  const isPhotoOrVideo = Boolean(getMessagePhoto(message)\n    || getMessageWebPagePhoto(message) || Boolean(getMessageVideo(message)\n      || getMessageWebPageVideo(message)));\n  const isFile = Boolean(getMessageAudio(message)\n    || getMessageVoice(message) || getMessageDocument(message));\n\n  const fileType = getAttachmentMediaType(attachment);\n\n  return (\n    (isPhotoOrVideo && (fileType === 'photo' || fileType === 'video'))\n    || (isFile && (fileType === 'audio' || fileType === 'file'))\n  );\n}\n\nexport function isMediaLoadableInViewer(newMessage: ApiMessage) {\n  if (!newMessage.content) return false;\n  if (newMessage.content.photo) return true;\n  if (newMessage.content.video && !newMessage.content.video.isRound && !newMessage.content.video.isGif) return true;\n  return false;\n}\n\nexport function getMediaFilename(media: DownloadableMedia) {\n  if ('fileName' in media && media.fileName) {\n    return media.fileName;\n  }\n\n  if (media.mediaType === 'sticker') {\n    const extension = media.isLottie ? 'tgs' : media.isVideo ? 'webm' : 'webp';\n    return `${media.id}.${extension}`;\n  }\n\n  if (media.mediaType === 'photo') {\n    return `${media.id}.${media.isVideo ? 'mp4' : 'jpg'}`;\n  }\n\n  if (media.mediaType === 'voice') {\n    return `${media.id}.${IS_OPUS_SUPPORTED ? 'ogg' : 'wav'}`;\n  }\n\n  if ('id' in media && media.id) {\n    return media.id;\n  }\n\n  return `${media.mediaType}-${Math.random().toString(36).slice(4)}`;\n}\n\nexport function getIsDownloading(activeDownloads: ActiveDownloads, media: DownloadableMedia) {\n  const hash = getMediaHash(media, 'download');\n  if (!hash) return false;\n  return Boolean(activeDownloads[hash]);\n}\n\nexport function getTimestampableMedia(message: MediaContainer) {\n  const video = getMessageVideo(message) || getMessageWebPageVideo(message);\n  return (video && !video.isRound && !video.isGif ? video : undefined)\n    || getMessageAudio(message)\n    || getMessageVoice(message);\n}\n","import type { TeactNode } from '../../lib/teact/teact';\n\nimport type {\n  ApiMediaExtendedPreview, ApiMessage, MediaContent, StatefulMediaContent,\n} from '../../api/types';\nimport type { OldLangFn } from '../../hooks/useOldLang';\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nimport { CONTENT_NOT_SUPPORTED } from '../../config';\nimport trimText from '../../util/trimText';\nimport { renderTextWithEntities } from '../../components/common/helpers/renderTextWithEntities';\nimport {\n  getMessageText, getMessageTranscription,\n} from './messages';\n\nconst SPOILER_CHARS = ['⠺', '⠵', '⠞', '⠟'];\nexport const TRUNCATED_SUMMARY_LENGTH = 80;\n\nexport function getMessageSummaryText(\n  lang: OldLangFn,\n  message: ApiMessage,\n  statefulContent: StatefulMediaContent | undefined,\n  noEmoji = false,\n  truncateLength = TRUNCATED_SUMMARY_LENGTH,\n  isExtended = false,\n) {\n  const emoji = !noEmoji && getMessageSummaryEmoji(message);\n  const emojiWithSpace = emoji ? `${emoji} ` : '';\n  const text = trimText(getMessageTextWithSpoilers(message, statefulContent), truncateLength);\n  const description = getMessageSummaryDescription(lang, message, statefulContent, text, isExtended) as string;\n\n  return `${emojiWithSpace}${description}`;\n}\n\nexport function getMessageTextWithSpoilers(message: ApiMessage, statefulContent: StatefulMediaContent | undefined) {\n  const transcription = getMessageTranscription(message);\n\n  const textWithoutTranscription = getMessageText(statefulContent?.story || message)?.text;\n  if (!textWithoutTranscription) {\n    return transcription;\n  }\n\n  const { entities } = message.content.text || {};\n  if (!entities?.length) {\n    return transcription ? `${transcription}\\n${textWithoutTranscription}` : textWithoutTranscription;\n  }\n\n  const text = entities.reduce((accText, {\n    type,\n    offset,\n    length,\n  }) => {\n    if (type !== ApiMessageEntityTypes.Spoiler) {\n      return accText;\n    }\n\n    const spoiler = generateBrailleSpoiler(length);\n\n    return `${accText.substr(0, offset)}${spoiler}${accText.substr(offset + length, accText.length)}`;\n  }, textWithoutTranscription);\n\n  return transcription ? `${transcription}\\n${text}` : text;\n}\n\nexport function getMessageSummaryEmoji(message: ApiMessage) {\n  const {\n    photo,\n    video,\n    audio,\n    voice,\n    document,\n    sticker,\n    pollId,\n    paidMedia,\n    todo,\n  } = message.content;\n\n  if (message.groupedId || photo || paidMedia) {\n    return '🖼';\n  }\n\n  if (video) {\n    return '📹';\n  }\n\n  if (sticker) {\n    return sticker.emoji;\n  }\n\n  if (audio) {\n    return '🎧';\n  }\n\n  if (voice) {\n    return '🎤';\n  }\n\n  if (document) {\n    return '📎';\n  }\n\n  if (pollId) {\n    return '📊';\n  }\n\n  if (todo) {\n    return '📝';\n  }\n\n  return undefined;\n}\n\nexport function getMediaContentTypeDescription(\n  lang: OldLangFn, content: MediaContent, statefulContent: StatefulMediaContent | undefined,\n) {\n  return getSummaryDescription(lang, content, statefulContent);\n}\nexport function getMessageSummaryDescription(\n  lang: OldLangFn,\n  message: ApiMessage,\n  statefulContent: StatefulMediaContent | undefined,\n  truncatedText?: string | TeactNode,\n  isExtended = false,\n) {\n  return getSummaryDescription(lang, message.content, statefulContent, message, truncatedText, isExtended);\n}\nfunction getSummaryDescription(\n  lang: OldLangFn,\n  mediaContent: MediaContent,\n  statefulContent: StatefulMediaContent | undefined,\n  message?: ApiMessage,\n  truncatedText?: string | TeactNode,\n  isExtended = false,\n) {\n  const {\n    text,\n    photo,\n    video,\n    audio,\n    voice,\n    document,\n    sticker,\n    contact,\n    invoice,\n    location,\n    game,\n    storyData,\n    giveaway,\n    giveawayResults,\n    paidMedia,\n    todo,\n  } = mediaContent;\n  const { poll } = statefulContent || {};\n\n  let hasUsedTruncatedText = false;\n  let summary: TeactNode | undefined;\n\n  const boughtExtendedMedia = paidMedia?.isBought && paidMedia.extendedMedia;\n  const previewExtendedMedia = paidMedia && !paidMedia.isBought\n    ? paidMedia.extendedMedia as ApiMediaExtendedPreview[] : undefined;\n\n  const isPaidMediaAlbum = paidMedia && paidMedia.extendedMedia.length > 1;\n  const isPaidMediaSingleVideo = !isPaidMediaAlbum\n    && (boughtExtendedMedia?.[0].video || previewExtendedMedia?.[0].duration);\n  const isPaidMediaSinglePhoto = !isPaidMediaAlbum && !isPaidMediaSingleVideo;\n\n  if (message?.groupedId || isPaidMediaAlbum) {\n    hasUsedTruncatedText = true;\n    summary = truncatedText || lang('lng_in_dlg_album');\n  }\n\n  if (photo || isPaidMediaSinglePhoto) {\n    hasUsedTruncatedText = true;\n    summary = truncatedText || lang('AttachPhoto');\n  }\n\n  if (video || isPaidMediaSingleVideo) {\n    hasUsedTruncatedText = true;\n    summary = truncatedText || lang(video?.isGif ? 'AttachGif' : 'AttachVideo');\n  }\n\n  if (sticker) {\n    summary = lang('AttachSticker').trim();\n  }\n\n  if (audio) {\n    summary = getMessageAudioCaption(mediaContent) || lang('AttachMusic');\n  }\n\n  if (voice) {\n    hasUsedTruncatedText = true;\n    summary = truncatedText || lang('AttachAudio');\n  }\n\n  if (document) {\n    hasUsedTruncatedText = !isExtended;\n    summary = isExtended ? document.fileName : (truncatedText || document.fileName);\n  }\n\n  if (contact) {\n    summary = lang('AttachContact');\n  }\n\n  if (poll) {\n    summary = renderTextWithEntities({\n      text: poll.summary.question.text,\n      entities: poll.summary.question.entities,\n      asPreview: true,\n    });\n  }\n\n  if (invoice) {\n    summary = invoice.extendedMedia ? invoice.title : `${lang('PaymentInvoice')}: ${invoice.description}`;\n  }\n\n  if (text) {\n    if (isExtended && summary && !hasUsedTruncatedText) {\n      (summary as string) += `\\n${truncatedText as string}`;\n    } else {\n      summary = truncatedText as string;\n    }\n  }\n\n  if (location?.mediaType === 'geo' || location?.mediaType === 'venue') {\n    summary = lang('Message.Location');\n  }\n\n  if (location?.mediaType === 'geoLive') {\n    summary = lang('Message.LiveLocation');\n  }\n\n  if (game) {\n    summary = `🎮 ${game.title}`;\n  }\n\n  if (giveaway) {\n    summary = lang('BoostingGiveawayChannelStarted');\n  }\n\n  if (giveawayResults) {\n    summary = lang('Message.GiveawayEndedWinners', giveawayResults.winnersCount);\n  }\n\n  if (storyData) {\n    summary = truncatedText || (message ? lang('ForwardedStory') : lang('Chat.ReplyStory'));\n  }\n\n  if (todo) {\n    summary = lang('Chat.Todo.Message.Title');\n  }\n\n  return summary || CONTENT_NOT_SUPPORTED;\n}\n\nexport function generateBrailleSpoiler(length: number) {\n  return new Array(length)\n    .fill(undefined)\n    .map(() => SPOILER_CHARS[Math.floor(Math.random() * SPOILER_CHARS.length)])\n    .join('');\n}\n\nfunction getMessageAudioCaption(mediaContent: MediaContent) {\n  const {\n    audio,\n    text,\n  } = mediaContent;\n\n  return (audio && [audio.title, audio.performer].filter(Boolean)\n    .join(' — ')) || (text?.text);\n}\n","import type { TeactNode } from '../../lib/teact/teact';\n\nimport type {\n  ApiAttachment,\n  ApiMessage,\n  ApiMessageEntityTextUrl,\n  ApiPeer,\n  ApiStory,\n  ApiTypeStory,\n} from '../../api/types';\nimport type {\n  ApiPoll, MediaContainer, StatefulMediaContent,\n} from '../../api/types/messages';\nimport type { ThreadId } from '../../types';\nimport type { LangFn } from '../../util/localization';\nimport type { GlobalState } from '../types';\nimport { ApiMessageEntityTypes, MAIN_THREAD_ID } from '../../api/types';\n\nimport {\n  CONTENT_NOT_SUPPORTED,\n  LOTTIE_STICKER_MIME_TYPE,\n  RE_LINK_TEMPLATE,\n  SERVICE_NOTIFICATIONS_USER_ID,\n  SUPPORTED_AUDIO_CONTENT_TYPES,\n  SUPPORTED_PHOTO_CONTENT_TYPES,\n  SUPPORTED_VIDEO_CONTENT_TYPES,\n  TME_LINK_PREFIX,\n  VERIFICATION_CODES_USER_ID,\n  VIDEO_STICKER_MIME_TYPE,\n} from '../../config';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { getCleanPeerId, isUserId } from '../../util/entities/ids';\nimport { areSortedArraysIntersecting, unique } from '../../util/iteratees';\nimport { isLocalMessageId } from '../../util/keys/messageKey';\nimport { getServerTime } from '../../util/serverTime';\nimport { getGlobal } from '../index';\nimport { getMainUsername } from './users';\n\nconst RE_LINK = new RegExp(RE_LINK_TEMPLATE, 'i');\n\nexport function getMessageHtmlId(messageId: number, index?: number) {\n  const parts = ['message', messageId.toString().replace('.', '-'), index].filter(Boolean);\n  return parts.join('-');\n}\n\nexport function getMessageOriginalId(message: ApiMessage) {\n  return message.previousLocalId || message.id;\n}\n\nexport function getMessageTranscription(message: ApiMessage) {\n  const { transcriptionId } = message;\n  const global = getGlobal();\n\n  return transcriptionId && global.transcriptions[transcriptionId]?.text;\n}\n\nexport function hasMessageText(message: MediaContainer) {\n  const {\n    action, text, sticker, photo, video, audio, voice, document, pollId, todo,\n    webPage, contact, invoice, location, game, storyData, giveaway, giveawayResults, paidMedia,\n  } = message.content;\n\n  return Boolean(text) || !(\n    sticker || photo || video || audio || voice || document || contact || pollId || todo || webPage\n    || invoice || location || game || storyData || giveaway || giveawayResults\n    || paidMedia || action?.type === 'phoneCall'\n  );\n}\n\nexport function getMessageStatefulContent(global: GlobalState, message: ApiMessage): StatefulMediaContent {\n  const poll = message.content.pollId ? global.messages.pollById[message.content.pollId] : undefined;\n\n  const { peerId: storyPeerId, id: storyId } = message.content.storyData || {};\n  const story = storyId && storyPeerId ? global.stories.byPeerId[storyPeerId]?.byId[storyId] : undefined;\n\n  return groupStatefulContent({ poll, story });\n}\n\nexport function groupStatefulContent({\n  poll,\n  story,\n}: {\n  poll?: ApiPoll;\n  story?: ApiTypeStory;\n}) {\n  return {\n    poll,\n    story: story && 'content' in story ? story : undefined,\n  };\n}\n\nexport function getMessageText(message: MediaContainer) {\n  return hasMessageText(message) ? message.content.text || { text: CONTENT_NOT_SUPPORTED } : undefined;\n}\n\nexport function getMessageCustomShape(message: ApiMessage): boolean {\n  const {\n    text, sticker, photo, video, audio, voice,\n    document, pollId, webPage, contact, action,\n    game, invoice, location, storyData,\n  } = message.content;\n\n  if (sticker || (video?.isRound)) {\n    return true;\n  }\n\n  if (!text || photo || video || audio || voice || document || pollId || webPage || contact || action || game || invoice\n    || location || storyData) {\n    return false;\n  }\n\n  const hasOtherFormatting = text?.entities?.some((entity) => entity.type !== ApiMessageEntityTypes.CustomEmoji);\n\n  return Boolean(message.emojiOnlyCount && !hasOtherFormatting);\n}\n\nexport function getMessageSingleRegularEmoji(message: ApiMessage) {\n  const { text } = message.content;\n\n  if (text?.entities?.length || message.emojiOnlyCount !== 1) {\n    return undefined;\n  }\n\n  return text!.text;\n}\n\nexport function getMessageSingleCustomEmoji(message: ApiMessage): string | undefined {\n  const { text } = message.content;\n\n  if (text?.entities?.length !== 1\n    || text.entities[0].type !== ApiMessageEntityTypes.CustomEmoji\n    || message.emojiOnlyCount !== 1) {\n    return undefined;\n  }\n\n  return text.entities[0].documentId;\n}\n\nexport function getFirstLinkInMessage(message: ApiMessage) {\n  const { text } = message.content;\n\n  let match: RegExpMatchArray | null | undefined;\n  if (text?.entities) {\n    const firstTextUrl = text.entities.find((entity): entity is ApiMessageEntityTextUrl => (\n      entity.type === ApiMessageEntityTypes.TextUrl\n    ));\n    if (firstTextUrl) {\n      match = firstTextUrl.url.match(RE_LINK);\n    }\n\n    if (!match) {\n      const firstUrl = text.entities.find((entity) => entity.type === ApiMessageEntityTypes.Url);\n      if (firstUrl) {\n        const { offset, length } = firstUrl;\n        match = text.text.substring(offset, offset + length).match(RE_LINK);\n      }\n    }\n  }\n\n  if (!match && text) {\n    match = text.text.match(RE_LINK);\n  }\n\n  if (!match) {\n    return undefined;\n  }\n\n  return {\n    url: match[0],\n    domain: match[3],\n  };\n}\n\nexport function matchLinkInMessageText(message: ApiMessage) {\n  const { text } = message.content;\n  const match = text && text.text.match(RE_LINK);\n\n  if (!match) {\n    return undefined;\n  }\n\n  return {\n    url: match[0],\n    domain: match[3],\n  };\n}\n\nexport function isOwnMessage(message: ApiMessage) {\n  return message.isOutgoing;\n}\n\nexport function isReplyToMessage(message: ApiMessage) {\n  return Boolean(message.replyInfo?.type === 'message');\n}\n\nexport function isForwardedMessage(message: ApiMessage) {\n  return Boolean(message.forwardInfo || message.content.storyData);\n}\n\nexport function isActionMessage(message: ApiMessage) {\n  return Boolean(message.content.action);\n}\n\nexport function isServiceNotificationMessage(message: ApiMessage) {\n  return message.chatId === SERVICE_NOTIFICATIONS_USER_ID && Math.round(message.id) !== message.id;\n}\n\nexport function isAnonymousOwnMessage(message: ApiMessage) {\n  return Boolean(message.senderId) && !isUserId(message.senderId) && isOwnMessage(message);\n}\n\nexport function getSendingState(message: ApiMessage) {\n  if (!message.sendingState) {\n    return 'succeeded';\n  }\n\n  return message.sendingState === 'messageSendingStateFailed' ? 'failed' : 'pending';\n}\n\nexport function isMessageLocal(message: ApiMessage) {\n  return isLocalMessageId(message.id);\n}\n\nexport function isMessageFailed(message: ApiMessage) {\n  return message.sendingState === 'messageSendingStateFailed';\n}\n\nexport function isHistoryClearMessage(message: ApiMessage) {\n  return message.content.action && message.content.action.type === 'historyClear';\n}\n\nexport function isGeoLiveExpired(message: ApiMessage) {\n  const { location } = message.content;\n  if (location?.mediaType !== 'geoLive') return false;\n  return getServerTime() - (message.date || 0) >= location.period;\n}\n\nexport function isMessageTranslatable(message: ApiMessage, allowOutgoing?: boolean) {\n  const { text, game } = message.content;\n\n  const isLocal = isMessageLocal(message);\n  const isServiceNotification = isServiceNotificationMessage(message);\n  const isAction = isActionMessage(message);\n\n  return Boolean(text?.text.length && !message.emojiOnlyCount && !game && (allowOutgoing || !message.isOutgoing)\n    && !isLocal && !isServiceNotification && !isAction && !message.isScheduled);\n}\n\nexport function getMessageSingleInlineButton(message: ApiMessage) {\n  return message.inlineButtons?.length === 1\n    && message.inlineButtons[0].length === 1\n    && message.inlineButtons[0][0];\n}\n\nexport function orderHistoryIds(listedIds: number[]) {\n  return listedIds.sort((a, b) => a - b);\n}\n\nexport function orderPinnedIds(pinnedIds: number[]) {\n  return pinnedIds.sort((a, b) => b - a);\n}\n\nexport function mergeIdRanges(ranges: number[][], idsUpdate: number[]): number[][] {\n  let hasIntersection = false;\n  let newOutlyingLists = ranges.length ? ranges.map((list) => {\n    if (areSortedArraysIntersecting(list, idsUpdate) && !hasIntersection) {\n      hasIntersection = true;\n      return orderHistoryIds(unique(list.concat(idsUpdate)));\n    }\n    return list;\n  }) : [idsUpdate];\n\n  if (!hasIntersection) {\n    newOutlyingLists = newOutlyingLists.concat([idsUpdate]);\n  }\n\n  newOutlyingLists.sort((a, b) => a[0] - b[0]);\n\n  let length = newOutlyingLists.length;\n  for (let i = 0; i < length; i++) {\n    const array = newOutlyingLists[i];\n    const prevArray = newOutlyingLists[i - 1];\n\n    if (prevArray && (prevArray.includes(array[0]) || prevArray.includes(array[0] - 1))) {\n      newOutlyingLists[i - 1] = orderHistoryIds(unique(array.concat(prevArray)));\n      newOutlyingLists.splice(i, 1);\n\n      length--;\n      i--;\n    }\n  }\n\n  return newOutlyingLists;\n}\n\nexport function extractMessageText(message: ApiMessage | ApiStory, inChatList = false) {\n  const contentText = message.content.text;\n  if (!contentText) return undefined;\n\n  const { text } = contentText;\n  let { entities } = contentText;\n\n  if (text && 'chatId' in message) {\n    if (message.chatId === SERVICE_NOTIFICATIONS_USER_ID) {\n      const authCode = text.match(/^\\D*([\\d-]{5,7})\\D/)?.[1];\n      if (authCode) {\n        entities = [\n          ...entities || [],\n          {\n            type: inChatList ? ApiMessageEntityTypes.Spoiler : ApiMessageEntityTypes.Code,\n            offset: text.indexOf(authCode),\n            length: authCode.length,\n          },\n        ];\n        entities.sort((a, b) => (a.offset > b.offset ? 1 : -1));\n      }\n    }\n\n    if (inChatList && message.chatId === VERIFICATION_CODES_USER_ID && entities) {\n      // Wrap code entities in spoiler\n      const hasCodeEntities = entities.some((entity) => entity.type === ApiMessageEntityTypes.Code);\n      if (hasCodeEntities) {\n        const oldEntities = entities;\n        entities = [];\n\n        for (let i = 0; i < oldEntities.length; i++) {\n          const entity = oldEntities[i];\n          if (entity.type === ApiMessageEntityTypes.Code) {\n            entities.push({\n              type: ApiMessageEntityTypes.Spoiler,\n              offset: entity.offset,\n              length: entity.length,\n            });\n          }\n          entities.push(entity);\n        }\n      }\n    }\n  }\n\n  return { text, entities };\n}\n\nexport function isExpiredMessage(message: ApiMessage) {\n  return message.content.action?.type === 'expired';\n}\n\nexport function hasMessageTtl(message: ApiMessage) {\n  return message.content?.ttlSeconds !== undefined;\n}\n\nexport function getAttachmentMediaType(attachment: ApiAttachment) {\n  if (SUPPORTED_AUDIO_CONTENT_TYPES.has(attachment.mimeType)) {\n    return 'audio';\n  }\n\n  if (attachment.shouldSendAsFile) return 'file';\n\n  if (SUPPORTED_PHOTO_CONTENT_TYPES.has(attachment.mimeType)) {\n    return 'photo';\n  }\n\n  if (SUPPORTED_VIDEO_CONTENT_TYPES.has(attachment.mimeType)) {\n    return 'video';\n  }\n\n  return 'file';\n}\n\nexport function isUploadingFileSticker(attachment: ApiAttachment) {\n  return attachment ? (attachment.mimeType === 'image/webp' || attachment.mimeType === LOTTIE_STICKER_MIME_TYPE\n    || attachment.mimeType === VIDEO_STICKER_MIME_TYPE) : undefined;\n}\n\nexport function getMessageLink(peer: ApiPeer, topicId?: ThreadId, messageId?: number) {\n  const chatUsername = getMainUsername(peer);\n\n  const normalizedId = getCleanPeerId(peer.id);\n\n  const chatPart = chatUsername || `c/${normalizedId}`;\n  const topicPart = topicId && topicId !== MAIN_THREAD_ID ? `/${topicId}` : '';\n  const messagePart = messageId ? `/${messageId}` : '';\n  return `${TME_LINK_PREFIX}${chatPart}${topicPart}${messagePart}`;\n}\n\nexport function splitMessagesForForwarding(messages: ApiMessage[], limit: number): ApiMessage[][] {\n  const result: ApiMessage[][] = [];\n  let currentArr: ApiMessage[] = [];\n\n  // Group messages by `groupedId`\n  messages.reduce<ApiMessage[][]>((acc, message) => {\n    const lastGroup = acc[acc.length - 1];\n    if (message.groupedId && lastGroup?.[0]?.groupedId === message.groupedId) {\n      lastGroup.push(message);\n      return acc;\n    }\n\n    acc.push([message]);\n    return acc;\n  }, []).forEach((batch) => {\n    // Fit them into `limit` size\n    if (currentArr.length + batch.length > limit) {\n      result.push(currentArr);\n      currentArr = [];\n    }\n\n    currentArr.push(...batch);\n  });\n\n  if (currentArr.length) {\n    result.push(currentArr);\n  }\n\n  return result;\n}\n\nexport interface SuggestedChangesInfo {\n  isNewText: boolean;\n  isNewPrice: boolean;\n  isNewTime: boolean;\n  isNewMedia: boolean;\n}\n\nexport function getSuggestedChangesInfo(\n  message: ApiMessage,\n  originalMessage?: ApiMessage,\n): SuggestedChangesInfo | undefined {\n  if (!message.suggestedPostInfo || message.replyInfo?.type !== 'message'\n    || !message.replyInfo?.replyToMsgId || !originalMessage) {\n    return undefined;\n  }\n\n  if (!originalMessage.suggestedPostInfo) {\n    return undefined;\n  }\n\n  const original = originalMessage.suggestedPostInfo;\n  const suggested = message.suggestedPostInfo;\n\n  const originalContent = originalMessage.content;\n  const suggestedContent = message.content;\n  const { text: originalText, ...originalMediaContent } = originalContent;\n  const { text: suggestedText, ...suggestedMediaContent } = suggestedContent;\n\n  const isNewText = !areDeepEqual(originalText, suggestedText);\n  const isNewMedia = !areDeepEqual(originalMediaContent, suggestedMediaContent);\n\n  const originalPrice = original.price?.amount;\n  const suggestedPrice = suggested.price?.amount;\n  const isNewPrice = originalPrice !== suggestedPrice;\n\n  const originalTime = original.scheduleDate;\n  const suggestedTime = suggested.scheduleDate;\n  const isNewTime = originalTime !== suggestedTime;\n\n  if (!isNewText && !isNewPrice && !isNewTime && !isNewMedia) {\n    return undefined;\n  }\n\n  return {\n    isNewText,\n    isNewPrice,\n    isNewTime,\n    isNewMedia,\n  };\n}\n\nexport function getSuggestedChangesActionText(\n  lang: LangFn,\n  message: ApiMessage,\n  originalMessage?: ApiMessage,\n  isOutgoing?: boolean,\n  senderLink?: TeactNode,\n): TeactNode | undefined {\n  const changesInfo = getSuggestedChangesInfo(message, originalMessage);\n  if (!changesInfo) {\n    return undefined;\n  }\n\n  const changesParts: string[] = [];\n  if (changesInfo.isNewPrice) changesParts.push(lang('ActionSuggestedChangesPrice'));\n  if (changesInfo.isNewTime) changesParts.push(lang('ActionSuggestedChangesTime'));\n  if (changesInfo.isNewText) changesParts.push(lang('ActionSuggestedChangesText'));\n  if (changesInfo.isNewMedia) changesParts.push(lang('ActionSuggestedChangesMedia'));\n\n  const changesText = lang.conjunction(changesParts);\n\n  const langKey = isOutgoing ? 'ActionSuggestedChangesOutgoing' : 'ActionSuggestedChangesIncoming';\n  return lang(langKey, {\n    changes: changesText,\n    user: senderLink,\n  }, {\n    withNodes: true,\n    withMarkdown: true,\n  });\n}\n","import type { ThreadId } from '../../types';\n\nexport function buildChatThreadKey(chatId: string, threadId: ThreadId) {\n  return `${chatId}_${threadId}`;\n}\n","import type {\n  ApiInputPrivacyRules,\n  BotsPrivacyType,\n  PrivacyVisibility,\n} from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_LIMITS } from '../../config';\nimport { isUserId } from '../../util/entities/ids';\nimport { partition } from '../../util/iteratees';\nimport { clamp } from '../../util/math';\nimport { getAccountsInfo } from '../../util/multiaccount';\nimport { getGlobal } from '..';\n\nexport function buildApiInputPrivacyRules(global: GlobalState, {\n  visibility,\n  isUnspecified,\n  allowedIds,\n  blockedIds,\n  shouldAllowPremium,\n  botsPrivacy,\n}: {\n  visibility: PrivacyVisibility;\n  isUnspecified?: boolean;\n  allowedIds: string[];\n  blockedIds: string[];\n  shouldAllowPremium?: true;\n  botsPrivacy: BotsPrivacyType;\n}): ApiInputPrivacyRules {\n  const {\n    users: { byId: usersById },\n    chats: { byId: chatsById },\n  } = global;\n\n  const [allowedUserIds, allowedChatIds] = partition(allowedIds, isUserId);\n  const [blockedUserIds, blockedChatIds] = partition(blockedIds, isUserId);\n\n  const rules: ApiInputPrivacyRules = {\n    visibility,\n    isUnspecified,\n    allowedUsers: allowedUserIds.map((userId) => usersById[userId]).filter(Boolean),\n    allowedChats: allowedChatIds.map((chatId) => chatsById[chatId]).filter(Boolean),\n    blockedUsers: blockedUserIds.map((userId) => usersById[userId]).filter(Boolean),\n    blockedChats: blockedChatIds.map((chatId) => chatsById[chatId]).filter(Boolean),\n    shouldAllowPremium,\n    botsPrivacy,\n  };\n\n  return rules;\n}\n\nexport function getCurrentMaxAccountCount() {\n  const global = getGlobal();\n  const limit = global.appConfig?.limits?.moreAccounts || DEFAULT_LIMITS.moreAccounts;\n  const accounts = getAccountsInfo();\n  const premiumCount = Object.values(accounts).filter((account) => account.isPremium).length;\n  // Each premium account increases the base limit by 1, up to the maximum limit.\n  const currentMaxCount = limit[0] + premiumCount;\n  return clamp(currentMaxCount, limit[0], limit[1]);\n}\n\nexport function getCurrentProdAccountCount() {\n  return Object.values(getAccountsInfo()).filter((account) => !account.isTest).length;\n}\n","import type {\n  ApiChat,\n  ApiNotifyPeerType,\n  ApiPeer,\n  ApiPeerNotifySettings,\n} from '../../api/types';\n\nimport { isUserId } from '../../util/entities/ids';\nimport { omitUndefined } from '../../util/iteratees';\nimport { getServerTime } from '../../util/serverTime';\nimport { isChatChannel } from './chats';\n\nexport function getIsChatMuted(\n  chat: ApiChat,\n  notifyDefaults?: Record<ApiNotifyPeerType, ApiPeerNotifySettings>,\n  notifyException?: ApiPeerNotifySettings,\n) {\n  const settings = getChatNotifySettings(chat, notifyDefaults, notifyException);\n  if (!settings?.mutedUntil) return false;\n  return getServerTime() < settings.mutedUntil;\n}\n\nexport function getIsChatSilent(\n  chat: ApiChat,\n  notifyDefaults?: Record<ApiNotifyPeerType, ApiPeerNotifySettings>,\n  notifyException?: ApiPeerNotifySettings,\n) {\n  const settings = getChatNotifySettings(chat, notifyDefaults, notifyException);\n  if (!settings) return false;\n  return !settings.hasSound;\n}\n\nexport function getShouldShowMessagePreview(\n  chat: ApiChat,\n  notifyDefaults?: Record<ApiNotifyPeerType, ApiPeerNotifySettings>,\n  notifyException?: ApiPeerNotifySettings,\n) {\n  const settings = getChatNotifySettings(chat, notifyDefaults, notifyException);\n  return Boolean(settings?.shouldShowPreviews);\n}\n\nexport function getChatNotifySettings(\n  chat: ApiChat,\n  notifyDefaults?: Record<ApiNotifyPeerType, ApiPeerNotifySettings>,\n  notifyException?: ApiPeerNotifySettings,\n): ApiPeerNotifySettings | undefined {\n  const defaults = notifyDefaults?.[getNotificationPeerType(chat)];\n\n  if (!notifyException && !defaults) {\n    return undefined;\n  }\n\n  return {\n    ...defaults,\n    ...(notifyException && omitUndefined(notifyException)),\n  };\n}\n\nexport function getNotificationPeerType(peer: ApiPeer): ApiNotifyPeerType {\n  if (isUserId(peer.id)) {\n    return 'users';\n  }\n\n  const chat = peer as ApiChat;\n  return isChatChannel(chat) ? 'channels' : 'groups';\n}\n","import type { ApiChat, ApiPeer, ApiUser } from '../../api/types';\nimport type { OldLangFn } from '../../hooks/useOldLang';\nimport type { CustomPeer } from '../../types';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../config';\nimport { isUserId } from '../../util/entities/ids';\nimport { getTranslationFn, type LangFn } from '../../util/localization';\nimport { prepareSearchWordsForNeedle } from '../../util/searchWords';\nimport { selectChat, selectPeer, selectUser } from '../selectors';\nimport { getGlobal } from '..';\nimport { getChatTitle } from './chats';\nimport { getUserFirstOrLastName, getUserFullName } from './users';\n\nexport function isApiPeerChat(peer: ApiPeer): peer is ApiChat {\n  return 'title' in peer;\n}\n\nexport function isApiPeerUser(peer: ApiPeer): peer is ApiUser {\n  return !isApiPeerChat(peer);\n}\n\nexport function filterPeersByQuery({\n  ids,\n  query,\n  type = 'peer',\n}: {\n  ids: string[];\n  query: string | undefined;\n  type?: 'chat' | 'user' | 'peer';\n}) {\n  if (!query) {\n    return ids;\n  }\n  const global = getGlobal();\n  const lang = getTranslationFn();\n\n  const searchWords = prepareSearchWordsForNeedle(query);\n\n  const selectorFn = type === 'chat' ? selectChat : type === 'user' ? selectUser : selectPeer;\n\n  return ids.filter((id) => {\n    const peer = selectorFn(global, id);\n    if (!peer) {\n      return false;\n    }\n\n    const localizedTitle = isApiPeerChat(peer)\n      ? getChatTitle(lang, peer)\n      : id === global.currentUserId ? lang('SavedMessages') : undefined;\n    const isFoundInLocalized = localizedTitle ? searchWords(localizedTitle) : undefined;\n\n    const name = getPeerFullTitle(lang, peer);\n\n    return isFoundInLocalized\n      || (name && searchWords(name))\n      || Boolean(peer.usernames?.find(({ username }) => searchWords(username)));\n  });\n}\n\nexport function getPeerTypeKey(peer: ApiPeer) {\n  if (isApiPeerChat(peer)) {\n    if (peer.type === 'chatTypeBasicGroup' || peer.type === 'chatTypeSuperGroup') {\n      return 'ChatList.PeerTypeGroup';\n    }\n\n    if (peer.type === 'chatTypeChannel') {\n      return 'ChatList.PeerTypeChannel';\n    }\n\n    if (peer.type === 'chatTypePrivate') {\n      return 'ChatList.PeerTypeNonContact';\n    }\n\n    return undefined;\n  }\n\n  if (peer.id === SERVICE_NOTIFICATIONS_USER_ID) {\n    return 'ServiceNotifications';\n  }\n\n  if (peer.isSupport) {\n    return 'SupportStatus';\n  }\n\n  if (peer.type && peer.type === 'userTypeBot') {\n    return 'ChatList.PeerTypeBot';\n  }\n\n  if (peer.isContact) {\n    return 'ChatList.PeerTypeContact';\n  }\n\n  return 'ChatList.PeerTypeNonContactUser';\n}\n\nexport function getPeerTitle(lang: OldLangFn | LangFn, peer: ApiPeer | CustomPeer) {\n  if (!peer) return undefined;\n  if ('isCustomPeer' in peer) {\n    // TODO: Remove any after full migration to new lang\n    return peer.titleKey ? lang(peer.titleKey as any) : peer.title;\n  }\n  return isApiPeerUser(peer) ? getUserFirstOrLastName(peer) : getChatTitle(lang, peer);\n}\n\nexport function getPeerFullTitle(lang: OldLangFn | LangFn, peer: ApiPeer | CustomPeer) {\n  if (!peer) return undefined;\n  if ('isCustomPeer' in peer) {\n    // TODO: Remove any after full migration to new lang\n    return peer.titleKey ? lang(peer.titleKey as any) : peer.title;\n  }\n  return isApiPeerUser(peer) ? getUserFullName(peer) : getChatTitle(lang, peer);\n}\n\nexport function getMessageSenderName(lang: OldLangFn, chatId: string, sender: ApiPeer) {\n  // Hide sender name for private chats\n  if (isUserId(chatId)) return undefined;\n\n  if (isApiPeerChat(sender)) {\n    if (chatId === sender.id) return undefined;\n\n    return sender.title;\n  }\n\n  if (sender.isSelf) {\n    return lang('FromYou');\n  }\n\n  return getPeerTitle(lang, sender);\n}\n","import type {\n  ApiAvailableReaction,\n  ApiChatReactions,\n  ApiMessage,\n  ApiReactionCount,\n  ApiReactionKey,\n  ApiReactions,\n  ApiReactionWithPaid,\n} from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function getMessageRecentReaction(message: Partial<ApiMessage>) {\n  return message.isOutgoing ? message.reactions?.recentReactions?.[0] : undefined;\n}\nexport function checkIfHasUnreadReactions(global: GlobalState, reactions: ApiReactions) {\n  const { currentUserId } = global;\n  return reactions?.recentReactions?.some(\n    ({ isUnread, isOwn, peerId }) => isUnread && !isOwn && currentUserId !== peerId,\n  );\n}\n\nexport function areReactionsEmpty(reactions: ApiReactions) {\n  return !reactions.results.some(({ count, localAmount }) => count || localAmount);\n}\n\nexport function getReactionKey(reaction: ApiReactionWithPaid): ApiReactionKey {\n  switch (reaction.type) {\n    case 'emoji':\n      return `emoji-${reaction.emoticon}`;\n    case 'custom':\n      return `document-${reaction.documentId}`;\n    case 'paid':\n      return 'paid';\n    default: {\n      // Legacy reactions\n      const uniqueValue = (reaction as any).emoticon || (reaction as any).documentId;\n      return `unsupported-${uniqueValue}`;\n    }\n  }\n}\n\nexport function isSameReaction(first?: ApiReactionWithPaid, second?: ApiReactionWithPaid) {\n  if (first === second) {\n    return true;\n  }\n\n  if (!first || !second) {\n    return false;\n  }\n\n  return getReactionKey(first) === getReactionKey(second);\n}\n\nexport function canSendReaction(reaction: ApiReactionWithPaid, chatReactions: ApiChatReactions) {\n  if (chatReactions.type === 'all') {\n    return reaction.type === 'emoji' || chatReactions.areCustomAllowed;\n  }\n\n  if (chatReactions.type === 'some') {\n    return chatReactions.allowed.some((r) => isSameReaction(r, reaction));\n  }\n\n  return false;\n}\n\nexport function sortReactions<T extends ApiAvailableReaction | ApiReactionWithPaid>(\n  reactions: T[],\n  topReactions?: ApiReactionWithPaid[],\n): T[] {\n  return reactions.slice().sort((left, right) => {\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion -- TS Bug?\n    const reactionOne = left ? ('reaction' in left ? left.reaction : left as ApiReactionWithPaid) : undefined;\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion -- TS Bug?\n    const reactionTwo = right ? ('reaction' in right ? right.reaction : right as ApiReactionWithPaid) : undefined;\n\n    if (reactionOne?.type === 'paid') return -1;\n    if (reactionTwo?.type === 'paid') return 1;\n\n    const indexOne = topReactions?.findIndex((reaction) => isSameReaction(reaction, reactionOne)) || 0;\n    const indexTwo = topReactions?.findIndex((reaction) => isSameReaction(reaction, reactionTwo)) || 0;\n    return (\n      (indexOne > -1 ? indexOne : Infinity) - (indexTwo > -1 ? indexTwo : Infinity)\n    );\n  });\n}\n\nexport function getUserReactions(message: ApiMessage): ApiReactionWithPaid[] {\n  return message.reactions?.results?.filter((r): r is Required<ApiReactionCount> => isReactionChosen(r))\n    .sort((a, b) => a.chosenOrder - b.chosenOrder)\n    .map((r) => r.reaction) || [];\n}\n\nexport function isReactionChosen(reaction: ApiReactionCount) {\n  return reaction.chosenOrder !== undefined;\n}\n\nexport function updateReactionCount(reactionCount: ApiReactionCount[], newReactions: ApiReactionWithPaid[]) {\n  const results = reactionCount.map((current) => (\n    isReactionChosen(current) ? {\n      ...current,\n      chosenOrder: undefined,\n      count: current.count - 1,\n    } : current\n  )).filter(({ count }) => count > 0);\n\n  newReactions.forEach((reaction, i) => {\n    const existingIndex = results.findIndex((r) => isSameReaction(r.reaction, reaction));\n    if (existingIndex > -1) {\n      results[existingIndex] = {\n        ...results[existingIndex],\n        chosenOrder: i,\n        count: results[existingIndex].count + 1,\n      };\n    } else {\n      results.push({\n        reaction,\n        chosenOrder: i,\n        count: 1,\n      });\n    }\n  });\n\n  return results;\n}\n\nexport function addPaidReaction(\n  reactionCount: ApiReactionCount[], count: number, isAnonymous?: boolean, peerId?: string,\n): ApiReactionCount[] {\n  const results: ApiReactionCount[] = [];\n  const hasPaid = reactionCount.some((current) => current.reaction.type === 'paid');\n  if (hasPaid) {\n    reactionCount.forEach((current) => {\n      if (current.reaction.type === 'paid') {\n        results.push({\n          ...current,\n          localAmount: (current.localAmount || 0) + count,\n          chosenOrder: -1,\n          localIsPrivate: isAnonymous !== undefined ? isAnonymous : current.localIsPrivate,\n          localPeerId: peerId || current.localPeerId,\n          localPreviousChosenOrder: current.chosenOrder,\n        });\n        return;\n      }\n\n      results.push(current);\n    });\n\n    return results;\n  }\n\n  return [\n    {\n      reaction: { type: 'paid' },\n      count: 0,\n      chosenOrder: -1,\n      localAmount: count,\n      localIsPrivate: isAnonymous,\n      localPeerId: peerId,\n    },\n    ...reactionCount,\n  ];\n}\n","import type { ApiMessage, ApiMessageReplyInfo, ApiStoryReplyInfo } from '../../api/types';\n\nexport function getMessageReplyInfo(message: ApiMessage): ApiMessageReplyInfo | undefined {\n  const { replyInfo } = message;\n  if (!replyInfo || replyInfo.type !== 'message') return undefined;\n  return replyInfo;\n}\n\nexport function getStoryReplyInfo(message: ApiMessage): ApiStoryReplyInfo | undefined {\n  const { replyInfo } = message;\n  if (!replyInfo || replyInfo.type !== 'story') return undefined;\n  return replyInfo;\n}\n","import type { ApiSavedStarGift } from '../../api/types';\n\nexport function getSavedGiftKey(gift: ApiSavedStarGift, withoutTag?: boolean) {\n  return [\n    gift.date,\n    gift.fromId,\n    gift.gift.id,\n    gift.gift.type === 'starGiftUnique' ? gift.gift.number : undefined,\n    !withoutTag ? gift.localTag : undefined,\n  ].filter(Boolean).join('-');\n}\n","import type { ApiFormattedText } from '../../api/types';\nimport { ApiMessageEntityTypes } from '../../api/types';\n\nexport function getStickerHashById(stickerId: string, isPreview?: boolean) {\n  const base = `sticker${stickerId}`;\n  return !isPreview ? base : `${base}?size=m`;\n}\n\nexport function containsCustomEmoji(formattedText: ApiFormattedText) {\n  return formattedText.entities?.some((e) => e.type === ApiMessageEntityTypes.CustomEmoji);\n}\n\nexport function stripCustomEmoji(text: ApiFormattedText): ApiFormattedText {\n  if (!text.entities) return text;\n\n  const entities = text.entities.filter((entity) => entity.type !== ApiMessageEntityTypes.CustomEmoji);\n  return { ...text, entities };\n}\n","import type { ApiPeer, ApiUser, ApiUserStatus } from '../../api/types';\nimport type { OldLangFn } from '../../hooks/useOldLang';\n\nimport { ANONYMOUS_USER_ID, SERVICE_NOTIFICATIONS_USER_ID } from '../../config';\nimport { formatFullDate, formatTime } from '../../util/dates/dateFormat';\nimport { DAY } from '../../util/dates/units';\nimport { orderBy } from '../../util/iteratees';\nimport { formatPhoneNumber } from '../../util/phoneNumber';\nimport { getServerTime, getServerTimeOffset } from '../../util/serverTime';\n\nexport function getUserFirstOrLastName(user?: ApiUser) {\n  if (!user) {\n    return undefined;\n  }\n\n  switch (user.type) {\n    case 'userTypeBot':\n      return user.firstName;\n    case 'userTypeRegular': {\n      return user.firstName || user.lastName;\n    }\n\n    case 'userTypeDeleted':\n    case 'userTypeUnknown': {\n      return 'Deleted';\n    }\n\n    default:\n      return undefined;\n  }\n}\n\nexport function getUserFullName(user?: ApiUser) {\n  if (!user) {\n    return undefined;\n  }\n\n  if (isDeletedUser(user)) {\n    return 'Deleted Account';\n  }\n\n  switch (user.type) {\n    case 'userTypeBot':\n    case 'userTypeRegular': {\n      if (user.firstName && user.lastName) {\n        return `${user.firstName} ${user.lastName}`;\n      }\n\n      if (user.firstName) {\n        return user.firstName;\n      }\n\n      if (user.lastName) {\n        return user.lastName;\n      }\n\n      if (user.phoneNumber) {\n        return `+${formatPhoneNumber(user.phoneNumber)}`;\n      }\n\n      break;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getUserStatus(\n  lang: OldLangFn, user: ApiUser, userStatus: ApiUserStatus | undefined,\n) {\n  if (user.id === SERVICE_NOTIFICATIONS_USER_ID) {\n    return lang('ServiceNotifications');\n  }\n\n  if (user.isSupport) {\n    return lang('SupportStatus');\n  }\n\n  if (user.type && user.type === 'userTypeBot') {\n    if (user.botActiveUsers) {\n      return lang('BotUsers', user.botActiveUsers, 'i');\n    }\n    return lang('Bot');\n  }\n\n  if (!userStatus) {\n    return '';\n  }\n\n  switch (userStatus.type) {\n    case 'userStatusEmpty': {\n      return lang('ALongTimeAgo');\n    }\n\n    case 'userStatusLastMonth': {\n      return lang('WithinAMonth');\n    }\n\n    case 'userStatusLastWeek': {\n      return lang('WithinAWeek');\n    }\n\n    case 'userStatusOffline': {\n      const { wasOnline } = userStatus;\n\n      if (!wasOnline) return lang('LastSeen.Offline');\n\n      const serverTimeOffset = getServerTimeOffset();\n      const now = new Date(Date.now() + serverTimeOffset * 1000);\n      const wasOnlineDate = new Date(wasOnline * 1000);\n\n      if (wasOnlineDate >= now) {\n        return lang('LastSeen.JustNow');\n      }\n\n      const diff = new Date(now.getTime() - wasOnlineDate.getTime());\n\n      // within a minute\n      if (diff.getTime() / 1000 < 60) {\n        return lang('LastSeen.JustNow');\n      }\n\n      // within an hour\n      if (diff.getTime() / 1000 < 60 * 60) {\n        const minutes = Math.floor(diff.getTime() / 1000 / 60);\n        return lang('LastSeen.MinutesAgo', minutes);\n      }\n\n      // today\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      const serverToday = new Date(today.getTime() + serverTimeOffset * 1000);\n      if (wasOnlineDate > serverToday) {\n        // up to 6 hours ago\n        if (diff.getTime() / 1000 < 6 * 60 * 60) {\n          const hours = Math.floor(diff.getTime() / 1000 / 60 / 60);\n          return lang('LastSeen.HoursAgo', hours);\n        }\n\n        // other\n        return lang('LastSeen.TodayAt', formatTime(lang, wasOnlineDate));\n      }\n\n      // yesterday\n      const yesterday = new Date();\n      yesterday.setDate(now.getDate() - 1);\n      yesterday.setHours(0, 0, 0, 0);\n      const serverYesterday = new Date(yesterday.getTime() + serverTimeOffset * 1000);\n      if (wasOnlineDate > serverYesterday) {\n        return lang('LastSeen.YesterdayAt', formatTime(lang, wasOnlineDate));\n      }\n\n      return lang('LastSeen.AtDate', formatFullDate(lang, wasOnlineDate));\n    }\n\n    case 'userStatusOnline': {\n      return lang('Online');\n    }\n\n    case 'userStatusRecently': {\n      return lang('Lately');\n    }\n\n    default:\n      return undefined;\n  }\n}\n\nexport function isUserOnline(user: ApiUser, userStatus?: ApiUserStatus, withSelfOnline = false) {\n  const { id, type } = user;\n\n  if (!userStatus) {\n    return false;\n  }\n\n  if (id === SERVICE_NOTIFICATIONS_USER_ID) {\n    return false;\n  }\n\n  if (user.isSelf && !withSelfOnline) {\n    return false;\n  }\n\n  return userStatus.type === 'userStatusOnline' && type !== 'userTypeBot';\n}\n\nexport function isDeletedUser(user: ApiUser) {\n  return (user.type === 'userTypeDeleted' || user.type === 'userTypeUnknown')\n    && user.id !== SERVICE_NOTIFICATIONS_USER_ID;\n}\n\nexport function isUserBot(user: ApiUser) {\n  return user.type === 'userTypeBot';\n}\n\nexport function getCanAddContact(user: ApiUser) {\n  return !user.isSelf && !user.isContact && !isUserBot(user) && user.id !== ANONYMOUS_USER_ID;\n}\n\nexport function sortUserIds(\n  userIds: string[],\n  usersById: Record<string, ApiUser>,\n  userStatusesById: Record<string, ApiUserStatus>,\n  priorityIds?: string[],\n) {\n  return orderBy(userIds, (id) => {\n    const now = getServerTime();\n\n    if (priorityIds && priorityIds.includes(id)) {\n      // Assuming that online status expiration date can't be as far as two days from now,\n      // this should place prioritized on top of the list.\n      // Then we subtract index of `id` in `priorityIds` to preserve selected order\n      return now + (48 * 60 * 60) - (priorityIds.length - priorityIds.indexOf(id));\n    }\n\n    const user = usersById[id];\n    const userStatus = userStatusesById[id];\n    if (!user || !userStatus) {\n      return 0;\n    }\n\n    if (userStatus.type === 'userStatusOnline') {\n      return userStatus.expires;\n    } else if (userStatus.type === 'userStatusOffline' && userStatus.wasOnline) {\n      return userStatus.wasOnline;\n    }\n\n    switch (userStatus.type) {\n      case 'userStatusRecently':\n        return now - DAY;\n      case 'userStatusLastWeek':\n        return now - DAY * 7;\n      case 'userStatusLastMonth':\n        return now - DAY * 7 * 30;\n      default:\n        return 0;\n    }\n  }, 'desc');\n}\n\nexport function getMainUsername(userOrChat: ApiPeer) {\n  return userOrChat.usernames?.find((u) => u.isActive)?.username;\n}\n\nexport function getPeerStoryHtmlId(userId: string) {\n  return `peer-story${userId}`;\n}\n","import type { ActionOptions } from '../lib/teact/teactn';\nimport { typify } from '../lib/teact/teactn';\n\nimport type {\n  ActionPayloads, GlobalState, RequiredActionPayloads, RequiredGlobalState,\n} from './types';\n\nconst typed = typify<GlobalState, ActionPayloads & RequiredActionPayloads>();\n\ntype ProjectActionTypes =\n  ActionPayloads\n  & RequiredActionPayloads;\n\ntype ProjectActionNames = keyof ProjectActionTypes;\n\ntype Helper<T, E> = Exclude<T, E> extends never ? unknown : Exclude<T, E>;\n\nexport type TabStateActionNames = {\n  [ActionName in ProjectActionNames]:\n  'tabId' extends keyof Helper<ProjectActionTypes[ActionName], undefined> ? ActionName : never\n}[ProjectActionNames];\n// `Required` actions are called from actions to ensure the `tabId` is always provided if needed.\n// There are three types of actions:\n// 1. With tabId, which is made required when calling action from another action handler\n// 2. Without payload (= undefined), hence made the payload not required\n// 3. With payload, hence made the payload required\nexport type RequiredGlobalActions = {\n  [ActionName in ProjectActionNames]: ActionName extends TabStateActionNames ? ((\n    payload: ProjectActionTypes[ActionName] & { tabId: number },\n    options?: ActionOptions,\n  ) => void) :\n    (undefined extends ProjectActionTypes[ActionName] ? (\n      (payload?: ProjectActionTypes[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ProjectActionTypes[ActionName], options?: ActionOptions) => void\n    ))\n} & { _: never };\n\ntype ActionHandlers = {\n  [ActionName in keyof ProjectActionTypes]: (\n    global: RequiredGlobalState,\n    actions: RequiredGlobalActions,\n    payload: ProjectActionTypes[ActionName],\n  ) => GlobalState | void | Promise<void>;\n};\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const getPromiseActions = typed.getPromiseActions;\nexport const addActionHandler = typed.addActionHandler as <ActionName extends ProjectActionNames>(\n  name: ActionName,\n  handler: ActionHandlers[ActionName],\n) => void;\nexport const withGlobal = typed.withGlobal;\nexport type GlobalActions = ReturnType<typeof getActions>;\n","import './intervals';\n\nimport type { ActionReturnType, GlobalState } from './types';\n\nimport { IS_MULTIACCOUNT_SUPPORTED } from '../util/browser/globalEnvironment';\nimport { isCacheApiSupported } from '../util/cacheApi';\nimport { getCurrentTabId, reestablishMasterToSelf } from '../util/establishMultitabRole';\nimport { initGlobal } from '../util/init';\nimport { cloneDeep } from '../util/iteratees';\nimport { isLocalMessageId } from '../util/keys/messageKey';\nimport { Bundles, loadBundle } from '../util/moduleLoader';\nimport { parseLocationHash } from '../util/routing';\nimport { updatePeerColors } from '../util/theme';\nimport { initializeChatMediaSearchResults } from './reducers/middleSearch';\nimport { updateTabState } from './reducers/tabs';\nimport { initSharedState } from './shared/sharedStateConnector';\nimport { initCache } from './cache';\nimport {\n  addActionHandler, getGlobal, setGlobal,\n} from './index';\nimport { INITIAL_TAB_STATE } from './initialState';\nimport { replaceTabThreadParam, replaceThreadParam } from './reducers';\nimport { selectTabState, selectThreadParam } from './selectors';\n\ninitCache();\n\naddActionHandler('initShared', async (prevGlobal, actions, payload): Promise<void> => {\n  const { force } = payload || {};\n  await initGlobal(force, prevGlobal);\n});\n\naddActionHandler('init', (global, actions, payload): ActionReturnType => {\n  const { tabId = getCurrentTabId(), isMasterTab } = payload || {};\n\n  const initialTabState = cloneDeep(INITIAL_TAB_STATE);\n  initialTabState.id = tabId;\n  initialTabState.isChatInfoShown = Boolean(global.lastIsChatInfoShown);\n  initialTabState.audioPlayer.playbackRate = global.audioPlayer.lastPlaybackRate;\n  initialTabState.audioPlayer.isPlaybackRateActive = global.audioPlayer.isLastPlaybackRateActive;\n  initialTabState.mediaViewer.playbackRate = global.mediaViewer.lastPlaybackRate;\n\n  global = {\n    ...global,\n    byTabId: {\n      ...global.byTabId,\n      [tabId]: initialTabState,\n    },\n  };\n\n  if (isMasterTab) {\n    initialTabState.isMasterTab = true;\n  }\n\n  if (IS_MULTIACCOUNT_SUPPORTED && initialTabState.isMasterTab) {\n    initSharedState(global.sharedState);\n  }\n\n  Object.keys(global.messages.byChatId).forEach((chatId) => {\n    const threadsById = global.messages.byChatId[chatId].threadsById;\n    Object.keys(threadsById).forEach((thread) => {\n      const threadId = Number(thread);\n      const lastViewportIds = selectThreadParam(global, chatId, threadId, 'lastViewportIds');\n      // Check if migration from previous version is faulty\n      if (!lastViewportIds?.every((id) => isLocalMessageId(id) || global.messages.byChatId[chatId]?.byId[id])) {\n        global = replaceThreadParam(global, chatId, threadId, 'lastViewportIds', undefined);\n        return;\n      }\n      global = initializeChatMediaSearchResults(global, chatId, threadId, tabId);\n      global = replaceTabThreadParam(\n        global,\n        chatId,\n        threadId,\n        'viewportIds',\n        lastViewportIds,\n        tabId,\n      );\n    });\n  });\n\n  // Temporary state fix\n  Object.keys(global.messages.byChatId).forEach((chatId) => {\n    const threadsById = global.messages.byChatId[chatId].threadsById;\n    const fixedThreadsById = Object.keys(threadsById).reduce((acc, key) => {\n      const t = threadsById[Number(key)];\n      acc[Number(key)] = {\n        ...t,\n        listedIds: t.lastViewportIds,\n      };\n      return acc;\n    }, {} as GlobalState['messages']['byChatId'][string]['threadsById']);\n\n    global = {\n      ...global,\n      messages: {\n        ...global.messages,\n        byChatId: {\n          ...global.messages.byChatId,\n          [chatId]: {\n            ...global.messages.byChatId[chatId],\n            threadsById: fixedThreadsById,\n          },\n        },\n      },\n    };\n  });\n\n  const parsedMessageList = parseLocationHash(global.currentUserId);\n\n  if (global.authState !== 'authorizationStateReady'\n    && !global.passcode.hasPasscode && !global.passcode.isScreenLocked) {\n    Object.values(global.byTabId).forEach(({ id: otherTabId }) => {\n      if (otherTabId === tabId) return;\n      global = updateTabState(global, {\n        isInactive: true,\n      }, otherTabId);\n    });\n  }\n\n  isCacheApiSupported().then((isSupported) => {\n    global = getGlobal();\n    global.isCacheApiSupported = isSupported;\n    setGlobal(global);\n  });\n\n  if (global.peerColors) {\n    updatePeerColors(global.peerColors.general);\n  }\n\n  return updateTabState(global, {\n    messageLists: parsedMessageList ? [parsedMessageList] : initialTabState.messageLists,\n  }, tabId);\n});\n\naddActionHandler('requestMasterAndCallAction', async (\n  global, actions, payload,\n): Promise<void> => {\n  const { tabId = getCurrentTabId() } = payload;\n\n  if (selectTabState(global, tabId).isMasterTab) {\n    const { action, payload: actionPayload } = payload;\n    // @ts-ignore\n    actions[action](actionPayload);\n    return;\n  }\n\n  if (global.phoneCall || global.groupCalls.activeGroupCallId) {\n    await loadBundle(Bundles.Calls);\n    if ('hangUp' in actions) actions.hangUp({ tabId });\n    if ('leaveGroupCall' in actions) actions.leaveGroupCall({ tabId });\n  } else {\n    reestablishMasterToSelf();\n  }\n\n  global = getGlobal();\n  global = updateTabState(global, {\n    multitabNextAction: payload,\n  }, tabId);\n  setGlobal(global);\n});\n\naddActionHandler('clearMultitabNextAction', (global, actions, payload): ActionReturnType => {\n  const { tabId = getCurrentTabId() } = payload || {};\n\n  return updateTabState(global, {\n    multitabNextAction: undefined,\n  }, tabId);\n});\n","import type { PerformanceType } from \"../types\";\nimport type { GlobalState, SharedState, TabState } from \"./types\";\nimport {\n  LeftColumnContent,\n  NewChatMembersProgress,\n  SettingsScreens,\n} from \"../types\";\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DARK_THEME_PATTERN_COLOR,\n  DEFAULT_GIFT_PROFILE_FILTER_OPTIONS,\n  DEFAULT_MESSAGE_TEXT_SIZE_PX,\n  DEFAULT_PATTERN_COLOR,\n  DEFAULT_PLAYBACK_RATE,\n  DEFAULT_RESALE_GIFTS_FILTER_OPTIONS,\n  DEFAULT_VOLUME,\n  IOS_DEFAULT_MESSAGE_TEXT_SIZE_PX,\n  MACOS_DEFAULT_MESSAGE_TEXT_SIZE_PX,\n} from \"../config\";\nimport { IS_IOS, IS_MAC_OS } from \"../util/browser/windowEnvironment\";\n\nexport const INITIAL_PERFORMANCE_STATE_MAX: PerformanceType = {\n  animatedEmoji: true,\n  autoplayGifs: true,\n  autoplayVideos: true,\n  contextMenuAnimations: true,\n  contextMenuBlur: true,\n  loopAnimatedStickers: true,\n  mediaViewerAnimations: true,\n  messageComposerAnimations: true,\n  messageSendingAnimations: true,\n  pageTransitions: true,\n  reactionEffects: true,\n  rightColumnAnimations: true,\n  stickerEffects: true,\n  storyRibbonAnimations: true,\n  snapEffect: true,\n};\n\nexport const INITIAL_PERFORMANCE_STATE_MID: PerformanceType = {\n  animatedEmoji: true,\n  autoplayGifs: true,\n  autoplayVideos: true,\n  contextMenuAnimations: true,\n  contextMenuBlur: true,\n  loopAnimatedStickers: true,\n  mediaViewerAnimations: true,\n  messageComposerAnimations: true,\n  messageSendingAnimations: true,\n  pageTransitions: true,\n  reactionEffects: true,\n  rightColumnAnimations: false,\n  stickerEffects: false,\n  storyRibbonAnimations: false,\n  snapEffect: false,\n};\n\nexport const INITIAL_PERFORMANCE_STATE_MIN: PerformanceType = {\n  animatedEmoji: false,\n  autoplayGifs: false,\n  autoplayVideos: false,\n  contextMenuAnimations: false,\n  contextMenuBlur: false,\n  loopAnimatedStickers: false,\n  mediaViewerAnimations: false,\n  messageComposerAnimations: false,\n  messageSendingAnimations: false,\n  pageTransitions: false,\n  reactionEffects: false,\n  rightColumnAnimations: false,\n  stickerEffects: false,\n  storyRibbonAnimations: false,\n  snapEffect: false,\n};\n\nexport const INITIAL_SHARED_STATE: SharedState = {\n  settings: {\n    theme: \"light\",\n    shouldUseSystemTheme: true,\n    messageTextSize: IS_IOS\n      ? IOS_DEFAULT_MESSAGE_TEXT_SIZE_PX\n      : IS_MAC_OS\n      ? MACOS_DEFAULT_MESSAGE_TEXT_SIZE_PX\n      : DEFAULT_MESSAGE_TEXT_SIZE_PX,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    messageSendKeyCombo: \"enter\",\n    performance: INITIAL_PERFORMANCE_STATE_MAX,\n    shouldSkipWebAppCloseConfirmation: false,\n    language: \"en\",\n    timeFormat: \"24h\",\n    wasTimeFormatSetManually: false,\n    isConnectionStatusMinimized: true,\n    canDisplayChatInTitle: true,\n    shouldAllowHttpTransport: true,\n    shouldWarnAboutSvg: true,\n  },\n  isInitial: true,\n};\n\nexport const INITIAL_GLOBAL_STATE: GlobalState = {\n  cacheVersion: 2,\n  isInited: true,\n  attachMenu: { bots: {} },\n  passcode: {},\n  twoFaSettings: {},\n  isAppUpdateAvailable: false,\n  isElectronUpdateAvailable: false,\n  shouldShowContextMenuHint: true,\n\n  audioPlayer: {\n    lastPlaybackRate: DEFAULT_PLAYBACK_RATE,\n  },\n\n  mediaViewer: {\n    lastPlaybackRate: DEFAULT_PLAYBACK_RATE,\n  },\n\n  authRememberMe: true,\n  countryList: {\n    phoneCodes: [],\n    general: [],\n  },\n\n  blocked: {\n    ids: [],\n    totalCount: 0,\n  },\n\n  users: {\n    byId: {},\n    statusesById: {},\n    fullInfoById: {},\n    previewMediaByBotId: {},\n    commonChatsById: {},\n    botAppPermissionsById: {},\n  },\n\n  peers: {\n    profilePhotosById: {},\n  },\n\n  chats: {\n    listIds: {},\n    isFullyLoaded: {},\n    orderedPinnedIds: {},\n    totalCount: {},\n    lastMessageIds: {},\n    byId: {},\n    fullInfoById: {},\n    similarChannelsById: {},\n    similarBotsById: {},\n    topicsInfoById: {},\n    notifyExceptionById: {},\n    loadingParameters: {\n      active: {},\n      archived: {},\n      saved: {},\n    },\n  },\n\n  messages: {\n    byChatId: {},\n    sponsoredByChatId: {},\n    pollById: {},\n    playbackByChatId: {},\n  },\n\n  stories: {\n    byPeerId: {},\n    orderedPeerIds: {\n      archived: [],\n      active: [],\n    },\n    hasNext: true,\n    hasNextInArchive: true,\n    stealthMode: {},\n  },\n\n  groupCalls: {\n    byId: {},\n  },\n\n  attachmentSettings: {\n    shouldCompress: true,\n    shouldSendGrouped: true,\n    isInvertedMedia: undefined,\n    webPageMediaSize: undefined,\n    shouldSendInHighQuality: false,\n  },\n\n  scheduledMessages: {\n    byChatId: {},\n  },\n\n  quickReplies: {\n    byId: {},\n    messagesById: {},\n  },\n\n  chatFolders: {\n    byId: {},\n    invites: {},\n  },\n\n  fileUploads: {\n    byMessageKey: {},\n  },\n\n  recentEmojis: [\n    \"grinning\",\n    \"kissing_heart\",\n    \"christmas_tree\",\n    \"brain\",\n    \"trophy\",\n    \"duck\",\n    \"cherries\",\n  ],\n  recentCustomEmojis: [\"5377305978079288312\"],\n\n  reactions: {\n    defaultTags: [],\n    topReactions: [],\n    recentReactions: [],\n    effectReactions: [],\n    hash: {},\n  },\n  availableEffectById: {},\n\n  stickers: {\n    setsById: {},\n    added: {},\n    recent: {\n      stickers: [],\n    },\n    favorite: {\n      stickers: [],\n    },\n    greeting: {\n      stickers: [],\n    },\n    premium: {\n      stickers: [],\n    },\n    featured: {\n      setIds: [],\n    },\n    effect: {\n      stickers: [],\n      emojis: [],\n    },\n    forEmoji: {},\n  },\n\n  customEmojis: {\n    lastRendered: [],\n    byId: {},\n    added: {},\n    forEmoji: {},\n    statusRecent: {},\n  },\n\n  emojiKeywords: {},\n\n  gifs: {\n    saved: {},\n  },\n\n  topPeers: {},\n\n  topInlineBots: {},\n  topBotApps: {},\n\n  activeSessions: {\n    byHash: {},\n    orderedHashes: [],\n  },\n\n  activeWebSessions: {\n    byHash: {},\n    orderedHashes: [],\n  },\n\n  settings: {\n    byKey: {\n      canAutoLoadPhotoFromContacts: true,\n      canAutoLoadPhotoInPrivateChats: true,\n      canAutoLoadPhotoInGroups: true,\n      canAutoLoadPhotoInChannels: true,\n      canAutoLoadVideoFromContacts: true,\n      canAutoLoadVideoInPrivateChats: true,\n      canAutoLoadVideoInGroups: true,\n      canAutoLoadVideoInChannels: true,\n      canAutoLoadFileFromContacts: false,\n      canAutoLoadFileInPrivateChats: false,\n      canAutoLoadFileInGroups: false,\n      canAutoLoadFileInChannels: false,\n      autoLoadFileMaxSizeMb: 10,\n      hasWebNotifications: true,\n      hasPushNotifications: true,\n      notificationSoundVolume: 5,\n      shouldSuggestStickers: true,\n      shouldSuggestCustomEmoji: true,\n      shouldPaidMessageAutoApprove: false,\n      shouldUpdateStickerSetOrder: true,\n      shouldArchiveAndMuteNewNonContact: false,\n      shouldNewNonContactPeersRequirePremium: false,\n      disallowedGifts: undefined,\n      nonContactPeersPaidStars: 0,\n      shouldHideReadMarks: false,\n      canTranslate: false,\n      canTranslateChats: true,\n      doNotTranslate: [],\n    },\n    privacy: {},\n    botVerificationShownPeerIds: [],\n    themes: {\n      light: {\n        isBlurred: true,\n        patternColor: DEFAULT_PATTERN_COLOR,\n      },\n      dark: {\n        isBlurred: true,\n        patternColor: DARK_THEME_PATTERN_COLOR,\n      },\n    },\n    accountDaysTtl: 365,\n  },\n\n  serviceNotifications: [],\n  trustedBotIds: [],\n\n  transcriptions: {},\n  translations: {\n    byChatId: {},\n  },\n\n  byTabId: {},\n  sharedState: INITIAL_SHARED_STATE,\n\n  archiveSettings: {\n    isMinimized: false,\n    isHidden: false,\n  },\n};\n\nexport const INITIAL_TAB_STATE: TabState = {\n  id: 0,\n  isMasterTab: false,\n  isLeftColumnShown: true,\n  isChatInfoShown: false,\n  isTradingColumnShown: false,\n  selectedTradingCoin: undefined,\n  selectedTradingMintAddress: undefined,\n  newChatMembersProgress: NewChatMembersProgress.Closed,\n  uiReadyState: 0,\n  shouldInit: true,\n\n  gifSearch: {},\n  stickerSearch: {},\n\n  messageLists: [],\n  activeChatFolder: 0,\n  tabThreads: {},\n\n  inlineBots: {\n    isLoading: false,\n    byUsername: {},\n  },\n\n  webApps: {\n    openedWebApps: {},\n    openedOrderedKeys: [],\n    sessionKeys: [],\n    modalState: \"maximized\",\n    isModalOpen: false,\n    isMoreAppsTabActive: false,\n  },\n\n  globalSearch: {},\n\n  userSearch: {},\n\n  leftColumn: {\n    contentKey: LeftColumnContent.ChatList,\n    settingsScreen: SettingsScreens.Main,\n  },\n\n  middleSearch: {\n    byChatThreadKey: {},\n  },\n\n  sharedMediaSearch: {\n    byChatThreadKey: {},\n  },\n\n  chatMediaSearch: {\n    byChatThreadKey: {},\n  },\n\n  management: {\n    byChatId: {},\n  },\n\n  savedGifts: {\n    filter: {\n      ...DEFAULT_GIFT_PROFILE_FILTER_OPTIONS,\n    },\n    giftsByPeerId: {},\n  },\n\n  resaleGifts: {\n    gifts: [],\n    count: 0,\n    updateIteration: 0,\n    filter: {\n      ...DEFAULT_RESALE_GIFTS_FILTER_OPTIONS,\n    },\n  },\n\n  storyViewer: {\n    isMuted: true,\n    isRibbonShown: false,\n  },\n\n  mediaViewer: {\n    volume: DEFAULT_VOLUME,\n    playbackRate: DEFAULT_PLAYBACK_RATE,\n    isMuted: false,\n  },\n\n  audioPlayer: {\n    volume: DEFAULT_VOLUME,\n    playbackRate: DEFAULT_PLAYBACK_RATE,\n    isMuted: false,\n  },\n\n  isShareMessageModalShown: false,\n\n  isWebAppsCloseConfirmationModalOpen: false,\n\n  forwardMessages: {},\n\n  replyingMessage: {},\n\n  pollResults: {},\n\n  payment: {},\n  starsPayment: {},\n\n  notifications: [],\n\n  dialogs: [],\n\n  activeReactions: {},\n\n  activeDownloads: {},\n\n  statistics: {\n    byChatId: {},\n  },\n\n  pollModal: {\n    isOpen: false,\n  },\n\n  requestedTranslations: {\n    byChatId: {},\n  },\n\n  isPaymentMessageConfirmDialogOpen: false,\n};\n","import { addCallback } from '../lib/teact/teactn';\n\nimport type { GlobalState } from './types';\n\nimport { getServerTime } from '../util/serverTime';\nimport { removePeerStory } from './reducers';\nimport { selectTabState } from './selectors';\nimport { getGlobal, setGlobal } from '.';\n\nconst STORY_EXPIRATION_INTERVAL = 2 * 60 * 1000; // 2 min\n\nlet intervals: number[] = [];\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  const previousGlobal = prevGlobal;\n  prevGlobal = global;\n\n  const isCurrentMaster = selectTabState(global)?.isMasterTab;\n  const isPreviousMaster = previousGlobal && selectTabState(previousGlobal)?.isMasterTab;\n  if (isCurrentMaster === isPreviousMaster) return;\n\n  if (isCurrentMaster && !isPreviousMaster) {\n    startIntervals();\n  } else {\n    stopIntervals();\n  }\n});\n\nfunction startIntervals() {\n  if (intervals.length) return;\n  intervals.push(window.setInterval(checkStoryExpiration, STORY_EXPIRATION_INTERVAL));\n}\n\nfunction stopIntervals() {\n  intervals.forEach((interval) => clearInterval(interval));\n  intervals = [];\n}\n\nfunction checkStoryExpiration() {\n  let global = getGlobal();\n  if (!global.isInited) return;\n\n  const serverTime = getServerTime();\n\n  Object.values(global.stories.byPeerId).forEach((peerStories) => {\n    const stories = Object.values(peerStories.byId);\n    stories.forEach((story) => {\n      if (story['@type'] !== 'story') return;\n      if (story.expireDate > serverTime) return;\n      if (story.isInProfile) return;\n\n      global = removePeerStory(global, story.peerId, story.id);\n    });\n  });\n\n  setGlobal(global);\n}\n","import type {\n  ApiChat, ApiChatFullInfo, ApiChatMember,\n} from '../../api/types';\nimport type { ChatListType } from '../../types';\nimport type { GlobalState } from '../types';\n\nimport { ARCHIVED_FOLDER_ID } from '../../config';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport {\n  areSortedArraysEqual, buildCollectionByKey, omit, omitUndefined, pick, unique,\n} from '../../util/iteratees';\nimport { selectChatFullInfo } from '../selectors';\n\nconst DEFAULT_CHAT_LISTS: ChatListType[] = ['active', 'archived'];\n\nexport function replaceChatListIds<T extends GlobalState>(\n  global: T,\n  type: ChatListType,\n  newIds: string[] | undefined,\n): T {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      listIds: {\n        ...global.chats.listIds,\n        [type]: newIds,\n      },\n    },\n  };\n}\n\nexport function replaceChatListLoadingParameters<T extends GlobalState>(\n  global: T, type: ChatListType, nextOffsetId?: number, nextOffsetPeerId?: string, nextOffsetDate?: number,\n): T {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      loadingParameters: {\n        ...global.chats.loadingParameters,\n        [type]: {\n          nextOffsetId,\n          nextOffsetPeerId,\n          nextOffsetDate,\n        },\n      },\n    },\n  };\n}\n\nexport function updateChatLastMessageId<T extends GlobalState>(\n  global: T, chatId: string, lastMessageId: number, listType?: ChatListType,\n): T {\n  const key = listType === 'saved' ? 'saved' : 'all';\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      lastMessageIds: {\n        ...global.chats.lastMessageIds,\n        [key]: {\n          ...global.chats.lastMessageIds[key],\n          [chatId]: lastMessageId,\n        },\n      },\n    },\n  };\n}\n\nexport function updateChatsLastMessageId<T extends GlobalState>(\n  global: T, messageIds: Record<string, number>, listType?: ChatListType,\n): T {\n  const key = listType === 'saved' ? 'saved' : 'all';\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      lastMessageIds: {\n        ...global.chats.lastMessageIds,\n        [key]: {\n          ...global.chats.lastMessageIds[key],\n          ...messageIds,\n        },\n      },\n    },\n  };\n}\n\nexport function addChatListIds<T extends GlobalState>(\n  global: T, type: ChatListType, idsUpdate: string[],\n): T {\n  const { [type]: listIds } = global.chats.listIds;\n  const newIds = listIds?.length\n    ? idsUpdate.filter((id) => !listIds.includes(id))\n    : idsUpdate;\n\n  if (listIds && !newIds.length) {\n    return global;\n  }\n\n  return replaceChatListIds(global, type, [\n    ...(listIds || []),\n    ...newIds,\n  ]);\n}\n\nexport function replaceChats<T extends GlobalState>(global: T, newById: Record<string, ApiChat>): T {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      byId: newById,\n    },\n  };\n}\n\nexport function addUnreadMentions<T extends GlobalState>(\n  global: T, chatId: string, chat: ApiChat, ids: number[], shouldUpdateCount: boolean = false,\n): T {\n  const prevChatUnreadMentions = (chat.unreadMentions || []);\n  const updatedUnreadMentions = unique([...prevChatUnreadMentions, ...ids]).sort((a, b) => b - a);\n  global = updateChat(global, chatId, {\n    unreadMentions: updatedUnreadMentions,\n  });\n\n  if (shouldUpdateCount) {\n    const updatedUnreadMentionsCount = (chat.unreadMentionsCount || 0)\n      + Math.max(0, updatedUnreadMentions.length - prevChatUnreadMentions.length);\n\n    global = updateChat(global, chatId, {\n      unreadMentionsCount: updatedUnreadMentionsCount,\n    });\n  }\n  return global;\n}\n\nexport function removeUnreadMentions<T extends GlobalState>(\n  global: T, chatId: string, chat: ApiChat, ids: number[], shouldUpdateCount: boolean = false,\n): T {\n  const prevChatUnreadMentions = (chat.unreadMentions || []);\n  const updatedUnreadMentions = prevChatUnreadMentions?.filter((id) => !ids.includes(id));\n\n  global = updateChat(global, chatId, {\n    unreadMentions: updatedUnreadMentions,\n  });\n\n  if (shouldUpdateCount && chat.unreadMentionsCount) {\n    const removedCount = prevChatUnreadMentions.length - updatedUnreadMentions.length;\n    const updatedUnreadMentionsCount = Math.max(chat.unreadMentionsCount - removedCount, 0) || undefined;\n\n    global = updateChat(global, chatId, {\n      unreadMentionsCount: updatedUnreadMentionsCount,\n    });\n  }\n  return global;\n}\n\nexport function updateChat<T extends GlobalState>(\n  global: T, chatId: string, chatUpdate: Partial<ApiChat>, noOmitUnreadReactionCount = false, withDeepCheck = false,\n): T {\n  const { byId } = global.chats;\n\n  const chat = byId[chatId];\n  if (withDeepCheck && chat) {\n    const updateKeys = Object.keys(chatUpdate) as (keyof ApiChat)[];\n    if (areDeepEqual(pick(chat, updateKeys), chatUpdate)) {\n      return global;\n    }\n  }\n\n  const updatedChat = getUpdatedChat(global, chatId, chatUpdate, noOmitUnreadReactionCount);\n  if (!updatedChat) {\n    return global;\n  }\n\n  return replaceChats(global, {\n    ...byId,\n    [chatId]: updatedChat,\n  });\n}\n\nexport function updateChatFullInfo<T extends GlobalState>(\n  global: T, chatId: string, fullInfoUpdate: Partial<ApiChatFullInfo>,\n): T {\n  const currentFullInfo = selectChatFullInfo(global, chatId);\n  const updatedFullInfo = {\n    ...currentFullInfo,\n    ...fullInfoUpdate,\n  };\n\n  if (areDeepEqual(currentFullInfo, updatedFullInfo)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      fullInfoById: {\n        ...global.chats.fullInfoById,\n        [chatId]: updatedFullInfo,\n      },\n    },\n  };\n}\n\nexport function replaceChatFullInfo<T extends GlobalState>(global: T, chatId: string, fullInfo: ApiChatFullInfo): T {\n  const currentFullInfo = selectChatFullInfo(global, chatId);\n\n  if (areDeepEqual(currentFullInfo, fullInfo)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      fullInfoById: {\n        ...global.chats.fullInfoById,\n        [chatId]: fullInfo,\n      },\n    },\n  };\n}\n\nexport function updateChats<T extends GlobalState>(global: T, newById: Record<string, ApiChat>): T {\n  const updatedById = Object.keys(newById).reduce((acc: Record<string, ApiChat>, id) => {\n    const updatedChat = getUpdatedChat(global, id, newById[id]);\n    if (updatedChat) {\n      acc[id] = updatedChat;\n    }\n\n    return acc;\n  }, {});\n\n  global = replaceChats(global, {\n    ...global.chats.byId,\n    ...updatedById,\n  });\n\n  return global;\n}\n\n// @optimization Allows to avoid redundant updates which cause a lot of renders\nexport function addChats<T extends GlobalState>(global: T, newById: Record<string, ApiChat>): T {\n  const { byId } = global.chats;\n  let isUpdated = false;\n\n  const addedById = Object.keys(newById).reduce<Record<string, ApiChat>>((acc, id) => {\n    const existingChat = byId[id];\n    const newChat = newById[id];\n\n    const membersCountChanged = !existingChat?.membersCount && newChat.membersCount;\n\n    if (existingChat && !existingChat.isMin && !membersCountChanged\n      && (newChat.isMin || existingChat.accessHash === newChat.accessHash)) {\n      return acc;\n    }\n\n    const updatedChat = getUpdatedChat(global, id, newChat);\n    if (updatedChat) {\n      acc[id] = updatedChat;\n      if (!isUpdated) {\n        isUpdated = true;\n      }\n    }\n\n    return acc;\n  }, {});\n\n  if (!isUpdated) {\n    return global;\n  }\n\n  global = replaceChats(global, {\n    ...byId,\n    ...addedById,\n  });\n\n  return global;\n}\n\n// @optimization Don't spread/unspread global for each element, do it in a batch\nfunction getUpdatedChat<T extends GlobalState>(\n  global: T, chatId: string, chatUpdate: Partial<ApiChat>,\n  noOmitUnreadReactionCount = false,\n) {\n  const { byId } = global.chats;\n  const chat = byId[chatId];\n  const omitProps: (keyof ApiChat)[] = [];\n\n  if (chatUpdate.isMin && chat && !chat.isMin) {\n    return undefined; // Do not apply updates from min constructor\n  }\n\n  if (!noOmitUnreadReactionCount) {\n    omitProps.push('unreadReactionsCount');\n  }\n\n  if (areDeepEqual(chat?.usernames, chatUpdate.usernames)) {\n    omitProps.push('usernames');\n  }\n\n  const updatedChat: ApiChat = {\n    ...chat,\n    ...omit(chatUpdate, omitProps),\n  } as ApiChat;\n\n  if (!updatedChat.id || !updatedChat.type) {\n    return undefined;\n  }\n\n  return omitUndefined(updatedChat);\n}\n\nexport function updateChatListType<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  folderId?: number,\n): T {\n  const listType = folderId === ARCHIVED_FOLDER_ID ? 'archived' : 'active';\n\n  let currentListIds = global.chats.listIds;\n  (Object.keys(currentListIds) as Array<keyof typeof currentListIds>).forEach((listTypeKey) => {\n    const currentFolderList = currentListIds[listTypeKey] || [];\n    if (listTypeKey === listType && !currentFolderList.includes(chatId)) {\n      currentListIds = {\n        ...currentListIds,\n        [listTypeKey]: [...currentFolderList, chatId],\n      };\n    } else if (listTypeKey !== listType && currentFolderList.includes(chatId)) {\n      currentListIds = {\n        ...currentListIds,\n        [listTypeKey]: currentFolderList.filter((id) => id !== chatId),\n      };\n    }\n  });\n\n  global = {\n    ...global,\n    chats: {\n      ...global.chats,\n      listIds: currentListIds,\n    },\n  };\n\n  global = updateChat(global, chatId, { folderId: folderId || undefined });\n\n  return global;\n}\n\nexport function updateChatListSecondaryInfo<T extends GlobalState>(\n  global: T,\n  type: ChatListType,\n  info: {\n    orderedPinnedIds?: string[];\n    totalChatCount: number;\n  },\n): T {\n  const totalCountKey = type === 'active' ? 'all' : type;\n\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      ...(info.orderedPinnedIds && {\n        orderedPinnedIds: {\n          ...global.chats.orderedPinnedIds,\n          [type]: info.orderedPinnedIds,\n        },\n      }),\n      totalCount: {\n        ...global.chats.totalCount,\n        [totalCountKey]: info.totalChatCount,\n      },\n    },\n  };\n}\n\nexport function leaveChat<T extends GlobalState>(global: T, leftChatId: string): T {\n  global = removeChatFromChatLists(global, leftChatId);\n\n  global = updateChat(global, leftChatId, { isNotJoined: true });\n  global = updateChatFullInfo(global, leftChatId, { joinInfo: undefined });\n\n  return global;\n}\n\nexport function removeChatFromChatLists<T extends GlobalState>(\n  global: T, chatId: string, type: 'all' | 'saved' = 'all',\n): T {\n  const chatLists = type === 'all' ? DEFAULT_CHAT_LISTS : [type];\n  chatLists.forEach((listType) => {\n    global = replaceChatListIds(global, listType, global.chats.listIds[listType]?.filter((id) => id !== chatId));\n  });\n\n  return global;\n}\n\nexport function addChatMembers<T extends GlobalState>(global: T, chat: ApiChat, membersToAdd: ApiChatMember[]): T {\n  const currentMembers = selectChatFullInfo(global, chat.id)?.members;\n  const newMemberIds = new Set(membersToAdd.map((m) => m.userId));\n  const updatedMembers = [\n    ...currentMembers?.filter(({ userId }) => !newMemberIds.has(userId)) || [],\n    ...membersToAdd,\n  ];\n  const currentIds = currentMembers?.map(({ userId }) => userId) || [];\n  const updatedIds = updatedMembers.map(({ userId }) => userId);\n\n  if (areSortedArraysEqual(currentIds, updatedIds)) {\n    return global;\n  }\n\n  const adminMembers = updatedMembers.filter(({ isAdmin, isOwner }) => isAdmin || isOwner);\n\n  return updateChatFullInfo(global, chat.id, {\n    members: updatedMembers,\n    adminMembersById: buildCollectionByKey(adminMembers, 'userId'),\n  });\n}\n\nexport function replaceSimilarChannels<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  similarChannelIds: string[],\n  count?: number,\n) {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      similarChannelsById: {\n        ...global.chats.similarChannelsById,\n        [chatId]: {\n          similarChannelIds,\n          count: count || similarChannelIds.length,\n        },\n      },\n    },\n  };\n}\n\nexport function toggleSimilarChannels<T extends GlobalState>(\n  global: T,\n  chatId: string,\n) {\n  const similarChannels = global.chats.similarChannelsById[chatId];\n\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      similarChannelsById: {\n        ...global.chats.similarChannelsById,\n        [chatId]: {\n          ...similarChannels,\n          isExpanded: !similarChannels?.isExpanded,\n        },\n      },\n    },\n  };\n}\n\nexport function addSimilarBots<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  similarBotsIds: string[],\n  count?: number,\n) {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      similarBotsById: {\n        ...global.chats.similarBotsById,\n        [chatId]: {\n          similarBotsIds,\n          count,\n        },\n      },\n    },\n  };\n}\n","import type { ApiGlobalMessageSearchType, ApiMessage } from '../../api/types';\nimport type { GlobalSearchContent } from '../../types';\nimport type { GlobalState, TabArgs, TabState } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { areSortedArraysEqual } from '../../util/iteratees';\nimport { getSearchResultKey } from '../../util/keys/searchResultKey';\nimport { selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function updateGlobalSearch<T extends GlobalState>(\n  global: T,\n  searchStatePartial: Partial<TabState['globalSearch']>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    globalSearch: {\n      ...selectTabState(global, tabId).globalSearch,\n      ...searchStatePartial,\n    },\n  }, tabId);\n}\n\nexport function updateGlobalSearchContent<T extends GlobalState>(\n  global: T,\n  currentContent: GlobalSearchContent | undefined,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateGlobalSearch(global, { currentContent }, tabId);\n}\n\nexport function updateGlobalSearchResults<T extends GlobalState>(\n  global: T,\n  newFoundMessages: ApiMessage[],\n  totalCount: number,\n  type: ApiGlobalMessageSearchType,\n  nextOffsetRate?: number,\n  nextOffsetId?: number,\n  nextOffsetPeerId?: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { resultsByType } = selectTabState(global, tabId).globalSearch || {};\n  const newFoundMessagesById = newFoundMessages.reduce((result, message) => {\n    result[getSearchResultKey(message)] = message;\n\n    return result;\n  }, {} as Record<string, ApiMessage>);\n  const foundIdsForType = resultsByType?.[type]?.foundIds;\n\n  if (foundIdsForType !== undefined\n    && Object.keys(newFoundMessagesById).every(\n      (newId) => foundIdsForType.includes(getSearchResultKey(newFoundMessagesById[newId])),\n    )\n  ) {\n    global = updateGlobalSearchFetchingStatus(global, { messages: false }, tabId);\n    return updateGlobalSearch(global, {\n      resultsByType: {\n        ...(selectTabState(global, tabId).globalSearch || {}).resultsByType,\n        [type]: {\n          foundIds: foundIdsForType,\n          totalCount,\n          nextOffsetId,\n          nextOffsetRate,\n          nextOffsetPeerId,\n        },\n      },\n    }, tabId);\n  }\n\n  const prevFoundIds = foundIdsForType || [];\n  const newFoundIds = newFoundMessages\n    .map((message) => getSearchResultKey(message))\n    .filter((id) => !prevFoundIds.includes(id));\n  const foundIds = Array.prototype.concat(prevFoundIds, newFoundIds);\n  const foundOrPrevFoundIds = areSortedArraysEqual(prevFoundIds, foundIds) ? prevFoundIds : foundIds;\n\n  global = updateGlobalSearchFetchingStatus(global, { messages: false }, tabId);\n\n  return updateGlobalSearch(global, {\n    resultsByType: {\n      ...(selectTabState(global, tabId).globalSearch || {}).resultsByType,\n      [type]: {\n        totalCount,\n        nextOffsetId,\n        nextOffsetRate,\n        nextOffsetPeerId,\n        foundIds: foundOrPrevFoundIds,\n      },\n    },\n  }, tabId);\n}\n\nexport function updateGlobalSearchFetchingStatus<T extends GlobalState>(\n  global: T, newState: { chats?: boolean; messages?: boolean; botApps?: boolean },\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateGlobalSearch(global, {\n    fetchingStatus: {\n      ...selectTabState(global, tabId).globalSearch.fetchingStatus,\n      ...newState,\n    },\n  }, tabId);\n}\n","export * from './chats';\nexport * from './messages';\nexport * from './symbols';\nexport * from './users';\nexport * from './globalSearch';\nexport * from './middleSearch';\nexport * from './management';\nexport * from './settings';\nexport * from './twoFaSettings';\nexport * from './passcode';\nexport * from './payments';\nexport * from './statistics';\nexport * from './stories';\nexport * from './translations';\nexport * from './peers';\nexport * from './topics';\n","import type { ManagementProgress, ManagementState } from '../../types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function updateManagementProgress<T extends GlobalState>(\n  global: T, progress: ManagementProgress,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    management: {\n      ...selectTabState(global, tabId).management,\n      progress,\n    },\n  }, tabId);\n}\n\nexport function updateManagement<T extends GlobalState>(\n  global: T, chatId: string, update: Partial<ManagementState>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { management } = selectTabState(global, tabId);\n  return updateTabState(global, {\n    management: {\n      ...management,\n      byChatId: {\n        ...management.byChatId,\n        [chatId]: {\n          ...(management.byChatId[chatId] || {}),\n          ...update,\n        },\n      },\n    },\n  }, tabId);\n}\n","import type {\n  ApiMessage, ApiPoll, ApiPollResult, ApiQuickReply, ApiSponsoredMessage, ApiThreadInfo,\n} from '../../api/types';\nimport type {\n  FocusDirection,\n  MessageList,\n  MessageListType,\n  ScrollTargetPosition,\n  TabThread,\n  Thread,\n  ThreadId,\n} from '../../types';\nimport type {\n  GlobalState, TabArgs, TabState,\n} from '../types';\nimport { MAIN_THREAD_ID } from '../../api/types';\n\nimport {\n  IS_MOCKED_CLIENT, IS_TEST, MESSAGE_LIST_SLICE, MESSAGE_LIST_VIEWPORT_LIMIT, TMP_CHAT_ID,\n} from '../../config';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { addTimestampEntities } from '../../util/dates/timestamp';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport {\n  areSortedArraysEqual, excludeSortedArray, omit, omitUndefined, pick, pickTruthy, unique,\n} from '../../util/iteratees';\nimport { isLocalMessageId, type MessageKey } from '../../util/keys/messageKey';\nimport {\n  hasMessageTtl, isMediaLoadableInViewer, mergeIdRanges, orderHistoryIds, orderPinnedIds,\n} from '../helpers';\nimport { getEmojiOnlyCountForMessage } from '../helpers/getEmojiOnlyCountForMessage';\nimport {\n  selectChatMessage,\n  selectChatMessages,\n  selectChatScheduledMessages,\n  selectCurrentMessageIds,\n  selectCurrentMessageList,\n  selectListedIds,\n  selectMessageIdsByGroupId,\n  selectOutlyingLists,\n  selectPinnedIds,\n  selectPoll,\n  selectQuickReplyMessage,\n  selectScheduledIds,\n  selectScheduledMessage,\n  selectTabState,\n  selectThreadIdFromMessage,\n  selectThreadInfo,\n  selectViewportIds,\n} from '../selectors';\nimport { removeIdFromSearchResults } from './middleSearch';\nimport { updateTabState } from './tabs';\nimport { clearMessageTranslation } from './translations';\n\ntype MessageStoreSections = GlobalState['messages']['byChatId'][string];\n\nexport function updateCurrentMessageList<T extends GlobalState>(\n  global: T,\n  chatId: string | undefined,\n  threadId: ThreadId = MAIN_THREAD_ID,\n  type: MessageListType = 'thread',\n  shouldReplaceHistory?: boolean,\n  shouldReplaceLast?: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { messageLists } = selectTabState(global, tabId);\n  let newMessageLists: MessageList[] = messageLists;\n  if (shouldReplaceHistory || (IS_TEST && !IS_MOCKED_CLIENT)) {\n    newMessageLists = chatId ? [{ chatId, threadId, type }] : [];\n  } else if (chatId) {\n    const current = messageLists[messageLists.length - 1];\n    if (current?.chatId === chatId && current.threadId === threadId && current.type === type) {\n      return global;\n    }\n\n    if (current && (current.chatId === TMP_CHAT_ID || shouldReplaceLast)) {\n      newMessageLists = [...messageLists.slice(0, -1), { chatId, threadId, type }];\n    } else {\n      const previous = messageLists[messageLists.length - 2];\n\n      if (previous?.chatId === chatId && previous.threadId === threadId && previous.type === type) {\n        newMessageLists = messageLists.slice(0, -1);\n      } else {\n        newMessageLists = [...messageLists, { chatId, threadId, type }];\n      }\n    }\n  } else {\n    newMessageLists = messageLists.slice(0, -1);\n  }\n\n  return updateTabState(global, {\n    messageLists: newMessageLists,\n  }, tabId);\n}\n\nfunction replaceChatMessages<T extends GlobalState>(global: T, chatId: string, newById: Record<number, ApiMessage>): T {\n  return updateMessageStore(global, chatId, {\n    byId: newById,\n  });\n}\n\nexport function updateTabThread<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, threadUpdate: Partial<TabThread>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const tabState = selectTabState(global, tabId);\n  const current = tabState.tabThreads[chatId]?.[threadId] || {};\n\n  return updateTabState(global, {\n    tabThreads: {\n      ...tabState.tabThreads,\n      [chatId]: {\n        ...tabState.tabThreads[chatId],\n        [threadId]: {\n          ...current,\n          ...threadUpdate,\n        },\n      },\n    },\n  }, tabId);\n}\n\nexport function updateThread<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, threadUpdate: Partial<Thread> | undefined,\n): T {\n  if (!threadUpdate) {\n    return updateMessageStore(global, chatId, {\n      threadsById: omit(global.messages.byChatId[chatId]?.threadsById, [threadId]),\n    });\n  }\n\n  const current = global.messages.byChatId[chatId];\n\n  return updateMessageStore(global, chatId, {\n    threadsById: {\n      ...(current?.threadsById),\n      [threadId]: {\n        ...(current?.threadsById[threadId]),\n        ...threadUpdate,\n      },\n    },\n  });\n}\n\nexport function updateMessageStore<T extends GlobalState>(\n  global: T, chatId: string, update: Partial<MessageStoreSections>,\n): T {\n  const current = global.messages.byChatId[chatId] || { byId: {}, threadsById: {} };\n\n  return {\n    ...global,\n    messages: {\n      ...global.messages,\n      byChatId: {\n        ...global.messages.byChatId,\n        [chatId]: {\n          ...current,\n          ...update,\n        },\n      },\n    },\n  };\n}\n\nexport function replaceTabThreadParam<T extends GlobalState, K extends keyof TabThread>(\n  global: T, chatId: string, threadId: ThreadId, paramName: K, newValue: TabThread[K] | undefined,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  if (paramName === 'viewportIds') {\n    global = replaceThreadParam(\n      global, chatId, threadId, 'lastViewportIds', newValue as number[] | undefined,\n    );\n  }\n  return updateTabThread(global, chatId, threadId, { [paramName]: newValue }, tabId);\n}\n\nexport function replaceThreadParam<T extends GlobalState, K extends keyof Thread>(\n  global: T, chatId: string, threadId: ThreadId, paramName: K, newValue: Thread[K] | undefined,\n) {\n  return updateThread(global, chatId, threadId, { [paramName]: newValue });\n}\n\nexport function addMessages<T extends GlobalState>(\n  global: T, messages: ApiMessage[],\n): T {\n  const addedByChatId = messages.reduce((messagesByChatId, message: ApiMessage) => {\n    if (!messagesByChatId[message.chatId]) {\n      messagesByChatId[message.chatId] = {};\n    }\n    messagesByChatId[message.chatId][message.id] = message;\n\n    return messagesByChatId;\n  }, {} as Record<string, Record<number, ApiMessage>>);\n\n  Object.keys(addedByChatId).forEach((chatId) => {\n    global = addChatMessagesById(global, chatId, addedByChatId[chatId]);\n  });\n\n  return global;\n}\n\nexport function replaceMessages<T extends GlobalState>(\n  global: T, messages: ApiMessage[],\n): T {\n  const updatedByChatId = messages.reduce((messagesByChatId, message: ApiMessage) => {\n    if (!messagesByChatId[message.chatId]) {\n      messagesByChatId[message.chatId] = {};\n    }\n    messagesByChatId[message.chatId][message.id] = message;\n\n    return messagesByChatId;\n  }, {} as Record<string, Record<number, ApiMessage>>);\n\n  Object.keys(updatedByChatId).forEach((chatId) => {\n    const currentById = selectChatMessages(global, chatId) || {};\n    const newById = {\n      ...currentById,\n      ...updatedByChatId[chatId],\n    };\n    global = replaceChatMessages(global, chatId, newById);\n  });\n\n  return global;\n}\n\nexport function addChatMessagesById<T extends GlobalState>(\n  global: T, chatId: string, newById: Record<number, ApiMessage>,\n): T {\n  const byId = selectChatMessages(global, chatId);\n\n  if (byId && Object.keys(newById).every((newId) => Boolean(byId[Number(newId)]))) {\n    return global;\n  }\n\n  return replaceChatMessages(global, chatId, {\n    ...newById,\n    ...byId,\n  });\n}\n\nexport function updateChatMessage<T extends GlobalState>(\n  global: T, chatId: string, messageId: number, messageUpdate: Partial<ApiMessage>, withDeepCheck = false,\n): T {\n  const byId = selectChatMessages(global, chatId) || {};\n  const message = byId[messageId];\n\n  if (withDeepCheck && message) {\n    const updateKeys = Object.keys(messageUpdate) as (keyof ApiMessage)[];\n    if (areDeepEqual(pick(message, updateKeys), messageUpdate)) {\n      return global;\n    }\n  }\n\n  if (message && messageUpdate.isMediaUnread === false && hasMessageTtl(message)) {\n    if (message.content.voice) {\n      messageUpdate.content = {\n        action: {\n          mediaType: 'action',\n          type: 'expired',\n          isVoice: true,\n        },\n      };\n    } else if (message.content.video?.isRound) {\n      messageUpdate.content = {\n        action: {\n          mediaType: 'action',\n          type: 'expired',\n          isRoundVideo: true,\n        },\n      };\n    }\n  }\n\n  let emojiOnlyCount = message?.emojiOnlyCount;\n  let text = message?.content?.text;\n  if (messageUpdate.content) {\n    emojiOnlyCount = getEmojiOnlyCountForMessage(\n      messageUpdate.content, message?.groupedId || messageUpdate.groupedId,\n    );\n    text = messageUpdate.content.text ? addTimestampEntities(messageUpdate.content.text) : text;\n  }\n\n  const updatedMessage = omitUndefined({\n    ...message,\n    ...messageUpdate,\n    emojiOnlyCount,\n    text,\n  });\n\n  if (!updatedMessage.id) {\n    return global;\n  }\n\n  return replaceChatMessages(global, chatId, {\n    ...byId,\n    [messageId]: updatedMessage,\n  });\n}\n\nexport function updateScheduledMessage<T extends GlobalState>(\n  global: T, chatId: string, messageId: number, messageUpdate: Partial<ApiMessage>,\n): T {\n  const message = selectScheduledMessage(global, chatId, messageId)!;\n\n  let emojiOnlyCount = message?.emojiOnlyCount;\n  let text = message?.content?.text;\n  if (messageUpdate.content) {\n    emojiOnlyCount = getEmojiOnlyCountForMessage(\n      messageUpdate.content, message?.groupedId || messageUpdate.groupedId,\n    );\n    text = messageUpdate.content.text ? addTimestampEntities(messageUpdate.content.text) : text;\n  }\n\n  const updatedMessage = {\n    ...message,\n    ...messageUpdate,\n    emojiOnlyCount,\n    text,\n  };\n\n  if (!updatedMessage.id) {\n    return global;\n  }\n\n  return updateScheduledMessages(global, chatId, {\n    [messageId]: updatedMessage,\n  });\n}\n\nexport function updateQuickReplyMessage<T extends GlobalState>(\n  global: T, messageId: number, messageUpdate: Partial<ApiMessage>,\n): T {\n  const message = selectQuickReplyMessage(global, messageId);\n  const updatedMessage = {\n    ...message,\n    ...messageUpdate,\n  };\n\n  if (!updatedMessage.id) {\n    return global;\n  }\n\n  return updateQuickReplyMessages(global, {\n    [messageId]: updatedMessage,\n  });\n}\n\nexport function deleteQuickReplyMessages<T extends GlobalState>(\n  global: T, messageIds: number[],\n): T {\n  const byId = global.quickReplies.messagesById;\n  const newById = omit(byId, messageIds);\n  return {\n    ...global,\n    quickReplies: {\n      ...global.quickReplies,\n      messagesById: newById,\n    },\n  };\n}\n\nexport function deleteChatMessages<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  messageIds: number[],\n): T {\n  const byId = selectChatMessages(global, chatId);\n  if (!byId) {\n    return global;\n  }\n\n  orderHistoryIds(messageIds);\n  const updatedThreads = new Map<ThreadId, number[]>();\n  updatedThreads.set(MAIN_THREAD_ID, messageIds);\n\n  const mediaIdsToRemove: number[] = [];\n  messageIds.forEach((messageId) => {\n    const message = byId[messageId];\n    if (!message) return;\n    if (isMediaLoadableInViewer(message)) {\n      mediaIdsToRemove.push(messageId);\n    }\n    const threadId = selectThreadIdFromMessage(global, message);\n    if (!threadId || threadId === MAIN_THREAD_ID) {\n      return;\n    }\n    const threadMessages = updatedThreads.get(threadId) || [];\n    threadMessages.push(messageId);\n    updatedThreads.set(threadId, threadMessages);\n    global = clearMessageTranslation(global, chatId, messageId);\n  });\n\n  const deletedForwardedPosts = Object.values(pickTruthy(byId, messageIds)).filter(\n    ({ forwardInfo }) => forwardInfo?.isLinkedChannelPost,\n  );\n\n  updatedThreads.forEach((threadMessageIds, threadId) => {\n    const threadInfo = selectThreadInfo(global, chatId, threadId);\n\n    let listedIds = selectListedIds(global, chatId, threadId);\n    let pinnedIds = selectPinnedIds(global, chatId, threadId);\n    let outlyingLists = selectOutlyingLists(global, chatId, threadId);\n    let newMessageCount = threadInfo?.messagesCount;\n\n    if (listedIds) {\n      listedIds = excludeSortedArray(listedIds, threadMessageIds);\n    }\n\n    if (outlyingLists) {\n      outlyingLists = outlyingLists.map((list) => excludeSortedArray(list, threadMessageIds));\n    }\n\n    if (pinnedIds) {\n      pinnedIds = excludeSortedArray(pinnedIds, orderPinnedIds(threadMessageIds));\n    }\n\n    const nonLocalMessageCount = threadMessageIds.filter((id) => !isLocalMessageId(id)).length;\n    if (newMessageCount !== undefined) {\n      newMessageCount -= nonLocalMessageCount;\n    }\n\n    Object.values(global.byTabId).forEach(({ id: tabId }) => {\n      const tabState = selectTabState(global, tabId);\n      const activeDownloadsInChat = Object.entries(tabState.activeDownloads).filter(\n        ([, { originChatId, originMessageId }]) => originChatId === chatId && originMessageId,\n      );\n\n      activeDownloadsInChat.forEach(([mediaHash, context]) => {\n        if (messageIds.includes(context.originMessageId!)) {\n          global = cancelMessageMediaDownload(global, [mediaHash], tabId);\n        }\n      });\n\n      mediaIdsToRemove.forEach((mediaId) => {\n        global = removeIdFromSearchResults(global, chatId, threadId, mediaId, tabId);\n      });\n\n      const viewportIds = selectViewportIds(global, chatId, threadId, tabId);\n      if (!viewportIds) return;\n\n      const newViewportIds = excludeSortedArray(viewportIds, messageIds);\n      global = replaceTabThreadParam(\n        global,\n        chatId,\n        threadId,\n        'viewportIds',\n        newViewportIds.length === 0 ? undefined : newViewportIds,\n        tabId,\n      );\n    });\n\n    global = replaceThreadParam(global, chatId, threadId, 'listedIds', listedIds);\n    global = replaceThreadParam(global, chatId, threadId, 'outlyingLists', outlyingLists);\n    global = replaceThreadParam(global, chatId, threadId, 'pinnedIds', pinnedIds);\n\n    if (threadInfo && newMessageCount !== undefined) {\n      global = updateThreadInfo(global, chatId, threadId, {\n        messagesCount: newMessageCount,\n      });\n    }\n  });\n\n  if (deletedForwardedPosts.length) {\n    Object.values(global.byTabId).forEach(({ id: tabId }) => {\n      const currentMessageList = selectCurrentMessageList(global, tabId);\n      const canDeleteCurrentThread = currentMessageList && currentMessageList.chatId === chatId\n        && currentMessageList.type === 'thread';\n      const currentThreadId = currentMessageList?.threadId;\n\n      deletedForwardedPosts.forEach((message) => {\n        const { fromChatId, fromMessageId } = message.forwardInfo!;\n        const originalPost = selectChatMessage(global, fromChatId!, fromMessageId!);\n\n        if (canDeleteCurrentThread && currentThreadId === message.id) {\n          global = updateCurrentMessageList(global, chatId, undefined, undefined, undefined, undefined, tabId);\n        }\n        if (originalPost) {\n          global = updateThread(global, fromChatId!, fromMessageId!, undefined);\n        }\n      });\n    });\n  }\n\n  const newById = omit(byId, messageIds);\n  global = replaceChatMessages(global, chatId, newById);\n\n  return global;\n}\n\nexport function deleteChatScheduledMessages<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  messageIds: number[],\n): T {\n  const byId = selectChatScheduledMessages(global, chatId);\n  if (!byId) {\n    return global;\n  }\n  const newById = omit(byId, messageIds);\n\n  let scheduledIds = selectScheduledIds(global, chatId, MAIN_THREAD_ID);\n  if (scheduledIds) {\n    messageIds.forEach((messageId) => {\n      if (scheduledIds!.includes(messageId)) {\n        scheduledIds = scheduledIds!.filter((id) => id !== messageId);\n      }\n    });\n    global = replaceThreadParam(global, chatId, MAIN_THREAD_ID, 'scheduledIds', scheduledIds);\n\n    Object.entries(global.messages.byChatId[chatId].threadsById).forEach(([threadId, thread]) => {\n      if (thread.scheduledIds) {\n        const newScheduledIds = thread.scheduledIds.filter((id) => !messageIds.includes(id));\n        global = replaceThreadParam(global, chatId, Number(threadId), 'scheduledIds', newScheduledIds);\n      }\n    });\n  }\n\n  global = {\n    ...global,\n    scheduledMessages: {\n      byChatId: {\n        ...global.scheduledMessages.byChatId,\n        [chatId]: {\n          byId: newById,\n        },\n      },\n    },\n  };\n\n  return global;\n}\n\nexport function updateListedIds<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  idsUpdate: number[],\n): T {\n  const listedIds = selectListedIds(global, chatId, threadId);\n  const newIds = listedIds?.length\n    ? idsUpdate.filter((id) => !listedIds.includes(id))\n    : idsUpdate;\n\n  if (listedIds && !newIds.length) {\n    return global;\n  }\n\n  return replaceThreadParam(global, chatId, threadId, 'listedIds', orderHistoryIds([\n    ...(listedIds || []),\n    ...newIds,\n  ]));\n}\n\nexport function removeOutlyingList<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  list: number[],\n): T {\n  const outlyingLists = selectOutlyingLists(global, chatId, threadId);\n  if (!outlyingLists) {\n    return global;\n  }\n\n  const newOutlyingLists = outlyingLists.filter((l) => l !== list);\n\n  return replaceThreadParam(global, chatId, threadId, 'outlyingLists', newOutlyingLists);\n}\n\nexport function updateOutlyingLists<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  idsUpdate: number[],\n): T {\n  if (!idsUpdate.length) return global;\n\n  const outlyingLists = selectOutlyingLists(global, chatId, threadId);\n\n  const newOutlyingLists = mergeIdRanges(outlyingLists || [], idsUpdate);\n\n  return replaceThreadParam(global, chatId, threadId, 'outlyingLists', newOutlyingLists);\n}\n\nexport function addViewportId<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  newId: number,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const viewportIds = selectViewportIds(global, chatId, threadId, tabId) || [];\n  if (viewportIds.includes(newId)) {\n    return global;\n  }\n\n  const newIds = orderHistoryIds([\n    ...(\n      viewportIds.length < MESSAGE_LIST_VIEWPORT_LIMIT\n        ? viewportIds\n        : viewportIds.slice(-(MESSAGE_LIST_SLICE / 2))\n    ),\n    newId,\n  ]);\n\n  return replaceTabThreadParam(global, chatId, threadId, 'viewportIds', newIds, tabId);\n}\n\nexport function safeReplaceViewportIds<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  newViewportIds: number[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const currentIds = selectViewportIds(global, chatId, threadId, tabId) || [];\n  const newIds = orderHistoryIds(newViewportIds);\n\n  return replaceTabThreadParam(\n    global,\n    chatId,\n    threadId,\n    'viewportIds',\n    areSortedArraysEqual(currentIds, newIds) ? currentIds : newIds,\n    tabId,\n  );\n}\n\nexport function safeReplacePinnedIds<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  newPinnedIds: number[],\n): T {\n  const currentIds = selectPinnedIds(global, chatId, threadId) || [];\n  const newIds = orderPinnedIds(newPinnedIds);\n\n  return replaceThreadParam(\n    global,\n    chatId,\n    threadId,\n    'pinnedIds',\n    areSortedArraysEqual(currentIds, newIds) ? currentIds : newIds,\n  );\n}\n\nexport function updateThreadInfo<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, update: Partial<ApiThreadInfo> | undefined,\n  doNotUpdateLinked?: boolean,\n): T {\n  const newThreadInfo = {\n    ...(selectThreadInfo(global, chatId, threadId) as ApiThreadInfo),\n    ...update,\n  } as ApiThreadInfo;\n\n  if (!doNotUpdateLinked && !newThreadInfo.isCommentsInfo) {\n    const linkedUpdate = pick(newThreadInfo, ['messagesCount', 'lastMessageId', 'lastReadInboxMessageId']);\n    if (newThreadInfo.fromChannelId && newThreadInfo.fromMessageId) {\n      global = updateThreadInfo(\n        global, newThreadInfo.fromChannelId, newThreadInfo.fromMessageId, linkedUpdate, true,\n      );\n    }\n  }\n\n  return replaceThreadParam(global, chatId, threadId, 'threadInfo', newThreadInfo);\n}\n\nexport function updateThreadInfos<T extends GlobalState>(\n  global: T, updates: Partial<ApiThreadInfo>[],\n): T {\n  updates.forEach((update) => {\n    global = updateThreadInfo(\n      global,\n      update.isCommentsInfo ? update.originChannelId! : update.chatId!,\n      update.isCommentsInfo ? update.originMessageId! : update.threadId!,\n      update,\n    );\n  });\n\n  return global;\n}\n\nexport function updateScheduledMessages<T extends GlobalState>(\n  global: T, chatId: string, newById: Record<number, ApiMessage>,\n): T {\n  const current = global.scheduledMessages.byChatId[chatId] || { byId: {}, hash: 0 };\n\n  return {\n    ...global,\n    scheduledMessages: {\n      byChatId: {\n        ...global.scheduledMessages.byChatId,\n        [chatId]: {\n          ...current,\n          byId: {\n            ...current.byId,\n            ...newById,\n          },\n        },\n      },\n    },\n  };\n}\n\nexport function updateQuickReplyMessages<T extends GlobalState>(\n  global: T, update: Record<number, ApiMessage>,\n): T {\n  return {\n    ...global,\n    quickReplies: {\n      ...global.quickReplies,\n      messagesById: {\n        ...global.quickReplies.messagesById,\n        ...update,\n      },\n    },\n  };\n}\n\nexport function updateFocusedMessage<T extends GlobalState>(\n  {\n    global,\n    chatId,\n    messageId,\n    threadId = MAIN_THREAD_ID,\n    noHighlight = false,\n    isResizingContainer = false,\n    quote,\n    quoteOffset,\n    scrollTargetPosition,\n  }: {\n    global: T;\n    chatId?: string;\n    messageId?: number;\n    threadId?: ThreadId;\n    noHighlight?: boolean;\n    isResizingContainer?: boolean;\n    quote?: string;\n    quoteOffset?: number;\n    scrollTargetPosition?: ScrollTargetPosition;\n  },\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    focusedMessage: {\n      ...selectTabState(global, tabId).focusedMessage,\n      chatId,\n      threadId,\n      messageId,\n      noHighlight,\n      isResizingContainer,\n      quote,\n      quoteOffset,\n      scrollTargetPosition,\n    },\n  }, tabId);\n}\n\nexport function updateSponsoredMessage<T extends GlobalState>(\n  global: T, chatId: string, message: ApiSponsoredMessage,\n): T {\n  return {\n    ...global,\n    messages: {\n      ...global.messages,\n      sponsoredByChatId: {\n        ...global.messages.sponsoredByChatId,\n        [chatId]: message,\n      },\n    },\n  };\n}\n\nexport function deleteSponsoredMessage<T extends GlobalState>(\n  global: T, chatId: string,\n): T {\n  const byChatId = global.messages.sponsoredByChatId;\n  if (!byChatId[chatId]) {\n    return global;\n  }\n\n  return {\n    ...global,\n    messages: {\n      ...global.messages,\n      sponsoredByChatId: omit(byChatId, [chatId]),\n    },\n  };\n}\n\nexport function updateFocusDirection<T extends GlobalState>(\n  global: T, direction?: FocusDirection,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    focusedMessage: {\n      ...selectTabState(global, tabId).focusedMessage,\n      direction,\n    },\n  }, tabId);\n}\n\nexport function enterMessageSelectMode<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  messageId?: number | number[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const messageIds = messageId ? Array.prototype.concat([], messageId) : [];\n\n  return updateTabState(global, {\n    selectedMessages: {\n      chatId,\n      messageIds,\n    },\n  }, tabId);\n}\n\nexport function toggleMessageSelection<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  messageListType: MessageListType,\n  messageId: number,\n  groupedId?: string,\n  childMessageIds?: number[],\n  withShift = false,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { selectedMessages: oldSelectedMessages } = selectTabState(global, tabId);\n  if (groupedId) {\n    childMessageIds = selectMessageIdsByGroupId(global, chatId, groupedId);\n  }\n  const selectedMessageIds = childMessageIds || [messageId];\n  if (!oldSelectedMessages) {\n    return enterMessageSelectMode(global, chatId, selectedMessageIds, tabId);\n  }\n\n  const { messageIds } = oldSelectedMessages;\n\n  let newMessageIds;\n  const newSelectedMessageIds = selectedMessageIds.filter((id) => !messageIds.includes(id));\n  if (newSelectedMessageIds && !newSelectedMessageIds.length) {\n    newMessageIds = messageIds.filter((id) => !selectedMessageIds.includes(id));\n  } else if (withShift && messageIds.length) {\n    const viewportIds = selectCurrentMessageIds(global, chatId, threadId, messageListType, tabId)!;\n    const prevIndex = viewportIds.indexOf(messageIds[messageIds.length - 1]);\n    const currentIndex = viewportIds.indexOf(messageId);\n    const from = Math.min(prevIndex, currentIndex);\n    const to = Math.max(prevIndex, currentIndex);\n    const slice = viewportIds.slice(from, to + 1);\n    newMessageIds = unique([...messageIds, ...slice]);\n  } else {\n    newMessageIds = [...messageIds, ...newSelectedMessageIds];\n  }\n\n  if (!newMessageIds.length) {\n    return exitMessageSelectMode(global, tabId);\n  }\n\n  return updateTabState(global, {\n    selectedMessages: {\n      ...oldSelectedMessages,\n      messageIds: newMessageIds,\n    },\n  }, tabId);\n}\n\nexport function exitMessageSelectMode<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    selectedMessages: undefined,\n  }, tabId);\n}\n\nexport function updateThreadUnreadFromForwardedMessage<T extends GlobalState>(\n  global: T,\n  originMessage: ApiMessage,\n  chatId: string,\n  lastMessageId: number,\n  isDeleting?: boolean,\n): T {\n  const { channelPostId, fromChatId } = originMessage.forwardInfo || {};\n  if (channelPostId && fromChatId) {\n    const threadInfoOld = selectThreadInfo(global, chatId, channelPostId);\n    if (threadInfoOld) {\n      global = replaceThreadParam(global, chatId, channelPostId, 'threadInfo', {\n        ...threadInfoOld,\n        lastMessageId,\n        messagesCount: (threadInfoOld.messagesCount || 0) + (isDeleting ? -1 : 1),\n      });\n    }\n  }\n  return global;\n}\n\nexport function addActiveMediaDownload<T extends GlobalState>(\n  global: T,\n  mediaHash: string,\n  metadata: TabState['activeDownloads'][string],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n\n  global = updateTabState(global, {\n    activeDownloads: {\n      ...tabState.activeDownloads,\n      [mediaHash]: metadata,\n    },\n  }, tabId);\n\n  return global;\n}\n\nexport function cancelMessageMediaDownload<T extends GlobalState>(\n  global: T,\n  mediaHashes: string[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n\n  const newActiveDownloads = omit(tabState.activeDownloads, mediaHashes);\n\n  global = updateTabState(global, {\n    activeDownloads: newActiveDownloads,\n  }, tabId);\n\n  return global;\n}\n\nexport function updateUploadByMessageKey<T extends GlobalState>(\n  global: T,\n  messageKey: MessageKey,\n  progress: number | undefined,\n) {\n  return {\n    ...global,\n    fileUploads: {\n      byMessageKey: progress !== undefined\n        ? {\n          ...global.fileUploads.byMessageKey,\n          [messageKey]: { progress },\n        }\n        : omit(global.fileUploads.byMessageKey, [messageKey]),\n    },\n  };\n}\n\nexport function updateQuickReplies<T extends GlobalState>(\n  global: T,\n  quickRepliesUpdate: Record<number, ApiQuickReply>,\n) {\n  return {\n    ...global,\n    quickReplies: {\n      ...global.quickReplies,\n      byId: {\n        ...global.quickReplies.byId,\n        ...quickRepliesUpdate,\n      },\n    },\n  };\n}\n\nexport function deleteQuickReply<T extends GlobalState>(\n  global: T,\n  quickReplyId: number,\n) {\n  return {\n    ...global,\n    quickReplies: {\n      ...global.quickReplies,\n      byId: omit(global.quickReplies.byId, [quickReplyId]),\n    },\n  };\n}\n\nexport function updatePoll<T extends GlobalState>(\n  global: T,\n  pollId: string,\n  pollUpdate: Partial<ApiPoll>,\n) {\n  const poll = selectPoll(global, pollId);\n\n  const oldResults = poll?.results;\n  let newResults = oldResults || pollUpdate.results;\n  if (poll && pollUpdate.results?.results) {\n    if (!poll.results || !pollUpdate.results.isMin) {\n      newResults = pollUpdate.results;\n    } else if (oldResults.results) {\n      // Update voters counts, but keep local `isChosen` values\n      newResults = {\n        ...pollUpdate.results,\n        results: pollUpdate.results.results.map((result) => ({\n          ...result,\n          isChosen: oldResults.results!.find((r) => r.option === result.option)?.isChosen,\n        })),\n        isMin: undefined,\n      };\n    }\n  }\n\n  const updatedPoll = {\n    ...poll,\n    ...pollUpdate,\n    results: newResults,\n  } satisfies ApiPoll;\n  if (!updatedPoll.id) {\n    return global;\n  }\n\n  return {\n    ...global,\n    messages: {\n      ...global.messages,\n      pollById: {\n        ...global.messages.pollById,\n        [pollId]: updatedPoll,\n      },\n    },\n  };\n}\n\nexport function updatePollVote<T extends GlobalState>(\n  global: T,\n  pollId: string,\n  peerId: string,\n  options: string[],\n) {\n  const poll = selectPoll(global, pollId);\n  if (!poll) {\n    return global;\n  }\n\n  const { recentVoterIds, totalVoters, results } = poll.results;\n  const newRecentVoterIds = recentVoterIds ? [...recentVoterIds] : [];\n  const newTotalVoters = totalVoters ? totalVoters + 1 : 1;\n  const newResults = results ? [...results] : [];\n\n  newRecentVoterIds.push(peerId);\n\n  options.forEach((option) => {\n    const targetOptionIndex = newResults.findIndex((result) => result.option === option);\n    const targetOption = newResults[targetOptionIndex];\n    const updatedOption: ApiPollResult = targetOption ? { ...targetOption } : { option, votersCount: 0 };\n\n    updatedOption.votersCount += 1;\n    if (peerId === global.currentUserId) {\n      updatedOption.isChosen = true;\n    }\n\n    if (targetOptionIndex) {\n      newResults[targetOptionIndex] = updatedOption;\n    } else {\n      newResults.push(updatedOption);\n    }\n  });\n\n  return updatePoll(global, pollId, {\n    results: {\n      ...poll.results,\n      recentVoterIds: newRecentVoterIds,\n      totalVoters: newTotalVoters,\n      results: newResults,\n    },\n  });\n}\n","import type { ApiMessage, ApiMessageSearchType } from '../../api/types';\nimport type {\n  ChatMediaSearchParams,\n  ChatMediaSearchSegment,\n  LoadingState,\n  MiddleSearchParams,\n  MiddleSearchResults,\n  SharedMediaType,\n  ThreadId,\n} from '../../types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport {\n  areSortedArraysEqual, areSortedArraysIntersecting, omit, unique,\n} from '../../util/iteratees';\nimport { buildChatThreadKey, isMediaLoadableInViewer } from '../helpers';\nimport { selectTabState } from '../selectors';\nimport { selectChatMediaSearch } from '../selectors/middleSearch';\nimport { updateTabState } from './tabs';\n\ninterface SharedMediaSearchParams {\n  currentType?: SharedMediaType;\n  resultsByType?: Partial<Record<SharedMediaType, {\n    totalCount?: number;\n    nextOffsetId: number;\n    foundIds: number[];\n  }>>;\n}\n\nfunction replaceMiddleSearch<T extends GlobalState>(\n  global: T,\n  chatThreadKey: string,\n  searchParams?: MiddleSearchParams,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const current = selectTabState(global, tabId).middleSearch.byChatThreadKey;\n  if (!searchParams) {\n    return updateTabState(global, {\n      middleSearch: {\n        byChatThreadKey: omit(current, [chatThreadKey]),\n      },\n    }, tabId);\n  }\n\n  const { type = 'chat', ...rest } = searchParams;\n  return updateTabState(global, {\n    middleSearch: {\n      byChatThreadKey: {\n        ...selectTabState(global, tabId).middleSearch.byChatThreadKey,\n        [chatThreadKey]: {\n          type,\n          ...rest,\n        },\n      },\n    },\n  }, tabId);\n}\n\nexport function updateMiddleSearch<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  update: Partial<MiddleSearchParams>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n  const currentSearch = selectTabState(global, tabId).middleSearch.byChatThreadKey[chatThreadKey];\n\n  const updated = {\n    type: 'chat',\n    ...currentSearch,\n    ...update,\n  } satisfies MiddleSearchParams;\n\n  if (!updated.isHashtag) {\n    updated.type = 'chat';\n  }\n\n  if (currentSearch && (currentSearch.type !== updated.type || currentSearch.savedTag !== updated.savedTag)) {\n    updated.results = undefined;\n  }\n\n  return replaceMiddleSearch(global, chatThreadKey, updated, tabId);\n}\n\nexport function resetMiddleSearch<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return replaceMiddleSearch(global, buildChatThreadKey(chatId, threadId), {\n    type: 'chat',\n  }, tabId);\n}\n\nfunction replaceMiddleSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  results: MiddleSearchResults,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateMiddleSearch(global, chatId, threadId, {\n    results,\n    fetchingQuery: undefined,\n  }, tabId);\n}\n\nexport function updateMiddleSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  update: MiddleSearchResults,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n  const { results } = selectTabState(global, tabId).middleSearch.byChatThreadKey[chatThreadKey] || {};\n  const prevQuery = (results?.query) || '';\n  if (update.query !== prevQuery) {\n    return replaceMiddleSearchResults(global, chatId, threadId, update, tabId);\n  }\n\n  const prevFoundIds = (results?.foundIds) || [];\n  const {\n    query, foundIds: newFoundIds, totalCount, nextOffsetId, nextOffsetPeerId, nextOffsetRate,\n  } = update;\n  const foundIds = unique(Array.prototype.concat(prevFoundIds, newFoundIds));\n  const foundOrPrevFoundIds = areSortedArraysEqual(prevFoundIds, foundIds) ? prevFoundIds : foundIds;\n\n  return replaceMiddleSearchResults(\n    global, chatId, threadId, {\n      query,\n      foundIds: foundOrPrevFoundIds,\n      totalCount,\n      nextOffsetId,\n      nextOffsetRate,\n      nextOffsetPeerId,\n    }, tabId,\n  );\n}\n\nexport function closeMiddleSearch<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return replaceMiddleSearch(global, chatThreadKey, undefined, tabId);\n}\n\nfunction replaceSharedMediaSearch<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  searchParams: SharedMediaSearchParams,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return updateTabState(global, {\n    sharedMediaSearch: {\n      byChatThreadKey: {\n        ...selectTabState(global, tabId).sharedMediaSearch.byChatThreadKey,\n        [chatThreadKey]: searchParams,\n      },\n    },\n  }, tabId);\n}\n\nexport function updateSharedMediaSearchType<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  currentType: SharedMediaType | undefined,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return replaceSharedMediaSearch(global, chatId, threadId, {\n    ...selectTabState(global, tabId).sharedMediaSearch.byChatThreadKey[chatThreadKey],\n    currentType,\n  }, tabId);\n}\n\nexport function replaceSharedMediaSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  type: ApiMessageSearchType,\n  foundIds?: number[],\n  totalCount?: number,\n  nextOffsetId?: number,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return replaceSharedMediaSearch(global, chatId, threadId, {\n    ...selectTabState(global, tabId).sharedMediaSearch.byChatThreadKey[chatThreadKey],\n    resultsByType: {\n      ...(selectTabState(global, tabId).sharedMediaSearch.byChatThreadKey[chatThreadKey] || {}).resultsByType,\n      [type]: {\n        foundIds,\n        totalCount,\n        nextOffsetId,\n      },\n    },\n  }, tabId);\n}\n\nexport function updateSharedMediaSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  type: SharedMediaType,\n  newFoundIds: number[],\n  totalCount?: number,\n  nextOffsetId?: number,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  const { resultsByType } = selectTabState(global, tabId).sharedMediaSearch.byChatThreadKey[chatThreadKey] || {};\n  const prevFoundIds = resultsByType?.[type] ? resultsByType[type].foundIds : [];\n  const foundIds = orderFoundIdsByDescending(unique(Array.prototype.concat(prevFoundIds, newFoundIds)));\n  const foundOrPrevFoundIds = areSortedArraysEqual(prevFoundIds, foundIds) ? prevFoundIds : foundIds;\n\n  return replaceSharedMediaSearchResults(\n    global,\n    chatId,\n    threadId,\n    type,\n    foundOrPrevFoundIds,\n    totalCount,\n    nextOffsetId,\n    tabId,\n  );\n}\n\nfunction orderFoundIdsByDescending(listedIds: number[]) {\n  return listedIds.sort((a, b) => b - a);\n}\n\nfunction orderFoundIdsByAscending(array: number[]) {\n  return array.sort((a, b) => a - b);\n}\n\nexport function mergeWithChatMediaSearchSegment(\n  foundIds: number[],\n  loadingState: LoadingState,\n  segment?: ChatMediaSearchSegment,\n): ChatMediaSearchSegment {\n  if (!segment) {\n    return {\n      foundIds,\n      loadingState,\n    };\n  }\n  const mergedFoundIds = orderFoundIdsByAscending(unique(Array.prototype.concat(segment.foundIds, foundIds)));\n  if (!areSortedArraysEqual(segment.foundIds, foundIds)) {\n    segment.foundIds = mergedFoundIds;\n  }\n  const mergedLoadingState: LoadingState = {\n    areAllItemsLoadedForwards: loadingState.areAllItemsLoadedForwards\n      || segment.loadingState.areAllItemsLoadedForwards,\n    areAllItemsLoadedBackwards: loadingState.areAllItemsLoadedBackwards\n      || segment.loadingState.areAllItemsLoadedBackwards,\n  };\n  segment.loadingState = mergedLoadingState;\n  return segment;\n}\n\nfunction mergeChatMediaSearchSegments(currentSegment: ChatMediaSearchSegment, segments: ChatMediaSearchSegment[]) {\n  return segments.reduce((acc, segment) => {\n    const hasIntersection = areSortedArraysIntersecting(segment.foundIds, currentSegment.foundIds);\n    if (hasIntersection) {\n      currentSegment = mergeWithChatMediaSearchSegment(\n        currentSegment.foundIds,\n        currentSegment.loadingState,\n        segment,\n      );\n    } else {\n      acc.push(segment);\n    }\n    return acc;\n  }, [] as ChatMediaSearchSegment[]);\n}\n\nexport function updateChatMediaSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  currentSegment: ChatMediaSearchSegment,\n  searchParams: ChatMediaSearchParams,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const segments = mergeChatMediaSearchSegments(currentSegment, searchParams.segments);\n\n  return replaceChatMediaSearchResults(\n    global,\n    chatId,\n    threadId,\n    currentSegment,\n    segments,\n    tabId,\n  );\n}\n\nfunction removeIdFromSegment(id: number, segment: ChatMediaSearchSegment): ChatMediaSearchSegment {\n  const foundIds = segment.foundIds.filter((foundId) => foundId !== id);\n\n  return {\n    ...segment,\n    foundIds,\n  };\n}\n\nfunction removeIdsFromChatMediaSearchParams(\n  id: number,\n  searchParams: ChatMediaSearchParams,\n): ChatMediaSearchParams {\n  const currentSegment = removeIdFromSegment(id, searchParams.currentSegment);\n  const segments = searchParams.segments.map((segment) => removeIdFromSegment(id, segment));\n\n  return {\n    ...searchParams,\n    currentSegment,\n    segments,\n  };\n}\n\nexport function removeIdFromSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  id: number,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const searchParams = selectChatMediaSearch(global, chatId, threadId, tabId);\n  if (!searchParams) return global;\n\n  const updatedSearchParams = removeIdsFromChatMediaSearchParams(id, searchParams);\n\n  return replaceChatMediaSearch(\n    global,\n    chatId,\n    threadId,\n    updatedSearchParams,\n    tabId,\n  );\n}\n\nfunction resetForwardsLoadingStateInParams(\n  searchParams: ChatMediaSearchParams,\n) {\n  searchParams.currentSegment.loadingState.areAllItemsLoadedForwards = false;\n  searchParams.segments.forEach((segment) => {\n    segment.loadingState.areAllItemsLoadedForwards = false;\n  });\n}\n\nexport function updateChatMediaLoadingState<T extends GlobalState>(\n  global: T,\n  newMessage: ApiMessage,\n  chatId: string,\n  threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  if (!isMediaLoadableInViewer(newMessage)) {\n    return global;\n  }\n  const searchParams = selectChatMediaSearch(global, chatId, threadId, tabId);\n  if (!searchParams) return global;\n  resetForwardsLoadingStateInParams(searchParams);\n\n  return replaceChatMediaSearch(\n    global,\n    chatId,\n    threadId,\n    searchParams,\n    tabId,\n  );\n}\n\nexport function initializeChatMediaSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const loadingState: LoadingState = {\n    areAllItemsLoadedForwards: false,\n    areAllItemsLoadedBackwards: false,\n  };\n  const currentSegment: ChatMediaSearchSegment = {\n    foundIds: [],\n    loadingState,\n  };\n  const segments: ChatMediaSearchSegment[] = [];\n\n  const isLoading = false;\n\n  return replaceChatMediaSearch(global, chatId, threadId, {\n    currentSegment,\n    segments,\n    isLoading,\n  }, tabId);\n}\n\nexport function setChatMediaSearchLoading<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  isLoading: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n  const searchParams = selectTabState(global, tabId).chatMediaSearch.byChatThreadKey[chatThreadKey];\n\n  if (!searchParams) {\n    return global;\n  }\n\n  return replaceChatMediaSearch(global, chatId, threadId, {\n    ...searchParams,\n    isLoading,\n  }, tabId);\n}\n\nexport function replaceChatMediaSearchResults<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  currentSegment: ChatMediaSearchSegment,\n  segments: ChatMediaSearchSegment[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return replaceChatMediaSearch(global, chatId, threadId, {\n    ...selectTabState(global, tabId).chatMediaSearch.byChatThreadKey[chatThreadKey],\n    currentSegment,\n    segments,\n  }, tabId);\n}\n\nfunction replaceChatMediaSearch<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  searchParams: ChatMediaSearchParams,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return updateTabState(global, {\n    chatMediaSearch: {\n      byChatThreadKey: {\n        ...selectTabState(global, tabId).chatMediaSearch.byChatThreadKey,\n        [chatThreadKey]: searchParams,\n      },\n    },\n  }, tabId);\n}\n","import type { GlobalState, SharedState, TabState } from '../types';\n\nimport { INITIAL_GLOBAL_STATE, INITIAL_SHARED_STATE, INITIAL_TAB_STATE } from '../initialState';\n\nexport function updatePasscodeSettings<T extends GlobalState>(\n  global: T,\n  update: GlobalState['passcode'],\n): T {\n  return {\n    ...global,\n    passcode: {\n      ...global.passcode,\n      ...update,\n    },\n  };\n}\n\nexport function clearPasscodeSettings<T extends GlobalState>(global: T): T {\n  return {\n    ...global,\n    passcode: {},\n  };\n}\n\nexport function clearGlobalForLockScreen<T extends GlobalState>(global: T, withTabState = true): T {\n  return {\n    ...INITIAL_GLOBAL_STATE,\n    passcode: global.passcode,\n    settings: INITIAL_GLOBAL_STATE.settings,\n    sharedState: clearSharedStateForLockScreen(global.sharedState),\n    ...(withTabState && {\n      byTabId: Object.values(global.byTabId).reduce((acc, { id: tabId, isMasterTab }) => {\n        acc[tabId] = { ...INITIAL_TAB_STATE, isMasterTab, id: tabId };\n        return acc;\n      }, {} as Record<number, TabState>),\n    }),\n  } as T;\n}\n\nexport function clearSharedStateForLockScreen(sharedState: SharedState): SharedState {\n  const {\n    theme,\n    shouldUseSystemTheme,\n    animationLevel,\n    language,\n  } = sharedState.settings;\n\n  return {\n    ...INITIAL_SHARED_STATE,\n    settings: {\n      ...INITIAL_SHARED_STATE.settings,\n      theme,\n      shouldUseSystemTheme,\n      animationLevel,\n      language,\n    },\n  };\n}\n","import type {\n  ApiReceiptRegular,\n  ApiReceiptStars,\n  ApiStarsSubscription,\n  ApiStarsTransaction,\n  ApiTypeCurrencyAmount,\n} from '../../api/types';\nimport type {\n  PaymentStep,\n  ShippingOption,\n  StarsSubscriptions,\n  StarsTransactionType,\n} from '../../types';\nimport type {\n  GlobalState, TabArgs, TabState,\n} from '../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../config';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { selectStarsPayment, selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function updatePayment<T extends GlobalState>(\n  global: T, update: Partial<TabState['payment']>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    payment: {\n      ...selectTabState(global, tabId).payment,\n      ...update,\n    },\n  }, tabId);\n}\n\nexport function updateStarsPayment<T extends GlobalState>(\n  global: T, update: Partial<TabState['starsPayment']>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const starPayment = selectStarsPayment(global, tabId);\n  if (!starPayment) {\n    return global;\n  }\n\n  return updateTabState(global, {\n    starsPayment: {\n      ...starPayment,\n      ...update,\n    },\n  }, tabId);\n}\n\nexport function updateShippingOptions<T extends GlobalState>(\n  global: T,\n  shippingOptions: ShippingOption[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n\n): T {\n  return updatePayment(global, { shippingOptions }, tabId);\n}\n\nexport function setRequestInfoId<T extends GlobalState>(\n  global: T, id: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updatePayment(global, { requestId: id }, tabId);\n}\n\nexport function setPaymentStep<T extends GlobalState>(\n  global: T, step: PaymentStep,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updatePayment(global, { step }, tabId);\n}\n\nexport function setStripeCardInfo<T extends GlobalState>(\n  global: T, cardInfo: { type: string; id: string },\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updatePayment(global, { stripeCredentials: { ...cardInfo } }, tabId);\n}\n\nexport function setSmartGlocalCardInfo<T extends GlobalState>(\n  global: T,\n  cardInfo: { type: string; token: string },\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updatePayment(global, { smartGlocalCredentials: { ...cardInfo } }, tabId);\n}\n\nexport function setConfirmPaymentUrl<T extends GlobalState>(\n  global: T, url?: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updatePayment(global, { confirmPaymentUrl: url }, tabId);\n}\n\nexport function setReceipt<T extends GlobalState>(\n  global: T,\n  receipt?: ApiReceiptRegular,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  if (!receipt) {\n    return updatePayment(global, { receipt: undefined }, tabId);\n  }\n\n  return updatePayment(global, {\n    receipt,\n  }, tabId);\n}\n\nexport function clearPayment<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    payment: {},\n  }, tabId);\n}\n\nexport function clearStarPayment<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    starsPayment: {},\n  }, tabId);\n}\n\nexport function closeInvoice<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  global = updatePayment(global, {\n    isPaymentModalOpen: undefined,\n    isExtendedMedia: undefined,\n  }, tabId);\n  return global;\n}\n\nexport function updateStarsBalance<T extends GlobalState>(\n  global: T, balance: ApiTypeCurrencyAmount,\n): T {\n  if (balance.currency === STARS_CURRENCY_CODE) {\n    return {\n      ...global,\n      stars: {\n        ...global.stars,\n        balance,\n      },\n    };\n  }\n\n  if (balance.currency === TON_CURRENCY_CODE) {\n    return {\n      ...global,\n      ton: {\n        ...global.ton,\n        balance,\n      },\n    };\n  }\n\n  return global;\n}\n\nexport function appendStarsTransactions<T extends GlobalState>(\n  global: T,\n  type: StarsTransactionType,\n  transactions: ApiStarsTransaction[],\n  nextOffset?: string,\n  isTon?: boolean,\n): T {\n  if (isTon) {\n    const history = global.ton?.history;\n    if (!history) {\n      return global;\n    }\n\n    const newTypeObject = {\n      transactions: (history[type]?.transactions || []).concat(transactions),\n      nextOffset,\n    };\n\n    return {\n      ...global,\n      ton: {\n        ...global.ton,\n        history: {\n          ...history,\n          [type]: newTypeObject,\n        },\n      },\n    };\n  }\n\n  const history = global.stars?.history;\n  if (!history) {\n    return global;\n  }\n\n  const newTypeObject = {\n    transactions: (history[type]?.transactions || []).concat(transactions),\n    nextOffset,\n  };\n\n  return {\n    ...global,\n    stars: {\n      ...global.stars,\n      history: {\n        ...history,\n        [type]: newTypeObject,\n      },\n    },\n  };\n}\n\nexport function appendStarsSubscriptions<T extends GlobalState>(\n  global: T,\n  subscriptions: ApiStarsSubscription[],\n  nextOffset?: string,\n): T {\n  if (!global.stars) {\n    return global;\n  }\n\n  const newObject = {\n    list: (global.stars.subscriptions?.list || []).concat(subscriptions),\n    nextOffset,\n  } satisfies StarsSubscriptions;\n\n  return {\n    ...global,\n    stars: {\n      ...global.stars,\n      subscriptions: newObject,\n    },\n  };\n}\n\nexport function updateStarsSubscriptionLoading<T extends GlobalState>(\n  global: T, isLoading: boolean,\n): T {\n  const subscriptions = global.stars?.subscriptions;\n  if (!subscriptions) {\n    return global;\n  }\n\n  return {\n    ...global,\n    stars: {\n      ...global.stars,\n      subscriptions: {\n        ...subscriptions,\n        isLoading,\n      },\n    },\n  };\n}\n\nexport function openStarsTransactionModal<T extends GlobalState>(\n  global: T, transaction: ApiStarsTransaction, ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    starsTransactionModal: {\n      transaction,\n    },\n  }, tabId);\n}\n\nexport function openStarsTransactionFromReceipt<T extends GlobalState>(\n  global: T, receipt: ApiReceiptStars, ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const transaction: ApiStarsTransaction = {\n    id: receipt.transactionId,\n    peer: {\n      type: 'peer',\n      id: receipt.botId,\n    },\n    amount: {\n      currency: STARS_CURRENCY_CODE,\n      amount: receipt.totalAmount,\n      nanos: 0,\n    },\n    date: receipt.date,\n    title: receipt.title,\n    description: receipt.description,\n    photo: receipt.photo,\n  };\n\n  return openStarsTransactionModal(global, transaction, tabId);\n}\n","import type {\n  ApiChat, ApiChatFullInfo, ApiPeerPhotos, ApiPhoto, ApiUser, ApiUserFullInfo,\n} from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isUserId } from '../../util/entities/ids';\nimport { omit, uniqueByField } from '../../util/iteratees';\nimport { isChatChannel } from '../helpers';\nimport {\n  selectChatFullInfo,\n  selectPeer,\n  selectPeerPhotos,\n  selectUserFullInfo,\n} from '../selectors';\nimport { updateChat, updateChatFullInfo } from './chats';\nimport { updateUser, updateUserFullInfo } from './users';\n\n// `type` has different types in ApiChat and ApiUser\ntype ApiPeerSharedFields = Omit<CommonProperties<ApiChat, ApiUser>, 'type'>;\ntype ApiPeerFullInfoSharedFields = CommonProperties<ApiChatFullInfo, ApiUserFullInfo>;\n\nexport function updatePeer<T extends GlobalState>(\n  global: T, peerId: string, peerUpdate: Partial<ApiPeerSharedFields>,\n) {\n  if (isUserId(peerId)) {\n    return updateUser(global, peerId, peerUpdate);\n  }\n\n  return updateChat(global, peerId, peerUpdate);\n}\n\nexport function updatePeerFullInfo<T extends GlobalState>(\n  global: T, peerId: string, peerFullInfoUpdate: Partial<ApiPeerFullInfoSharedFields>,\n) {\n  if (isUserId(peerId)) {\n    return updateUserFullInfo(global, peerId, peerFullInfoUpdate);\n  }\n\n  return updateChatFullInfo(global, peerId, peerFullInfoUpdate);\n}\n\nexport function updatePeerPhotosIsLoading<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  isLoading: boolean,\n) {\n  const profilePhotos = selectPeerPhotos(global, peerId);\n  if (!profilePhotos) {\n    return global;\n  }\n\n  return replacePeerPhotos(global, peerId, {\n    ...profilePhotos,\n    isLoading,\n  });\n}\n\nexport function replacePeerPhotos<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  value?: ApiPeerPhotos,\n) {\n  if (!value) {\n    return {\n      ...global,\n      peers: {\n        ...global.peers,\n        profilePhotosById: omit(global.peers.profilePhotosById, [peerId]),\n      },\n    };\n  }\n\n  return {\n    ...global,\n    peers: {\n      ...global.peers,\n      profilePhotosById: {\n        ...global.peers.profilePhotosById,\n        [peerId]: value,\n      },\n    },\n  };\n}\n\nexport function updatePeerPhotos<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  update: {\n    newPhotos: ApiPhoto[];\n    count: number;\n    nextOffset?: number;\n    fullInfo: ApiChatFullInfo | ApiUserFullInfo;\n    shouldInvalidateCache?: boolean;\n  },\n) {\n  const profilePhotos = selectPeerPhotos(global, peerId);\n\n  const {\n    newPhotos, count, nextOffset, fullInfo, shouldInvalidateCache,\n  } = update;\n  const currentPhotos = profilePhotos;\n  const profilePhoto = fullInfo.profilePhoto;\n  const fallbackPhoto = 'fallbackPhoto' in fullInfo ? fullInfo.fallbackPhoto : undefined;\n  const personalPhoto = 'personalPhoto' in fullInfo ? fullInfo.personalPhoto : undefined;\n\n  if (!currentPhotos || shouldInvalidateCache) {\n    // In some channels, last service message with photo change is deleted, so we need to patch it in\n    if (profilePhoto && profilePhoto.id !== newPhotos[0]?.id) {\n      newPhotos.unshift(profilePhoto);\n    }\n\n    if (personalPhoto && personalPhoto.id !== newPhotos[0]?.id) {\n      newPhotos.unshift(personalPhoto);\n    }\n\n    if (fallbackPhoto) {\n      newPhotos.push(fallbackPhoto);\n    }\n\n    return replacePeerPhotos(global, peerId, {\n      fallbackPhoto,\n      personalPhoto,\n      photos: newPhotos,\n      count,\n      nextOffset,\n      isLoading: false,\n    });\n  }\n\n  const hasFallbackPhoto = currentPhotos.photos[currentPhotos.photos.length - 1].id === fallbackPhoto?.id;\n  const currentPhotoArray = hasFallbackPhoto ? currentPhotos.photos.slice(0, -1) : currentPhotos.photos;\n\n  const photos = uniqueByField([...currentPhotoArray, ...newPhotos, fallbackPhoto].filter(Boolean), 'id');\n  return replacePeerPhotos(global, peerId, {\n    fallbackPhoto,\n    personalPhoto,\n    photos,\n    count,\n    nextOffset,\n    isLoading: false,\n  });\n}\n\nexport function deletePeerPhoto<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  photoId: string,\n  isFromActionMessage?: boolean,\n) {\n  const peer = selectPeer(global, peerId);\n  const profilePhotos = selectPeerPhotos(global, peerId);\n  if (!peer || !profilePhotos) {\n    return global;\n  }\n  const isChannel = 'title' in peer && isChatChannel(peer);\n\n  const userFullInfo = selectUserFullInfo(global, peerId);\n  const chatFullInfo = selectChatFullInfo(global, peerId);\n\n  const isAvatar = peer.avatarPhotoId === photoId && (!isChannel || isFromActionMessage);\n  const nextAvatarPhoto = isAvatar ? profilePhotos.photos[1] : undefined;\n\n  if (userFullInfo) {\n    const newFallbackPhoto = userFullInfo.fallbackPhoto?.id === photoId ? undefined : userFullInfo.fallbackPhoto;\n    const newPersonalPhoto = userFullInfo.personalPhoto?.id === photoId ? undefined : userFullInfo.personalPhoto;\n    const newProfilePhoto = userFullInfo.profilePhoto?.id === photoId ? nextAvatarPhoto : userFullInfo.profilePhoto;\n    global = updateUserFullInfo(global, peerId, {\n      fallbackPhoto: newFallbackPhoto,\n      personalPhoto: newPersonalPhoto,\n      profilePhoto: newProfilePhoto,\n    });\n  }\n\n  if (chatFullInfo) {\n    const newProfilePhoto = chatFullInfo.profilePhoto?.id === photoId ? nextAvatarPhoto : chatFullInfo.profilePhoto;\n    global = updateChatFullInfo(global, peerId, {\n      profilePhoto: newProfilePhoto,\n    });\n  }\n\n  const avatarPhotoId = isAvatar ? nextAvatarPhoto?.id : peer.avatarPhotoId;\n  const shouldKeepInPhotos = isAvatar && 'title' in peer && isChatChannel(peer);\n  const photos = shouldKeepInPhotos\n    ? profilePhotos.photos.filter((photo) => photo.id !== photoId) : profilePhotos.photos.slice();\n\n  global = updatePeer(global, peerId, {\n    avatarPhotoId,\n  });\n\n  global = replacePeerPhotos(global, peerId, avatarPhotoId ? {\n    ...profilePhotos,\n    photos,\n    count: profilePhotos.count - 1,\n  } : undefined);\n\n  return global;\n}\n","import type { ApiNotifyPeerType, ApiPeerNotifySettings } from '../../api/types';\nimport type {\n  AccountSettings, IThemeSettings,\n  ThemeKey,\n} from '../../types';\nimport type { GlobalState, SharedState } from '../types';\n\nimport { selectSharedSettings } from '../selectors/sharedState';\nimport { updateSharedState } from './sharedState';\nimport { updateUserBlockedState } from './users';\n\nexport function replaceSettings<T extends GlobalState>(global: T, newSettings?: Partial<AccountSettings>): T {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byKey: {\n        ...global.settings.byKey,\n        ...newSettings,\n      },\n    },\n  };\n}\n\nexport function updateSharedSettings<T extends GlobalState>(\n  global: T, newSettings?: Partial<SharedState['settings']>,\n): T {\n  const settings = selectSharedSettings(global);\n  return updateSharedState(global, {\n    settings: {\n      ...settings,\n      ...newSettings,\n    },\n  });\n}\n\nexport function updateThemeSettings<T extends GlobalState>(\n  global: T, theme: ThemeKey, newSettings?: Partial<IThemeSettings>,\n): T {\n  const settings = global.settings;\n  const current = settings.themes[theme];\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      themes: {\n        ...settings.themes,\n        [theme]: {\n          ...current,\n          ...newSettings,\n        },\n      },\n    },\n  };\n}\n\nexport function addNotifyExceptions<T extends GlobalState>(\n  global: T, notifyExceptionById: Record<string, ApiPeerNotifySettings>,\n): T {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      notifyExceptionById: {\n        ...global.chats.notifyExceptionById,\n        ...notifyExceptionById,\n      },\n    },\n  };\n}\n\nexport function replaceNotifyExceptions<T extends GlobalState>(\n  global: T, notifyExceptionById: Record<string, ApiPeerNotifySettings>,\n): T {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      notifyExceptionById,\n    },\n  };\n}\n\nexport function addNotifyException<T extends GlobalState>(\n  global: T, id: string, notifyException: ApiPeerNotifySettings,\n): T {\n  return {\n    ...global,\n    chats: {\n      ...global.chats,\n      notifyExceptionById: {\n        ...global.chats.notifyExceptionById,\n        [id]: notifyException,\n      },\n    },\n  };\n}\n\nexport function updateNotifyDefaults<T extends GlobalState>(\n  global: T, peerType: ApiNotifyPeerType, settings: Partial<ApiPeerNotifySettings>,\n): T {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      notifyDefaults: {\n        ...global.settings.notifyDefaults,\n        [peerType]: {\n          ...global.settings.notifyDefaults?.[peerType],\n          ...settings,\n        },\n      },\n    },\n  };\n}\n\nexport function addBlockedUser<T extends GlobalState>(global: T, contactId: string): T {\n  global = updateUserBlockedState(global, contactId, true);\n\n  return {\n    ...global,\n    blocked: {\n      ...global.blocked,\n      ids: [contactId, ...global.blocked.ids],\n      totalCount: global.blocked.totalCount + 1,\n    },\n  };\n}\n\nexport function removeBlockedUser<T extends GlobalState>(global: T, contactId: string): T {\n  global = updateUserBlockedState(global, contactId, false);\n\n  return {\n    ...global,\n    blocked: {\n      ...global.blocked,\n      ids: global.blocked.ids.filter((id) => id !== contactId),\n      totalCount: global.blocked.totalCount - 1,\n    },\n  };\n}\n","import type { GlobalState, SharedState } from '../types';\n\nexport function updateSharedState<T extends GlobalState>(\n  global: T, update: Partial<SharedState>,\n): T {\n  return {\n    ...global,\n    sharedState: {\n      ...global.sharedState,\n      ...update,\n    },\n  };\n}\n","import type {\n  ApiChannelMonetizationStatistics,\n  ApiChannelStatistics, ApiGroupStatistics, ApiPostStatistics, StatisticsGraph,\n} from '../../api/types';\nimport type { GlobalState, TabArgs, TabState } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function updateStatistics<T extends GlobalState>(\n  global: T, chatId: string, statistics: ApiChannelStatistics | ApiGroupStatistics,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    statistics: {\n      byChatId: {\n        ...selectTabState(global, tabId).statistics.byChatId,\n        [chatId]: statistics,\n      },\n    },\n  }, tabId);\n}\n\nexport function updateMessageStatistics<T extends GlobalState>(\n  global: T, statistics: ApiPostStatistics,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    statistics: {\n      ...selectTabState(global, tabId).statistics,\n      currentMessage: statistics,\n      currentStory: undefined,\n    },\n  }, tabId);\n}\n\nexport function updateStoryStatistics<T extends GlobalState>(\n  global: T, statistics: ApiPostStatistics,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    statistics: {\n      ...selectTabState(global, tabId).statistics,\n      currentStory: statistics,\n      currentMessage: undefined,\n    },\n  }, tabId);\n}\n\nexport function updateStatisticsGraph<T extends GlobalState>(\n  global: T, chatId: string, name: string, update: StatisticsGraph,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { statistics } = selectTabState(global, tabId);\n  return updateTabState(global, {\n    statistics: {\n      ...statistics,\n      byChatId: {\n        ...statistics.byChatId,\n        [chatId]: {\n          ...(statistics.byChatId[chatId] || {}),\n          [name]: update,\n        },\n      },\n    },\n  }, tabId);\n}\n\nexport function updateChannelMonetizationStatistics<T extends GlobalState>(\n  global: T, statistics: ApiChannelMonetizationStatistics,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    statistics: {\n      ...selectTabState(global, tabId).statistics,\n      monetization: statistics,\n    },\n  }, tabId);\n}\n\nexport function updateVerifyMonetizationModal<T extends GlobalState>(\n  global: T, update: Partial<TabState['monetizationVerificationModal']>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const tabState = selectTabState(global, tabId);\n  if (!tabState.monetizationVerificationModal) {\n    return global;\n  }\n\n  return updateTabState(global, {\n    monetizationVerificationModal: {\n      ...tabState.monetizationVerificationModal,\n      ...update,\n    },\n  }, tabId);\n}\n","import type {\n  ApiPeerStories,\n  ApiReaction,\n  ApiStealthMode,\n  ApiStory,\n  ApiStoryDeleted,\n  ApiStorySkipped,\n  ApiStoryViews,\n  ApiTypeStory,\n  ApiTypeStoryView,\n} from '../../api/types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { isUserId } from '../../util/entities/ids';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { compareFields, unique } from '../../util/iteratees';\nimport { getServerTime } from '../../util/serverTime';\nimport { updateReactionCount } from '../helpers';\nimport {\n  selectIsChatWithSelf,\n  selectPeer, selectPeerStories, selectPeerStory, selectTabState, selectUser,\n} from '../selectors';\nimport { updatePeer } from './peers';\nimport { updateTabState } from './tabs';\n\nexport function addStories<T extends GlobalState>(global: T, newStoriesByPeerId: Record<string, ApiPeerStories>): T {\n  const updatedByPeerId = Object.entries(newStoriesByPeerId).reduce((acc, [peerId, newPeerStories]) => {\n    if (!acc[peerId]) {\n      acc[peerId] = newPeerStories;\n    } else {\n      acc[peerId].byId = { ...acc[peerId].byId, ...newPeerStories.byId };\n      acc[peerId].orderedIds = unique(newPeerStories.orderedIds.concat(acc[peerId].orderedIds));\n      acc[peerId].profileIds = unique(newPeerStories.profileIds.concat(acc[peerId].profileIds)).sort((a, b) => b - a);\n      acc[peerId].lastUpdatedAt = newPeerStories.lastUpdatedAt;\n      acc[peerId].lastReadId = newPeerStories.lastReadId;\n    }\n\n    return acc;\n  }, global.stories.byPeerId);\n\n  global = {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: updatedByPeerId,\n    },\n  };\n\n  return updateOrderedStoriesPeerIds(global, Object.keys(newStoriesByPeerId));\n}\n\nexport function addStoriesForPeer<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  newStories: Record<number, ApiTypeStory>,\n  newPinnedIds?: number[],\n  addToArchive?: boolean,\n): T {\n  const {\n    byId, orderedIds, profileIds, archiveIds, pinnedIds,\n  } = global.stories.byPeerId[peerId] || {};\n  const deletedIds = Object.keys(newStories).filter((id) => 'isDeleted' in newStories[Number(id)]).map(Number);\n  const updatedById = { ...byId, ...newStories };\n  let updatedOrderedIds = [...(orderedIds || [])];\n  let updatedArchiveIds = [...(archiveIds || [])];\n  const updatedProfileIds = unique(\n    [...(profileIds || [])].concat(Object.values(newStories).reduce((ids, story) => {\n      if ('isInProfile' in story && story.isInProfile) {\n        ids.push(story.id);\n      }\n\n      return ids;\n    }, [] as number[])),\n  ).sort((a, b) => b - a).filter((storyId) => !deletedIds.includes(storyId));\n\n  updatedOrderedIds = unique(Object.entries(newStories).reduce((acc, [storyId, story]) => {\n    if ('expireDate' in story && story.expireDate && story.expireDate > getServerTime()) {\n      acc.push(Number(storyId));\n    }\n\n    return acc;\n  }, updatedOrderedIds)).filter((storyId) => !deletedIds.includes(storyId));\n\n  if (addToArchive && selectIsChatWithSelf(global, peerId)) {\n    updatedArchiveIds = unique(updatedArchiveIds.concat(Object.keys(newStories).map(Number)))\n      .sort((a, b) => b - a)\n      .filter((storyId) => !deletedIds.includes(storyId));\n  }\n\n  global = {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: {\n          ...global.stories.byPeerId[peerId],\n          byId: updatedById,\n          orderedIds: updatedOrderedIds,\n          profileIds: updatedProfileIds,\n          pinnedIds: pinnedIds || newPinnedIds,\n          ...(addToArchive && { archiveIds: updatedArchiveIds }),\n        },\n      },\n    },\n  };\n\n  if (selectIsChatWithSelf(global, peerId)\n    || selectUser(global, peerId)?.isContact\n    || peerId === global.appConfig?.storyChangelogUserId) {\n    global = updatePeerLastUpdatedAt(global, peerId);\n    global = updateOrderedStoriesPeerIds(global, [peerId]);\n  }\n\n  return global;\n}\n\nexport function updateStoriesForPeer<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  peerStories: ApiPeerStories,\n): T {\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: peerStories,\n      },\n    },\n  };\n}\n\nexport function updatePeerStoriesFullyLoaded<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  isFullyLoaded: boolean,\n  isArchive?: boolean,\n): T {\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: {\n          ...global.stories.byPeerId[peerId],\n          [isArchive ? 'isArchiveFullyLoaded' : 'isFullyLoaded']: isFullyLoaded,\n        },\n      },\n    },\n  };\n}\n\nexport function updateLastReadStoryForPeer<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  lastReadId: number,\n): T {\n  const { orderedIds } = selectPeerStories(global, peerId) || {};\n  if (!orderedIds) {\n    return global;\n  }\n\n  if (lastReadId >= orderedIds[orderedIds.length - 1]) {\n    global = updatePeer(global, peerId, {\n      hasUnreadStories: false,\n    });\n  }\n\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: {\n          ...global.stories.byPeerId[peerId],\n          lastReadId,\n        },\n      },\n    },\n  };\n}\n\nexport function updateLastViewedStoryForPeer<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  lastViewedId: number,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { orderedIds } = selectPeerStories(global, peerId) || {};\n  if (!orderedIds || !orderedIds.includes(lastViewedId)) {\n    return global;\n  }\n\n  const { storyViewer } = selectTabState(global, tabId);\n\n  return updateTabState(global, {\n    storyViewer: {\n      ...storyViewer,\n      lastViewedByPeerId: {\n        ...storyViewer.lastViewedByPeerId,\n        [peerId]: lastViewedId,\n      },\n    },\n  }, tabId);\n}\n\nexport function updatePeersWithStories<T extends GlobalState>(\n  global: T,\n  storiesByPeerId: Record<string, ApiPeerStories>,\n): T {\n  Object.entries(storiesByPeerId).forEach(([peerId, { lastReadId, orderedIds }]) => {\n    const peer = selectPeer(global, peerId);\n    if (!peer) return;\n\n    global = updatePeer(global, peerId, {\n      hasStories: true,\n      hasUnreadStories: !lastReadId\n        || Boolean(lastReadId && lastReadId < (peer.maxStoryId || orderedIds[orderedIds.length - 1])),\n    });\n  });\n\n  return global;\n}\n\nexport function updateStoryViews<T extends GlobalState>(\n  global: T,\n  storyId: number,\n  views: ApiTypeStoryView[],\n  nextOffset?: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const tabState = selectTabState(global, tabId);\n  const { viewModal } = tabState.storyViewer;\n  const newViews = viewModal?.storyId === storyId && viewModal.views ? [\n    ...viewModal.views,\n    ...views,\n  ] : views;\n\n  global = updateStoryViewsLoading(global, false, tabId);\n\n  return updateTabState(global, {\n    storyViewer: {\n      ...tabState.storyViewer,\n      viewModal: {\n        ...viewModal,\n        storyId,\n        views: newViews,\n        nextOffset,\n        isLoading: false,\n      },\n    },\n  }, tabId);\n}\n\nexport function updateStoryViewsLoading<T extends GlobalState>(\n  global: T,\n  isLoading: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const tabState = selectTabState(global, tabId);\n  const { viewModal } = tabState.storyViewer;\n  if (!viewModal) return global;\n\n  return updateTabState(global, {\n    storyViewer: {\n      ...tabState.storyViewer,\n      viewModal: {\n        ...viewModal,\n        isLoading,\n      },\n    },\n  }, tabId);\n}\n\nexport function removePeerStory<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  storyId: number,\n): T {\n  const {\n    orderedIds, profileIds, lastReadId, byId,\n  } = selectPeerStories(global, peerId) || { orderedIds: [] as number[], profileIds: [] as number[] };\n\n  const newOrderedIds = orderedIds.filter((id) => id !== storyId);\n  const newProfileIds = profileIds.filter((id) => id !== storyId);\n  const lastStoryId = newOrderedIds.length ? orderedIds[orderedIds.length - 1] : undefined;\n\n  const previousStoryId = orderedIds[orderedIds.indexOf(storyId) - 1];\n  const newLastReadId = lastReadId === storyId ? previousStoryId : lastReadId;\n\n  const newById = {\n    ...byId,\n    [storyId]: { id: storyId, peerId, isDeleted: true } as ApiStoryDeleted,\n  };\n  const lastUpdatedAt = lastStoryId ? (newById[lastStoryId] as ApiStory | undefined)?.date : undefined;\n  const hasStories = Boolean(newOrderedIds.length);\n\n  global = updatePeer(global, peerId, {\n    hasStories,\n    hasUnreadStories: Boolean(hasStories && lastReadId && lastStoryId && lastReadId < lastStoryId),\n  });\n\n  global = updateStoriesForPeer(global, peerId, {\n    byId: newById,\n    orderedIds: newOrderedIds,\n    profileIds: newProfileIds,\n    lastUpdatedAt,\n    lastReadId: newLastReadId,\n  });\n\n  Object.values(global.byTabId).forEach((tab) => {\n    if (tab.storyViewer.lastViewedByPeerId && tab.storyViewer.lastViewedByPeerId[peerId] === storyId) {\n      global = updateLastViewedStoryForPeer(global, peerId, previousStoryId, tab.id);\n    }\n  });\n\n  if (!hasStories) {\n    global = {\n      ...global,\n      stories: {\n        ...global.stories,\n        orderedPeerIds: {\n          active: global.stories.orderedPeerIds.active.filter((id) => id !== peerId),\n          archived: global.stories.orderedPeerIds.archived.filter((id) => id !== peerId),\n        },\n      },\n    };\n  }\n\n  return global;\n}\n\nexport function updateSentStoryReaction<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  storyId: number,\n  reaction: ApiReaction | undefined,\n): T {\n  const story = selectPeerStory(global, peerId, storyId);\n  if (!story || !('content' in story)) return global;\n\n  const { views } = story;\n  const reactionsCount = views?.reactionsCount || 0;\n  const hasReaction = views?.reactions?.some((r) => r.chosenOrder !== undefined);\n  const reactions = updateReactionCount(views?.reactions || [], [reaction].filter(Boolean));\n\n  const countDiff = !reaction ? -1 : hasReaction ? 0 : 1;\n  const newReactionsCount = reactionsCount + countDiff;\n\n  global = updatePeerStory(global, peerId, storyId, {\n    sentReaction: reaction,\n    views: {\n      ...views,\n      reactionsCount: newReactionsCount,\n      reactions,\n    },\n  });\n\n  return global;\n}\n\nexport function updatePeerStory<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  storyId: number,\n  storyUpdate: Partial<ApiStory>,\n): T {\n  const peerStories = selectPeerStories(global, peerId) || {\n    byId: {}, orderedIds: [], profileIds: [], archiveIds: [],\n  };\n\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: {\n          ...peerStories,\n          byId: {\n            ...peerStories.byId,\n            [storyId]: {\n              ...peerStories.byId[storyId],\n              ...storyUpdate,\n            },\n          },\n        },\n      },\n    },\n  };\n}\n\nexport function updatePeerStoryViews<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  storyId: number,\n  viewsUpdate: Partial<ApiStoryViews>,\n): T {\n  const story = selectPeerStory(global, peerId, storyId);\n  if (!story || !('content' in story)) return global;\n\n  const { views } = story;\n\n  return updatePeerStory(global, peerId, storyId, {\n    views: {\n      ...views,\n      ...viewsUpdate,\n    },\n  });\n}\n\nexport function updatePeerProfileStory<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  storyId: number,\n  isInProfile?: boolean,\n): T {\n  const peerStories = selectPeerStories(global, peerId) || {\n    byId: {}, orderedIds: [], profileIds: [], archiveIds: [],\n  };\n\n  const newProfileIds = isInProfile\n    ? unique(peerStories.profileIds.concat(storyId)).sort((a, b) => b - a)\n    : peerStories.profileIds.filter((id) => storyId !== id);\n\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: {\n          ...peerStories,\n          profileIds: newProfileIds,\n        },\n      },\n    },\n  };\n}\n\nexport function updatePeerStoriesHidden<T extends GlobalState>(global: T, peerId: string, areHidden: boolean) {\n  const peer = selectPeer(global, peerId);\n  if (!peer) return global;\n\n  const currentState = peer.areStoriesHidden;\n  if (currentState === areHidden) return global; // `updateOrderedStoriesPeerIds` is computationally expensive\n\n  global = updatePeer(global, peerId, {\n    areStoriesHidden: areHidden,\n  });\n\n  return updateOrderedStoriesPeerIds(global, [peerId]);\n}\n\nfunction updateOrderedStoriesPeerIds<T extends GlobalState>(global: T, updatePeerIds: string[]): T {\n  const { currentUserId, stories: { byPeerId, orderedPeerIds } } = global;\n\n  const allPeerIds = orderedPeerIds.active.concat(orderedPeerIds.archived).concat(updatePeerIds);\n  const newOrderedPeerIds = allPeerIds.reduce<{ active: string[]; archived: string[] }>((acc, peerId) => {\n    if (!byPeerId[peerId]?.orderedIds?.length) return acc;\n    const peer = selectPeer(global, peerId);\n\n    if (peer?.areStoriesHidden) {\n      acc.archived.push(peerId);\n    } else {\n      acc.active.push(peerId);\n    }\n\n    return acc;\n  }, { active: [], archived: [] });\n\n  function compare(peerIdA: string, peerIdB: string) {\n    const peerA = selectPeer(global, peerIdA)!;\n    const peerB = selectPeer(global, peerIdB)!;\n\n    const diffCurrentUser = compareFields(currentUserId === peerIdA, currentUserId === peerIdB);\n    if (diffCurrentUser) return diffCurrentUser;\n\n    const { lastUpdatedAt: luaA = 0, orderedIds: orderedA, lastReadId: lriA = 0 } = byPeerId[peerIdA] || {};\n    const hasUnreadA = lriA < orderedA?.[orderedA.length - 1];\n    const { lastUpdatedAt: luaB = 0, orderedIds: orderedB, lastReadId: lriB = 0 } = byPeerId[peerIdB] || {};\n    const hasUnreadB = lriB < orderedB?.[orderedB.length - 1];\n\n    const diffUnread = compareFields(hasUnreadA, hasUnreadB);\n    if (diffUnread) return diffUnread;\n\n    const diffPremium = compareFields('isPremium' in peerA, 'isPremium' in peerB);\n    if (diffPremium) return diffPremium;\n\n    const diffType = compareFields(isUserId(peerIdA), isUserId(peerIdB));\n    if (diffType) return diffType;\n\n    return compareFields(luaA, luaB);\n  }\n\n  newOrderedPeerIds.archived = unique(newOrderedPeerIds.archived)\n    .filter((peerId) => byPeerId[peerId]?.orderedIds?.length)\n    .sort(compare);\n  newOrderedPeerIds.active = unique(newOrderedPeerIds.active)\n    .filter((peerId) => byPeerId[peerId]?.orderedIds?.length)\n    .sort(compare);\n\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      orderedPeerIds: newOrderedPeerIds,\n    },\n  };\n}\n\nfunction updatePeerLastUpdatedAt<T extends GlobalState>(global: T, peerId: string): T {\n  const peerStories = global.stories.byPeerId[peerId];\n  const lastUpdatedAt = peerStories.orderedIds.reduce<number | undefined>((acc, storyId) => {\n    const { date } = peerStories.byId[storyId] as ApiStorySkipped || {};\n    if (date && (!acc || acc < date)) {\n      acc = date;\n    }\n\n    return acc;\n  }, undefined);\n\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      byPeerId: {\n        ...global.stories.byPeerId,\n        [peerId]: {\n          ...peerStories,\n          lastUpdatedAt,\n        },\n      },\n    },\n  };\n}\n\nexport function updateStealthMode<T extends GlobalState>(\n  global: T,\n  stealthMode: ApiStealthMode,\n): T {\n  return {\n    ...global,\n    stories: {\n      ...global.stories,\n      stealthMode,\n    },\n  };\n}\n","import type { ApiSticker, ApiStickerSet, ApiVideo } from '../../api/types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { buildCollectionByKey, unique } from '../../util/iteratees';\nimport { selectCustomEmojiForEmoji, selectStickersForEmoji, selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function updateStickerSearch<T extends GlobalState>(\n  global: T,\n  hash: string,\n  resultIds?: string[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    stickerSearch: {\n      ...selectTabState(global, tabId).stickerSearch,\n      hash,\n      resultIds,\n    },\n  }, tabId);\n}\n\nexport function updateStickerSets<T extends GlobalState>(\n  global: T,\n  category: 'added' | 'featured' | 'search',\n  hash: string,\n  sets: ApiStickerSet[],\n): T {\n  const updatedSets = sets.map((stickerSet) => {\n    const existing = global.stickers.setsById[stickerSet.id];\n    if (!existing) {\n      return stickerSet;\n    }\n\n    return {\n      ...existing,\n      ...stickerSet,\n    };\n  });\n\n  const regularSetIds = sets.map((set) => set.id);\n\n  if (category === 'search') {\n    return {\n      ...global,\n      stickers: {\n        ...global.stickers,\n        setsById: {\n          ...global.stickers.setsById,\n          ...buildCollectionByKey(updatedSets, 'id'),\n        },\n      },\n    };\n  }\n\n  return {\n    ...global,\n    stickers: {\n      ...global.stickers,\n      setsById: {\n        ...global.stickers.setsById,\n        ...buildCollectionByKey(updatedSets, 'id'),\n      },\n      [category]: {\n        ...global.stickers[category],\n        hash,\n        setIds: [\n          ...(global.stickers[category].setIds || []),\n          ...regularSetIds,\n        ],\n      },\n    },\n  };\n}\n\nexport function updateCustomEmojiSets<T extends GlobalState>(\n  global: T,\n  hash: string,\n  sets: ApiStickerSet[],\n): T {\n  const updatedSets = sets.map((stickerSet) => {\n    const existing = global.stickers.setsById[stickerSet.id];\n    if (!existing) {\n      return stickerSet;\n    }\n\n    return {\n      ...existing,\n      ...stickerSet,\n    };\n  });\n\n  const customEmojis = sets.map((set) => set.stickers).flat().filter(Boolean);\n  const addedSetIds = sets.map((set) => set.id);\n\n  return {\n    ...global,\n    stickers: {\n      ...global.stickers,\n      setsById: {\n        ...global.stickers.setsById,\n        ...buildCollectionByKey(updatedSets, 'id'),\n      },\n    },\n    customEmojis: {\n      ...global.customEmojis,\n      added: {\n        ...global.customEmojis.added,\n        hash,\n        setIds: [\n          ...(global.customEmojis.added.setIds || []),\n          ...addedSetIds,\n        ],\n      },\n      byId: {\n        ...global.customEmojis.byId,\n        ...buildCollectionByKey(customEmojis, 'id'),\n      },\n    },\n  };\n}\n\nexport function updateStickerSet<T extends GlobalState>(\n  global: T, stickerSetId: string, update: Partial<ApiStickerSet>,\n): T {\n  const currentStickerSet = global.stickers.setsById[stickerSetId] || {};\n  const isCustomEmoji = update.isEmoji || currentStickerSet.isEmoji;\n  const addedSets = (isCustomEmoji ? global.customEmojis.added.setIds : global.stickers.added.setIds) || [];\n  let setIds: string[] = addedSets;\n  if (update.installedDate && !update.isArchived && addedSets && !addedSets.includes(stickerSetId)) {\n    setIds = [stickerSetId, ...setIds];\n  }\n\n  if (!update.installedDate && addedSets?.includes(stickerSetId)) {\n    setIds = setIds.filter((id) => id !== stickerSetId);\n  }\n\n  const customEmojiById = isCustomEmoji && update.stickers && buildCollectionByKey(update.stickers, 'id');\n\n  return {\n    ...global,\n    stickers: {\n      ...global.stickers,\n      added: {\n        ...global.stickers.added,\n        ...(!isCustomEmoji && { setIds }),\n      },\n      setsById: {\n        ...global.stickers.setsById,\n        [stickerSetId]: {\n          ...currentStickerSet,\n          ...update,\n        },\n      },\n    },\n    customEmojis: {\n      ...global.customEmojis,\n      byId: {\n        ...global.customEmojis.byId,\n        ...customEmojiById,\n      },\n      added: {\n        ...global.customEmojis.added,\n        ...(isCustomEmoji && { setIds }),\n      },\n    },\n  };\n}\n\nexport function updateGifSearch<T extends GlobalState>(\n  global: T, isNew: boolean, results: ApiVideo[], nextOffset?: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const { results: currentResults } = selectTabState(global, tabId).gifSearch;\n\n  let newResults!: ApiVideo[];\n  if (isNew || !currentResults) {\n    newResults = results;\n  } else {\n    const currentIds = new Set(currentResults.map((gif) => gif.id));\n    newResults = [\n      ...currentResults,\n      ...results.filter((gif) => !currentIds.has(gif.id)),\n    ];\n  }\n\n  return updateTabState(global, {\n    gifSearch: {\n      ...selectTabState(global, tabId).gifSearch,\n      offset: nextOffset,\n      results: newResults,\n    },\n  }, tabId);\n}\n\nexport function replaceAnimatedEmojis<T extends GlobalState>(global: T, stickerSet: ApiStickerSet): T {\n  return {\n    ...global,\n    animatedEmojis: stickerSet,\n  };\n}\n\nexport function updateStickersForEmoji<T extends GlobalState>(\n  global: T, emoji: string, remoteStickers?: ApiSticker[], hash?: string,\n): T {\n  const localStickers = selectStickersForEmoji(global, emoji);\n  const allStickers = [...localStickers, ...(remoteStickers || [])];\n  const uniqueIds = unique(allStickers.map(({ id }) => id));\n  const byId = buildCollectionByKey(allStickers, 'id');\n  const stickers = uniqueIds.map((id) => byId[id]);\n\n  return {\n    ...global,\n    stickers: {\n      ...global.stickers,\n      forEmoji: {\n        emoji,\n        stickers,\n        hash,\n      },\n    },\n  };\n}\n\nexport function updateCustomEmojiForEmoji<T extends GlobalState>(\n  global: T, emoji: string,\n): T {\n  const localStickers = selectCustomEmojiForEmoji(global, emoji);\n  const uniqueIds = unique(localStickers.map(({ id }) => id));\n  const byId = buildCollectionByKey(localStickers, 'id');\n  const stickers = uniqueIds.map((id) => byId[id]);\n\n  return {\n    ...global,\n    customEmojis: {\n      ...global.customEmojis,\n      forEmoji: {\n        emoji,\n        stickers,\n      },\n    },\n  };\n}\n\nexport function updateRecentStatusCustomEmojis<T extends GlobalState>(\n  global: T, hash: string, emojis: ApiSticker[],\n): T {\n  return {\n    ...global,\n    customEmojis: {\n      ...global.customEmojis,\n      statusRecent: {\n        ...global.customEmojis.statusRecent,\n        hash,\n        emojis,\n      },\n    },\n  };\n}\n\nexport function rebuildStickersForEmoji<T extends GlobalState>(global: T): T {\n  if (global.stickers.forEmoji) {\n    const { emoji, stickers, hash } = global.stickers.forEmoji;\n    if (!emoji) {\n      return global;\n    }\n\n    return updateStickersForEmoji(global, emoji, stickers, hash);\n  }\n\n  if (global.customEmojis.forEmoji) {\n    const { emoji } = global.customEmojis.forEmoji;\n    if (!emoji) {\n      return global;\n    }\n\n    return updateCustomEmojiForEmoji(global, emoji);\n  }\n\n  return global;\n}\n","import type { GlobalState, TabArgs, TabState } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\n\nexport function updateTabState<T extends GlobalState>(\n  global: T,\n  tabStatePartial: Partial<TabState>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return {\n    ...global,\n    byTabId: {\n      ...global.byTabId,\n      [tabId]: {\n        ...global.byTabId[tabId],\n        ...tabStatePartial,\n      },\n    },\n  };\n}\n","import type { ApiTopic } from '../../api/types';\nimport type { TopicsInfo } from '../../types';\nimport type { GlobalState } from '../types';\n\nimport { buildCollectionByKey, omit, unique } from '../../util/iteratees';\nimport {\n  selectChat, selectTopic, selectTopics,\n  selectTopicsInfo,\n} from '../selectors';\nimport { updateThread, updateThreadInfo } from './messages';\n\nfunction updateTopicsStore<T extends GlobalState>(\n  global: T, chatId: string, update: Partial<TopicsInfo>,\n) {\n  const info = global.chats.topicsInfoById[chatId] || {};\n\n  global = {\n    ...global,\n    chats: {\n      ...global.chats,\n      topicsInfoById: {\n        ...global.chats.topicsInfoById,\n        [chatId]: {\n          ...info,\n          ...update,\n        },\n      },\n    },\n  };\n\n  return global;\n}\n\nexport function updateListedTopicIds<T extends GlobalState>(\n  global: T, chatId: string, topicIds: number[],\n): T {\n  const listedIds = selectTopicsInfo(global, chatId)?.listedTopicIds || [];\n  return updateTopicsStore(global, chatId, {\n    listedTopicIds: unique([\n      ...listedIds,\n      ...topicIds,\n    ]),\n  });\n}\n\nexport function updateTopics<T extends GlobalState>(\n  global: T, chatId: string, topicsCount: number, topics: ApiTopic[],\n): T {\n  const oldTopics = selectTopics(global, chatId);\n  const newTopics = buildCollectionByKey(topics, 'id');\n\n  global = updateTopicsStore(global, chatId, {\n    topicsById: {\n      ...oldTopics,\n      ...newTopics,\n    },\n    totalCount: topicsCount,\n  });\n\n  topics.forEach((topic) => {\n    global = updateThread(global, chatId, topic.id, {\n      firstMessageId: topic.id,\n    });\n\n    global = updateThreadInfo(global, chatId, topic.id, {\n      lastMessageId: topic.lastMessageId,\n      threadId: topic.id,\n      chatId,\n    });\n  });\n\n  return global;\n}\n\nexport function updateTopic<T extends GlobalState>(\n  global: T, chatId: string, topicId: number, update: Partial<ApiTopic>,\n): T {\n  const chat = selectChat(global, chatId);\n\n  if (!chat) return global;\n\n  const topic = selectTopic(global, chatId, topicId);\n  const oldTopics = selectTopics(global, chatId);\n\n  const updatedTopic = {\n    ...topic,\n    ...update,\n  } as ApiTopic;\n\n  if (!updatedTopic.id) return global;\n\n  global = updateTopicsStore(global, chatId, {\n    topicsById: {\n      ...oldTopics,\n      [topicId]: updatedTopic,\n    },\n  });\n\n  global = updateThread(global, chatId, updatedTopic.id, {\n    firstMessageId: updatedTopic.id,\n  });\n\n  global = updateThreadInfo(global, chatId, updatedTopic.id, {\n    lastMessageId: updatedTopic.lastMessageId,\n    threadId: updatedTopic.id,\n    chatId,\n  });\n\n  return global;\n}\n\nexport function deleteTopic<T extends GlobalState>(\n  global: T, chatId: string, topicId: number,\n) {\n  const topics = selectTopics(global, chatId);\n  if (!topics) return global;\n\n  global = updateTopicsStore(global, chatId, {\n    topicsById: omit(topics, [topicId]),\n  });\n\n  return global;\n}\n\nexport function updateTopicLastMessageId<T extends GlobalState>(\n  global: T, chatId: string, threadId: number, lastMessageId: number,\n) {\n  return updateTopic(global, chatId, threadId, {\n    lastMessageId,\n  });\n}\n\nexport function replacePinnedTopicIds<T extends GlobalState>(\n  global: T, chatId: string, pinnedTopicIds: number[],\n) {\n  return updateTopicsStore(global, chatId, {\n    orderedPinnedTopicIds: pinnedTopicIds,\n  });\n}\n","import type { ApiFormattedText } from '../../api/types';\nimport type { TranslatedMessage } from '../../types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { omit } from '../../util/iteratees';\nimport { selectMessageTranslations, selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function updateMessageTranslation<T extends GlobalState>(\n  global: T, chatId: string, messageId: number, toLanguageCode: string, translation: Partial<TranslatedMessage>,\n) {\n  const translatedMessages = selectMessageTranslations(global, chatId, toLanguageCode);\n\n  return {\n    ...global,\n    translations: {\n      ...global.translations,\n      byChatId: {\n        ...global.translations.byChatId,\n        [chatId]: {\n          ...global.translations.byChatId[chatId],\n          byLangCode: {\n            ...global.translations.byChatId[chatId]?.byLangCode,\n            [toLanguageCode]: {\n              ...translatedMessages,\n              [messageId]: {\n                ...translatedMessages[messageId],\n                ...translation,\n              },\n            },\n          },\n        },\n      },\n    },\n  };\n}\n\nexport function clearMessageTranslation<T extends GlobalState>(\n  global: T, chatId: string, messageId: number,\n) {\n  const chatTranslations = global.translations.byChatId[chatId];\n  if (!chatTranslations) return global;\n\n  const { byLangCode } = chatTranslations;\n  const newByLangCode = Object.keys(byLangCode).reduce((acc, langCode) => {\n    const newTranslatedMessages = omit(byLangCode[langCode], [messageId]);\n    if (Object.keys(newTranslatedMessages).length) {\n      acc[langCode] = newTranslatedMessages;\n    }\n\n    return acc;\n  }, {} as Record<string, Record<number, TranslatedMessage>>);\n\n  return {\n    ...global,\n    translations: {\n      ...global.translations,\n      byChatId: {\n        ...global.translations.byChatId,\n        [chatId]: {\n          ...chatTranslations,\n          byLangCode: newByLangCode,\n        },\n      },\n    },\n  };\n}\n\nexport function updateMessageTranslations<T extends GlobalState>(\n  global: T, chatId: string, messageIds: number[], toLanguageCode: string, translations: ApiFormattedText[],\n) {\n  messageIds.forEach((messageId, index) => {\n    global = updateMessageTranslation(global, chatId, messageId, toLanguageCode, {\n      text: translations[index],\n      isPending: false,\n    });\n  });\n\n  return global;\n}\n\nexport function updateRequestedChatTranslation<T extends GlobalState>(\n  global: T, chatId: string, toLanguageCode?: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n  global = updateTabState(global, {\n    requestedTranslations: {\n      ...tabState.requestedTranslations,\n      byChatId: {\n        ...tabState.requestedTranslations.byChatId,\n        [chatId]: {\n          toLanguage: toLanguageCode,\n        },\n      },\n    },\n  }, tabId);\n\n  return global;\n}\n\nexport function removeRequestedChatTranslation<T extends GlobalState>(\n  global: T, chatId: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n\n  global = updateTabState(global, {\n    requestedTranslations: {\n      ...tabState.requestedTranslations,\n      byChatId: omit(tabState.requestedTranslations.byChatId, [chatId]),\n    },\n  }, tabId);\n\n  return global;\n}\n\nexport function updateRequestedMessageTranslation<T extends GlobalState>(\n  global: T, chatId: string, messageId: number, toLanguageCode: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n  global = updateTabState(global, {\n    requestedTranslations: {\n      ...tabState.requestedTranslations,\n      byChatId: {\n        ...tabState.requestedTranslations.byChatId,\n        [chatId]: {\n          ...tabState.requestedTranslations.byChatId[chatId],\n          manualMessages: {\n            ...tabState.requestedTranslations.byChatId[chatId]?.manualMessages,\n            [messageId]: toLanguageCode,\n          },\n        },\n      },\n    },\n  }, tabId);\n\n  return global;\n}\n\nexport function removeRequestedMessageTranslation<T extends GlobalState>(\n  global: T, chatId: string, messageId: number, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n\n  const manualMessages = tabState.requestedTranslations.byChatId[chatId]?.manualMessages;\n  if (!manualMessages) return global;\n\n  const newManualMessages = omit(manualMessages, [messageId]);\n\n  global = updateTabState(global, {\n    requestedTranslations: {\n      ...tabState.requestedTranslations,\n      byChatId: {\n        ...tabState.requestedTranslations.byChatId,\n        [chatId]: {\n          ...tabState.requestedTranslations.byChatId[chatId],\n          manualMessages: newManualMessages,\n        },\n      },\n    },\n  }, tabId);\n\n  return global;\n}\n","import type { GlobalState } from '../types';\n\nexport function updateTwoFaSettings<T extends GlobalState>(\n  global: T,\n  update: GlobalState['twoFaSettings'],\n): T {\n  return {\n    ...global,\n    twoFaSettings: {\n      ...global.twoFaSettings,\n      ...update,\n    },\n  };\n}\n","import type {\n  ApiMissingInvitedUser,\n  ApiSavedStarGift,\n  ApiUser,\n  ApiUserCommonChats,\n  ApiUserFullInfo,\n  ApiUserStatus,\n} from '../../api/types';\nimport type { BotAppPermissions } from '../../types';\nimport type { GlobalState, TabArgs, TabState } from '../types';\n\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { omit, omitUndefined, unique } from '../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { getSavedGiftKey } from '../helpers/stars';\nimport { selectTabState } from '../selectors';\nimport { updateTabState } from './tabs';\n\nexport function replaceUsers<T extends GlobalState>(global: T, newById: Record<string, ApiUser>): T {\n  return {\n    ...global,\n    users: {\n      ...global.users,\n      byId: newById,\n    },\n  };\n}\n\nfunction updateContactList<T extends GlobalState>(global: T, updatedUsers: ApiUser[]): T {\n  const { userIds: contactUserIds } = global.contactList || {};\n\n  if (!contactUserIds) return global;\n\n  const contactUserIdsFromUpdate = updatedUsers\n    .filter((user) => user?.isContact)\n    .map((user) => user.id);\n\n  if (contactUserIdsFromUpdate.length === 0) return global;\n\n  return {\n    ...global,\n    contactList: {\n      userIds: unique([\n        ...contactUserIdsFromUpdate,\n        ...contactUserIds,\n      ]),\n    },\n  };\n}\n\nexport function updateUser<T extends GlobalState>(global: T, userId: string, userUpdate: Partial<ApiUser>): T {\n  const { byId } = global.users;\n\n  const updatedUser = getUpdatedUser(global, userId, userUpdate);\n  if (!updatedUser) {\n    return global;\n  }\n\n  global = updateContactList(global, [updatedUser]);\n\n  return replaceUsers(global, {\n    ...byId,\n    [userId]: updatedUser,\n  });\n}\n\nexport function updateUsers<T extends GlobalState>(global: T, newById: Record<string, ApiUser>): T {\n  const updatedById = Object.keys(newById).reduce((acc: Record<string, ApiUser>, id) => {\n    const updatedUser = getUpdatedUser(global, id, newById[id]);\n    if (updatedUser) {\n      acc[id] = updatedUser;\n    }\n\n    return acc;\n  }, {});\n\n  global = replaceUsers(global, {\n    ...global.users.byId,\n    ...updatedById,\n  });\n\n  global = updateContactList(global, Object.values(updatedById));\n\n  return global;\n}\n\n// @optimization Allows to avoid redundant updates which cause a lot of renders\nexport function addUsers<T extends GlobalState>(global: T, newById: Record<string, ApiUser>): T {\n  const { byId } = global.users;\n  let isUpdated = false;\n\n  const addedById = Object.keys(newById).reduce<Record<string, ApiUser>>((acc, id) => {\n    const existingUser = byId[id];\n    const newUser = newById[id];\n\n    if (existingUser && !existingUser.isMin && (newUser.isMin || existingUser.accessHash === newUser.accessHash)) {\n      return acc;\n    }\n\n    const updatedUser = getUpdatedUser(global, id, newUser);\n    if (updatedUser) {\n      acc[id] = updatedUser;\n      if (!isUpdated) {\n        isUpdated = true;\n      }\n    }\n\n    return acc;\n  }, {});\n\n  if (!isUpdated) {\n    return global;\n  }\n\n  global = replaceUsers(global, {\n    ...byId,\n    ...addedById,\n  });\n\n  global = updateContactList(global, Object.values(addedById));\n\n  return global;\n}\n\n// @optimization Don't spread/unspread global for each element, do it in a batch\nfunction getUpdatedUser(global: GlobalState, userId: string, userUpdate: Partial<ApiUser>) {\n  const { byId } = global.users;\n  const user = byId[userId];\n  const omitProps: (keyof ApiUser)[] = [];\n\n  if (userUpdate.isMin && user && !user.isMin) {\n    return undefined; // Do not apply updates from min constructor\n  }\n\n  if (areDeepEqual(user?.usernames, userUpdate.usernames)) {\n    omitProps.push('usernames');\n  }\n\n  const updatedUser = {\n    ...user,\n    ...omit(userUpdate, omitProps),\n  } as ApiUser;\n\n  if (!updatedUser.id || !updatedUser.type) {\n    return undefined;\n  }\n\n  return omitUndefined(updatedUser);\n}\n\nexport function deleteContact<T extends GlobalState>(global: T, userId: string): T {\n  const { byId } = global.users;\n  const { userIds } = global.contactList || {};\n\n  global = {\n    ...global,\n    contactList: {\n      userIds: userIds ? userIds.filter((id) => id !== userId) : MEMO_EMPTY_ARRAY,\n    },\n  };\n\n  global = replaceUsers(global, {\n    ...byId,\n    [userId]: {\n      ...byId[userId],\n      isContact: undefined,\n    },\n  });\n\n  global = {\n    ...global,\n    stories: {\n      ...global.stories,\n      orderedPeerIds: {\n        active: global.stories.orderedPeerIds.active.filter((id) => id !== userId),\n        archived: global.stories.orderedPeerIds.archived.filter((id) => id !== userId),\n      },\n    },\n  };\n\n  return updateUserFullInfo(global, userId, {\n    settings: undefined,\n  });\n}\n\nexport function updateUserSearch<T extends GlobalState>(\n  global: T,\n  searchStatePartial: Partial<TabState['userSearch']>,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    userSearch: {\n      ...selectTabState(global, tabId).userSearch,\n      ...searchStatePartial,\n    },\n  }, tabId);\n}\n\nexport function updateUserSearchFetchingStatus<T extends GlobalState>(\n  global: T, newState: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateUserSearch(global, {\n    fetchingStatus: newState,\n  }, tabId);\n}\n\nexport function updateUserBlockedState<T extends GlobalState>(global: T, userId: string, isBlocked: boolean): T {\n  const { fullInfoById } = global.users;\n  const fullInfo = fullInfoById[userId];\n  if (!fullInfo) {\n    return global;\n  }\n\n  return updateUserFullInfo(global, userId, { isBlocked });\n}\n\nexport function replaceUserStatuses<T extends GlobalState>(global: T, newById: Record<string, ApiUserStatus>): T {\n  return {\n    ...global,\n    users: {\n      ...global.users,\n      statusesById: newById,\n    },\n  };\n}\n\nexport function updateUserFullInfo<T extends GlobalState>(\n  global: T, userId: string, fullInfo: Partial<ApiUserFullInfo>,\n): T {\n  const userFullInfo = global.users.fullInfoById[userId];\n\n  return {\n    ...global,\n    users: {\n      ...global.users,\n      fullInfoById: {\n        ...global.users.fullInfoById,\n        [userId]: {\n          ...userFullInfo,\n          ...fullInfo,\n        },\n      },\n    },\n  };\n}\n\nexport function updateUserCommonChats<T extends GlobalState>(\n  global: T, userId: string, commonChats: ApiUserCommonChats,\n): T {\n  return {\n    ...global,\n    users: {\n      ...global.users,\n      commonChatsById: {\n        ...global.users.commonChatsById,\n        [userId]: commonChats,\n      },\n    },\n  };\n}\n\n// @optimization Allows to avoid redundant updates which cause a lot of renders\nexport function addUserStatuses<T extends GlobalState>(global: T, newById: Record<string, ApiUserStatus>): T {\n  const { statusesById } = global.users;\n\n  global = replaceUserStatuses(global, {\n    ...statusesById,\n    ...newById,\n  });\n\n  return global;\n}\n\nexport function closeNewContactDialog<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  return updateTabState(global, {\n    newContact: undefined,\n  }, tabId);\n}\n\nexport function updateMissingInvitedUsers<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  missingUsers: ApiMissingInvitedUser[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  if (!missingUsers.length) {\n    return updateTabState(global, {\n      inviteViaLinkModal: undefined,\n    }, tabId);\n  }\n\n  return updateTabState(global, {\n    inviteViaLinkModal: {\n      missingUsers,\n      chatId,\n    },\n  }, tabId);\n}\n\nexport function updateBotAppPermissions<T extends GlobalState>(\n  global: T,\n  botId: string,\n  permissions: BotAppPermissions,\n): T {\n  const { botAppPermissionsById } = global.users;\n\n  return {\n    ...global,\n    users: {\n      ...global.users,\n      botAppPermissionsById: {\n        ...botAppPermissionsById,\n        [botId]: {\n          ...botAppPermissionsById[botId],\n          ...permissions,\n        },\n      },\n    },\n  };\n}\n\nexport function replacePeerSavedGifts<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  gifts: ApiSavedStarGift[],\n  nextOffset?: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): T {\n  const tabState = selectTabState(global, tabId);\n\n  // Some non-unique gifts can be entirely identical and break `key`\n  const keyCounts = new Map<string, number>();\n  gifts.forEach((gift) => {\n    const id = getSavedGiftKey(gift, true);\n    const count = keyCounts.get(id) || 0;\n    if (count > 0) {\n      gift.localTag = count;\n    }\n    keyCounts.set(id, count + 1);\n  });\n\n  return updateTabState(global, {\n    savedGifts: {\n      ...tabState.savedGifts,\n      giftsByPeerId: {\n        ...tabState.savedGifts.giftsByPeerId,\n        [peerId]: {\n          gifts,\n          nextOffset,\n        },\n      },\n    },\n  }, tabId);\n}\n","import type {\n  ApiChat, ApiChatFullInfo, ApiChatType,\n} from '../../api/types';\nimport type { ChatListType } from '../../types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport {\n  ALL_FOLDER_ID, ARCHIVED_FOLDER_ID, MEMBERS_LOAD_SLICE, SAVED_FOLDER_ID, SERVICE_NOTIFICATIONS_USER_ID,\n} from '../../config';\nimport { IS_TRANSLATION_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport { isUserId } from '../../util/entities/ids';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport {\n  getHasAdminRight,\n  getPrivateChatUserId,\n  isChatChannel,\n  isChatPublic,\n  isChatSuperGroup,\n  isHistoryClearMessage,\n  isUserBot,\n  isUserOnline,\n} from '../helpers';\nimport { selectActiveRestrictionReasons } from './messages';\nimport { selectTabState } from './tabs';\nimport {\n  selectBot, selectIsCurrentUserPremium, selectUser, selectUserFullInfo,\n} from './users';\n\nexport function selectChat<T extends GlobalState>(global: T, chatId: string): ApiChat | undefined {\n  return global.chats.byId[chatId];\n}\n\nexport function selectChatFullInfo<T extends GlobalState>(global: T, chatId: string): ApiChatFullInfo | undefined {\n  return global.chats.fullInfoById[chatId];\n}\n\nexport function selectPeerFullInfo<T extends GlobalState>(global: T, peerId: string) {\n  if (isUserId(peerId)) return selectUserFullInfo(global, peerId);\n  return selectChatFullInfo(global, peerId);\n}\n\nexport function selectChatListLoadingParameters<T extends GlobalState>(\n  global: T, listType: ChatListType,\n) {\n  return global.chats.loadingParameters[listType];\n}\n\nexport function selectChatUser<T extends GlobalState>(global: T, chat: ApiChat) {\n  const userId = getPrivateChatUserId(chat);\n  if (!userId) {\n    return false;\n  }\n\n  return selectUser(global, userId);\n}\n\nexport function selectIsChatWithSelf<T extends GlobalState>(global: T, chatId: string) {\n  return chatId === global.currentUserId;\n}\n\nexport function selectIsChatWithBot<T extends GlobalState>(global: T, chat: ApiChat) {\n  const user = selectChatUser(global, chat);\n  return user && isUserBot(user);\n}\n\nexport function selectSupportChat<T extends GlobalState>(global: T) {\n  return Object.values(global.chats.byId).find(({ isSupport }: ApiChat) => isSupport);\n}\n\nexport function selectChatOnlineCount<T extends GlobalState>(global: T, chat: ApiChat) {\n  const fullInfo = selectChatFullInfo(global, chat.id);\n  if (isUserId(chat.id) || isChatChannel(chat) || !fullInfo) {\n    return undefined;\n  }\n\n  if (!fullInfo.members || fullInfo.members.length === MEMBERS_LOAD_SLICE) {\n    return fullInfo.onlineCount;\n  }\n\n  return fullInfo.members.reduce((onlineCount, { userId }) => {\n    if (\n      !selectIsChatWithSelf(global, userId)\n      && global.users.byId[userId]\n      && isUserOnline(global.users.byId[userId], global.users.statusesById[userId])\n    ) {\n      return onlineCount + 1;\n    }\n\n    return onlineCount;\n  }, 0);\n}\n\nexport function selectIsTrustedBot<T extends GlobalState>(global: T, botId: string) {\n  return global.trustedBotIds.includes(botId);\n}\n\nexport function selectChatType<T extends GlobalState>(global: T, chatId: string): ApiChatType | undefined {\n  const bot = selectBot(global, chatId);\n  if (bot) {\n    return 'bots';\n  }\n\n  const user = selectUser(global, chatId);\n  if (user) {\n    return 'users';\n  }\n\n  const chat = selectChat(global, chatId);\n  if (!chat) return undefined;\n\n  if (isChatChannel(chat)) {\n    return 'channels';\n  }\n\n  return 'chats';\n}\n\nexport function selectIsChatBotNotStarted<T extends GlobalState>(global: T, chatId: string) {\n  const bot = selectBot(global, chatId);\n  if (!bot) {\n    return false;\n  }\n\n  const lastMessage = selectChatLastMessage(global, chatId);\n  if (lastMessage && isHistoryClearMessage(lastMessage)) {\n    return true;\n  }\n\n  return Boolean(!lastMessage);\n}\n\nexport function selectAreActiveChatsLoaded<T extends GlobalState>(global: T): boolean {\n  return Boolean(global.chats.listIds.active);\n}\n\nexport function selectIsChatListed<T extends GlobalState>(\n  global: T, chatId: string, type?: ChatListType,\n): boolean {\n  const { listIds } = global.chats;\n  if (type) {\n    const targetList = listIds[type];\n    return Boolean(targetList && targetList.includes(chatId));\n  }\n\n  return Object.values(listIds).some((list) => list && list.includes(chatId));\n}\n\nexport function selectChatListType<T extends GlobalState>(\n  global: T, chatId: string,\n): 'active' | 'archived' | undefined {\n  const chat = selectChat(global, chatId);\n  if (!chat || !selectIsChatListed(global, chatId)) {\n    return undefined;\n  }\n\n  return chat.folderId === ARCHIVED_FOLDER_ID ? 'archived' : 'active';\n}\n\nexport function selectChatFolder<T extends GlobalState>(global: T, folderId: number) {\n  return global.chatFolders.byId[folderId];\n}\n\nexport function selectTotalChatCount<T extends GlobalState>(global: T, listType: 'active' | 'archived'): number {\n  const { totalCount } = global.chats;\n  const allChatsCount = totalCount.all;\n  const archivedChatsCount = totalCount.archived || 0;\n\n  if (listType === 'archived') {\n    return archivedChatsCount;\n  }\n\n  return allChatsCount ? allChatsCount - archivedChatsCount : 0;\n}\n\nexport function selectIsChatPinned<T extends GlobalState>(\n  global: T, chatId: string, folderId = ALL_FOLDER_ID,\n): boolean {\n  const { active, archived, saved } = global.chats.orderedPinnedIds;\n\n  if (folderId === ALL_FOLDER_ID) {\n    return Boolean(active?.includes(chatId));\n  }\n\n  if (folderId === ARCHIVED_FOLDER_ID) {\n    return Boolean(archived?.includes(chatId));\n  }\n\n  if (folderId === SAVED_FOLDER_ID) {\n    return Boolean(saved?.includes(chatId));\n  }\n\n  const { byId: chatFoldersById } = global.chatFolders;\n\n  const { pinnedChatIds } = chatFoldersById[folderId] || {};\n  return Boolean(pinnedChatIds?.includes(chatId));\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectChatByUsername<T extends GlobalState>(global: T, username: string) {\n  const usernameLowered = username.toLowerCase();\n  return Object.values(global.chats.byId).find(\n    (chat) => chat.usernames?.some((c) => c.username.toLowerCase() === usernameLowered),\n  );\n}\n\nexport function selectIsServiceChatReady<T extends GlobalState>(global: T) {\n  return Boolean(selectChat(global, SERVICE_NOTIFICATIONS_USER_ID));\n}\n\nexport function selectSendAs<T extends GlobalState>(global: T, chatId: string) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return undefined;\n\n  const id = selectChatFullInfo(global, chatId)?.sendAsId;\n  if (!id) return undefined;\n\n  return selectUser(global, id) || selectChat(global, id);\n}\n\nexport function selectRequestedDraft<T extends GlobalState>(\n  global: T, chatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { requestedDraft } = selectTabState(global, tabId);\n  if (requestedDraft?.chatId === chatId && !requestedDraft.files?.length) {\n    return requestedDraft.text;\n  }\n  return undefined;\n}\n\nexport function selectRequestedDraftFiles<T extends GlobalState>(\n  global: T, chatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { requestedDraft } = selectTabState(global, tabId);\n  if (requestedDraft?.chatId === chatId) {\n    return requestedDraft.files;\n  }\n  return undefined;\n}\n\nexport function filterChatIdsByType<T extends GlobalState>(\n  global: T, chatIds: string[], filter: readonly ApiChatType[],\n) {\n  return chatIds.filter((id) => {\n    const type = selectChatType(global, id);\n    if (!type) {\n      return false;\n    }\n    return filter.includes(type);\n  });\n}\n\nexport function selectCanInviteToChat<T extends GlobalState>(global: T, chatId: string) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  // https://github.com/TelegramMessenger/Telegram-iOS/blob/5126be83b3b9578fb014eb52ca553da9e7a8b83a/submodules/TelegramCore/Sources/TelegramEngine/Peers/Communities.swift#L6\n  return !chat.migratedTo && Boolean(!isUserId(chatId) && ((isChatChannel(chat) || isChatSuperGroup(chat)) ? (\n    chat.isCreator || getHasAdminRight(chat, 'inviteUsers')\n    || (isChatPublic(chat) && !chat.isJoinRequest)\n  ) : (chat.isCreator || getHasAdminRight(chat, 'inviteUsers'))));\n}\n\nexport function selectCanShareFolder<T extends GlobalState>(global: T, folderId: number) {\n  const folder = selectChatFolder(global, folderId);\n  if (!folder) return false;\n\n  const {\n    bots, groups, channels, contacts, nonContacts, includedChatIds, pinnedChatIds,\n    excludeArchived, excludeMuted, excludeRead, excludedChatIds,\n  } = folder;\n\n  return !bots && !groups && !channels && !contacts && !nonContacts\n    && !excludeArchived && !excludeMuted && !excludeRead && !excludedChatIds?.length\n    && (pinnedChatIds?.length || includedChatIds.length)\n    && folder.includedChatIds.concat(folder.pinnedChatIds || []).some((chatId) => {\n      return selectCanInviteToChat(global, chatId);\n    });\n}\n\nexport function selectShouldDetectChatLanguage<T extends GlobalState>(\n  global: T, chatId: string,\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  if (chat.hasAutoTranslation) return true;\n\n  const { canTranslateChats } = global.settings.byKey;\n\n  const isPremium = selectIsCurrentUserPremium(global);\n  const isSavedMessages = selectIsChatWithSelf(global, chatId);\n\n  return IS_TRANSLATION_SUPPORTED && canTranslateChats && isPremium && !isSavedMessages;\n}\n\nexport function selectCanTranslateChat<T extends GlobalState>(\n  global: T, chatId: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  const requestedTranslation = selectRequestedChatTranslationLanguage(global, chatId, tabId);\n  if (requestedTranslation) return true; // Prevent translation dropping on reevaluation\n\n  const isLanguageDetectable = selectShouldDetectChatLanguage(global, chatId);\n  const detectedLanguage = chat.detectedLanguage;\n\n  const { doNotTranslate } = global.settings.byKey;\n\n  return Boolean(isLanguageDetectable && detectedLanguage && !doNotTranslate.includes(detectedLanguage));\n}\n\nexport function selectRequestedChatTranslationLanguage<T extends GlobalState>(\n  global: T, chatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { requestedTranslations } = selectTabState(global, tabId);\n\n  return requestedTranslations.byChatId[chatId]?.toLanguage;\n}\n\nexport function selectSimilarChannelIds<T extends GlobalState>(\n  global: T,\n  chatId: string,\n) {\n  return global.chats.similarChannelsById[chatId];\n}\n\nexport function selectSimilarBotsIds<T extends GlobalState>(\n  global: T,\n  chatId: string,\n) {\n  return global.chats.similarBotsById[chatId];\n}\n\nexport function selectChatLastMessageId<T extends GlobalState>(\n  global: T, chatId: string, listType: 'all' | 'saved' = 'all',\n) {\n  return global.chats.lastMessageIds[listType]?.[chatId];\n}\n\nexport function selectChatLastMessage<T extends GlobalState>(\n  global: T, chatId: string, listType: 'all' | 'saved' = 'all',\n) {\n  const id = selectChatLastMessageId(global, chatId, listType);\n  if (!id) return undefined;\n\n  const realChatId = listType === 'saved' ? global.currentUserId! : chatId;\n  return global.messages.byChatId[realChatId]?.byId[id];\n}\n\nexport function selectIsMonoforumAdmin<T extends GlobalState>(\n  global: T, chatId: string,\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat?.isMonoforum) return;\n\n  const channel = selectMonoforumChannel(global, chatId);\n  if (!channel) return;\n\n  return Boolean(chat.isCreator || chat.adminRights || channel.isCreator || channel.adminRights);\n}\n\n/**\n * Only selects monoforum channel for monoforum chats.\n * Returns `undefined` for other chats, including channels that have linked monoforum.\n */\nexport function selectMonoforumChannel<T extends GlobalState>(\n  global: T, chatId: string,\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  return chat.isMonoforum ? selectChat(global, chat.linkedMonoforumId!) : undefined;\n}\n\nexport function selectIsChatRestricted<T extends GlobalState>(global: T, chatId: string): boolean {\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  const activeRestrictions = selectActiveRestrictionReasons(global, chat.restrictionReasons);\n  return activeRestrictions.length > 0;\n}\n","import type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { selectTabState } from './tabs';\n\nexport function selectCurrentGlobalSearchQuery<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).globalSearch.query;\n}\n","export * from './ui';\nexport * from './users';\nexport * from './chats';\nexport * from './messages';\nexport * from './globalSearch';\nexport * from './middleSearch';\nexport * from './management';\nexport * from './symbols';\nexport * from './payments';\nexport * from './settings';\nexport * from './statistics';\nexport * from './stories';\nexport * from './tabs';\nexport * from './peers';\nexport * from './topics';\n","import type { GlobalState, TabArgs } from '../types';\n\nimport { isUserId } from '../../util/entities/ids';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport {\n  getCanAddContact,\n  isAnonymousForwardsChat,\n  isChatAdmin, isChatGroup, isUserBot,\n} from '../helpers';\nimport { selectChat, selectIsChatRestricted, selectIsChatWithSelf } from './chats';\nimport { selectCurrentMessageList } from './messages';\nimport { selectTabState } from './tabs';\nimport { selectBot, selectUser } from './users';\n\nexport function selectManagement<T extends GlobalState>(\n  global: T, chatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).management.byChatId[chatId];\n}\n\nexport function selectCurrentManagement<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const currentManagement = selectTabState(global, tabId).management.byChatId[chatId];\n  if (!currentManagement?.isActive) {\n    return undefined;\n  }\n\n  return currentManagement;\n}\n\nexport function selectCurrentManagementType<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const chatBot = selectBot(global, chatId);\n  if (chatBot) {\n    return 'bot';\n  }\n\n  if (isUserId(chatId)) {\n    return 'user';\n  }\n\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return undefined;\n  }\n\n  if (isChatGroup(chat)) {\n    return 'group';\n  }\n\n  return 'channel';\n}\n\nexport function selectCanManage<T extends GlobalState>(\n  global: T,\n  chatId: string,\n) {\n  const chat = selectChat(global, chatId);\n  const isRestricted = selectIsChatRestricted(global, chatId);\n  if (!chat || isRestricted || chat.isMonoforum) return false;\n\n  const isPrivate = isUserId(chat.id);\n  const user = isPrivate ? selectUser(global, chatId) : undefined;\n  const canAddContact = user && getCanAddContact(user);\n\n  const isBot = user && isUserBot(user);\n  return Boolean(\n    !canAddContact\n    && chat\n    && !selectIsChatWithSelf(global, chat.id)\n    && !isAnonymousForwardsChat(chat.id)\n    // chat.isCreator is for Basic Groups\n    && (isUserId(chat.id) || ((isChatAdmin(chat) || chat.isCreator) && !chat.isNotJoined))\n    && !isBot,\n  );\n}\n","import type {\n  ApiChat,\n  ApiInputMessageReplyInfo,\n  ApiMessage,\n  ApiMessageEntityCustomEmoji,\n  ApiMessageForwardInfo,\n  ApiMessageOutgoingStatus,\n  ApiPeer, ApiRestrictionReason, ApiSponsoredMessage,\n  ApiStickerSetInfo,\n} from '../../api/types';\nimport type {\n  ChatTranslatedMessages,\n  MessageListType,\n  TabThread,\n  Thread,\n  ThreadId,\n} from '../../types';\nimport type { IAllowedAttachmentOptions } from '../helpers';\nimport type {\n  GlobalState, TabArgs,\n} from '../types';\nimport { ApiMessageEntityTypes, MAIN_THREAD_ID } from '../../api/types';\n\nimport {\n  ANONYMOUS_USER_ID, API_GENERAL_ID_LIMIT, GENERAL_TOPIC_ID, NSFW_RESTRICTION_REASON, SERVICE_NOTIFICATIONS_USER_ID,\n  SVG_EXTENSIONS, WEB_APP_PLATFORM,\n} from '../../config';\nimport { IS_TRANSLATION_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport { isUserId } from '../../util/entities/ids';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { findLast } from '../../util/iteratees';\nimport { getMessageKey, isLocalMessageId } from '../../util/keys/messageKey';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { getServerTime } from '../../util/serverTime';\nimport { getDocumentExtension } from '../../components/common/helpers/documentInfo';\nimport {\n  canSendReaction,\n  getAllowedAttachmentOptions,\n  getCanPostInChat,\n  getHasAdminRight,\n  getIsSavedDialog,\n  getMessageAudio,\n  getMessageDocument,\n  getMessageLink,\n  getMessagePaidMedia,\n  getMessagePhoto,\n  getMessageVideo,\n  getMessageVoice,\n  getMessageWebPagePhoto,\n  getMessageWebPageVideo,\n  getSendingState,\n  getTimestampableMedia,\n  hasMessageTtl,\n  isActionMessage,\n  isChatBasicGroup,\n  isChatChannel,\n  isChatGroup,\n  isChatSuperGroup,\n  isCommonBoxChat,\n  isExpiredMessage,\n  isForwardedMessage,\n  isMessageDocumentSticker,\n  isMessageFailed,\n  isMessageLocal,\n  isMessageTranslatable,\n  isOwnMessage,\n  isServiceNotificationMessage,\n  isUserRightBanned,\n} from '../helpers';\nimport { getMessageReplyInfo } from '../helpers/replies';\nimport {\n  selectChat,\n  selectChatFullInfo,\n  selectChatLastMessageId,\n  selectIsChatRestricted,\n  selectIsChatWithBot,\n  selectIsChatWithSelf,\n  selectRequestedChatTranslationLanguage,\n} from './chats';\nimport { selectPeer, selectPeerPaidMessagesStars } from './peers';\nimport { selectSettingsKeys } from './settings';\nimport { selectPeerStory } from './stories';\nimport { selectIsStickerFavorite } from './symbols';\nimport { selectTabState } from './tabs';\nimport { selectTopic } from './topics';\nimport {\n  selectBot, selectIsCurrentUserPremium, selectUser, selectUserStatus,\n} from './users';\n\nexport function selectCurrentMessageList<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageLists } = selectTabState(global, tabId);\n\n  if (messageLists.length) {\n    return messageLists[messageLists.length - 1];\n  }\n\n  return undefined;\n}\n\nexport function selectCurrentChat<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId } = selectCurrentMessageList(global, tabId) || {};\n\n  return chatId ? selectChat(global, chatId) : undefined;\n}\n\nexport function selectChatMessages<T extends GlobalState>(global: T, chatId: string) {\n  return global.messages.byChatId[chatId]?.byId;\n}\n\nexport function selectChatScheduledMessages<T extends GlobalState>(global: T, chatId: string) {\n  return global.scheduledMessages.byChatId[chatId]?.byId;\n}\n\nexport function selectTabThreadParam<T extends GlobalState, K extends keyof TabThread>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  key: K,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).tabThreads[chatId]?.[threadId]?.[key];\n}\n\nexport function selectThreadParam<T extends GlobalState, K extends keyof Thread>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  key: K,\n) {\n  return selectThread(global, chatId, threadId)?.[key];\n}\n\nexport function selectThread<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n) {\n  const messageInfo = global.messages.byChatId[chatId];\n  if (!messageInfo) {\n    return undefined;\n  }\n\n  const thread = messageInfo.threadsById[threadId];\n  if (!thread) {\n    return undefined;\n  }\n\n  return thread;\n}\n\nexport function selectListedIds<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'listedIds');\n}\n\nexport function selectOutlyingListByMessageId<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, messageId: number,\n) {\n  const outlyingLists = selectOutlyingLists(global, chatId, threadId);\n  if (!outlyingLists) {\n    return undefined;\n  }\n\n  return outlyingLists.find((list) => {\n    return list[0] <= messageId && list[list.length - 1] >= messageId;\n  });\n}\n\nexport function selectOutlyingLists<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId,\n) {\n  return selectThreadParam(global, chatId, threadId, 'outlyingLists');\n}\n\nexport function selectCurrentMessageIds<T extends GlobalState>(\n  global: T,\n  chatId: string, threadId: ThreadId, messageListType: MessageListType,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  switch (messageListType) {\n    case 'thread':\n      return selectViewportIds(global, chatId, threadId, tabId);\n    case 'pinned':\n      return selectPinnedIds(global, chatId, threadId);\n    case 'scheduled':\n      return selectScheduledIds(global, chatId, threadId);\n  }\n\n  return undefined;\n}\n\nexport function selectViewportIds<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabThreadParam(global, chatId, threadId, 'viewportIds', tabId);\n}\n\nexport function selectPinnedIds<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'pinnedIds');\n}\n\nexport function selectScheduledIds<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'scheduledIds');\n}\n\nexport function selectScrollOffset<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabThreadParam(global, chatId, threadId, 'scrollOffset', tabId);\n}\n\nexport function selectLastScrollOffset<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'lastScrollOffset');\n}\n\nexport function selectEditingId<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'editingId');\n}\n\nexport function selectEditingDraft<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'editingDraft');\n}\n\nexport function selectEditingScheduledId<T extends GlobalState>(global: T, chatId: string) {\n  return selectThreadParam(global, chatId, MAIN_THREAD_ID, 'editingScheduledId');\n}\n\nexport function selectEditingScheduledDraft<T extends GlobalState>(global: T, chatId: string) {\n  return selectThreadParam(global, chatId, MAIN_THREAD_ID, 'editingScheduledDraft');\n}\n\nexport function selectDraft<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'draft');\n}\n\nexport function selectNoWebPage<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'noWebPage');\n}\n\nexport function selectThreadInfo<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'threadInfo');\n}\n\nexport function selectFirstMessageId<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectThreadParam(global, chatId, threadId, 'firstMessageId');\n}\n\nexport function selectReplyStack<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabThreadParam(global, chatId, threadId, 'replyStack', tabId);\n}\n\nexport function selectThreadMessagesCount(global: GlobalState, chatId: string, threadId: ThreadId) {\n  const chat = selectChat(global, chatId);\n  const threadInfo = selectThreadInfo(global, chatId, threadId);\n  if (!chat || !threadInfo || threadInfo.messagesCount === undefined) return undefined;\n  // In forum topics first message is ignored, but not in General\n  if (chat.isForum && threadId !== GENERAL_TOPIC_ID) return threadInfo.messagesCount - 1;\n  return threadInfo.messagesCount;\n}\n\nexport function selectThreadByMessage<T extends GlobalState>(global: T, message: ApiMessage) {\n  const threadId = selectThreadIdFromMessage(global, message);\n  if (!threadId || threadId === MAIN_THREAD_ID) {\n    return undefined;\n  }\n\n  return global.messages.byChatId[message.chatId].threadsById[threadId];\n}\n\nexport function selectIsMessageInCurrentMessageList<T extends GlobalState>(\n  global: T, chatId: string, message: ApiMessage,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const currentMessageList = selectCurrentMessageList(global, tabId);\n  if (!currentMessageList) {\n    return false;\n  }\n\n  const { threadInfo } = selectThreadByMessage(global, message) || {};\n  return (\n    chatId === currentMessageList.chatId\n    && (\n      (currentMessageList.threadId === MAIN_THREAD_ID)\n      || (threadInfo && currentMessageList.threadId === threadInfo.threadId)\n    )\n  );\n}\n\nexport function selectIsViewportNewest<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const viewportIds = selectViewportIds(global, chatId, threadId, tabId);\n  if (!viewportIds || !viewportIds.length) {\n    return true;\n  }\n\n  const isSavedDialog = getIsSavedDialog(chatId, threadId, global.currentUserId);\n\n  let lastMessageId: number;\n\n  if (threadId === MAIN_THREAD_ID) {\n    const id = selectChatLastMessageId(global, chatId);\n    if (!id) {\n      return true;\n    }\n    lastMessageId = id;\n  } else if (isSavedDialog) {\n    const id = selectChatLastMessageId(global, String(threadId), 'saved');\n    if (!id) {\n      return true;\n    }\n    lastMessageId = id;\n  } else {\n    const threadInfo = selectThreadInfo(global, chatId, threadId);\n    if (!threadInfo || !threadInfo.lastMessageId) {\n      if (!threadInfo?.threadId) return undefined;\n      // No messages in thread, except for the thread message itself\n      lastMessageId = Number(threadInfo?.threadId);\n    } else {\n      lastMessageId = threadInfo.lastMessageId;\n    }\n  }\n\n  // Edge case: outgoing `lastMessage` is updated with a delay to optimize animation\n  if (isLocalMessageId(lastMessageId) && !selectChatMessage(global, chatId, lastMessageId)) {\n    return true;\n  }\n\n  return viewportIds[viewportIds.length - 1] >= lastMessageId;\n}\n\nexport function selectChatMessage<T extends GlobalState>(global: T, chatId: string, messageId: number) {\n  const chatMessages = selectChatMessages(global, chatId);\n\n  return chatMessages ? chatMessages[messageId] : undefined;\n}\n\nexport function selectScheduledMessage<T extends GlobalState>(global: T, chatId: string, messageId: number) {\n  const chatMessages = selectChatScheduledMessages(global, chatId);\n\n  return chatMessages ? chatMessages[messageId] : undefined;\n}\n\nexport function selectQuickReplyMessage<T extends GlobalState>(global: T, messageId: number) {\n  return global.quickReplies.messagesById[messageId];\n}\n\nexport function selectEditingMessage<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, messageListType: MessageListType,\n) {\n  if (messageListType === 'scheduled') {\n    const messageId = selectEditingScheduledId(global, chatId);\n    return messageId ? selectScheduledMessage(global, chatId, messageId) : undefined;\n  } else {\n    const messageId = selectEditingId(global, chatId, threadId);\n    return messageId ? selectChatMessage(global, chatId, messageId) : undefined;\n  }\n}\n\nexport function selectFocusedMessageId<T extends GlobalState>(\n  global: T, chatId: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId: focusedChatId, messageId } = selectTabState(global, tabId).focusedMessage || {};\n\n  return focusedChatId === chatId ? messageId : undefined;\n}\n\nexport function selectIsMessageFocused<T extends GlobalState>(\n  global: T, message: ApiMessage, currentThreadId: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const focusedId = selectFocusedMessageId(global, message.chatId, tabId);\n  const threadId = selectTabState(global, tabId).focusedMessage?.threadId;\n\n  if (currentThreadId !== threadId) return false;\n\n  return focusedId ? focusedId === message.id || focusedId === message.previousLocalId : false;\n}\n\nexport function selectIsMessageUnread<T extends GlobalState>(global: T, message: ApiMessage) {\n  const { lastReadOutboxMessageId } = selectChat(global, message.chatId) || {};\n  return isMessageLocal(message) || !lastReadOutboxMessageId || lastReadOutboxMessageId < message.id;\n}\n\nexport function selectOutgoingStatus<T extends GlobalState>(\n  global: T, message: ApiMessage, isScheduledList = false,\n): ApiMessageOutgoingStatus {\n  if (!selectIsMessageUnread(global, message) && !isScheduledList) {\n    return 'read';\n  }\n\n  return getSendingState(message);\n}\n\nexport function selectSender<T extends GlobalState>(global: T, message: ApiMessage): ApiPeer | undefined {\n  const { senderId } = message;\n  const chat = selectChat(global, message.chatId);\n  const currentUser = selectUser(global, global.currentUserId!);\n  if (!senderId) {\n    return message.isOutgoing ? currentUser : chat;\n  }\n\n  if (chat && isChatChannel(chat) && !chat.areProfilesShown) return chat;\n\n  return selectPeer(global, senderId);\n}\n\nexport function getSendersFromSelectedMessages<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  messageIds: number[],\n) {\n  return messageIds.map((id) => {\n    const message = selectChatMessage(global, chatId, id);\n    return message && selectSender(global, message);\n  }).filter(Boolean);\n}\n\nexport function selectSenderFromMessage<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  messageId: number,\n): ApiPeer | undefined {\n  const message = selectChatMessage(global, chatId, messageId);\n\n  return message && selectSender(global, message);\n}\n\nexport function selectSenderFromHeader<T extends GlobalState>(\n  global: T,\n  header: ApiMessageForwardInfo,\n) {\n  const { fromId } = header;\n  if (fromId) {\n    return selectPeer(global, fromId);\n  }\n\n  return undefined;\n}\n\nexport function selectForwardedSender<T extends GlobalState>(\n  global: T, message: ApiMessage,\n): ApiPeer | undefined {\n  const isStoryForward = Boolean(message.content.storyData);\n  if (isStoryForward) {\n    const peerId = message.content.storyData!.peerId;\n    return selectPeer(global, peerId);\n  }\n\n  const { forwardInfo } = message;\n  if (!forwardInfo) {\n    return undefined;\n  }\n\n  if (forwardInfo.isChannelPost && forwardInfo.fromChatId) {\n    return selectChat(global, forwardInfo.fromChatId);\n  }\n\n  if (forwardInfo.hiddenUserName) {\n    return undefined;\n  }\n\n  if (forwardInfo.fromId) {\n    return selectPeer(global, forwardInfo.fromId);\n  }\n\n  if (forwardInfo.savedFromPeerId) {\n    return selectPeer(global, forwardInfo.savedFromPeerId);\n  }\n\n  return undefined;\n}\n\nexport function selectPoll<T extends GlobalState>(global: T, pollId: string) {\n  return global.messages.pollById[pollId];\n}\n\nexport function selectPollFromMessage<T extends GlobalState>(global: T, message: ApiMessage) {\n  if (!message.content.pollId) return undefined;\n  return selectPoll(global, message.content.pollId);\n}\n\nexport function selectTopicFromMessage<T extends GlobalState>(global: T, message: ApiMessage) {\n  const { chatId } = message;\n  const chat = selectChat(global, chatId);\n  if (!chat?.isForum) return undefined;\n\n  const threadId = selectThreadIdFromMessage(global, message);\n  return selectTopic(global, chatId, threadId);\n}\n\nconst MAX_MESSAGES_TO_DELETE_OWNER_TOPIC = 10;\nexport function selectCanDeleteOwnerTopic<T extends GlobalState>(global: T, chatId: string, topicId: number) {\n  const topic = selectTopic(global, chatId, topicId);\n  if (topic && !topic.isOwner) return false;\n\n  const thread = selectThread(global, chatId, topicId);\n  if (!thread) return false;\n\n  const { listedIds } = thread;\n  if (!listedIds\n    // Plus one for root message\n    || listedIds.length + 1 >= MAX_MESSAGES_TO_DELETE_OWNER_TOPIC) {\n    return false;\n  }\n\n  const hasNotOutgoingMessages = listedIds.some((messageId) => {\n    const message = selectChatMessage(global, chatId, messageId);\n    return !message || !message.isOutgoing;\n  });\n\n  return !hasNotOutgoingMessages;\n}\n\nexport function selectCanDeleteTopic<T extends GlobalState>(global: T, chatId: string, topicId: number) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  if (topicId === GENERAL_TOPIC_ID) return false;\n\n  return chat.isCreator\n    || getHasAdminRight(chat, 'deleteMessages')\n    || (chat.isForum\n      && selectCanDeleteOwnerTopic(global, chat.id, topicId));\n}\n\nexport function selectSavedDialogIdFromMessage<T extends GlobalState>(\n  global: T, message: ApiMessage,\n): string | undefined {\n  const {\n    chatId, senderId, forwardInfo, savedPeerId,\n  } = message;\n\n  if (savedPeerId) return savedPeerId;\n\n  if (chatId !== global.currentUserId) {\n    return undefined;\n  }\n\n  if (forwardInfo?.savedFromPeerId) {\n    return forwardInfo.savedFromPeerId;\n  }\n\n  if (forwardInfo?.fromId) {\n    return forwardInfo.fromId;\n  }\n\n  if (forwardInfo?.hiddenUserName) {\n    return ANONYMOUS_USER_ID;\n  }\n\n  return senderId;\n}\n\nexport function selectThreadIdFromMessage<T extends GlobalState>(global: T, message: ApiMessage): ThreadId {\n  const savedDialogId = selectSavedDialogIdFromMessage(global, message);\n  if (savedDialogId) {\n    return savedDialogId;\n  }\n\n  const chat = selectChat(global, message.chatId);\n  const { content } = message;\n  const { replyToMsgId, replyToTopId, isForumTopic } = getMessageReplyInfo(message) || {};\n  if (content.action?.type === 'topicCreate') {\n    return message.id;\n  }\n\n  if (!chat?.isForum) {\n    if (chat && isChatBasicGroup(chat)) return MAIN_THREAD_ID;\n\n    if (chat && isChatSuperGroup(chat)) {\n      return replyToTopId || replyToMsgId || MAIN_THREAD_ID;\n    }\n    return MAIN_THREAD_ID;\n  }\n  if (!isForumTopic) return GENERAL_TOPIC_ID;\n  return replyToTopId || replyToMsgId || GENERAL_TOPIC_ID;\n}\n\nexport function selectCanReplyToMessage<T extends GlobalState>(global: T, message: ApiMessage, threadId: ThreadId) {\n  const chat = selectChat(global, message.chatId);\n  const isRestricted = selectIsChatRestricted(global, message.chatId);\n  if (!chat || isRestricted || chat.isForbidden) return false;\n\n  const isLocal = isMessageLocal(message);\n  const isServiceNotification = isServiceNotificationMessage(message);\n\n  if (isLocal || isServiceNotification) return false;\n\n  const threadInfo = selectThreadInfo(global, message.chatId, threadId);\n  const isMessageThread = Boolean(!threadInfo?.isCommentsInfo && threadInfo?.fromChannelId);\n  const chatFullInfo = selectChatFullInfo(global, chat.id);\n  const topic = selectTopic(global, chat.id, threadId);\n  const canPostInChat = getCanPostInChat(chat, topic, isMessageThread, chatFullInfo);\n  if (!canPostInChat) return false;\n\n  const messageTopic = selectTopicFromMessage(global, message);\n  return !messageTopic || !messageTopic.isClosed || messageTopic.isOwner || getHasAdminRight(chat, 'manageTopics');\n}\n\nexport function selectCanForwardMessage<T extends GlobalState>(global: T, message: ApiMessage) {\n  const isLocal = isMessageLocal(message);\n  const isServiceNotification = isServiceNotificationMessage(message);\n  const isAction = isActionMessage(message);\n  const hasTtl = hasMessageTtl(message);\n  const { content } = message;\n  const story = content.storyData\n    ? selectPeerStory(global, content.storyData.peerId, content.storyData.id)\n    : (content.webPage?.story\n      ? selectPeerStory(global, content.webPage.story.peerId, content.webPage.story.id)\n      : undefined\n    );\n  const isChatProtected = selectIsChatProtected(global, message.chatId);\n  const isStoryForwardForbidden = story && ('isDeleted' in story || ('noForwards' in story && story.noForwards));\n  const canForward = (\n    !isLocal && !isAction && !isChatProtected && !isStoryForwardForbidden\n    && (message.isForwardingAllowed || isServiceNotification) && !hasTtl\n  );\n\n  return canForward;\n}\n\n// This selector is slow and not to be used within lists (e.g. Message component)\nexport function selectAllowedMessageActionsSlow<T extends GlobalState>(\n  global: T, message: ApiMessage, threadId: ThreadId,\n) {\n  const chat = selectChat(global, message.chatId);\n  const isRestricted = selectIsChatRestricted(global, message.chatId);\n  if (!chat || isRestricted) {\n    return {};\n  }\n\n  const isPrivate = isUserId(chat.id);\n  const isChatWithSelf = selectIsChatWithSelf(global, message.chatId);\n  const isBasicGroup = isChatBasicGroup(chat);\n  const isSuperGroup = isChatSuperGroup(chat);\n  const isChannel = isChatChannel(chat);\n  const isBotChat = Boolean(selectBot(global, chat.id));\n  const isLocal = isMessageLocal(message);\n  const isFailed = isMessageFailed(message);\n  const isServiceNotification = isServiceNotificationMessage(message);\n  const isOwn = isOwnMessage(message);\n  const isForwarded = isForwardedMessage(message);\n  const isAction = isActionMessage(message);\n  const hasTtl = hasMessageTtl(message);\n  const { content } = message;\n  const isDocumentSticker = isMessageDocumentSticker(message);\n  const isBoostMessage = message.content.action?.type === 'boostApply';\n  const isMonoforum = chat.isMonoforum;\n\n  const hasChatPinPermission = (chat.isCreator\n    || (!isChannel && !isUserRightBanned(chat, 'pinMessages'))\n    || getHasAdminRight(chat, 'pinMessages'));\n\n  const hasPinPermission = isPrivate || hasChatPinPermission;\n\n  // https://github.com/telegramdesktop/tdesktop/blob/335095a332607c41a8d20b47e61f5bbd66366d4b/Telegram/SourceFiles/data/data_peer.cpp#L653\n  const canEditMessagesIndefinitely = (() => {\n    if (content.todo) return true;\n    if (isPrivate) return isChatWithSelf;\n    if (isBasicGroup) return false;\n    if (isSuperGroup) return hasChatPinPermission;\n    if (isChannel) return chat.isCreator || getHasAdminRight(chat, 'editMessages');\n    return false;\n  })();\n\n  const isMessageEditable = (\n    (\n      canEditMessagesIndefinitely\n      || getServerTime() - message.date < (global.config?.editTimeLimit || Infinity)\n    ) && !(\n      content.sticker || content.contact || content.pollId || content.action\n      || (content.video?.isRound) || content.location || content.invoice || content.giveaway || content.giveawayResults\n      || isDocumentSticker\n    )\n    && !isForwarded\n    && !message.viaBotId\n    && !chat.isForbidden\n  );\n\n  const isSavedDialog = getIsSavedDialog(chat.id, threadId, global.currentUserId);\n\n  const canReply = selectCanReplyToMessage(global, message, threadId);\n  const canReplyGlobally = canReply || (!isSavedDialog && !isLocal && !isServiceNotification\n    && (isSuperGroup || isBasicGroup || isChatChannel(chat)));\n\n  let canPin = !isLocal && !isServiceNotification && !isAction && hasPinPermission && !isSavedDialog;\n  let canUnpin = false;\n\n  const pinnedMessageIds = selectPinnedIds(global, chat.id, threadId);\n\n  if (canPin) {\n    canUnpin = Boolean(pinnedMessageIds && pinnedMessageIds.includes(message.id));\n    canPin = !canUnpin;\n  }\n\n  const canNotDeleteBoostMessage = isBoostMessage && isOwn\n    && !chat.isCreator && !getHasAdminRight(chat, 'deleteMessages');\n\n  const canDelete = (!isLocal || isFailed) && !isServiceNotification && !canNotDeleteBoostMessage && (\n    isPrivate\n    || isOwn\n    || isBasicGroup\n    || chat.isCreator\n    || getHasAdminRight(chat, 'deleteMessages')\n  );\n\n  const canReport = !isPrivate && !isOwn;\n\n  const canDeleteForAll = canDelete && !chat.isForbidden && (\n    (isPrivate && !isChatWithSelf && !isBotChat)\n    || (isBasicGroup && (\n      isOwn || getHasAdminRight(chat, 'deleteMessages') || chat.isCreator\n    ))\n  );\n\n  const hasMessageEditRight = isOwn || (isChannel && (chat.isCreator || getHasAdminRight(chat, 'editMessages')));\n\n  const canEdit = !isLocal && !isAction && isMessageEditable && hasMessageEditRight;\n\n  const hasSticker = Boolean(message.content.sticker);\n  const hasFavoriteSticker = hasSticker && selectIsStickerFavorite(global, message.content.sticker!);\n  const canFaveSticker = !isAction && hasSticker && !hasFavoriteSticker;\n  const canUnfaveSticker = !isAction && hasFavoriteSticker;\n  const canCopy = !isAction;\n  const canCopyLink = !isLocal && !isAction && (isChannel || isSuperGroup) && !isMonoforum;\n  const canSelect = !isLocal && !isAction;\n\n  const canDownload = Boolean(content.webPage?.document || content.webPage?.video || content.webPage?.photo\n    || content.audio || content.voice || content.photo || content.video || content.document || content.sticker)\n  && !hasTtl;\n\n  const canSaveGif = message.content.video?.isGif;\n\n  const poll = content.pollId ? selectPoll(global, content.pollId) : undefined;\n  const canRevote = !poll?.summary.closed && !poll?.summary.quiz && poll?.results.results?.some((r) => r.isChosen);\n  const canClosePoll = hasMessageEditRight && poll && !poll.summary.closed && !isForwarded;\n\n  const noOptions = [\n    canReply,\n    canReplyGlobally,\n    canEdit,\n    canPin,\n    canUnpin,\n    canReport,\n    canDelete,\n    canDeleteForAll,\n    canFaveSticker,\n    canUnfaveSticker,\n    canCopy,\n    canCopyLink,\n    canSelect,\n    canDownload,\n    canSaveGif,\n    canRevote,\n    canClosePoll,\n  ].every((ability) => !ability);\n\n  return {\n    noOptions,\n    canReply,\n    canReplyGlobally,\n    canEdit,\n    canPin,\n    canUnpin,\n    canReport,\n    canDelete,\n    canDeleteForAll,\n    canFaveSticker,\n    canUnfaveSticker,\n    canCopy,\n    canCopyLink,\n    canSelect,\n    canDownload,\n    canSaveGif,\n    canRevote,\n    canClosePoll,\n  };\n}\n\nexport function selectCanDeleteMessages<T extends GlobalState>(\n  global: T,\n  chatId: string,\n  threadId: ThreadId,\n  messageIds: number[],\n) {\n  const chatMessages = selectChatMessages(global, chatId);\n\n  if (messageIds.length > API_GENERAL_ID_LIMIT) {\n    return {};\n  }\n\n  const messageActions = messageIds\n    .map((id) => chatMessages[id] && selectAllowedMessageActionsSlow(global, chatMessages[id], threadId))\n    .filter(Boolean);\n\n  return {\n    canDelete: messageActions.every((actions) => actions.canDelete),\n    canDeleteForAll: messageActions.every((actions) => actions.canDeleteForAll),\n  };\n}\n\nexport function selectCanDeleteSelectedMessages<T extends GlobalState>(\n  global: T,\n  messageIds?: number[],\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds: selectedMessageIds } = selectTabState(global, tabId).selectedMessages || {};\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  const messageIdList = messageIds?.length ? messageIds : selectedMessageIds;\n  if (!chatId || !threadId || !messageIdList) {\n    return {};\n  }\n\n  return selectCanDeleteMessages(global, chatId, threadId, messageIdList);\n}\n\nexport function selectCanReportSelectedMessages<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds: selectedMessageIds } = selectTabState(global, tabId).selectedMessages || {};\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  const chatMessages = chatId && selectChatMessages(global, chatId);\n  if (!chatMessages || !selectedMessageIds || !threadId) {\n    return false;\n  }\n\n  const messageActions = selectedMessageIds\n    .map((id) => chatMessages[id] && selectAllowedMessageActionsSlow(global, chatMessages[id], threadId))\n    .filter(Boolean);\n\n  return messageActions.every((actions) => actions.canReport);\n}\n\nexport function selectCanDownloadSelectedMessages<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds: selectedMessageIds } = selectTabState(global, tabId).selectedMessages || {};\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  const chatMessages = chatId && selectChatMessages(global, chatId);\n  if (!chatMessages || !selectedMessageIds || !threadId) {\n    return false;\n  }\n\n  const messageActions = selectedMessageIds\n    .map((id) => chatMessages[id] && selectAllowedMessageActionsSlow(global, chatMessages[id], threadId))\n    .filter(Boolean);\n\n  return messageActions.some((actions) => actions.canDownload);\n}\n\nexport function selectActiveDownloads<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).activeDownloads;\n}\n\nexport function selectUploadProgress<T extends GlobalState>(global: T, message: ApiMessage) {\n  return global.fileUploads.byMessageKey[getMessageKey(message)]?.progress;\n}\n\nexport function selectRealLastReadId<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  if (threadId === MAIN_THREAD_ID) {\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return undefined;\n    }\n\n    // `lastReadInboxMessageId` is empty for new chats\n    if (!chat.lastReadInboxMessageId) {\n      return undefined;\n    }\n\n    const lastMessageId = selectChatLastMessageId(global, chatId);\n\n    if (!lastMessageId || chat.unreadCount) {\n      return chat.lastReadInboxMessageId;\n    }\n\n    return lastMessageId;\n  } else {\n    const threadInfo = selectThreadInfo(global, chatId, threadId);\n    if (!threadInfo) {\n      return undefined;\n    }\n\n    if (!threadInfo.lastReadInboxMessageId) {\n      return Number(threadInfo.threadId);\n    }\n\n    // Some previously read messages may be deleted\n    return Math.min(threadInfo.lastReadInboxMessageId, threadInfo.lastMessageId || Infinity);\n  }\n}\n\nexport function selectFirstUnreadId<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId,\n) {\n  const chat = selectChat(global, chatId);\n\n  if (threadId === MAIN_THREAD_ID) {\n    if (!chat) {\n      return undefined;\n    }\n  } else {\n    const threadInfo = selectThreadInfo(global, chatId, threadId);\n    if (!threadInfo\n      || (threadInfo.lastMessageId !== undefined && threadInfo.lastMessageId === threadInfo.lastReadInboxMessageId)) {\n      return undefined;\n    }\n  }\n\n  const outlyingLists = selectOutlyingLists(global, chatId, threadId);\n  const listedIds = selectListedIds(global, chatId, threadId);\n  const byId = selectChatMessages(global, chatId);\n  if (!byId || !(outlyingLists?.length || listedIds)) {\n    return undefined;\n  }\n\n  const lastReadId = selectRealLastReadId(global, chatId, threadId);\n  if (!lastReadId && chat && chat.isNotJoined) {\n    return undefined;\n  }\n\n  const lastReadServiceNotificationId = chatId === SERVICE_NOTIFICATIONS_USER_ID\n    ? global.serviceNotifications.reduce((max, notification) => {\n      return !notification.isUnread && notification.id > max ? notification.id : max;\n    }, -1)\n    : -1;\n\n  function findAfterLastReadId(listIds: number[]) {\n    return listIds.find((id) => {\n      return (\n        (!lastReadId || id > lastReadId)\n        && byId[id]\n        && (!byId[id].isOutgoing || byId[id].isFromScheduled)\n        && id > lastReadServiceNotificationId\n      );\n    });\n  }\n\n  if (outlyingLists?.length) {\n    const found = outlyingLists.map((list) => findAfterLastReadId(list)).filter(Boolean)[0];\n    if (found) {\n      return found;\n    }\n  }\n\n  if (listedIds) {\n    const found = findAfterLastReadId(listedIds);\n    if (found) {\n      return found;\n    }\n  }\n\n  return undefined;\n}\n\nexport function selectIsForwardModalOpen<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { isShareMessageModalShown } = selectTabState(global, tabId);\n  return Boolean(isShareMessageModalShown);\n}\n\nexport function selectCommonBoxChatId<T extends GlobalState>(global: T, messageId: number) {\n  const fromLastMessage = Object.values(global.chats.byId).find((chat) => (\n    isCommonBoxChat(chat) && selectChatLastMessageId(global, chat.id) === messageId\n  ));\n  if (fromLastMessage) {\n    return fromLastMessage.id;\n  }\n\n  const { byChatId } = global.messages;\n  return Object.keys(byChatId).find((chatId) => {\n    const chat = selectChat(global, chatId);\n    return chat && isCommonBoxChat(chat) && byChatId[chat.id].byId[messageId];\n  });\n}\n\nexport function selectIsInSelectMode<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { selectedMessages } = selectTabState(global, tabId);\n\n  return Boolean(selectedMessages);\n}\n\nexport function selectIsMessageSelected<T extends GlobalState>(\n  global: T, messageId: number,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds } = selectTabState(global, tabId).selectedMessages || {};\n  if (!messageIds) {\n    return false;\n  }\n\n  return messageIds.includes(messageId);\n}\n\nexport function selectForwardedMessageIdsByGroupId<T extends GlobalState>(\n  global: T, chatId: string, groupedId: string,\n) {\n  const chatMessages = selectChatMessages(global, chatId);\n  if (!chatMessages) {\n    return undefined;\n  }\n\n  return Object.values(chatMessages)\n    .filter((message) => message.groupedId === groupedId && message.forwardInfo)\n    .map(({ forwardInfo }) => forwardInfo!.fromMessageId);\n}\n\nexport function selectMessageIdsByGroupId<T extends GlobalState>(global: T, chatId: string, groupedId: string) {\n  const chatMessages = selectChatMessages(global, chatId);\n  if (!chatMessages) {\n    return undefined;\n  }\n\n  return Object.keys(chatMessages)\n    .map(Number)\n    .filter((id) => chatMessages[id].groupedId === groupedId);\n}\n\nexport function selectIsDocumentGroupSelected<T extends GlobalState>(\n  global: T, chatId: string, groupedId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds: selectedIds } = selectTabState(global, tabId).selectedMessages || {};\n  if (!selectedIds) {\n    return false;\n  }\n\n  const groupIds = selectMessageIdsByGroupId(global, chatId, groupedId);\n  return groupIds && groupIds.every((id) => selectedIds.includes(id));\n}\n\nexport function selectSelectedMessagesCount<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds } = selectTabState(global, tabId).selectedMessages || {};\n\n  return messageIds ? messageIds.length : 0;\n}\n\nexport function selectNewestMessageWithBotKeyboardButtons<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId = MAIN_THREAD_ID,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): ApiMessage | undefined {\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return undefined;\n  }\n\n  const chatMessages = selectChatMessages(global, chatId);\n  const viewportIds = selectViewportIds(global, chatId, threadId, tabId);\n  if (!chatMessages || !viewportIds) {\n    return undefined;\n  }\n\n  const messageId = findLast(viewportIds, (id) => {\n    const message = chatMessages[id];\n    return message && selectShouldDisplayReplyKeyboard(global, message);\n  });\n\n  const replyHideMessageId = findLast(viewportIds, (id) => {\n    const message = chatMessages[id];\n    return message && selectShouldHideReplyKeyboard(global, message);\n  });\n\n  if (messageId && replyHideMessageId && replyHideMessageId > messageId) {\n    return undefined;\n  }\n\n  return messageId ? chatMessages[messageId] : undefined;\n}\n\nfunction selectShouldHideReplyKeyboard<T extends GlobalState>(global: T, message: ApiMessage) {\n  const {\n    shouldHideKeyboardButtons,\n    isHideKeyboardSelective,\n    isMentioned,\n  } = message;\n  if (!shouldHideKeyboardButtons) return false;\n\n  const replyToMessageId = getMessageReplyInfo(message)?.replyToMsgId;\n\n  if (isHideKeyboardSelective) {\n    if (isMentioned) return true;\n    if (!replyToMessageId) return false;\n\n    const replyMessage = selectChatMessage(global, message.chatId, replyToMessageId);\n    return Boolean(replyMessage?.senderId === global.currentUserId);\n  }\n  return true;\n}\n\nfunction selectShouldDisplayReplyKeyboard<T extends GlobalState>(global: T, message: ApiMessage) {\n  const {\n    keyboardButtons,\n    shouldHideKeyboardButtons,\n    isKeyboardSelective,\n    isMentioned,\n  } = message;\n  if (!keyboardButtons || shouldHideKeyboardButtons) return false;\n\n  const replyToMessageId = getMessageReplyInfo(message)?.replyToMsgId;\n\n  if (isKeyboardSelective) {\n    if (isMentioned) return true;\n    if (!replyToMessageId) return false;\n\n    const replyMessage = selectChatMessage(global, message.chatId, replyToMessageId);\n    return Boolean(replyMessage?.senderId === global.currentUserId);\n  }\n\n  return true;\n}\n\nexport function selectCanAutoLoadMedia<T extends GlobalState>(\n  global: T, message: ApiMessage | ApiSponsoredMessage,\n) {\n  const chat = selectChat(global, message.chatId);\n  if (!chat) {\n    return undefined;\n  }\n\n  const sender = 'id' in message ? selectSender(global, message) : undefined;\n\n  const isPhoto = Boolean(getMessagePhoto(message) || getMessageWebPagePhoto(message));\n  const isVideo = Boolean(getMessageVideo(message) || getMessageWebPageVideo(message));\n  const isFile = Boolean(getMessageAudio(message) || getMessageVoice(message) || getMessageDocument(message));\n\n  const {\n    canAutoLoadPhotoFromContacts,\n    canAutoLoadPhotoInPrivateChats,\n    canAutoLoadPhotoInGroups,\n    canAutoLoadPhotoInChannels,\n    canAutoLoadVideoFromContacts,\n    canAutoLoadVideoInPrivateChats,\n    canAutoLoadVideoInGroups,\n    canAutoLoadVideoInChannels,\n    canAutoLoadFileFromContacts,\n    canAutoLoadFileInPrivateChats,\n    canAutoLoadFileInGroups,\n    canAutoLoadFileInChannels,\n  } = global.settings.byKey;\n\n  if (isPhoto) {\n    return canAutoLoadMedia({\n      global,\n      chat,\n      sender,\n      canAutoLoadMediaFromContacts: canAutoLoadPhotoFromContacts,\n      canAutoLoadMediaInPrivateChats: canAutoLoadPhotoInPrivateChats,\n      canAutoLoadMediaInGroups: canAutoLoadPhotoInGroups,\n      canAutoLoadMediaInChannels: canAutoLoadPhotoInChannels,\n    });\n  }\n\n  if (isVideo) {\n    return canAutoLoadMedia({\n      global,\n      chat,\n      sender,\n      canAutoLoadMediaFromContacts: canAutoLoadVideoFromContacts,\n      canAutoLoadMediaInPrivateChats: canAutoLoadVideoInPrivateChats,\n      canAutoLoadMediaInGroups: canAutoLoadVideoInGroups,\n      canAutoLoadMediaInChannels: canAutoLoadVideoInChannels,\n    });\n  }\n\n  if (isFile) {\n    return canAutoLoadMedia({\n      global,\n      chat,\n      sender,\n      canAutoLoadMediaFromContacts: canAutoLoadFileFromContacts,\n      canAutoLoadMediaInPrivateChats: canAutoLoadFileInPrivateChats,\n      canAutoLoadMediaInGroups: canAutoLoadFileInGroups,\n      canAutoLoadMediaInChannels: canAutoLoadFileInChannels,\n    });\n  }\n\n  return true;\n}\n\nfunction canAutoLoadMedia<T extends GlobalState>({\n  global,\n  chat,\n  sender,\n  canAutoLoadMediaFromContacts,\n  canAutoLoadMediaInPrivateChats,\n  canAutoLoadMediaInGroups,\n  canAutoLoadMediaInChannels,\n}: {\n  global: T;\n  chat: ApiChat;\n  canAutoLoadMediaFromContacts: boolean;\n  canAutoLoadMediaInPrivateChats: boolean;\n  canAutoLoadMediaInGroups: boolean;\n  canAutoLoadMediaInChannels: boolean;\n  sender?: ApiPeer;\n}) {\n  const isMediaFromContact = Boolean(sender && (\n    selectIsChatWithSelf(global, sender.id) || selectUser(global, sender.id)?.isContact\n  ));\n\n  return Boolean(\n    (isMediaFromContact && canAutoLoadMediaFromContacts)\n    || (!isMediaFromContact && canAutoLoadMediaInPrivateChats && isUserId(chat.id))\n    || (canAutoLoadMediaInGroups && isChatGroup(chat))\n    || (canAutoLoadMediaInChannels && isChatChannel(chat)),\n  );\n}\n\nexport function selectLastServiceNotification<T extends GlobalState>(global: T) {\n  const { serviceNotifications } = global;\n  const maxId = Math.max(...serviceNotifications.map(({ id }) => id));\n\n  return serviceNotifications.find(({ id, isDeleted }) => !isDeleted && id === maxId);\n}\n\nexport function selectIsMessageProtected<T extends GlobalState>(global: T, message?: ApiMessage) {\n  return Boolean(message && (\n    message.isProtected || selectIsChatProtected(global, message.chatId) || hasMessageTtl(message)\n    || getMessagePaidMedia(message)\n  ));\n}\n\nexport function selectIsChatProtected<T extends GlobalState>(global: T, chatId: string) {\n  return selectChat(global, chatId)?.isProtected || false;\n}\n\nexport function selectHasProtectedMessage<T extends GlobalState>(global: T, chatId: string, messageIds?: number[]) {\n  if (selectChat(global, chatId)?.isProtected) {\n    return true;\n  }\n\n  if (!messageIds) {\n    return false;\n  }\n\n  const messages = selectChatMessages(global, chatId);\n\n  return messageIds.some((messageId) => messages[messageId]?.isProtected);\n}\n\nexport function selectCanForwardMessages<T extends GlobalState>(global: T, chatId: string, messageIds?: number[]) {\n  if (selectChat(global, chatId)?.isProtected) {\n    return false;\n  }\n\n  if (!messageIds) {\n    return false;\n  }\n\n  const messages = selectChatMessages(global, chatId);\n\n  return messageIds\n    .map((id) => messages[id])\n    .every((message) => message && !hasMessageTtl(message)\n      && (message.isForwardingAllowed || isServiceNotificationMessage(message)));\n}\n\nexport function selectHasSvg<T extends GlobalState>(global: T, chatId: string, messageIds: number[]) {\n  const messages = selectChatMessages(global, chatId);\n\n  return messageIds\n    .map((id) => messages[id])\n    .some((message) => {\n      if (!message) return false;\n\n      const document = getMessageDocument(message);\n      if (!document) return false;\n\n      const extension = getDocumentExtension(document);\n      if (!extension) return false;\n\n      return SVG_EXTENSIONS.has(extension);\n    });\n}\n\nexport function selectSponsoredMessage<T extends GlobalState>(global: T, chatId: string) {\n  const message = global.messages.sponsoredByChatId[chatId];\n\n  return message && message.expiresAt >= Math.round(Date.now() / 1000) ? message : undefined;\n}\n\nexport function selectDefaultReaction<T extends GlobalState>(global: T, chatId: string) {\n  if (chatId === SERVICE_NOTIFICATIONS_USER_ID) return undefined;\n\n  const isPrivate = isUserId(chatId);\n  const defaultReaction = global.config?.defaultReaction;\n  if (!defaultReaction) {\n    return undefined;\n  }\n\n  if (isPrivate) {\n    return defaultReaction;\n  }\n\n  const chatReactions = selectChatFullInfo(global, chatId)?.enabledReactions;\n  if (!chatReactions || !canSendReaction(defaultReaction, chatReactions)) {\n    return undefined;\n  }\n\n  return defaultReaction;\n}\n\nexport function selectMaxUserReactions<T extends GlobalState>(global: T): number {\n  const isPremium = selectIsCurrentUserPremium(global);\n  const { maxUserReactionsPremium = 3, maxUserReactionsDefault = 1 } = global.appConfig || {};\n  return isPremium ? maxUserReactionsPremium : maxUserReactionsDefault;\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVisibleUsers<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const messageIds = selectTabThreadParam(global, chatId, threadId, 'viewportIds', tabId);\n  if (!messageIds) {\n    return undefined;\n  }\n\n  return messageIds.map((messageId) => {\n    const { senderId } = selectChatMessage(global, chatId, messageId) || {};\n    return senderId ? selectUser(global, senderId) : undefined;\n  }).filter(Boolean);\n}\n\nexport function selectShouldSchedule<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectCurrentMessageList(global, tabId)?.type === 'scheduled';\n}\n\nexport function selectCanSchedule<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const chatId = selectCurrentMessageList(global, tabId)?.chatId;\n  const paidMessagesStars = chatId ? selectPeerPaidMessagesStars(global, chatId) : undefined;\n  return !paidMessagesStars;\n}\n\nexport function selectCanScheduleUntilOnline<T extends GlobalState>(global: T, id: string) {\n  const isChatWithSelf = selectIsChatWithSelf(global, id);\n  const chatBot = selectBot(global, id);\n  const paidMessagesStars = selectPeerPaidMessagesStars(global, id);\n  return Boolean(!paidMessagesStars\n    && !isChatWithSelf && !chatBot && isUserId(id) && selectUserStatus(global, id)?.wasOnline);\n}\n\nexport function selectCustomEmojis(message: ApiMessage) {\n  const entities = message.content.text?.entities;\n  return entities?.filter((entity): entity is ApiMessageEntityCustomEmoji => (\n    entity.type === ApiMessageEntityTypes.CustomEmoji\n  ));\n}\n\nexport function selectMessageCustomEmojiSets<T extends GlobalState>(\n  global: T, message: ApiMessage,\n): ApiStickerSetInfo[] | undefined {\n  const customEmojis = selectCustomEmojis(message);\n  if (!customEmojis) return MEMO_EMPTY_ARRAY;\n  const documents = customEmojis.map((entity) => global.customEmojis.byId[entity.documentId]);\n  // If some emoji still loading, do not return empty array\n  if (!documents.every(Boolean)) return undefined;\n  const sets = documents.map((doc) => doc.stickerSetInfo);\n\n  return sets.reduce((acc, set) => {\n    if ('shortName' in set) {\n      if (acc.some((s) => 'shortName' in s && s.shortName === set.shortName)) {\n        return acc;\n      }\n    }\n\n    if ('id' in set) {\n      if (acc.some((s) => 'id' in s && s.id === set.id)) {\n        return acc;\n      }\n    }\n    acc.push(set); // Optimization\n    return acc;\n  }, [] as ApiStickerSetInfo[]);\n}\n\nexport function selectForwardsContainVoiceMessages<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds, fromChatId } = selectTabState(global, tabId).forwardMessages;\n  if (!messageIds) return false;\n  const chatMessages = selectChatMessages(global, fromChatId!);\n  return messageIds.some((messageId) => {\n    const message = chatMessages[messageId];\n    return Boolean(message.content.voice) || Boolean(message.content.video?.isRound);\n  });\n}\n\nexport function selectChatTranslations<T extends GlobalState>(\n  global: T, chatId: string,\n): ChatTranslatedMessages {\n  return global.translations.byChatId[chatId];\n}\n\nexport function selectMessageTranslations<T extends GlobalState>(\n  global: T, chatId: string, toLanguageCode: string,\n) {\n  return selectChatTranslations(global, chatId)?.byLangCode[toLanguageCode] || {};\n}\n\nexport function selectRequestedMessageTranslationLanguage<T extends GlobalState>(\n  global: T, chatId: string, messageId: number, ...[tabId = getCurrentTabId()]: TabArgs<T>\n): string | undefined {\n  const requestedInChat = selectTabState(global, tabId).requestedTranslations.byChatId[chatId];\n  return requestedInChat?.toLanguage || requestedInChat?.manualMessages?.[messageId];\n}\nexport function selectReplyCanBeSentToChat<T extends GlobalState>(\n  global: T,\n  toChatId: string,\n  fromChatId: string,\n  replyInfo: ApiInputMessageReplyInfo,\n) {\n  if (!replyInfo.replyToMsgId) return false;\n  const fromRealChatId = replyInfo?.replyToPeerId ?? fromChatId;\n  if (toChatId === fromRealChatId) return true;\n  const chatMessages = selectChatMessages(global, fromRealChatId);\n  const message = chatMessages[replyInfo.replyToMsgId];\n\n  return !isExpiredMessage(message);\n}\nexport function selectForwardsCanBeSentToChat<T extends GlobalState>(\n  global: T,\n  toChatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { messageIds, storyId, fromChatId } = selectTabState(global, tabId).forwardMessages;\n  const chat = selectChat(global, toChatId);\n  if ((!messageIds && !storyId) || !chat) return false;\n\n  if (storyId) {\n    return true;\n  }\n\n  const chatFullInfo = selectChatFullInfo(global, toChatId);\n  const chatMessages = selectChatMessages(global, fromChatId!);\n\n  const isSavedMessages = toChatId ? selectIsChatWithSelf(global, toChatId) : undefined;\n  const isChatWithBot = toChatId ? selectIsChatWithBot(global, chat) : undefined;\n  const options = getAllowedAttachmentOptions(chat, chatFullInfo, isChatWithBot, isSavedMessages);\n  return !messageIds!.some((messageId) => сheckMessageSendingDenied(chatMessages[messageId], options));\n}\nfunction сheckMessageSendingDenied(message: ApiMessage, options: IAllowedAttachmentOptions) {\n  const isVoice = message.content.voice;\n  const isRoundVideo = message.content.video?.isRound;\n  const isPhoto = message.content.photo;\n  const isGif = message.content.video?.isGif;\n  const isVideo = message.content.video && !isRoundVideo && !isGif;\n  const isAudio = message.content.audio;\n  const isDocument = message.content.document;\n  const isSticker = message.content.sticker;\n  const isPlainText = message.content.text\n    && !isVoice && !isRoundVideo && !isSticker && !isDocument && !isAudio && !isVideo && !isPhoto && !isGif;\n\n  return (isVoice && !options.canSendVoices)\n    || (isRoundVideo && !options.canSendRoundVideos)\n    || (isSticker && !options.canSendStickers)\n    || (isDocument && !options.canSendDocuments)\n    || (isAudio && !options.canSendAudios)\n    || (isVideo && !options.canSendVideos)\n    || (isPhoto && !options.canSendPhotos)\n    || (isGif && !options.canSendGifs)\n    || (isPlainText && !options.canSendPlainText);\n}\n\nexport function selectCanTranslateMessage<T extends GlobalState>(\n  global: T, message: ApiMessage, detectedLanguage?: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { canTranslate: isTranslationEnabled, doNotTranslate } = global.settings.byKey;\n\n  const canTranslateLanguage = !detectedLanguage || !doNotTranslate.includes(detectedLanguage);\n\n  const isTranslatable = isMessageTranslatable(message);\n\n  // Separate translations are disabled when chat translation enabled\n  const chatRequestedLanguage = selectRequestedChatTranslationLanguage(global, message.chatId, tabId);\n\n  return IS_TRANSLATION_SUPPORTED && isTranslationEnabled && canTranslateLanguage && isTranslatable\n    && !chatRequestedLanguage;\n}\n\nexport function selectTopicLink<T extends GlobalState>(\n  global: T, chatId: string, topicId?: ThreadId,\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat || !chat?.isForum) {\n    return undefined;\n  }\n\n  return getMessageLink(chat, topicId);\n}\n\nexport function selectMessageReplyInfo<T extends GlobalState>(\n  global: T, chatId: string, threadId: ThreadId, additionalReplyInfo?: ApiInputMessageReplyInfo,\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat) return undefined;\n  const isMainThread = threadId === MAIN_THREAD_ID;\n  if (!additionalReplyInfo && isMainThread) return undefined;\n\n  const replyInfo: ApiInputMessageReplyInfo = {\n    type: 'message',\n    ...additionalReplyInfo,\n    replyToMsgId: additionalReplyInfo?.replyToMsgId || Number(threadId),\n    replyToTopId: additionalReplyInfo?.replyToTopId || (!isMainThread ? Number(threadId) : undefined),\n  };\n\n  return replyInfo;\n}\n\nexport function selectReplyMessage<T extends GlobalState>(global: T, message: ApiMessage) {\n  const { replyToMsgId, replyToPeerId } = getMessageReplyInfo(message) || {};\n  const replyMessage = replyToMsgId\n    ? selectChatMessage(global, replyToPeerId || message.chatId, replyToMsgId) : undefined;\n\n  return replyMessage;\n}\n\nexport function selectMessageTimestampableDuration<T extends GlobalState>(\n  global: T, message: ApiMessage, noReplies?: boolean,\n) {\n  const replyMessage = !noReplies ? selectReplyMessage(global, message) : undefined;\n\n  const timestampableMedia = getTimestampableMedia(message);\n  const replyTimestampableMedia = replyMessage && getTimestampableMedia(replyMessage);\n\n  return timestampableMedia?.duration || replyTimestampableMedia?.duration;\n}\n\nexport function selectMessageLastPlaybackTimestamp<T extends GlobalState>(\n  global: T, chatId: string, messageId: number,\n) {\n  return global.messages.playbackByChatId[chatId]?.byId[messageId];\n}\n\nexport function selectActiveRestrictionReasons<T extends GlobalState>(\n  global: T, restrictionReasons?: ApiRestrictionReason[],\n): ApiRestrictionReason[] {\n  if (!restrictionReasons) return [];\n\n  const { ignoreRestrictionReasons } = global.appConfig || {};\n\n  return restrictionReasons.filter((reason) => {\n    const isForCurrentPlatform = reason.platform === 'all' || reason.platform === WEB_APP_PLATFORM;\n    if (!isForCurrentPlatform) return false;\n\n    const shouldIgnore = ignoreRestrictionReasons?.includes(reason.reason);\n    return !shouldIgnore;\n  });\n}\n\nexport function selectIsMediaNsfw<T extends GlobalState>(global: T, message: ApiMessage) {\n  const { isSensitiveEnabled } = selectSettingsKeys(global);\n  const chat = selectChat(global, message.chatId);\n  if (isSensitiveEnabled) return false;\n\n  const chatActiveRestrictions = selectActiveRestrictionReasons(global, chat?.restrictionReasons);\n  const messageActiveRestrictions = selectActiveRestrictionReasons(global, message.restrictionReasons);\n\n  return chatActiveRestrictions.some((reason) => reason.reason === NSFW_RESTRICTION_REASON)\n    || messageActiveRestrictions.some((reason) => reason.reason === NSFW_RESTRICTION_REASON);\n}\n","import type { ThreadId } from '../../types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { buildChatThreadKey } from '../helpers/middleSearch';\nimport { selectCurrentMessageList } from './messages';\nimport { selectTabState } from './tabs';\n\nexport function selectCurrentMiddleSearch<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return selectTabState(global, tabId).middleSearch.byChatThreadKey[chatThreadKey];\n}\n\nexport function selectCurrentSharedMediaSearch<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return selectTabState(global, tabId).sharedMediaSearch.byChatThreadKey[chatThreadKey];\n}\n\nexport function selectCurrentChatMediaSearch<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { chatId, threadId } = selectCurrentMessageList(global, tabId) || {};\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return selectTabState(global, tabId).chatMediaSearch.byChatThreadKey[chatThreadKey];\n}\n\nexport function selectChatMediaSearch<T extends GlobalState>(\n  global: T, chatId?: string, threadId?: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  if (!chatId || !threadId) {\n    return undefined;\n  }\n\n  const chatThreadKey = buildChatThreadKey(chatId, threadId);\n\n  return selectTabState(global, tabId).chatMediaSearch.byChatThreadKey[chatThreadKey];\n}\n","import type { GlobalState, TabArgs } from '../types';\n\nimport { DEFAULT_GIFT_PROFILE_FILTER_OPTIONS } from '../../config';\nimport arePropsShallowEqual from '../../util/arePropsShallowEqual';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport {\n  getHasAdminRight, isChatAdmin, isChatChannel,\n} from '../helpers';\nimport { selectChat } from './chats';\nimport { selectTabState } from './tabs';\nimport { selectUser } from './users';\n\nexport function selectPaymentInputInvoice<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.inputInvoice;\n}\n\nexport function selectPaymentForm<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.form;\n}\n\nexport function selectStarsPayment<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).starsPayment;\n}\n\nexport function selectPaymentRequestId<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.requestId;\n}\n\nexport function selectProviderPublishableKey<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.form?.nativeParams.publishableKey;\n}\n\nexport function selectProviderPublicToken<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.form?.nativeParams.publicToken;\n}\n\nexport function selectStripeCredentials<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.stripeCredentials;\n}\n\nexport function selectSmartGlocalCredentials<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).payment.smartGlocalCredentials;\n}\n\nexport function selectCanUseGiftProfileAdminFilter<T extends GlobalState>(\n  global: T, peerId: string,\n) {\n  const chat = selectChat(global, peerId);\n  const isCurrentUser = global.currentUserId === peerId;\n  return isCurrentUser || (chat && isChatChannel(chat) && isChatAdmin(chat) && getHasAdminRight(chat, 'postMessages'));\n}\n\nexport function selectCanUseGiftProfileFilter<T extends GlobalState>(\n  global: T, peerId: string,\n) {\n  const chat = selectChat(global, peerId);\n  const user = selectUser(global, peerId);\n  return Boolean(user) || (chat && isChatChannel(chat));\n}\n\nexport function selectGiftProfileFilter<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectCanUseGiftProfileFilter(global, peerId) ? selectTabState(global, tabId).savedGifts.filter : undefined;\n}\n\nexport function selectIsGiftProfileFilterDefault<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return arePropsShallowEqual(selectTabState(global, tabId).savedGifts.filter, DEFAULT_GIFT_PROFILE_FILTER_OPTIONS);\n}\n","import type { ApiPeer, ApiSavedGifts } from '../../api/types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../config';\nimport { isUserId } from '../../util/entities/ids';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { isChatAdmin, isDeletedUser } from '../helpers';\nimport { selectChat, selectChatFullInfo } from './chats';\nimport { selectTabState } from './tabs';\nimport { selectBot, selectUser, selectUserFullInfo } from './users';\n\nexport function selectPeer<T extends GlobalState>(global: T, peerId: string): ApiPeer | undefined {\n  return selectUser(global, peerId) || selectChat(global, peerId);\n}\n\nexport function selectPeerPhotos<T extends GlobalState>(global: T, peerId: string) {\n  return global.peers.profilePhotosById[peerId];\n}\n\nexport function selectCanGift<T extends GlobalState>(global: T, peerId: string) {\n  const bot = selectBot(global, peerId);\n  const user = selectUser(global, peerId);\n\n  if (user) {\n    return !bot && peerId !== SERVICE_NOTIFICATIONS_USER_ID && !isDeletedUser(user);\n  }\n\n  return selectChatFullInfo(global, peerId)?.areStarGiftsAvailable;\n}\n\nexport function selectPeerSavedGifts<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): ApiSavedGifts {\n  return selectTabState(global, tabId).savedGifts.giftsByPeerId[peerId];\n}\n\nexport function selectPeerPaidMessagesStars<T extends GlobalState>(\n  global: T,\n  peerId: string,\n) {\n  const isChatWithUser = isUserId(peerId);\n  if (isChatWithUser) {\n    const userFullInfo = isChatWithUser ? selectUserFullInfo(global, peerId) : undefined;\n    return userFullInfo?.paidMessagesStars;\n  }\n\n  const chat = selectChat(global, peerId);\n  if (!chat) return undefined;\n  if (isChatAdmin(chat)) return undefined;\n  return chat.paidMessagesStars;\n}\n","import type { GlobalState } from '../types';\n\nimport { ACCOUNT_SLOT, getAccountsInfo } from '../../util/multiaccount';\nimport { selectSharedSettings } from './sharedState';\n\nexport function selectNotifySettings<T extends GlobalState>(global: T) {\n  return global.settings.byKey;\n}\n\nexport function selectNotifyDefaults<T extends GlobalState>(global: T) {\n  return global.settings.notifyDefaults;\n}\n\nexport function selectNotifyException<T extends GlobalState>(global: T, chatId: string) {\n  return global.chats.notifyExceptionById?.[chatId];\n}\n\nexport function selectLanguageCode<T extends GlobalState>(global: T) {\n  return selectSharedSettings(global).language.replace('-raw', '');\n}\n\nexport function selectCanSetPasscode<T extends GlobalState>(global: T) {\n  // TODO[passcode]: remove this when multiacc passcode is implemented\n  const accounts = getAccountsInfo();\n  return global.authRememberMe && !ACCOUNT_SLOT && Object.keys(accounts).length === 1;\n}\n\nexport function selectTranslationLanguage<T extends GlobalState>(global: T) {\n  return global.settings.byKey.translationLanguage || selectLanguageCode(global);\n}\n\nexport function selectNewNoncontactPeersRequirePremium<T extends GlobalState>(global: T) {\n  return global.settings.byKey.shouldNewNonContactPeersRequirePremium;\n}\n\nexport function selectNonContactPeersPaidStars<T extends GlobalState>(global: T) {\n  return global.settings.byKey.nonContactPeersPaidStars;\n}\n\nexport function selectShouldHideReadMarks<T extends GlobalState>(global: T) {\n  return global.settings.byKey.shouldHideReadMarks;\n}\n\nexport function selectSettingsKeys<T extends GlobalState>(global: T) {\n  return global.settings.byKey;\n}\n","import type { GlobalState } from '../types';\n\nexport function selectSharedState<T extends GlobalState>(\n  global: T,\n) {\n  return global.sharedState;\n}\n\nexport function selectSharedSettings<T extends GlobalState>(\n  global: T,\n) {\n  return selectSharedState(global).settings;\n}\n","import type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { selectChatFullInfo } from './chats';\nimport { selectCurrentMessageList } from './messages';\nimport { selectTabState } from './tabs';\n\nexport function selectStatistics<T extends GlobalState>(\n  global: T, chatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).statistics.byChatId[chatId];\n}\n\nexport function selectIsStatisticsShown<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  if (!selectTabState(global, tabId).isStatisticsShown) {\n    return false;\n  }\n\n  const { chatId: currentChatId } = selectCurrentMessageList(global, tabId) || {};\n\n  return currentChatId ? selectChatFullInfo(global, currentChatId)?.canViewStatistics : undefined;\n}\n","import type { ApiPeerStories, ApiTypeStory } from '../../api/types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { selectPeer } from './peers';\nimport { selectTabState } from './tabs';\n\nexport function selectCurrentViewedStory<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { storyViewer: { peerId, storyId } } = selectTabState(global, tabId);\n\n  return { peerId, storyId };\n}\n\nexport function selectIsStoryViewerOpen<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { peerId, storyId } = selectCurrentViewedStory(global, tabId);\n\n  return Boolean(peerId) && Boolean(storyId);\n}\n\nexport function selectPeerStories<T extends GlobalState>(\n  global: T, peerId: string,\n): ApiPeerStories | undefined {\n  return global.stories.byPeerId[peerId];\n}\n\nexport function selectPeerStory<T extends GlobalState>(\n  global: T, peerId: string, storyId: number,\n): ApiTypeStory | undefined {\n  return selectPeerStories(global, peerId)?.byId[storyId];\n}\n\nexport function selectPinnedStories<T extends GlobalState>(\n  global: T, peerId: string,\n) {\n  const stories = selectPeerStories(global, peerId);\n  if (!stories?.pinnedIds?.length) return undefined;\n  return stories.pinnedIds.map((id) => stories.byId[id]).filter((s) => (\n    s && 'isInProfile' in s && s.isInProfile\n  ));\n}\n\nexport function selectPeerFirstUnreadStoryId<T extends GlobalState>(\n  global: T, peerId: string,\n) {\n  const peerStories = selectPeerStories(global, peerId);\n  if (!peerStories) {\n    return undefined;\n  }\n\n  if (!peerStories.lastReadId) {\n    return peerStories.orderedIds?.[0];\n  }\n\n  const lastReadIndex = peerStories.orderedIds.findIndex((id) => id === peerStories.lastReadId);\n\n  return peerStories.orderedIds?.[lastReadIndex + 1];\n}\n\nexport function selectPeerFirstStoryId<T extends GlobalState>(\n  global: T, peerId: string,\n) {\n  return selectPeerStories(global, peerId)?.orderedIds?.[0];\n}\n\nexport function selectStoryListForViewer<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  storyId?: number,\n  isSingleStory?: boolean,\n  isSinglePeer?: boolean,\n  isPrivate?: boolean,\n  isArchive?: boolean,\n): {\n  peerIds: string[];\n  storyIdsByPeerId: Record<string, number[]>;\n} | undefined {\n  const currentStoryId = storyId\n    || selectPeerFirstUnreadStoryId(global, peerId)\n    || selectPeerFirstStoryId(global, peerId);\n  if (!currentStoryId) {\n    return undefined;\n  }\n\n  if (isSingleStory) {\n    return {\n      peerIds: [peerId],\n      storyIdsByPeerId: { [peerId]: [currentStoryId] },\n    };\n  }\n\n  const peer = selectPeer(global, peerId);\n  const story = selectPeerStory(global, peerId, currentStoryId);\n  if (!peer || !story) {\n    return undefined;\n  }\n\n  const isUnread = (global.stories.byPeerId[peerId].lastReadId || 0) < story.id;\n\n  if (isSinglePeer) {\n    const storyIds = getPeerStoryIdsForViewer(global, peerId, isUnread, isArchive, isPrivate);\n\n    return storyIds?.length\n      ? { peerIds: [peerId], storyIdsByPeerId: { [peerId]: storyIds } }\n      : undefined;\n  }\n\n  const { orderedPeerIds: { active, archived } } = global.stories;\n  const orderedPeerIds = (peer.areStoriesHidden ? archived : active) ?? [];\n  const peerIds: string[] = [];\n  const storyIdsByPeerId: Record<string, number[]> = {};\n\n  for (const currentPeerId of orderedPeerIds) {\n    const storyIds = getPeerStoryIdsForViewer(global, currentPeerId, isUnread, isArchive, isPrivate);\n    if (storyIds?.length) {\n      peerIds.push(currentPeerId);\n      storyIdsByPeerId[currentPeerId] = storyIds;\n    }\n  }\n\n  return peerIds.length ? { peerIds, storyIdsByPeerId } : undefined;\n}\n\nfunction getPeerStoryIdsForViewer<T extends GlobalState>(\n  global: T,\n  peerId: string,\n  isUnread?: boolean,\n  isArchive?: boolean,\n  isPrivate?: boolean,\n): number[] | undefined {\n  const peerStories = selectPeerStories(global, peerId);\n  const storySourceProp = isArchive ? 'archiveIds' : isPrivate ? 'profileIds' : 'orderedIds';\n  const storyIds = peerStories?.[storySourceProp];\n\n  if (!peerStories || !storyIds?.length) {\n    return undefined;\n  }\n\n  if (!peerStories.lastReadId || !isUnread) {\n    return storyIds.slice();\n  }\n\n  const lastReadIndex = storyIds.indexOf(peerStories.lastReadId);\n  return (storyIds.length > lastReadIndex + 1)\n    ? storyIds.slice(lastReadIndex + 1)\n    : undefined;\n}\n","import type { ApiSticker, ApiStickerSet, ApiStickerSetInfo } from '../../api/types';\nimport type { GlobalState, TabArgs } from '../types';\n\nimport { RESTRICTED_EMOJI_SET_ID, TON_CURRENCY_CODE } from '../../config';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { convertCurrencyFromBaseUnit } from '../../util/formatCurrency';\nimport { selectTabState } from './tabs';\nimport { selectIsCurrentUserPremium } from './users';\n\n// https://github.com/DrKLO/Telegram/blob/c319639e9a4dff2f22da6762dcebd12d49f5afa1/TMessagesProj/src/main/java/org/telegram/ui/Components/Premium/boosts/cells/msg/GiveawayMessageCell.java#L59\nconst MONTH_EMOTICON: Record<number, string> = {\n  1: `${1}\\u{FE0F}\\u20E3`,\n  3: `${2}\\u{FE0F}\\u20E3`,\n  6: `${3}\\u{FE0F}\\u20E3`,\n  12: `${4}\\u{FE0F}\\u20E3`,\n  24: `${5}\\u{FE0F}\\u20E3`,\n};\n\nconst STAR_EMOTICON: Record<number, string> = {\n  1000: `${2}\\u{FE0F}\\u20E3`,\n  2500: `${3}\\u{FE0F}\\u20E3`,\n  5000: `${4}\\u{FE0F}\\u20E3`,\n};\n\nconst TON_EMOTICON: Record<number, string> = {\n  1: `${1}\\u{FE0F}\\u20E3`,\n  10: `${2}\\u{FE0F}\\u20E3`,\n  50: `${3}\\u{FE0F}\\u20E3`,\n};\n\nexport function selectIsStickerFavorite<T extends GlobalState>(global: T, sticker: ApiSticker) {\n  const { stickers } = global.stickers.favorite;\n  return stickers && stickers.some(({ id }) => id === sticker.id);\n}\n\nexport function selectCurrentStickerSearch<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).stickerSearch;\n}\n\nexport function selectCurrentGifSearch<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).gifSearch;\n}\n\nexport function selectStickerSet<T extends GlobalState>(global: T, id: string | ApiStickerSetInfo) {\n  if (typeof id === 'string') {\n    return global.stickers.setsById[id];\n  }\n\n  if ('id' in id) {\n    return global.stickers.setsById[id.id];\n  }\n\n  if ('isMissing' in id) return undefined;\n\n  return Object.values(global.stickers.setsById).find(({ shortName }) => (\n    shortName.toLowerCase() === id.shortName.toLowerCase()\n  ));\n}\n\nexport function selectStickersForEmoji<T extends GlobalState>(global: T, emoji: string) {\n  const addedSets = global.stickers.added.setIds;\n  let stickersForEmoji: ApiSticker[] = [];\n  // Favorites\n  global.stickers.favorite.stickers.forEach((sticker) => {\n    if (sticker.emoji === emoji) stickersForEmoji.push(sticker);\n  });\n\n  // Added sets\n  addedSets?.forEach((id) => {\n    const packs = global.stickers.setsById[id].packs;\n    if (!packs) {\n      return;\n    }\n\n    stickersForEmoji = stickersForEmoji.concat(packs[emoji] || [], packs[cleanEmoji(emoji)] || []);\n  });\n  return stickersForEmoji;\n}\n\nexport function selectCustomEmojiForEmoji<T extends GlobalState>(global: T, emoji: string) {\n  const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n  const addedCustomSets = global.customEmojis.added.setIds;\n  let customEmojiForEmoji: ApiSticker[] = [];\n\n  // Added sets\n  addedCustomSets?.forEach((id) => {\n    const packs = global.stickers.setsById[id].packs;\n    if (!packs) {\n      return;\n    }\n\n    customEmojiForEmoji = customEmojiForEmoji.concat(packs[emoji] || [], packs[cleanEmoji(emoji)] || []);\n  });\n  return isCurrentUserPremium ? customEmojiForEmoji : customEmojiForEmoji.filter(({ isFree }) => isFree);\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectCustomEmojiForEmojis<T extends GlobalState>(global: T, emojis: string[]) {\n  const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n  const addedCustomSets = global.customEmojis.added.setIds;\n  let customEmojiForEmoji: ApiSticker[] = [];\n\n  // Added sets\n  addedCustomSets?.forEach((id) => {\n    const packs = global.stickers.setsById[id].packs;\n    if (!packs) {\n      return;\n    }\n    const customEmojis = Object.entries(packs).filter(([emoji]) => (\n      emojis.includes(emoji) || emojis.includes(cleanEmoji(emoji))\n    )).flatMap(([, stickers]) => stickers);\n    customEmojiForEmoji = customEmojiForEmoji.concat(customEmojis);\n  });\n  return isCurrentUserPremium ? customEmojiForEmoji : customEmojiForEmoji.filter(({ isFree }) => isFree);\n}\n\nexport function selectIsSetPremium(stickerSet: Pick<ApiStickerSet, 'stickers' | 'isEmoji'>) {\n  return stickerSet.isEmoji && stickerSet.stickers?.some((sticker) => !sticker.isFree);\n}\n\nfunction cleanEmoji(emoji: string) {\n  // Some emojis (❤️ for example) with a service symbol 'VARIATION SELECTOR-16' are not recognized as animated\n  return emoji.replace('\\ufe0f', '');\n}\n\nexport function selectAnimatedEmoji<T extends GlobalState>(global: T, emoji: string) {\n  const { animatedEmojis } = global;\n  if (!animatedEmojis || !animatedEmojis.stickers) {\n    return undefined;\n  }\n\n  const cleanedEmoji = cleanEmoji(emoji);\n\n  return animatedEmojis.stickers.find((sticker) => sticker.emoji === emoji || sticker.emoji === cleanedEmoji);\n}\n\nexport function selectRestrictedEmoji<T extends GlobalState>(global: T, emoji: string) {\n  const { restrictedEmoji } = global;\n  if (!restrictedEmoji || !restrictedEmoji.stickers) {\n    return undefined;\n  }\n\n  const cleanedEmoji = cleanEmoji(emoji);\n\n  return restrictedEmoji.stickers.find((sticker) => {\n    if (!sticker.emoji) return undefined;\n    const cleanedStickerEmoji = cleanEmoji(sticker.emoji);\n    return cleanedStickerEmoji === cleanedEmoji;\n  });\n}\n\nexport function selectAnimatedEmojiEffect<T extends GlobalState>(global: T, emoji: string) {\n  const { animatedEmojiEffects } = global;\n  if (!animatedEmojiEffects || !animatedEmojiEffects.stickers) {\n    return undefined;\n  }\n\n  const cleanedEmoji = cleanEmoji(emoji);\n\n  return animatedEmojiEffects.stickers.find((sticker) => sticker.emoji === emoji || sticker.emoji === cleanedEmoji);\n}\n\nexport function selectAnimatedEmojiSound<T extends GlobalState>(global: T, emoji: string) {\n  return global?.appConfig?.emojiSounds[cleanEmoji(emoji)];\n}\n\nexport function selectIsAlwaysHighPriorityEmoji<T extends GlobalState>(\n  global: T, stickerSet: ApiStickerSetInfo | ApiStickerSet,\n) {\n  if (!('id' in stickerSet)) return false;\n  return stickerSet.id === global.appConfig?.defaultEmojiStatusesStickerSetId\n    || stickerSet.id === RESTRICTED_EMOJI_SET_ID;\n}\n\nexport function selectGiftStickerForDuration<T extends GlobalState>(global: T, duration = 1) {\n  const stickers = global.premiumGifts?.stickers;\n  if (!stickers) return undefined;\n  const emoji = MONTH_EMOTICON[duration];\n  return stickers.find((sticker) => sticker.emoji === emoji) || stickers[0];\n}\n\nexport function selectGiftStickerForStars<T extends GlobalState>(global: T, starCount?: number) {\n  const stickers = global.premiumGifts?.stickers;\n\n  if (!stickers || !starCount) return undefined;\n\n  let emoji;\n  if (starCount <= 1000) {\n    emoji = STAR_EMOTICON[1000];\n  } else if (starCount < 2500) {\n    emoji = STAR_EMOTICON[2500];\n  } else {\n    emoji = STAR_EMOTICON[5000];\n  }\n\n  return stickers.find((sticker) => sticker.emoji === emoji) || stickers[0];\n}\n\nexport function selectGiftStickerForTon<T extends GlobalState>(global: T, amount?: number) {\n  const stickers = global.tonGifts?.stickers;\n  if (!stickers || !amount) return undefined;\n  const convertedAmount = convertCurrencyFromBaseUnit(amount, TON_CURRENCY_CODE);\n\n  let emoji;\n  if (convertedAmount < 10) {\n    emoji = TON_EMOTICON[1];\n  } else if (convertedAmount < 50) {\n    emoji = TON_EMOTICON[10];\n  } else {\n    emoji = TON_EMOTICON[50];\n  }\n\n  return stickers.find((sticker) => sticker.emoji === emoji) || stickers[0];\n}\n","import type {\n  GlobalState, TabArgs,\n  TabState,\n} from '../types';\n\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\n\nexport function selectTabState<T extends GlobalState>(\n  global: T, ...[tabId = getCurrentTabId()]: TabArgs<T>\n): TabState {\n  return global.byTabId[tabId];\n}\n","import type { ThreadId, TopicsInfo } from '../../types';\nimport type { GlobalState } from '../types';\n\nexport function selectTopicsInfo<T extends GlobalState>(global: T, chatId: string): TopicsInfo | undefined {\n  return global.chats.topicsInfoById[chatId];\n}\n\nexport function selectTopics<T extends GlobalState>(global: T, chatId: string) {\n  return selectTopicsInfo(global, chatId)?.topicsById;\n}\n\nexport function selectTopic<T extends GlobalState>(global: T, chatId: string, threadId: ThreadId) {\n  return selectTopicsInfo(global, chatId)?.topicsById?.[threadId];\n}\n","import type { ApiMessage, ApiSponsoredMessage } from '../../api/types';\nimport type { PerformanceTypeKey, ThemeKey } from '../../types';\nimport type { GlobalState, TabArgs } from '../types';\nimport { NewChatMembersProgress, RightColumnContent } from '../../types';\n\nimport { IS_SNAP_EFFECT_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport { getCurrentTabId } from '../../util/establishMultitabRole';\nimport { getMessageVideo, getMessageWebPageVideo } from '../helpers/messageMedia';\nimport { selectCurrentManagement } from './management';\nimport { selectSharedSettings } from './sharedState';\nimport { selectIsStatisticsShown } from './statistics';\nimport { selectTabState } from './tabs';\n\nexport function selectIsMediaViewerOpen<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const {\n    mediaViewer: {\n      chatId,\n      messageId,\n      isAvatarView,\n      standaloneMedia,\n      isSponsoredMessage,\n    },\n  } = selectTabState(global, tabId);\n  return Boolean(standaloneMedia || (chatId && (isAvatarView || messageId || isSponsoredMessage)));\n}\n\nexport function selectRightColumnContentKey<T extends GlobalState>(\n  global: T,\n  isMobile?: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n\n  return tabState.editTopicPanel ? (\n    RightColumnContent.EditTopic\n  ) : tabState.createTopicPanel ? (\n    RightColumnContent.CreateTopic\n  ) : tabState.pollResults.messageId ? (\n    RightColumnContent.PollResults\n  ) : selectCurrentManagement(global, tabId) ? (\n    RightColumnContent.Management\n  ) : tabState.isStatisticsShown && tabState.statistics.currentMessageId ? (\n    RightColumnContent.MessageStatistics\n  ) : tabState.isStatisticsShown && tabState.statistics.currentStoryId ? (\n    RightColumnContent.StoryStatistics\n  ) : selectIsStatisticsShown(global, tabId) ? (\n    RightColumnContent.Statistics\n  ) : tabState.boostStatistics ? (\n    RightColumnContent.BoostStatistics\n  ) : tabState.monetizationStatistics ? (\n    RightColumnContent.MonetizationStatistics\n  ) : tabState.stickerSearch.query !== undefined ? (\n    RightColumnContent.StickerSearch\n  ) : tabState.gifSearch.query !== undefined ? (\n    RightColumnContent.GifSearch\n  ) : tabState.newChatMembersProgress !== NewChatMembersProgress.Closed ? (\n    RightColumnContent.AddingMembers\n  ) : tabState.isChatInfoShown && tabState.messageLists.length ? (\n    RightColumnContent.ChatInfo\n  ) : undefined;\n}\n\nexport function selectIsRightColumnShown<T extends GlobalState>(\n  global: T,\n  isMobile?: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectRightColumnContentKey(global, isMobile, tabId) !== undefined;\n}\n\nexport function selectTheme<T extends GlobalState>(global: T) {\n  return selectSharedSettings(global).theme;\n}\n\nexport function selectThemeValues<T extends GlobalState>(global: T, themeKey: ThemeKey) {\n  return global.settings.themes[themeKey];\n}\n\nexport function selectIsForumPanelOpen<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const tabState = selectTabState(global, tabId);\n\n  return Boolean(tabState.forumPanelChatId) && (\n    tabState.globalSearch.query === undefined || Boolean(tabState.globalSearch.isClosing)\n  );\n}\n\nexport function selectIsForumPanelClosed<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return !selectIsForumPanelOpen(global, tabId);\n}\n\nexport function selectIsReactionPickerOpen<T extends GlobalState>(\n  global: T,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const { reactionPicker } = selectTabState(global, tabId);\n  return Boolean(reactionPicker?.position);\n}\n\nexport function selectPerformanceSettings<T extends GlobalState>(global: T) {\n  return selectSharedSettings(global).performance;\n}\n\nexport function selectPerformanceSettingsValue<T extends GlobalState>(\n  global: T,\n  key: PerformanceTypeKey,\n) {\n  return selectPerformanceSettings(global)[key];\n}\n\nexport function selectCanAutoPlayMedia<T extends GlobalState>(global: T, message: ApiMessage | ApiSponsoredMessage) {\n  const video = getMessageVideo(message) || getMessageWebPageVideo(message);\n  if (!video) {\n    return undefined;\n  }\n\n  const canAutoPlayVideos = selectPerformanceSettingsValue(global, 'autoplayVideos');\n  const canAutoPlayGifs = selectPerformanceSettingsValue(global, 'autoplayGifs');\n\n  const asGif = video.isGif || video.isRound;\n\n  return (canAutoPlayVideos && !asGif) || (canAutoPlayGifs && asGif);\n}\n\nexport function selectShouldLoopStickers<T extends GlobalState>(global: T) {\n  return selectPerformanceSettingsValue(global, 'loopAnimatedStickers');\n}\n\nexport function selectCanPlayAnimatedEmojis<T extends GlobalState>(global: T) {\n  return selectPerformanceSettingsValue(global, 'animatedEmoji');\n}\n\nexport function selectCanAnimateInterface<T extends GlobalState>(global: T) {\n  return selectPerformanceSettingsValue(global, 'pageTransitions');\n}\n\nexport function selectIsContextMenuTranslucent<T extends GlobalState>(global: T) {\n  return selectPerformanceSettingsValue(global, 'contextMenuBlur');\n}\n\nexport function selectIsSynced<T extends GlobalState>(global: T) {\n  return global.isSynced;\n}\n\nexport function selectCanAnimateSnapEffect<T extends GlobalState>(global: T) {\n  return IS_SNAP_EFFECT_SUPPORTED && selectPerformanceSettingsValue(global, 'snapEffect');\n}\n\nexport function selectWebApp<T extends GlobalState>(\n  global: T, key: string, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).webApps.openedWebApps[key];\n}\n\nexport function selectActiveWebApp<T extends GlobalState>(\n  global: T, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const activeWebAppKey = selectTabState(global, tabId).webApps.activeWebAppKey;\n  if (!activeWebAppKey) return undefined;\n\n  return selectWebApp(global, activeWebAppKey, tabId);\n}\n\nexport function selectLeftColumnContentKey<T extends GlobalState>(\n  global: T, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).leftColumn.contentKey;\n}\n\nexport function selectSettingsScreen<T extends GlobalState>(\n  global: T, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  return selectTabState(global, tabId).leftColumn.settingsScreen;\n}\n","import type {\n  ApiUser, ApiUserCommonChats,\n  ApiUserFullInfo, ApiUserStatus,\n} from '../../api/types';\nimport type { BotAppPermissions } from '../../types';\nimport type { GlobalState } from '../types';\n\nimport { isUserBot } from '../helpers';\n\nexport function selectUser<T extends GlobalState>(global: T, userId: string): ApiUser | undefined {\n  return global.users.byId[userId];\n}\n\nexport function selectUserStatus<T extends GlobalState>(global: T, userId: string): ApiUserStatus | undefined {\n  return global.users.statusesById[userId];\n}\n\nexport function selectUserFullInfo<T extends GlobalState>(global: T, userId: string): ApiUserFullInfo | undefined {\n  return global.users.fullInfoById[userId];\n}\n\nexport function selectUserCommonChats<T extends GlobalState>(\n  global: T, userId: string,\n): ApiUserCommonChats | undefined {\n  return global.users.commonChatsById[userId];\n}\n\nexport function selectIsUserBlocked<T extends GlobalState>(global: T, userId: string) {\n  return selectUserFullInfo(global, userId)?.isBlocked;\n}\n\nexport function selectIsCurrentUserPremium<T extends GlobalState>(global: T) {\n  if (!global.currentUserId) return false;\n\n  return Boolean(global.users.byId[global.currentUserId].isPremium);\n}\n\nexport function selectIsCurrentUserFrozen<T extends GlobalState>(global: T) {\n  return Boolean(global.appConfig?.freezeUntilDate);\n}\n\nexport function selectIsPremiumPurchaseBlocked<T extends GlobalState>(global: T) {\n  return global.appConfig?.isPremiumPurchaseBlocked ?? true;\n}\n\nexport function selectIsGiveawayGiftsPurchaseAvailable<T extends GlobalState>(global: T) {\n  return global.appConfig?.isGiveawayGiftsPurchaseAvailable ?? true;\n}\n\n/**\n * Slow, not to be used in `withGlobal`\n */\nexport function selectUserByPhoneNumber<T extends GlobalState>(global: T, phoneNumber: string) {\n  const phoneNumberCleaned = phoneNumber.replace(/[^0-9]/g, '');\n\n  return Object.values(global.users.byId).find((user) => user?.phoneNumber === phoneNumberCleaned);\n}\n\nexport function selectBot<T extends GlobalState>(global: T, userId: string): ApiUser | undefined {\n  const user = selectUser(global, userId);\n  if (!user || !isUserBot(user)) {\n    return undefined;\n  }\n\n  return user;\n}\n\nexport function selectBotAppPermissions<T extends GlobalState>(\n  global: T, userId: string,\n): BotAppPermissions | undefined {\n  return global.users.botAppPermissionsById[userId];\n}\n","import { addCallback, removeCallback } from '../../lib/teact/teactn';\n\nimport type { SharedState } from '../types';\nimport type { ClientBoundMessageEvent } from './sharedState.worker';\n\nimport { APP_NAME } from '../../config';\nimport { deepDiff, type DiffObject } from '../../util/deepDiff';\nimport { deepMerge } from '../../util/deepMerge';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport { INITIAL_SHARED_STATE } from '../initialState';\nimport { getGlobal, setGlobal } from '..';\n\ninterface GetFullStateEvent {\n  type: 'reqGetFullState';\n  localState: SharedState;\n}\n\ninterface UpdateStateEvent {\n  type: 'reqUpdateState';\n  update: DiffObject<SharedState>;\n}\n\nexport type WorkerBoundMessageEvent = GetFullStateEvent | UpdateStateEvent;\n\nlet sharedWorker: SharedWorker | undefined;\n\n// Tracks if the client has been synced with the shared state.\nlet synced = false;\nlet lastSharedState: SharedState = INITIAL_SHARED_STATE;\n\nexport function initSharedState(localState: SharedState) {\n  sharedWorker = new SharedWorker(new URL('./sharedState.worker.ts', import.meta.url), { name: APP_NAME });\n\n  sharedWorker.port.addEventListener('message', onMessage);\n  sharedWorker.port.start();\n\n  sendToWorker({ type: 'reqGetFullState', localState });\n\n  addCallback(onGlobalChange);\n}\n\nfunction onGlobalChange() {\n  const global = getGlobal();\n  if (global.sharedState === lastSharedState) return;\n  if (global.sharedState.isInitial) return;\n\n  updateSharedState(global.sharedState);\n}\n\nfunction onMessage(event: MessageEvent<ClientBoundMessageEvent>) {\n  const data = event.data;\n  switch (data.type) {\n    case 'stateUpdate': {\n      const state = deepMerge(lastSharedState, data.update);\n      updateGlobal(state);\n      break;\n    }\n    case 'fullState':\n      synced = true;\n      updateGlobal(data.state);\n      break;\n  }\n}\n\nexport function destroySharedStatePort() {\n  if (!sharedWorker) return;\n  sharedWorker.port.removeEventListener('message', onMessage);\n  sharedWorker.port.close();\n  sharedWorker = undefined;\n  removeCallback(onGlobalChange);\n}\n\nfunction updateSharedState(update: SharedState) {\n  if (!synced) return;\n  const diff = deepDiff(lastSharedState, update);\n  lastSharedState = update;\n  if (typeof diff === 'symbol') return;\n\n  sendToWorker({ type: 'reqUpdateState', update: diff });\n}\n\nconst scheduledEvents = new Set<WorkerBoundMessageEvent>();\n\nconst sendOnTickEnd = throttleWithTickEnd(() => {\n  if (!sharedWorker) {\n    throw new Error('Shared worker not initialized');\n  }\n\n  for (const event of scheduledEvents) {\n    sharedWorker.port.postMessage(event);\n  }\n  scheduledEvents.clear();\n});\n\nfunction sendToWorker(event: WorkerBoundMessageEvent) {\n  if (!sharedWorker) {\n    throw new Error('Shared worker not initialized');\n  }\n\n  scheduledEvents.add(event);\n  sendOnTickEnd();\n}\n\nfunction updateGlobal(update: Partial<SharedState>) {\n  let global = getGlobal();\n  lastSharedState = {\n    ...global.sharedState,\n    ...update,\n  };\n\n  global = {\n    ...global,\n    sharedState: lastSharedState,\n  };\n  setGlobal(global);\n}\n","import {\n  useEffect,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\n\nimport { VIEW_TRANSITION_CLASS_NAME } from '../../config';\nimport { requestMutation, requestNextMutation } from '../../lib/fasterdom/fasterdom';\nimport { IS_VIEW_TRANSITION_SUPPORTED } from '../../util/browser/windowEnvironment';\nimport Deferred from '../../util/Deferred';\n\ntype TransitionFunction = () => Promise<void> | void;\n\ntype TransitionState = 'idle' | 'capturing-old' | 'capturing-new' | 'animating' | 'skipped';\ninterface ViewTransitionController {\n  transitionState: TransitionState;\n  shouldApplyVtn?: boolean;\n  startViewTransition: (domUpdateCallback?: TransitionFunction) => PromiseLike<void> | void;\n}\n\nlet hasActiveTransition = false;\nexport function hasActiveViewTransition(): boolean {\n  return hasActiveTransition;\n}\n\nexport function useViewTransition(): ViewTransitionController {\n  const domUpdaterFn = useRef<TransitionFunction>();\n  const [transitionState, setTransitionState] = useState<TransitionState>('idle');\n\n  useEffect(() => {\n    if (transitionState !== 'capturing-old') return;\n\n    const transition = document.startViewTransition(async () => {\n      setTransitionState('capturing-new');\n      if (domUpdaterFn.current) await domUpdaterFn.current();\n      const deferred = new Deferred<void>();\n      requestNextMutation(() => {\n        deferred.resolve();\n      });\n      return deferred.promise;\n    });\n\n    transition.finished.then(() => {\n      setTransitionState('idle');\n      requestMutation(() => {\n        document.body.classList.remove(VIEW_TRANSITION_CLASS_NAME);\n      });\n      hasActiveTransition = false;\n    });\n\n    transition.ready.then(() => {\n      setTransitionState('animating');\n    }).catch((e: unknown) => {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      setTransitionState('skipped');\n      requestMutation(() => {\n        document.body.classList.remove(VIEW_TRANSITION_CLASS_NAME);\n      });\n      hasActiveTransition = false;\n    });\n  }, [transitionState]);\n\n  function startViewTransition(updateCallback?: TransitionFunction): PromiseLike<void> | void {\n    // Fallback: simply run the callback immediately if view transitions aren't supported.\n    if (!IS_VIEW_TRANSITION_SUPPORTED) {\n      if (updateCallback) updateCallback();\n      return;\n    }\n\n    domUpdaterFn.current = updateCallback;\n    setTransitionState('capturing-old');\n    requestMutation(() => {\n      document.body.classList.add(VIEW_TRANSITION_CLASS_NAME);\n    });\n    hasActiveTransition = true;\n  }\n\n  return {\n    shouldApplyVtn: transitionState === 'capturing-old'\n      || transitionState === 'capturing-new' || transitionState === 'animating',\n    transitionState,\n    startViewTransition,\n  };\n}\n","import type { GlobalState } from '../../global/types';\n\nimport useDerivedState from '../useDerivedState';\nimport useSelectorSignal from './useSelectorSignal';\n\ntype Selector<T> = (global: GlobalState) => T;\n\nexport default function useSelector<T>(selector: Selector<T>) {\n  const selectorSignal = useSelectorSignal(selector);\n  return useDerivedState(selectorSignal);\n}\n","import { addCallback } from '../../lib/teact/teactn';\nimport { getGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\nimport type { Signal, SignalSetter } from '../../util/signals';\n\nimport { createSignal } from '../../util/signals';\nimport useSyncEffect from '../useSyncEffect';\n\n/*\n  This hook is a more performant variation of the standard React `useSelector` hook. It allows to:\n  a) Avoid multiple subscriptions to global updates by leveraging a single selector reference.\n  b) Return a signal instead of forcing a component update right away.\n */\n\ntype Selector<T> = (global: GlobalState) => T;\n\ninterface State<T> {\n  clientsCount: number;\n  getter: Signal<T>;\n  setter: SignalSetter<T>;\n}\n\nconst bySelector = new Map<Selector<unknown>, State<unknown>>();\n\naddCallback((global: GlobalState) => {\n  for (const [selector, { setter }] of bySelector) {\n    setter(selector(global));\n  }\n});\n\nfunction useSelectorSignal<T>(selector: Selector<T>): Signal<T> {\n  let state = bySelector.get(selector) as State<T> | undefined;\n  if (!state) {\n    const [getter, setter] = createSignal(selector(getGlobal()));\n    state = { clientsCount: 0, getter, setter };\n    bySelector.set(selector, state as State<unknown>);\n  }\n\n  useSyncEffect(() => {\n    const state2 = bySelector.get(selector)!;\n\n    state2.clientsCount++;\n\n    return () => {\n      state2.clientsCount--;\n\n      if (!state2.clientsCount) {\n        bySelector.delete(selector);\n      }\n    };\n  }, [selector]);\n\n  return state.getter;\n}\n\nexport default useSelectorSignal;\n","import type {\n  ElementRef } from '../../lib/teact/teact';\nimport {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { requestForcedReflow, requestMeasure, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport calcTextLineHeightAndCount from '../../util/element/calcTextLineHeightAndCount';\nimport useDebouncedCallback from '../useDebouncedCallback';\nimport useLastCallback from '../useLastCallback';\nimport useWindowSize from '../window/useWindowSize';\n\nconst WINDOW_RESIZE_LINE_RECALC_DEBOUNCE = 200;\n\nexport default function useCollapsibleLines<T extends HTMLElement, C extends HTMLElement>(\n  ref: ElementRef<T>,\n  maxLinesBeforeCollapse: number,\n  cutoutRef?: ElementRef<C>,\n  isDisabled?: boolean,\n) {\n  const isFirstRenderRef = useRef(true);\n  const cutoutHeightRef = useRef<number | undefined>();\n  const [isCollapsible, setIsCollapsible] = useState(!isDisabled);\n  const [isCollapsed, setIsCollapsed] = useState(isCollapsible);\n\n  useLayoutEffect(() => {\n    const element = (cutoutRef || ref).current;\n    if (isDisabled || !element || isFirstRenderRef.current) return;\n\n    requestMutation(() => {\n      element.style.maxHeight = isCollapsed ? `${cutoutHeightRef.current}px` : '';\n    });\n  }, [cutoutRef, isCollapsed, isDisabled, ref]);\n\n  const recalculateTextLines = useLastCallback(() => {\n    if (isDisabled || !ref.current) {\n      return;\n    }\n    const element = ref.current;\n\n    const { lineHeight, totalLines } = calcTextLineHeightAndCount(element);\n    if (totalLines > maxLinesBeforeCollapse) {\n      cutoutHeightRef.current = lineHeight * maxLinesBeforeCollapse;\n      setIsCollapsible(true);\n    } else {\n      setIsCollapsible(false);\n      setIsCollapsed(false);\n    }\n  });\n\n  const debouncedRecalcTextLines = useDebouncedCallback(\n    () => requestMeasure(recalculateTextLines),\n    [recalculateTextLines],\n    WINDOW_RESIZE_LINE_RECALC_DEBOUNCE,\n  );\n\n  useLayoutEffect(() => {\n    if (!isDisabled && isFirstRenderRef.current) {\n      requestForcedReflow(() => {\n        recalculateTextLines();\n\n        return () => {\n          isFirstRenderRef.current = false;\n          const element = (cutoutRef || ref).current;\n          if (!element) return;\n          element.style.maxHeight = cutoutHeightRef.current ? `${cutoutHeightRef.current}px` : '';\n        };\n      });\n    }\n  }, [cutoutRef, isDisabled, recalculateTextLines, ref]);\n\n  // Parent resize is triggered on every collapse/expand, so we do recalculation only on window resize to save resources\n  const { width: windowWidth } = useWindowSize();\n  useEffect(() => {\n    if (!isDisabled) {\n      if (isFirstRenderRef.current) return;\n\n      debouncedRecalcTextLines();\n    } else {\n      setIsCollapsible(false);\n      setIsCollapsed(false);\n    }\n  }, [debouncedRecalcTextLines, isDisabled, windowWidth]);\n\n  return {\n    isCollapsed,\n    isCollapsible,\n    setIsCollapsed,\n  };\n}\n","import type { ElementRef } from '../../lib/teact/teact';\nimport { useEffect, useLayoutEffect, useState } from '../../lib/teact/teact';\n\nimport useLastCallback from '../useLastCallback';\nimport useResizeObserver from '../useResizeObserver';\n\nconst UPDATE_DEBOUNCE = 50; // ms\n\n/**\n * @param property animateable property\n */\nexport default function useStyleObserver(\n  ref: ElementRef<HTMLElement>,\n  property: string,\n  debounce = UPDATE_DEBOUNCE,\n  isDisabled?: boolean,\n) {\n  const [value, setValue] = useState<string | undefined>();\n\n  const updateValue = useLastCallback(() => {\n    if (!ref.current || isDisabled) {\n      setValue(undefined);\n      return;\n    }\n\n    const computedValue = getComputedStyle(ref.current).getPropertyValue(property).trim();\n    setValue(computedValue);\n  });\n\n  // Element does not receive `transitionend` event if parent has `display: none`.\n  // We will receive `resize` event when parent is shown again.\n  useResizeObserver(ref, updateValue, isDisabled);\n\n  useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    el.style.setProperty('transition', `${debounce}ms ${property} linear`, 'important');\n\n    return () => {\n      el.style.removeProperty('transition');\n    };\n  }, [debounce, isDisabled, property, ref]);\n\n  useEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      return undefined;\n    }\n\n    updateValue();\n\n    if (isDisabled) {\n      return undefined;\n    }\n\n    function handleTransitionEnd(e: TransitionEvent) {\n      if (e.propertyName !== property) return;\n      updateValue();\n    }\n\n    el.addEventListener('transitionend', handleTransitionEnd);\n\n    return () => {\n      el.removeEventListener('transitionend', handleTransitionEnd);\n    };\n  }, [isDisabled, property, ref, updateValue]);\n\n  return value;\n}\n","import { useEffect } from '../../lib/teact/teact';\n\nimport useLastCallback from '../useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(() => savedCallback(), delay);\n    if (!noFirst) savedCallback();\n\n    return () => clearInterval(id);\n  }, [delay, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../../lib/teact/teact';\n\nimport { SVG_NAMESPACE } from '../../config';\nimport { addSvgDefinition, removeSvgDefinition } from '../../util/svgController';\nimport { hexToRgb } from '../../util/switchTheme';\n\nconst SVG_MAP = new Map<string, SvgColorFilter>();\n\nclass SvgColorFilter {\n  public filterId: string;\n\n  private referenceCount = 0;\n\n  constructor(public color: string) {\n    this.filterId = `color-filter-${color.slice(1)}`;\n\n    const rgbColor = hexToRgb(color);\n    addSvgDefinition(\n      <filter color-interpolation-filters=\"sRGB\" xmlns={SVG_NAMESPACE}>\n        <feColorMatrix\n          type=\"matrix\"\n          values={`0 0 0 0 ${rgbColor.r / 255} 0 0 0 0 ${rgbColor.g / 255} 0 0 0 0 ${rgbColor.b / 255} 0 0 0 1 0`}\n        />\n      </filter>,\n      this.filterId,\n    );\n  }\n\n  public getFilterId() {\n    this.referenceCount += 1;\n    return this.filterId;\n  }\n\n  public removeReference() {\n    this.referenceCount -= 1;\n    if (this.referenceCount === 0) {\n      removeSvgDefinition(this.filterId);\n    }\n  }\n\n  public isUsed() {\n    return this.referenceCount > 0;\n  }\n}\n\nexport default function useColorFilter(color?: string, asValue?: boolean) {\n  useEffect(() => {\n    if (!color) return undefined;\n\n    return () => {\n      const colorFilter = SVG_MAP.get(color);\n      if (colorFilter) {\n        colorFilter.removeReference();\n        if (!colorFilter.isUsed()) {\n          SVG_MAP.delete(colorFilter.color);\n        }\n      }\n    };\n  }, [color]);\n\n  if (!color) return undefined;\n\n  if (SVG_MAP.has(color)) {\n    const svg = SVG_MAP.get(color)!;\n    return prepareStyle(svg.getFilterId(), asValue);\n  }\n\n  const svg = new SvgColorFilter(color);\n  SVG_MAP.set(color, svg);\n\n  return prepareStyle(svg.getFilterId(), asValue);\n}\n\nfunction prepareStyle(filterId: string, asValue?: boolean) {\n  if (asValue) {\n    return `url(#${filterId})`;\n  }\n\n  return `filter: url(#${filterId});`;\n}\n","import type { ElementRef } from '../../lib/teact/teact';\nimport { useMemo } from '../../lib/teact/teact';\n\nimport { prepareHexColor } from '../../util/themeStyle';\nimport useStyleObserver from '../element/useStyleObserver';\n\nconst DEBOUNCE = 50; // ms\n\n// Style observer that returns hex color value of the property\nexport default function useDynamicColorListener(\n  ref: ElementRef<HTMLElement>,\n  property = 'color',\n  isDisabled?: boolean,\n) {\n  const value = useStyleObserver(ref, property, DEBOUNCE, isDisabled);\n  const hexColor = useMemo(() => (value ? prepareHexColor(value) : undefined), [value]);\n\n  return hexColor;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport {\n  MIN_SCREEN_WIDTH_FOR_STATIC_LEFT_COLUMN,\n  MOBILE_SCREEN_LANDSCAPE_MAX_HEIGHT,\n  MOBILE_SCREEN_LANDSCAPE_MAX_WIDTH,\n  MOBILE_SCREEN_MAX_WIDTH,\n} from '../config';\nimport { IS_IOS } from '../util/browser/windowEnvironment';\nimport { createCallbackManager } from '../util/callbacks';\nimport { updateSizes } from '../util/windowSize';\nimport useForceUpdate from './useForceUpdate';\n\ntype MediaQueryCacheKey = 'mobile' | 'tablet' | 'landscape' | 'touch';\n\nconst mediaQueryCache = new Map<MediaQueryCacheKey, MediaQueryList>();\nconst callbacks = createCallbackManager();\n\nlet isMobile: boolean | undefined;\nlet isTablet: boolean | undefined;\nlet isLandscape: boolean | undefined;\nlet isTouchScreen: boolean | undefined;\n\nexport function getIsMobile() {\n  return isMobile;\n}\n\nexport function getIsTablet() {\n  return isTablet;\n}\n\nexport function getIsWebAppsFullscreenSupported() {\n  return !getIsMobile();\n}\n\nfunction handleMediaQueryChange() {\n  isMobile = mediaQueryCache.get('mobile')?.matches || false;\n  isTablet = !isMobile && (mediaQueryCache.get('tablet')?.matches || false);\n  isLandscape = mediaQueryCache.get('landscape')?.matches || false;\n  isTouchScreen = mediaQueryCache.get('touch')?.matches || false;\n  updateSizes();\n  callbacks.runCallbacks();\n}\n\nfunction initMediaQueryCache() {\n  const mobileQuery = window.matchMedia(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH}px), \\\n  (max-width: ${MOBILE_SCREEN_LANDSCAPE_MAX_WIDTH}px and max-height: ${MOBILE_SCREEN_LANDSCAPE_MAX_HEIGHT}px)`);\n  mediaQueryCache.set('mobile', mobileQuery);\n  mobileQuery.addEventListener('change', handleMediaQueryChange);\n\n  const tabletQuery = window.matchMedia(`(max-width: ${MIN_SCREEN_WIDTH_FOR_STATIC_LEFT_COLUMN}px)`);\n  mediaQueryCache.set('tablet', tabletQuery);\n  tabletQuery.addEventListener('change', handleMediaQueryChange);\n\n  const landscapeQuery = window.matchMedia(\n    IS_IOS\n      ? '(orientation: landscape)'\n      // Source: https://web.archive.org/web/20160509220835/http://blog.abouthalf.com/development/orientation-media-query-challenges-in-android-browsers/\n      // Feature is marked as deprecated now, but it is still supported\n      // https://developer.mozilla.org/en-US/docs/Web/CSS/@media/device-aspect-ratio#browser_compatibility\n      : 'screen and (min-device-aspect-ratio: 1/1) and (orientation: landscape)',\n  );\n  mediaQueryCache.set('landscape', landscapeQuery);\n  landscapeQuery.addEventListener('change', handleMediaQueryChange);\n\n  const isTouchScreenQuery = window.matchMedia('(pointer: coarse)');\n  mediaQueryCache.set('touch', isTouchScreenQuery);\n  isTouchScreenQuery.addEventListener('change', handleMediaQueryChange);\n}\n\ninitMediaQueryCache();\nhandleMediaQueryChange();\n\nexport default function useAppLayout() {\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => callbacks.addCallback(forceUpdate), [forceUpdate]);\n\n  return {\n    isMobile,\n    isTablet,\n    isLandscape,\n    isDesktop: !isMobile && !isTablet,\n    isTouchScreen,\n  };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nfunction useAsync<T>(fn: () => Promise<T>, deps: unknown[], defaultValue: T): {\n  isLoading: boolean;\n  error: Error | undefined;\n  result: T;\n};\nfunction useAsync<T>(fn: () => Promise<T>, deps: unknown[]): {\n  isLoading: boolean;\n  error: Error | undefined;\n  result: T | undefined;\n};\nfunction useAsync<T>(fn: () => Promise<T>, deps: unknown[], defaultValue?: T) {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import type React from '../lib/teact/teact';\nimport { useMemo, useState } from '../lib/teact/teact';\n\nimport { areDeepEqual } from '../util/areDeepEqual';\nimport { isSafariPatchInProgress } from '../util/patchSafariProgressiveAudio';\nimport { debounce } from '../util/schedulers';\nimport useLastCallback from './useLastCallback';\n\ntype BufferingEvent = (e: Event | React.SyntheticEvent<HTMLMediaElement>) => void;\n\nconst MIN_READY_STATE = 3;\n// Avoid flickering when re-mounting previously buffered video\nconst DEBOUNCE = 200;\nconst MIN_ALLOWED_MEDIA_DURATION = 0.1; // Some video emojis have weird duration of 0.04 causing extreme amount of events\n\n/**\n * Time range relative to the duration [0, 1]\n */\nexport type BufferedRange = { start: number; end: number };\n\nconst useBuffering = (noInitiallyBuffered = false, onTimeUpdate?: AnyToVoidFunction, onBroken?: AnyToVoidFunction) => {\n  const [isBuffered, setIsBuffered] = useState(!noInitiallyBuffered);\n  const [isReady, setIsReady] = useState(false);\n  const [bufferedProgress, setBufferedProgress] = useState(0);\n  const [bufferedRanges, setBufferedRanges] = useState<BufferedRange[]>([]);\n\n  const setIsBufferedDebounced = useMemo(() => {\n    return debounce(setIsBuffered, DEBOUNCE, false, true);\n  }, []);\n\n  const handleBuffering = useLastCallback<BufferingEvent>((e) => {\n    const media = e.currentTarget as HTMLMediaElement;\n\n    if (media.duration < MIN_ALLOWED_MEDIA_DURATION) {\n      onBroken?.();\n      return;\n    }\n\n    if (e.type === 'timeupdate') {\n      onTimeUpdate?.(e);\n    }\n\n    if (!isSafariPatchInProgress(media)) {\n      if (media.buffered.length) {\n        const ranges = getTimeRanges(media.buffered, media.duration);\n        const bufferedLength = ranges.reduce((acc, { start, end }) => acc + end - start, 0);\n        setBufferedProgress(bufferedLength / media.duration);\n        setBufferedRanges((currentRanges) => {\n          return areDeepEqual(currentRanges, ranges) ? currentRanges : ranges;\n        });\n      }\n\n      setIsBufferedDebounced(media.readyState >= MIN_READY_STATE || media.currentTime > 0);\n      setIsReady((current) => current || media.readyState > MIN_READY_STATE);\n    }\n  });\n\n  const bufferingHandlers = {\n    onPLay: handleBuffering,\n    onLoadedData: handleBuffering,\n    onPlaying: handleBuffering,\n    onLoadStart: handleBuffering, // Needed for Safari to start\n    onPause: handleBuffering, // Needed for Chrome when seeking\n    onTimeUpdate: handleBuffering, // Needed for audio buffering progress\n    onProgress: handleBuffering, // Needed for video buffering progress\n  };\n\n  return {\n    isReady,\n    isBuffered,\n    bufferedProgress,\n    bufferedRanges,\n    bufferingHandlers,\n    checkBuffering(element: HTMLMediaElement) {\n      setIsBufferedDebounced(element.readyState >= MIN_READY_STATE);\n    },\n  };\n};\n\nfunction getTimeRanges(ranges: TimeRanges, duration: number) {\n  const result: BufferedRange[] = [];\n  for (let i = 0; i < ranges.length; i++) {\n    result.push({\n      start: ranges.start(i) / duration,\n      end: ranges.end(i) / duration,\n    });\n  }\n  return result;\n}\n\nexport default useBuffering;\n","import type {\n  ElementRef } from '../lib/teact/teact';\nimport {\n  useEffect, useMemo, useState,\n} from '../lib/teact/teact';\n\nimport { round } from '../util/math';\nimport useLastCallback from './useLastCallback';\nimport useResizeObserver from './useResizeObserver';\nimport useSharedIntersectionObserver from './useSharedIntersectionObserver';\nimport useThrottledCallback from './useThrottledCallback';\n\nconst THROTTLE_MS = 150;\n\nexport default function useCoordsInSharedCanvas(\n  containerRef: ElementRef<HTMLDivElement>,\n  sharedCanvasRef?: ElementRef<HTMLCanvasElement>,\n) {\n  const [x, setX] = useState<number>();\n  const [y, setY] = useState<number>();\n\n  const recalculate = useLastCallback(() => {\n    const container = containerRef.current;\n    const canvas = sharedCanvasRef?.current;\n    if (!container || !canvas) {\n      return;\n    }\n\n    // Wait until elements are properly mounted\n    if (!canvas.offsetWidth || !canvas.offsetHeight) {\n      return;\n    }\n\n    const target = container.classList.contains('sticker-set-cover') || container.classList.contains('sticker-reaction')\n      ? container\n      : container.querySelector('img')!;\n    if (!target) {\n      return;\n    }\n\n    const targetBounds = target.getBoundingClientRect();\n    const canvasBounds = canvas.getBoundingClientRect();\n\n    // Factor coords are used to support rendering while being rescaled (e.g. message appearance animation)\n    setX(round((targetBounds.left - canvasBounds.left) / canvasBounds.width, 4) || 0);\n    setY(round((targetBounds.top - canvasBounds.top) / canvasBounds.height, 4) || 0);\n  });\n\n  useEffect(recalculate, [recalculate]);\n\n  const throttledRecalculate = useThrottledCallback(recalculate, [recalculate], THROTTLE_MS);\n  useResizeObserver(sharedCanvasRef, throttledRecalculate);\n  useSharedIntersectionObserver(sharedCanvasRef, throttledRecalculate);\n\n  return useMemo(() => (x !== undefined && y !== undefined ? { x, y } : undefined), [x, y]);\n}\n","import usePreviousDeprecated from './usePreviousDeprecated';\n\nexport default function useCurrentOrPrev<T>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePreviousDeprecated(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useSignal } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useRef } from '../lib/teact/teact';\n\nimport { ELECTRON_WINDOW_DRAG_EVENT_END, ELECTRON_WINDOW_DRAG_EVENT_START } from '../config';\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/browser/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: ElementRef<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n        document.body.dispatchEvent(new CustomEvent(ELECTRON_WINDOW_DRAG_EVENT_END));\n      }\n    };\n\n    const handleMouseDown = (event: MouseEvent) => {\n      distance.current = 0;\n      isDragging.current = false;\n      x.current = window.screenX;\n      y.current = window.screenY;\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        const deltaX = x.current - window.screenX;\n        const deltaY = y.current - window.screenY;\n        const deltaDistance = Math.sqrt(deltaX ** 2 + deltaY ** 2);\n        distance.current += deltaDistance;\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n          document.body.dispatchEvent(new CustomEvent(ELECTRON_WINDOW_DRAG_EVENT_START));\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMouseDown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mousedown', handleMouseDown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { getActions, getGlobal } from '../global';\n\nimport { addCustomEmojiInputRenderCallback } from '../util/emoji/customEmojiManager';\nimport { throttle } from '../util/schedulers';\n\nlet LOAD_QUEUE = new Set<string>();\nconst RENDER_HISTORY = new Set<string>();\nconst THROTTLE = 200;\nconst LIMIT_PER_REQUEST = 100;\n\nconst loadFromQueue = throttle(() => {\n  const queue = [...LOAD_QUEUE];\n\n  const queueToLoad = queue.slice(0, LIMIT_PER_REQUEST);\n  const otherQueue = queue.slice(LIMIT_PER_REQUEST + 1);\n\n  getActions().loadCustomEmojis({\n    ids: queueToLoad,\n  });\n\n  LOAD_QUEUE = new Set(otherQueue);\n\n  // Schedule next load\n  if (LOAD_QUEUE.size) {\n    loadFromQueue();\n  }\n}, THROTTLE, false);\n\nconst updateLastRendered = throttle(() => {\n  getActions().updateLastRenderedCustomEmojis({\n    ids: [...RENDER_HISTORY].reverse(),\n  });\n\n  RENDER_HISTORY.clear();\n}, THROTTLE, false);\n\nfunction notifyCustomEmojiRender(emojiId: string) {\n  RENDER_HISTORY.add(emojiId);\n  updateLastRendered();\n}\n\naddCustomEmojiInputRenderCallback(notifyCustomEmojiRender);\n\nexport default function useEnsureCustomEmoji(id?: string) {\n  if (!id) return;\n  notifyCustomEmojiRender(id);\n\n  if (getGlobal().customEmojis.byId[id]) {\n    return;\n  }\n\n  LOAD_QUEUE.add(id);\n  loadFromQueue();\n}\n","import type React from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\ntype EventArg<E> = React.MouseEvent<E>;\ntype EventHandler<E> = (e: EventArg<E>) => void;\n\nexport function useFastClick<T extends HTMLDivElement | HTMLButtonElement>(callback?: EventHandler<T>) {\n  const handler = useLastCallback((e: EventArg<T>) => {\n    if (e.type === 'mousedown' && e.button !== MouseButton.Main) {\n      return;\n    }\n\n    callback!(e);\n  });\n\n  return IS_TOUCH_ENV\n    ? { handleClick: callback ? handler : undefined }\n    : { handleMouseDown: callback ? handler : undefined };\n}\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO → `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useCallback, useRef } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport { IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS } from '../util/browser/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n// Carefully selected by swiping and observing visual changes\n// TODO: may be different on other devices such as iPad, maybe take dpi into account?\nconst SAFARI_EDGE_BACK_GESTURE_LIMIT = 300;\nconst SAFARI_EDGE_BACK_GESTURE_DURATION = 350;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: VoidFunction;\n  onBack?: VoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n  hash?: string;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\nlet isSafariGestureAnimation = false;\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction handleTouchStart(event: TouchEvent) {\n  const x = event.touches[0].pageX;\n\n  if (x <= SAFARI_EDGE_BACK_GESTURE_LIMIT || x >= window.innerWidth - SAFARI_EDGE_BACK_GESTURE_LIMIT) {\n    isSafariGestureAnimation = true;\n  }\n}\n\nfunction handleTouchEnd() {\n  if (!isSafariGestureAnimation) {\n    return;\n  }\n\n  setTimeout(() => {\n    isSafariGestureAnimation = false;\n  }, SAFARI_EDGE_BACK_GESTURE_DURATION);\n}\n\nif (IS_IOS) {\n  window.addEventListener('touchstart', handleTouchStart);\n  window.addEventListener('touchend', handleTouchEnd);\n  window.addEventListener('popstate', handleTouchEnd);\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go');\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go');\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, '', op.hash));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  // Navigation to previous page reload, state of which was trashed by reload\n  let isAnimationDisabled = false;\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    // TODO[history]: probably we should not call this inside the loop\n    if (!isAnimationDisabled && isSafariGestureAnimation) {\n      getActions().disableHistoryAnimations();\n      isAnimationDisabled = true;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n\n    if (!window.location.hash) {\n      return;\n    }\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    let isAnimationDisabled = false;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      // TODO[history]: probably we should not call this inside the loop\n      if (!isAnimationDisabled && isSafariGestureAnimation) {\n        getActions().disableHistoryAnimations();\n        isAnimationDisabled = true;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldResetUrlHash,\n  hash,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  hash?: string;\n  shouldResetUrlHash?: boolean;\n  onBack: VoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n      // Space is a hack to make the browser completely remove the hash\n      hash: hash ? `#${hash}` : (shouldResetUrlHash ? ' ' : undefined),\n    });\n  }, [hash, shouldBeReplaced, shouldResetUrlHash]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useRef, useState } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { type CallbackManager, createCallbackManager } from '../util/callbacks';\nimport {\n  debounce, throttle, throttleWith,\n} from '../util/schedulers';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  addCallback: (element: HTMLElement, callback: TargetCallback) => void;\n  removeCallback: (element: HTMLElement, callback: TargetCallback) => void;\n  destroy: NoneToVoidFunction;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef: ElementRef<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.destroy();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map<HTMLElement, CallbackManager<TargetCallback>>();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callbackManager = callbacks.get(entry.target as HTMLElement);\n        callbackManager?.runCallbacks(entry);\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    function addCallback(element: HTMLElement, callback: TargetCallback) {\n      if (!callbacks.get(element)) {\n        callbacks.set(element, createCallbackManager<TargetCallback>());\n      }\n\n      const callbackManager = callbacks.get(element)!;\n      callbackManager.addCallback(callback);\n    }\n\n    function removeCallback(element: HTMLElement, callback: TargetCallback) {\n      const callbackManager = callbacks.get(element);\n      if (!callbackManager) return;\n      callbackManager.removeCallback(callback);\n\n      if (!callbackManager.hasCallbacks()) {\n        callbacks.delete(element);\n      }\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    function destroy() {\n      callbacks.clear();\n      observer.disconnect();\n      entriesAccumulator.clear();\n    }\n\n    controllerRef.current = {\n      observer,\n      addCallback,\n      removeCallback,\n      destroy,\n    };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.addCallback(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.removeCallback(target, targetCallback);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: ElementRef<HTMLDivElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useIsIntersecting(\n  targetRef: ElementRef<HTMLDivElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [isIntersecting, setIsIntersecting] = useState(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return isIntersecting;\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useState } from '../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport useLastCallback from './useLastCallback';\n\nconst useKeyboardListNavigation = (\n  elementRef: ElementRef<HTMLElement>,\n  isOpen: boolean,\n  onSelectWithEnter?: (index: number) => void,\n  itemSelector?: string,\n  noCaptureFocus?: boolean,\n) => {\n  const [focusedIndex, setFocusedIndex] = useState(-1);\n\n  useEffect(() => {\n    setFocusedIndex(-1);\n\n    const element = elementRef.current;\n    if (isOpen && element && !noCaptureFocus) {\n      requestMutation(() => {\n        element.tabIndex = -1;\n      });\n      requestMeasure(() => element.focus());\n    }\n  }, [elementRef, isOpen, noCaptureFocus]);\n\n  return useLastCallback((e: React.KeyboardEvent<any>) => {\n    const element = elementRef.current;\n\n    if (!element) {\n      return;\n    }\n\n    if (e.keyCode === 13 && onSelectWithEnter) {\n      onSelectWithEnter(focusedIndex);\n      return;\n    }\n\n    if (e.keyCode !== 38 && e.keyCode !== 40) {\n      return;\n    }\n\n    const focusedElement = document.activeElement;\n    const elementChildren = Array.from(itemSelector ? element.querySelectorAll(itemSelector) : element.children);\n\n    let newIndex = (focusedElement && elementChildren.indexOf(focusedElement)) || focusedIndex;\n\n    if (e.keyCode === 38 && newIndex > 0) {\n      newIndex--;\n    } else if (e.keyCode === 40 && newIndex < elementChildren.length - 1) {\n      newIndex++;\n    } else if (elementChildren.length === 1) {\n      newIndex = 0;\n    } else {\n      return;\n    }\n\n    const item = elementChildren[newIndex] as HTMLElement;\n    if (item) {\n      setFocusedIndex(newIndex);\n      item.focus();\n    }\n  });\n};\n\nexport default useKeyboardListNavigation;\n","import {\n  addLocalizationCallback,\n  getTranslationFn,\n  type LangFn,\n} from '../util/localization';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return addLocalizationCallback(forceUpdate);\n  });\n\n  return getTranslationFn();\n};\n\nexport default useLang;\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { RegularLangKey } from '../types/language';\n\nimport { LANG_PACK } from '../config';\nimport { callApi } from '../api/gramjs';\nimport useLastCallback from './useLastCallback';\n\nexport default function useLangString(key: RegularLangKey, langCode?: string) {\n  const [value, setValue] = useState<string | undefined>(undefined);\n\n  const fetchLangString = useLastCallback(async () => {\n    if (!langCode) return undefined;\n\n    const result = await callApi('fetchLangStrings', {\n      langCode,\n      langPack: LANG_PACK,\n      keys: [key],\n    });\n    const langString = result?.strings[key];\n    if (!langString || typeof langString !== 'string') return undefined;\n    return langString;\n  });\n\n  useEffect(() => {\n    fetchLangString().then(setValue);\n  }, [key, langCode]);\n\n  return value;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { ApiMediaFormat } from '../api/types';\n\nimport { selectIsSynced } from '../global/selectors';\nimport * as mediaLoader from '../util/mediaLoader';\nimport useSelector from './data/useSelector';\nimport useForceUpdate from './useForceUpdate';\n\nconst useMedia = (\n  mediaHash: string | false | undefined,\n  noLoad = false,\n  mediaFormat = ApiMediaFormat.BlobUrl,\n  delay?: number | false,\n) => {\n  const mediaData = mediaHash ? mediaLoader.getFromMemory(mediaHash) : undefined;\n  const forceUpdate = useForceUpdate();\n  const isSynced = useSelector(selectIsSynced);\n\n  useEffect(() => {\n    if (!noLoad && mediaHash && !mediaData) {\n      const startedAt = Date.now();\n\n      mediaLoader.fetch(mediaHash, mediaFormat).then(() => {\n        const spentTime = Date.now() - startedAt;\n        if (!delay || spentTime >= delay) {\n          forceUpdate();\n        } else {\n          setTimeout(forceUpdate, delay - spentTime);\n        }\n      });\n    }\n  }, [noLoad, mediaHash, mediaData, mediaFormat, delay, isSynced]);\n\n  return mediaData;\n};\n\nexport default useMedia;\n","import useShowTransition, { type HookParams } from './useShowTransition';\n\nexport default function useMediaTransition<RefType extends HTMLElement = HTMLDivElement>(\n  mediaData?: unknown,\n  options?: Partial<HookParams<RefType>>,\n) {\n  const isMediaReady = Boolean(mediaData);\n\n  const { ref } = useShowTransition<RefType>({\n    isOpen: isMediaReady,\n    noMountTransition: isMediaReady,\n    className: 'slow',\n    ...options,\n  });\n\n  return ref;\n}\n","import useShowTransitionDeprecated from './useShowTransitionDeprecated';\n\nexport default function useMediaTransitionDeprecated(mediaData?: unknown) {\n  const isMediaReady = Boolean(mediaData);\n  const { transitionClassNames } = useShowTransitionDeprecated(isMediaReady, undefined, isMediaReady, 'slow');\n\n  return transitionClassNames;\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\n\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { useStateRef } from './useStateRef';\n\ninterface StaticPositionOptions {\n  anchor?: IAnchorPosition;\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  style?: string;\n  bubbleStyle?: string;\n}\n\ninterface DynamicPositionOptions {\n  anchor: IAnchorPosition;\n  getTriggerElement: () => HTMLElement | undefined | null;\n  getRootElement: () => HTMLElement | undefined | null;\n  getMenuElement: () => HTMLElement | undefined | null;\n  getLayout?: () => Layout;\n  withMaxHeight?: boolean;\n}\n\nexport type MenuPositionOptions =\n  StaticPositionOptions\n  | DynamicPositionOptions;\n\nexport interface Layout {\n  extraPaddingX?: number;\n  extraTopPadding?: number;\n  extraMarginTop?: number;\n  menuElMinWidth?: number;\n  deltaX?: number;\n  topShiftY?: number;\n  shouldAvoidNegativePosition?: boolean;\n  withPortal?: boolean;\n  isDense?: boolean; //  Allows you to place the menu as close to the edges of the area as possible\n}\n\nconst MENU_POSITION_VISUAL_COMFORT_SPACE_PX = 16;\nconst MENU_POSITION_BOTTOM_MARGIN = 12;\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0,\n};\n\nexport default function useMenuPosition(\n  isOpen: boolean,\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  options: MenuPositionOptions,\n) {\n  const optionsRef = useStateRef(options);\n\n  useLayoutEffect(() => {\n    if (!isOpen) return;\n\n    const options2 = optionsRef.current;\n\n    if (!('getTriggerElement' in options2)) {\n      applyStaticOptions(containerRef, bubbleRef, options2);\n    } else {\n      requestForcedReflow(() => {\n        const staticOptions = processDynamically(containerRef, bubbleRef, options2);\n\n        return () => {\n          applyStaticOptions(containerRef, bubbleRef, staticOptions);\n        };\n      });\n    }\n  }, [isOpen, containerRef, bubbleRef, optionsRef]);\n}\n\nfunction applyStaticOptions(\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  {\n    positionX = 'left',\n    positionY = 'top',\n    transformOriginX,\n    transformOriginY,\n    style,\n    bubbleStyle,\n  }: StaticPositionOptions,\n) {\n  const containerEl = containerRef.current!;\n  const bubbleEl = bubbleRef.current!;\n\n  if (style) {\n    containerEl.style.cssText = style;\n  }\n\n  if (bubbleStyle) {\n    bubbleEl.style.cssText = bubbleStyle;\n  }\n\n  if (positionX) {\n    removeExtraClass(bubbleEl, positionX === 'left' ? 'right' : 'left');\n    addExtraClass(bubbleEl, positionX);\n  }\n\n  if (positionY) {\n    removeExtraClass(bubbleEl, positionY === 'top' ? 'bottom' : 'top');\n    addExtraClass(bubbleEl, positionY);\n  }\n\n  setExtraStyles(bubbleEl, {\n    transformOrigin: [\n      transformOriginX ? `${transformOriginX}px` : positionX,\n      transformOriginY ? `${transformOriginY}px` : positionY,\n    ].join(' '),\n  });\n}\n\nfunction processDynamically(\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  {\n    anchor,\n    getRootElement,\n    getMenuElement,\n    getTriggerElement,\n    getLayout,\n    withMaxHeight,\n  }: DynamicPositionOptions,\n) {\n  const triggerEl = getTriggerElement()!;\n\n  let { x, y } = anchor;\n  const anchorX = x;\n  const anchorY = y;\n\n  const menuEl = getMenuElement();\n  const rootEl = getRootElement();\n\n  const {\n    extraPaddingX = 0,\n    extraTopPadding = 0,\n    extraMarginTop = 0,\n    topShiftY = 0,\n    menuElMinWidth = 0,\n    deltaX = 0,\n    shouldAvoidNegativePosition = false,\n    withPortal = false,\n    isDense = false,\n  } = getLayout?.() || {};\n\n  const marginTop = menuEl ? parseInt(getComputedStyle(menuEl).marginTop, 10) + extraMarginTop : undefined;\n  const { offsetWidth: menuElWidth, offsetHeight: menuElHeight } = menuEl || { offsetWidth: 0, offsetHeight: 0 };\n  const menuRect = menuEl ? {\n    width: Math.max(menuElWidth, menuElMinWidth),\n    height: menuElHeight + marginTop!,\n  } : EMPTY_RECT;\n\n  const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n  let positionX: 'left' | 'right';\n  let positionY: 'top' | 'bottom';\n  if (isDense || (x + menuRect.width + extraPaddingX < rootRect.width + rootRect.left)) {\n    x += 3;\n    positionX = 'left';\n  } else if (x - menuRect.width - rootRect.left > 0) {\n    positionX = 'right';\n    x -= 3;\n  } else {\n    positionX = 'left';\n    x = 16;\n  }\n\n  x += deltaX;\n\n  const yWithTopShift = y + topShiftY;\n\n  if (isDense || (yWithTopShift + menuRect.height < rootRect.height + rootRect.top)) {\n    positionY = 'top';\n    y = yWithTopShift;\n  } else {\n    positionY = 'bottom';\n\n    if (y - menuRect.height < rootRect.top + extraTopPadding) {\n      y = rootRect.top + rootRect.height;\n    }\n  }\n\n  const triggerRect = triggerEl.getBoundingClientRect();\n\n  const addedYForPortalPositioning = (withPortal ? triggerRect.top : 0);\n  const addedXForPortalPositioning = (withPortal ? triggerRect.left : 0);\n\n  const leftWithPossibleNegative = Math.min(\n    x - triggerRect.left,\n    rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX,\n  );\n  let left = (positionX === 'left'\n    ? (withPortal || shouldAvoidNegativePosition\n      ? Math.max(MENU_POSITION_VISUAL_COMFORT_SPACE_PX, leftWithPossibleNegative)\n      : leftWithPossibleNegative)\n    : (x - triggerRect.left)) + addedXForPortalPositioning;\n  let top = y - triggerRect.top + addedYForPortalPositioning;\n\n  if (isDense) {\n    left = Math.min(left, rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX);\n    top = Math.min(top, rootRect.height - menuRect.height - MENU_POSITION_VISUAL_COMFORT_SPACE_PX);\n  }\n\n  // Avoid hiding external parts of menus on mobile devices behind the edges of the screen (ReactionSelector for example)\n  const addedXForMenuPositioning = menuElMinWidth ? Math.max(0, (menuElMinWidth - menuElWidth) / 2) : 0;\n  if (left - addedXForMenuPositioning < 0 && shouldAvoidNegativePosition) {\n    left = addedXForMenuPositioning + MENU_POSITION_VISUAL_COMFORT_SPACE_PX;\n  }\n\n  const offsetX = (anchorX + addedXForPortalPositioning - triggerRect.left) - left;\n  const offsetY = (anchorY + addedYForPortalPositioning - triggerRect.top) - top - (marginTop || 0);\n  const transformOriginX = positionX === 'left' ? offsetX : menuRect.width + offsetX;\n  const transformOriginY = positionY === 'bottom' ? menuRect.height + offsetY : offsetY;\n\n  const style = `left: ${left}px; top: ${top}px`;\n\n  let bubbleStyle;\n  if (withMaxHeight) {\n    const menuMaxHeight = rootRect.height - MENU_POSITION_BOTTOM_MARGIN - (marginTop || 0);\n    bubbleStyle = `max-height: ${menuMaxHeight}px;`;\n  }\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX,\n    transformOriginY,\n    style,\n    bubbleStyle,\n  };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { BundleModules, Bundles } from '../util/moduleLoader';\n\nimport { addLoadListener, getModuleFromMemory, loadModule } from '../util/moduleLoader';\nimport useForceUpdate from './useForceUpdate';\n\nconst useModuleLoader = <B extends Bundles, M extends BundleModules<B>>(\n  bundleName: B, moduleName: M, noLoad = false, autoUpdate = false,\n) => {\n  const module = getModuleFromMemory(bundleName, moduleName);\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    if (!autoUpdate) {\n      return undefined;\n    }\n\n    return addLoadListener(forceUpdate);\n  }, [autoUpdate, forceUpdate]);\n\n  useEffect(() => {\n    if (!noLoad && !module) {\n      loadModule(bundleName).then(forceUpdate);\n    }\n  }, [bundleName, forceUpdate, module, moduleName, noLoad]);\n\n  return module;\n};\n\nexport default useModuleLoader;\n","import { getIsHeavyAnimating, useEffect, useSignal } from '../lib/teact/teact';\n\nimport useDerivedState from './useDerivedState';\n\nexport default function useMountAfterHeavyAnimation(hasIntersected: boolean) {\n  const [getNoHeavyAnimation, setNoHeavyAnimation] = useSignal(false);\n\n  const $getIsHeavyAnimating = getIsHeavyAnimating;\n\n  // Animation is usually started right after the mount, so we use effect to check for it on the next frame\n  useEffect(() => {\n    if (!$getIsHeavyAnimating()) {\n      setNoHeavyAnimation(true);\n    }\n  }, [$getIsHeavyAnimating, setNoHeavyAnimation]);\n\n  return useDerivedState(() => (getNoHeavyAnimation() && hasIntersected), [getNoHeavyAnimation, hasIntersected]);\n}\n","import { useEffect, useState } from '../lib/teact/teact';\nimport { getGlobal } from '../global';\n\nimport type { ApiUser } from '../api/types';\n\nimport { SESSION_ACCOUNT_PREFIX } from '../config';\nimport { getChatAvatarHash } from '../global/helpers';\nimport { selectIsSynced } from '../global/selectors';\nimport { preloadImage } from '../util/files';\nimport { resizeImage } from '../util/imageResize';\nimport { ACCOUNT_SLOT, getAccountsInfo, storeAccountData } from '../util/multiaccount';\nimport useSelector from './data/useSelector';\nimport useInterval from './schedulers/useInterval';\nimport useLastCallback from './useLastCallback';\nimport useMedia from './useMedia';\nimport useThrottledCallback from './useThrottledCallback';\n\nconst LOCAL_STORAGE_LISTENING_THROTTLE = 1000;\nconst REFRESH_INTERVAL = 1000 * 60;\nconst PREVIEW_SIZE = 72;\n\nexport default function useMultiaccountInfo(currentUser?: ApiUser) {\n  const isUpdater = Boolean(currentUser) && getGlobal().authRememberMe;\n  const isSynced = useSelector(selectIsSynced);\n\n  const [accountsInfo, setAccountsInfo] = useState(getAccountsInfo());\n\n  const avatarHash = currentUser && getChatAvatarHash(currentUser);\n  const avatarUrl = useMedia(avatarHash, !isUpdater);\n\n  const refresh = useThrottledCallback(() => {\n    setAccountsInfo(getAccountsInfo());\n  }, [], LOCAL_STORAGE_LISTENING_THROTTLE);\n\n  useEffect(() => {\n    if (!isUpdater || !isSynced) return;\n    storeAccountData(ACCOUNT_SLOT, {\n      userId: currentUser.id,\n      firstName: currentUser.firstName,\n      lastName: currentUser.lastName,\n      emojiStatusId: currentUser.emojiStatus?.documentId,\n      color: currentUser.color?.color,\n      isPremium: currentUser.isPremium,\n      phone: currentUser.phoneNumber,\n    });\n\n    refresh();\n  }, [\n    isUpdater, currentUser?.emojiStatus?.documentId, currentUser?.firstName, currentUser?.id, currentUser?.lastName,\n    currentUser?.color?.color, currentUser?.isPremium, currentUser?.phoneNumber, refresh, isSynced,\n  ]);\n\n  const updateAvatar = useLastCallback(async (url: string, abortSignal?: AbortSignal) => {\n    const resizedAvatar = await resizeImage(url, PREVIEW_SIZE, PREVIEW_SIZE);\n    const img = await preloadImage(resizedAvatar);\n    if (abortSignal?.aborted) return;\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d')!;\n    canvas.width = img.width;\n    canvas.height = img.height;\n    ctx.drawImage(img, 0, 0);\n    const dataUrl = canvas.toDataURL('image/png');\n    storeAccountData(ACCOUNT_SLOT, { avatarUri: dataUrl });\n\n    refresh();\n  });\n\n  useEffect(() => {\n    if (!avatarUrl || !isUpdater || !isSynced) return undefined;\n    const controller = new AbortController();\n    updateAvatar(avatarUrl, controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, [avatarUrl, isSynced, isUpdater]);\n\n  // Storage event only thrown when other tabs change the storage\n  useInterval(refresh, REFRESH_INTERVAL);\n  useEffect(() => {\n    function handleStorageChange(e: StorageEvent) {\n      if (!e.key?.startsWith(SESSION_ACCOUNT_PREFIX)) return;\n      refresh();\n    }\n\n    window.addEventListener('storage', handleStorageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, [refresh]);\n\n  return accountsInfo;\n}\n","import * as langProvider from '../util/oldLangProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type OldLangFn = langProvider.LangFn;\n/**\n * @deprecated\n */\nconst useOldLang = (): OldLangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslationFn();\n};\n\nexport default useOldLang;\n","import { useRef } from '../lib/teact/teact';\n\n/**\n * @deprecated\n */\nfunction usePreviousDeprecated<T>(next: T): T | undefined;\nfunction usePreviousDeprecated<T>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\n\nfunction usePreviousDeprecated<T>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePreviousDeprecated<T>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePreviousDeprecated;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [ResizeObserver, CallbackManager]>();\n\nexport default function useResizeObserver(\n  ref: ElementRef<HTMLElement> | undefined,\n  onResize: (entry: ResizeObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onResizeRef = useStateRef(onResize);\n\n  useEffect(() => {\n    const el = ref?.current;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: ResizeObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (entry.contentRect.width === 0 && entry.contentRect.height === 0) {\n        return;\n      }\n\n      onResizeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new ResizeObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer.unobserve(el);\n        observer.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onResizeRef, ref]);\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { getIsHeavyAnimating, useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: ElementRef<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeLast = useLastCallback(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    function flush() {\n      for (const entry of entriesAccumulator.values()) {\n        // Ignore updates when element is not properly mounted (`display: none`)\n        if (!(entry.target as HTMLElement).offsetParent) {\n          continue;\n        }\n\n        onIntersectionChangeLast(entry);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      entriesAccumulator.set(entry.target, entry);\n\n      if (!getIsHeavyAnimating()) {\n        flush();\n      } else {\n        getIsHeavyAnimating.once(() => {\n          requestMeasure(flush);\n        });\n      }\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer.unobserve(el);\n        observer.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, refOrElement]);\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useLayoutEffect, useRef, useSignal } from '../lib/teact/teact';\nimport { addExtraClass, toggleExtraClass } from '../lib/teact/teact-dom';\n\nimport type { Signal } from '../util/signals';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport useDerivedSignal from './useDerivedSignal';\nimport useDerivedState from './useDerivedState';\nimport useLastCallback from './useLastCallback';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\nimport useSyncEffectWithPrevDeps from './useSyncEffectWithPrevDeps';\n\nconst CLOSE_DURATION = 350;\n\ntype BaseHookParams<RefType extends HTMLElement> = {\n  isOpen: boolean | undefined;\n  ref?: ElementRef<RefType>;\n  noMountTransition?: boolean;\n  noOpenTransition?: boolean;\n  noCloseTransition?: boolean;\n  closeDuration?: number;\n  className?: string | false;\n  prefix?: string;\n  shouldForceOpen?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n};\n\nexport type HookParams<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender?: never;\n};\n\ntype HookParamsWithShouldRender<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender: true;\n};\n\ntype HookResult<RefType extends HTMLElement> = {\n  ref: ElementRef<RefType>;\n  getIsClosing: Signal<boolean>;\n};\n\ntype HookResultWithShouldRender<RefType extends HTMLElement> = HookResult<RefType> & {\n  shouldRender: boolean;\n};\n\ntype State =\n  'closed'\n  | 'scheduled-open'\n  | 'open'\n  | 'closing';\n\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType>\n): HookResult<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParamsWithShouldRender<RefType>\n): HookResultWithShouldRender<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType> | HookParamsWithShouldRender<RefType>,\n): HookResult<RefType> | HookResultWithShouldRender<RefType> {\n  const {\n    isOpen,\n    noMountTransition = false,\n    noOpenTransition = false,\n    noCloseTransition = false,\n    closeDuration = CLOSE_DURATION,\n    className = 'fast',\n    prefix = '',\n    shouldForceOpen,\n    onCloseAnimationEnd,\n  } = params;\n\n  const localRef = useRef<RefType>();\n  const ref = params.ref || localRef;\n  const closingTimeoutRef = useRef<number>();\n  const [getState, setState] = useSignal<State | undefined>();\n  const optionsRef = useStateRef({\n    closeDuration, noMountTransition, noOpenTransition, noCloseTransition,\n  });\n  const onCloseEndLast = useLastCallback(onCloseAnimationEnd);\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    const options = optionsRef.current;\n\n    if (shouldForceOpen) {\n      setState('open');\n      return;\n    }\n\n    if (isOpen) {\n      if (closingTimeoutRef.current) {\n        clearTimeout(closingTimeoutRef.current);\n        closingTimeoutRef.current = undefined;\n      }\n\n      if (options.noOpenTransition || (prevIsOpen === undefined && options.noMountTransition)) {\n        setState('open');\n      } else {\n        setState('scheduled-open');\n        requestMeasure(() => {\n          setState('open');\n        });\n      }\n    } else if (prevIsOpen === undefined || options.noCloseTransition) {\n      setState('closed');\n    } else {\n      setState('closing');\n\n      closingTimeoutRef.current = window.setTimeout(() => {\n        setState('closed');\n        onCloseEndLast();\n      }, options.closeDuration);\n    }\n  }, [isOpen, shouldForceOpen]);\n\n  const applyClassNames = useLastCallback(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    if (className !== false) {\n      addExtraClass(element, 'opacity-transition');\n      addExtraClass(element, className);\n    }\n\n    const state = getState();\n    const shouldRender = state !== 'closed';\n    const hasOpenClass = state === 'open';\n    const isClosing = state === 'closing';\n\n    toggleExtraClass(element, `${prefix}shown`, shouldRender);\n    toggleExtraClass(element, `${prefix}not-shown`, !shouldRender);\n    toggleExtraClass(element, `${prefix}open`, hasOpenClass);\n    toggleExtraClass(element, `${prefix}not-open`, !hasOpenClass);\n    toggleExtraClass(element, `${prefix}closing`, isClosing);\n  });\n\n  // Workaround for Chrome causing forced reflow in the middle of mutation phase when unmounting a focused element.\n  // Due to such forced reflow setting initial class names in the first layout effect causes transitions to start.\n  useSyncEffect(() => {\n    ref.onChange = () => {\n      ref.onChange = undefined;\n      applyClassNames();\n    };\n  }, [applyClassNames, ref]);\n\n  useLayoutEffect(applyClassNames, [applyClassNames, getState]);\n\n  const withShouldRender = 'withShouldRender' in params && params.withShouldRender;\n  const shouldRender = useDerivedState(\n    () => (withShouldRender && getState() !== 'closed'),\n    [withShouldRender, getState],\n  );\n\n  const getIsClosing = useDerivedSignal(() => getState() === 'closing', [getState]);\n\n  if (withShouldRender) {\n    return { ref, shouldRender, getIsClosing };\n  }\n\n  return { ref, getIsClosing };\n}\n","import { useRef, useState } from '../lib/teact/teact';\n\nimport buildClassName from '../util/buildClassName';\n\nconst CLOSE_DURATION = 350;\n\nconst useShowTransitionDeprecated = (\n  isOpen = false,\n  onCloseTransitionEnd?: () => void,\n  noFirstOpenTransition = false,\n  className: string | false = 'fast',\n  noCloseTransition = false,\n  closeDuration = CLOSE_DURATION,\n  noOpenTransition = false,\n) => {\n  const [isClosed, setIsClosed] = useState(!isOpen);\n  const closeTimeoutRef = useRef<number>();\n  // СSS class should be added in a separate tick to turn on CSS transition.\n  const [hasOpenClassName, setHasOpenClassName] = useState(isOpen && noFirstOpenTransition);\n\n  if (isOpen) {\n    setIsClosed(false);\n    setHasOpenClassName(true);\n\n    if (closeTimeoutRef.current) {\n      window.clearTimeout(closeTimeoutRef.current);\n\n      closeTimeoutRef.current = undefined;\n    }\n  } else {\n    setHasOpenClassName(false);\n\n    if (!isClosed && !closeTimeoutRef.current) {\n      const exec = () => {\n        setIsClosed(true);\n\n        if (onCloseTransitionEnd) {\n          onCloseTransitionEnd();\n        }\n\n        closeTimeoutRef.current = undefined;\n      };\n\n      if (noCloseTransition) {\n        exec();\n      } else {\n        closeTimeoutRef.current = window.setTimeout(exec, closeDuration);\n      }\n    }\n  }\n\n  // `noCloseTransition`, when set to true, should remove the open class immediately\n  const shouldHaveOpenClassName = (hasOpenClassName && !(noCloseTransition && !isOpen)) || (noOpenTransition && isOpen);\n  const isClosing = Boolean(closeTimeoutRef.current);\n  const shouldRender = isOpen || isClosing;\n  const transitionClassNames = buildClassName(\n    className && 'opacity-transition',\n    className,\n    shouldHaveOpenClassName && 'open',\n    !shouldHaveOpenClassName && 'not-open',\n    shouldRender && 'shown',\n    !shouldRender && 'not-shown',\n    isClosing && 'closing',\n  );\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    hasShownClass: shouldRender,\n    hasOpenClass: shouldHaveOpenClassName,\n    isClosing,\n  };\n};\n\nexport default useShowTransitionDeprecated;\n","import { useRef, useUnmountCleanup } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useUnmountCleanup(() => {\n    cleanupEffect(effect);\n  });\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useRef, useUnmountCleanup } from '../lib/teact/teact';\n\nimport usePreviousDeprecated from './usePreviousDeprecated';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePreviousDeprecated<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useUnmountCleanup(() => {\n    cleanupRef.current?.();\n  });\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import { useMemo } from '../lib/teact/teact';\nimport { getGlobal } from '../global';\n\nimport type { ApiThumbnail, MediaContainer } from '../api/types';\n\nimport { getMessageMediaThumbDataUri } from '../global/helpers';\nimport { selectTheme } from '../global/selectors';\n\nexport default function useThumbnail(media?: MediaContainer | ApiThumbnail) {\n  const isMediaContainer = media && 'content' in media;\n  const thumbDataUri = isMediaContainer ? getMessageMediaThumbDataUri(media) : media?.dataUri;\n\n  // TODO Find a way to update thumbnail on theme change\n  const theme = selectTheme(getGlobal());\n\n  const dataUri = useMemo(() => {\n    const uri = thumbDataUri;\n    if (!uri || theme !== 'dark') return uri;\n\n    return uri.replace('<svg', '<svg fill=\"white\"');\n  }, [thumbDataUri, theme]);\n\n  return dataUri;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\n\nexport default function useUniqueId() {\n  const idRef = useRef<string>();\n\n  if (!idRef.current) {\n    idRef.current = generateUniqueId();\n  }\n\n  return idRef.current;\n}\n","import { resolveEventType } from '../lib/teact/dom-events';\nimport type { ElementRef } from '../lib/teact/teact';\nimport { onFullyIdle, useLayoutEffect } from '../lib/teact/teact';\n\nimport unloadVideo from '../util/browser/unloadVideo';\nimport { useStateRef } from './useStateRef';\n\n// Fix memory leak when unmounting video element\nexport default function useVideoCleanup(\n  videoRef: ElementRef<HTMLVideoElement>, handlers?: Record<string, AnyFunction>,\n) {\n  const handlersRef = useStateRef(handlers);\n\n  useLayoutEffect(() => {\n    const videoEl = videoRef.current;\n    if (!videoEl) return undefined;\n\n    return () => {\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      const handlers2 = handlersRef.current;\n      if (handlers2) {\n        Object.entries(handlers2).forEach(([key, value]) => {\n          videoEl.removeEventListener(resolveEventType(key, videoEl), value, false);\n        });\n      }\n\n      // It may be slow (specifically on iOS), so we postpone it after unmounting\n      onFullyIdle(() => {\n        unloadVideo(videoEl);\n      });\n    };\n  }, [handlersRef, videoRef]);\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect } from '../lib/teact/teact';\n\nimport { hasActiveViewTransition } from './animations/useViewTransition';\n\nconst BACKDROP_CLASSNAME = 'backdrop';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  containerRef: ElementRef<HTMLElement>,\n  onClose?: () => void | undefined,\n  ignoreRightClick?: boolean,\n  excludedClosestSelector?: string,\n) {\n  useEffect(() => {\n    if (!isOpen || !onClose) {\n      return undefined;\n    }\n\n    const handleEvent = (e: MouseEvent) => {\n      const container = containerRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!container || !target || (ignoreRightClick && e.button === 2) || hasActiveViewTransition()) {\n        return;\n      }\n\n      if ((\n        !container.contains(e.target as Node | null)\n        || target.classList.contains(BACKDROP_CLASSNAME)\n      ) && !(excludedClosestSelector && (\n        target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)\n      ))) {\n        e.preventDefault();\n        e.stopPropagation();\n        onClose?.();\n      }\n    };\n\n    document.addEventListener('mousedown', handleEvent);\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [excludedClosestSelector, ignoreRightClick, isOpen, containerRef, onClose]);\n}\n","import { useEffect } from '@teact';\n\nimport { createSignal } from '../../util/signals';\nimport useLastCallback from '../useLastCallback';\n\nconst [getIsInBackgroundLocal, setIsInBackground] = createSignal(!document.hasFocus());\nexport const getIsInBackground = getIsInBackgroundLocal;\n\nfunction handleBlur() {\n  setIsInBackground(true);\n}\n\nfunction handleFocus() {\n  setIsInBackground(false);\n}\n\nwindow.addEventListener('blur', handleBlur);\nwindow.addEventListener('focus', handleFocus);\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsInBackground()) {\n      lastOnBlur();\n    }\n\n    return getIsInBackground.subscribe(() => {\n      if (getIsInBackground()) {\n        lastOnBlur();\n      } else {\n        lastOnFocus();\n      }\n    });\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return getIsInBackground();\n}\n","import { useState } from '../../lib/teact/teact';\n\nimport { createCallbackManager } from '../../util/callbacks';\nimport useEffectOnce from '../useEffectOnce';\n\nconst callbacks = createCallbackManager();\n\nfunction createListener() {\n  window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`)\n    .addEventListener('change', callbacks.runCallbacks, { once: true });\n}\n\nexport default function useDevicePixelRatio() {\n  const [dpr, setDpr] = useState(window.devicePixelRatio);\n\n  useEffectOnce(() => {\n    return callbacks.addCallback(() => {\n      setDpr(window.devicePixelRatio);\n    });\n  });\n\n  return dpr;\n}\n\ncreateListener();\n\n// Set up new listener for the next `devicePixelRatio` change\ncallbacks.addCallback(createListener);\n","import { useEffect, useMemo, useState } from '../../lib/teact/teact';\n\nimport { throttle } from '../../util/schedulers';\nimport windowSize from '../../util/windowSize';\nimport useDebouncedCallback from '../useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const { width: initialWidth, height: initialHeight } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({ width, height, isResizing }), [height, isResizing, width]);\n}\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","const utf16 = {\n  // The utf16-class is necessary to convert from javascripts internal character representation to unicode and back.\n  decode: (input) => {\n    const output = [];\n    let i = 0;\n    const len = input.length;\n    let value;\n    let extra;\n\n    while (i < len) {\n      value = input.charCodeAt(i++);\n      if ((value & 0xf800) === 0xd800) {\n        extra = input.charCodeAt(i++);\n        if ((value & 0xfc00) !== 0xd800 || (extra & 0xfc00) !== 0xdc00) {\n          throw new RangeError('UTF-16(decode): Illegal UTF-16 sequence');\n        }\n        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n      }\n      output.push(value);\n    }\n    return output;\n  },\n  encode: (input) => {\n    const output = [];\n    let i = 0;\n    const len = input.length;\n    let value;\n\n    while (i < len) {\n      value = input[i++];\n      if ((value & 0xf800) === 0xd800) {\n        throw new RangeError('UTF-16(encode): Illegal UTF-16 value');\n      }\n      if (value > 0xffff) {\n        value -= 0x10000;\n        output.push(String.fromCharCode(((value >>> 10) & 0x3ff) | 0xd800));\n        value = 0xdc00 | (value & 0x3ff);\n      }\n      output.push(String.fromCharCode(value));\n    }\n    return output.join('');\n  },\n};\n\n// Default parameters\nconst initial_n = 0x80;\nconst initial_bias = 72;\nconst delimiter = '\\x2D';\nconst base = 36;\nconst damp = 700;\nconst tmin = 1;\nconst tmax = 26;\nconst skew = 38;\nconst maxint = 0x7fffffff;\n\n// decode_digit(cp) returns the numeric value of a basic code\n// point (for use in representing integers) in the range 0 to\n// base-1, or base if cp is does not represent a value.\n\nfunction decode_digit(cp) {\n  return cp - 48 < 10 ? cp - 22 : cp - 65 < 26 ? cp - 65 : cp - 97 < 26 ? cp - 97 : base;\n}\n\n// ** Bias adaptation function **\nfunction adapt(delta, numpoints, firsttime) {\n  let k;\n  delta = firsttime ? Math.floor(delta / damp) : delta >> 1;\n  delta += Math.floor(delta / numpoints);\n\n  for (k = 0; delta > ((base - tmin) * tmax) >> 1; k += base) {\n    delta = Math.floor(delta / (base - tmin));\n  }\n  return Math.floor(k + ((base - tmin + 1) * delta) / (delta + skew));\n}\n\n// Main decode\nfunction decode(input, preserveCase) {\n  // Dont use utf16\n  const output = [];\n  const case_flags = [];\n  const input_length = input.length;\n\n  let n;\n  let out;\n  let i;\n  let bias;\n  let basic;\n  let j;\n  let ic;\n  let oldi;\n  let w;\n  let k;\n  let digit;\n  let t;\n  let len;\n\n  // Initialize the state:\n\n  n = initial_n;\n  i = 0;\n  bias = initial_bias;\n\n  // Handle the basic code points: Let basic be the number of input code\n  // points before the last delimiter, or 0 if there is none, then\n  // copy the first basic code points to the output.\n\n  basic = input.lastIndexOf(delimiter);\n  if (basic < 0) basic = 0;\n\n  for (j = 0; j < basic; ++j) {\n    if (preserveCase) case_flags[output.length] = input.charCodeAt(j) - 65 < 26;\n    if (input.charCodeAt(j) >= 0x80) {\n      throw new RangeError('Illegal input >= 0x80');\n    }\n    output.push(input.charCodeAt(j));\n  }\n\n  // Main decoding loop: Start just after the last delimiter if any\n  // basic code points were copied; start at the beginning otherwise.\n\n  for (ic = basic > 0 ? basic + 1 : 0; ic < input_length;) {\n    // ic is the index of the next character to be consumed,\n\n    // Decode a generalized variable-length integer into delta,\n    // which gets added to i. The overflow checking is easier\n    // if we increase i as we go, then subtract off its starting\n    // value at the end to obtain delta.\n    for (oldi = i, w = 1, k = base; ; k += base) {\n      if (ic >= input_length) {\n        throw RangeError('punycode_bad_input(1)');\n      }\n      digit = decode_digit(input.charCodeAt(ic++));\n\n      if (digit >= base) {\n        throw RangeError('punycode_bad_input(2)');\n      }\n      if (digit > Math.floor((maxint - i) / w)) {\n        throw RangeError('punycode_overflow(1)');\n      }\n      i += digit * w;\n      t = k <= bias ? tmin : k >= bias + tmax ? tmax : k - bias;\n      if (digit < t) {\n        break;\n      }\n      if (w > Math.floor(maxint / (base - t))) {\n        throw RangeError('punycode_overflow(2)');\n      }\n      w *= base - t;\n    }\n\n    out = output.length + 1;\n    bias = adapt(i - oldi, out, oldi === 0);\n\n    // i was supposed to wrap around from out to 0,\n    // incrementing n each time, so we'll fix that now:\n    if (Math.floor(i / out) > maxint - n) {\n      throw RangeError('punycode_overflow(3)');\n    }\n    n += Math.floor(i / out);\n    i %= out;\n\n    // Insert n at position i of the output:\n    // Case of last character determines uppercase flag:\n    if (preserveCase) {\n      case_flags.splice(i, 0, input.charCodeAt(ic - 1) - 65 < 26);\n    }\n\n    output.splice(i, 0, n);\n    i++;\n  }\n  if (preserveCase) {\n    for (i = 0, len = output.length; i < len; i++) {\n      if (case_flags[i]) {\n        output[i] = String.fromCharCode(output[i])\n          .toUpperCase()\n          .charCodeAt(0);\n      }\n    }\n  }\n  return utf16.encode(output);\n}\n\nfunction toUnicode(domain) {\n  const domain_array = domain.split('.');\n  const out = [];\n  for (let i = 0; i < domain_array.length; ++i) {\n    const s = domain_array[i];\n    out.push(s.match(/^xn--/) ? decode(s.slice(4)) : s);\n  }\n  return out.join('.');\n}\n\nexport default toUnicode;\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass> | undefined;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import Teact, { type Props } from './teact';\nexport type { JSX } from 'react';\nexport const Fragment = Teact.Fragment;\n\nfunction create(type: any, props: Props = {}, key?: any) {\n  if (key !== undefined) props.key = key;\n  const children = props.children;\n  if (props.children !== undefined) props.children = undefined;\n  return Teact.createElement(type, props, children);\n}\n\nexport function jsx(type: any, props: Props, key?: any) {\n  return create(type, props, key);\n}\n\n// Not implemented, reusing jsx for now\nexport const jsxs = jsx;\nexport const jsxDEV = jsx;\n","import type { ChangeEvent, FocusEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: Partial<Record<string, string>> = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\nconst SELECTION_STATE_ATTRIBUTE = '__teactSelectionState';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n\n  // Add a placeholder comment node for empty fragments to maintain position\n  if ($element.type === VirtualType.Fragment && children.length === 0) {\n    const fragmentEl = $element;\n    fragmentEl.placeholderTarget = document.createComment('empty-fragment');\n    insertBefore(options.fragment || parentEl, fragmentEl.placeholderTarget, options.nextSibling);\n    return;\n  }\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type === VirtualType.Fragment) {\n    // Remove placeholder for empty fragments\n    const fragment = $element;\n    if (fragment.placeholderTarget && fragment.children.length === 0) {\n      fragment.placeholderTarget.parentNode?.removeChild(fragment.placeholderTarget);\n      fragment.placeholderTarget = undefined;\n    }\n  } else {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    if ($current.children.length === 0) {\n      // For empty fragments, use the placeholder node to track position\n      const fragment = $current as VirtualElementFragment;\n      if (fragment.placeholderTarget) {\n        return fragment.placeholderTarget.nextSibling || undefined;\n      }\n      return undefined;\n    }\n\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  // Handle transitions between empty and non-empty fragments\n  if ($current.type === VirtualType.Fragment && $new.type === VirtualType.Fragment) {\n    const currentFragment = $current;\n    const newFragment = $new;\n\n    // If transitioning from empty to non-empty, use the placeholder's position\n    if (currentFragment.children.length === 0 && newFragment.children.length > 0 && currentFragment.placeholderTarget) {\n      nextSibling = currentFragment.placeholderTarget.nextSibling || undefined;\n      // Remove the placeholder as we're adding real content\n      currentFragment.placeholderTarget.parentNode?.removeChild(currentFragment.placeholderTarget);\n      currentFragment.placeholderTarget = undefined;\n    }\n\n    // If transitioning from non-empty to empty, add a placeholder\n    if (currentFragment.children.length > 0 && newFragment.children.length === 0) {\n      const lastCurrentChild = currentFragment.children[currentFragment.children.length - 1];\n      const siblingAfterFragment = getNextSibling(lastCurrentChild);\n      newFragment.placeholderTarget = document.createComment('empty-fragment');\n      insertBefore(currentEl, newFragment.placeholderTarget, siblingAfterFragment);\n    }\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  // TODO Remove after tests\n  if (!props.teactExperimentControlled) {\n    return;\n  }\n\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange, onBlur,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n\n        e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE] = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n  props.onBlur = (e: FocusEvent<HTMLInputElement>) => {\n    delete e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE];\n\n    onBlur?.(e);\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      const selectionStateJson = inputEl.dataset[SELECTION_STATE_ATTRIBUTE];\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n  placeholderTarget?: Comment;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = unknown> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport type ElementRef<T = HTMLElement> = RefObject<T | undefined>;\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly unknown[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: readonly unknown[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment') as unknown as FC<{ children: TeactNode }>;\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: unknown;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined;\n      hook.cleanup = undefined;\n      hook.releaseSignals = undefined;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined;\n\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined;\n      hook.onChange = undefined;\n    }\n  }\n\n  componentInstance.hooks = undefined;\n\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly unknown[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce<string[]>((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${String(prevValue)} => ${String(newValue)}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T>(\n  resolver: () => T,\n  dependencies: readonly unknown[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: unknown[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial?: T) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] as Signal<T> || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n\nexport { createElement, Fragment };\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport Deferred from '../../util/Deferred';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: VoidFunction;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n// TODO: Add callback to typify\ntype GlobalCallback = (global: any) => void;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\nlet DEBUG_currentRandomId: number | undefined;\n\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: GlobalCallback[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions): Promise<void> {\n  const deferred = new Deferred<void>();\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response) {\n        deferred.resolve();\n        return;\n      }\n\n      if (typeof response.then === 'function') {\n        response.then(() => {\n          deferred.resolve();\n        });\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n      deferred.resolve();\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n\n  return deferred.promise;\n}\n\nfunction updateContainers() {\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line @stylistic/max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      return handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: GlobalCallback) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: GlobalCallback) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (\n        (!container.mappedProps || !arePropsShallowEqual(container.ownProps, props))\n        && activateContainer(container, currentGlobal, props)\n      ) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stuckTo) {\n      return stuckTo === stickTo;\n    } else if (stickTo !== undefined) {\n      container.stuckTo = stickTo;\n    }\n\n    return true;\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions<ReturnType = void> = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => ReturnType\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => ReturnType\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    getPromiseActions: getUntypedActions as () => ProjectActions<Promise<void>>,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n  (window as any).getActions = getUntypedActions;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","// Copyright Twitter Inc. Licensed under MIT\n// https://github.com/twitter/twemoji-parser/blob/master/LICENSE.md\n// Emoji 16.0.0 support was taken here https://github.com/jdecked/twemoji-parser\n// Version ab019e0 14.04.2025\n\nconst vs16RegExp = /\\uFE0F/g;\n// avoid using a string literal like `\\u200D` here because minifiers expand it inline\nconst zeroWidthJoiner = String.fromCharCode(0x200d);\n\nexport function removeVS16s(rawEmoji) {\n  return rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji;\n}\n\n// Default Twemoji regex was modified here.\n// An exception for ascii emoji has been added to the beginning of the regular string: 🅰🅱🅾🅿.\n// UTF-16 endcoding are `\\ud83c\\udd70`, `\\ud83c\\udd71`, `\\ud83c\\udd7e` and `\\ud83c\\udd7f`.\n// These emojis in the graphic version must end with the `\\ufe0f` symbol.\n// Therefore, they should be excluded from the regular expression.\n// You must remove next substring `\\udd70\\udd71\\udd7e\\udd7f` from the middle of the regex on every update.\n\n// This file is generated by source/emoji/scripts/generate.sh\n// eslint-disable-next-line @stylistic/max-len\nexport default /(?:\\ud83c[\\udd70\\udd71\\udd7e\\udd7f]\\ufe0f)|(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])(?:\\u200d\\u27a1\\ufe0f)?|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f(?:\\u200d\\u27a1\\ufe0f)?)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f(?:\\u200d\\u27a1\\ufe0f)?|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83e\\uddd1\\u200d\\ud83e\\uddd1\\u200d\\ud83e\\uddd2\\u200d\\ud83e\\uddd2|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83e\\uddd1\\u200d\\ud83e\\uddd1\\u200d\\ud83e\\uddd2|\\ud83e\\uddd1\\u200d\\ud83e\\uddd2\\u200d\\ud83e\\uddd2|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f|\\u26d3\\ufe0f\\u200d\\ud83d\\udca5|\\u2764\\ufe0f\\u200d\\ud83d\\udd25|\\u2764\\ufe0f\\u200d\\ud83e\\ude79|\\ud83c\\udf44\\u200d\\ud83d\\udfeb|\\ud83c\\udf4b\\u200d\\ud83d\\udfe9|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc26\\u200d\\ud83d\\udd25|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83d\\ude42\\u200d\\u2194\\ufe0f|\\ud83d\\ude42\\u200d\\u2195\\ufe0f|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddd1\\u200d\\ud83e\\uddd2|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b|\\ud83d\\udc26\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[©®\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|\\ud83e\\udef0|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c\\udfc3|\\ud83d\\udeb6|\\ud83e\\uddce)(?:\\ud83c[\\udffb-\\udfff])?(?:\\u200d\\u27a1\\ufe0f)?|(?:\\ud83c[\\udf85\\udfc2\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4\\udeb5\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef1-\\udef8]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedc-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude7c\\ude80-\\ude89\\ude8f-\\udec2\\udec6\\udece-\\udedc\\udedf-\\udee9]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g;\n","// extracted by mini-css-extract-plugin\nexport {};","import type { TeactNode } from '../lib/teact/teact';\n\nimport type {\n  ApiAttachment,\n  ApiBotInlineMediaResult,\n  ApiBotInlineResult,\n  ApiBotInlineSwitchPm,\n  ApiBotInlineSwitchWebview,\n  ApiChat,\n  ApiChatInviteImporter,\n  ApiContact,\n  ApiDisallowedGiftsSettings,\n  ApiDocument,\n  ApiDraft,\n  ApiExportedInvite,\n  ApiFakeType,\n  ApiFormattedText,\n  ApiInputReplyInfo,\n  ApiInputSuggestedPostInfo,\n  ApiLabeledPrice,\n  ApiLanguage,\n  ApiMediaFormat,\n  ApiMessage,\n  ApiMessageEntity,\n  ApiNewMediaTodo,\n  ApiNewPoll,\n  ApiPeer,\n  ApiPhoto,\n  ApiReaction,\n  ApiReactionWithPaid,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftRegular,\n  ApiStarsSubscription,\n  ApiStarsTransaction,\n  ApiSticker,\n  ApiStickerSet,\n  ApiStory,\n  ApiStorySkipped,\n  ApiThreadInfo,\n  ApiTopic,\n  ApiTypingStatus,\n  ApiVideo,\n  MediaContent,\n  StarGiftAttributeIdModel,\n} from '../api/types';\nimport type { DC_IDS } from '../config';\nimport type { SearchResultKey } from '../util/keys/searchResultKey';\nimport type { IconName } from './icons';\n\nexport type TextPart = TeactNode;\n\nexport type DcId = typeof DC_IDS[number];\n\nexport type SessionUserInfo = {\n  userId?: string;\n  firstName?: string;\n  lastName?: string;\n  phone?: string;\n  avatarUri?: string;\n  color?: number;\n  isPremium?: boolean;\n  emojiStatusId?: string;\n};\n\nexport type SharedSessionData = {\n  date?: number;\n  dcId: number;\n  isTest?: true;\n} & Partial<Record<`dc${DcId}_${'auth_key' | 'server_salt'}`, string>> & SessionUserInfo;\n\nexport type AccountInfo = {\n  isTest?: true;\n} & SessionUserInfo;\n\nexport enum LoadMoreDirection {\n  Backwards,\n  Forwards,\n  Around,\n}\n\nexport enum FocusDirection {\n  Up,\n  Down,\n  Static,\n}\n\nexport type ScrollTargetPosition = ScrollLogicalPosition | 'centerOrTop';\n\nexport interface IAlbum {\n  albumId: string;\n  messages: ApiMessage[];\n  isPaidMedia?: boolean;\n  mainMessage: ApiMessage;\n  captionMessage?: ApiMessage;\n  hasMultipleCaptions: boolean;\n  commentsMessage?: ApiMessage;\n}\n\nexport type ThreadId = string | number;\n\nexport type ThemeKey = 'light' | 'dark';\nexport type AnimationLevel = 0 | 1 | 2;\nexport type PerformanceTypeKey = (\n  'pageTransitions' | 'messageSendingAnimations' | 'mediaViewerAnimations'\n  | 'messageComposerAnimations' | 'contextMenuAnimations' | 'contextMenuBlur' | 'rightColumnAnimations'\n  | 'animatedEmoji' | 'loopAnimatedStickers' | 'reactionEffects' | 'stickerEffects' | 'autoplayGifs' | 'autoplayVideos'\n  | 'storyRibbonAnimations' | 'snapEffect'\n);\nexport type PerformanceType = Record<PerformanceTypeKey, boolean>;\n\nexport interface IThemeSettings {\n  background?: string;\n  backgroundColor?: string;\n  patternColor?: string;\n  isBlurred?: boolean;\n}\n\nexport type LangCode = (\n  'en' | 'ar' | 'be' | 'ca' | 'nl' | 'fr' | 'de' | 'id' | 'it' | 'ko' | 'ms' | 'fa' | 'pl' | 'pt-br' | 'ru' | 'es'\n  | 'tr' | 'uk' | 'uz'\n);\n\nexport type TimeFormat = '24h' | '12h';\n\nexport interface AccountSettings {\n  hasWebNotifications: boolean;\n  hasPushNotifications: boolean;\n  hasContactJoinedNotifications?: boolean;\n  notificationSoundVolume: number;\n  canAutoLoadPhotoFromContacts: boolean;\n  canAutoLoadPhotoInPrivateChats: boolean;\n  canAutoLoadPhotoInGroups: boolean;\n  canAutoLoadPhotoInChannels: boolean;\n  canAutoLoadVideoFromContacts: boolean;\n  canAutoLoadVideoInPrivateChats: boolean;\n  canAutoLoadVideoInGroups: boolean;\n  canAutoLoadVideoInChannels: boolean;\n  canAutoLoadFileFromContacts: boolean;\n  canAutoLoadFileInPrivateChats: boolean;\n  canAutoLoadFileInGroups: boolean;\n  canAutoLoadFileInChannels: boolean;\n  autoLoadFileMaxSizeMb: number;\n  shouldSuggestStickers: boolean;\n  shouldSuggestCustomEmoji: boolean;\n  shouldUpdateStickerSetOrder: boolean;\n  hasPassword?: boolean;\n  isSensitiveEnabled?: boolean;\n  canChangeSensitive?: boolean;\n  shouldArchiveAndMuteNewNonContact?: boolean;\n  shouldNewNonContactPeersRequirePremium?: boolean;\n  nonContactPeersPaidStars?: number;\n  shouldDisplayGiftsButton?: boolean;\n  disallowedGifts?: ApiDisallowedGiftsSettings;\n  shouldHideReadMarks?: boolean;\n  canTranslate: boolean;\n  canTranslateChats: boolean;\n  translationLanguage?: string;\n  doNotTranslate: string[];\n  shouldPaidMessageAutoApprove: boolean;\n}\n\nexport interface SharedSettings {\n  shouldUseSystemTheme: boolean;\n  theme: ThemeKey;\n  themes: Partial<Record<ThemeKey, IThemeSettings>>;\n  language: string;\n  languages?: ApiLanguage[];\n  performance: PerformanceType;\n  messageTextSize: number;\n  animationLevel: AnimationLevel;\n  messageSendKeyCombo: 'enter' | 'ctrl-enter';\n  miniAppsCachedPosition?: Point;\n  miniAppsCachedSize?: Size;\n  timeFormat: TimeFormat;\n  wasTimeFormatSetManually: boolean;\n  isConnectionStatusMinimized: boolean;\n  canDisplayChatInTitle: boolean;\n  shouldForceHttpTransport?: boolean;\n  shouldAllowHttpTransport?: boolean;\n  shouldCollectDebugLogs?: boolean;\n  shouldDebugExportedSenders?: boolean;\n  shouldWarnAboutSvg?: boolean;\n  shouldSkipWebAppCloseConfirmation: boolean;\n  hasContactJoinedNotifications?: boolean;\n  hasWebNotifications: boolean;\n  hasPushNotifications: boolean;\n  notificationSoundVolume: number;\n}\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport interface ShippingOption {\n  id: string;\n  title: string;\n  amount: number;\n  prices: ApiLabeledPrice[];\n}\n\nexport enum SettingsScreens {\n  Main,\n  EditProfile,\n  Notifications,\n  DataStorage,\n  Language,\n  ActiveSessions,\n  General,\n  GeneralChatBackground,\n  GeneralChatBackgroundColor,\n  Privacy,\n  PrivacyPhoneNumber,\n  PrivacyAddByPhone,\n  PrivacyLastSeen,\n  PrivacyProfilePhoto,\n  PrivacyBio,\n  PrivacyBirthday,\n  PrivacyGifts,\n  PrivacyPhoneCall,\n  PrivacyPhoneP2P,\n  PrivacyForwarding,\n  PrivacyVoiceMessages,\n  PrivacyMessages,\n  PrivacyGroupChats,\n  PrivacyPhoneNumberAllowedContacts,\n  PrivacyPhoneNumberDeniedContacts,\n  PrivacyLastSeenAllowedContacts,\n  PrivacyLastSeenDeniedContacts,\n  PrivacyProfilePhotoAllowedContacts,\n  PrivacyProfilePhotoDeniedContacts,\n  PrivacyBioAllowedContacts,\n  PrivacyBioDeniedContacts,\n  PrivacyBirthdayAllowedContacts,\n  PrivacyBirthdayDeniedContacts,\n  PrivacyGiftsAllowedContacts,\n  PrivacyGiftsDeniedContacts,\n  PrivacyPhoneCallAllowedContacts,\n  PrivacyPhoneCallDeniedContacts,\n  PrivacyPhoneP2PAllowedContacts,\n  PrivacyPhoneP2PDeniedContacts,\n  PrivacyForwardingAllowedContacts,\n  PrivacyForwardingDeniedContacts,\n  PrivacyVoiceMessagesAllowedContacts,\n  PrivacyVoiceMessagesDeniedContacts,\n  PrivacyGroupChatsAllowedContacts,\n  PrivacyGroupChatsDeniedContacts,\n  PrivacyBlockedUsers,\n  PrivacyNoPaidMessages,\n  Performance,\n  Folders,\n  FoldersCreateFolder,\n  FoldersEditFolder,\n  FoldersEditFolderFromChatList,\n  FoldersEditFolderInvites,\n  FoldersIncludedChats,\n  FoldersIncludedChatsFromChatList,\n  FoldersExcludedChats,\n  FoldersExcludedChatsFromChatList,\n  TwoFaDisabled,\n  TwoFaNewPassword,\n  TwoFaNewPasswordConfirm,\n  TwoFaNewPasswordHint,\n  TwoFaNewPasswordEmail,\n  TwoFaNewPasswordEmailCode,\n  TwoFaEnabled,\n  TwoFaChangePasswordCurrent,\n  TwoFaChangePasswordNew,\n  TwoFaChangePasswordConfirm,\n  TwoFaChangePasswordHint,\n  TwoFaTurnOff,\n  TwoFaRecoveryEmailCurrentPassword,\n  TwoFaRecoveryEmail,\n  TwoFaRecoveryEmailCode,\n  TwoFaCongratulations,\n  ActiveWebsites,\n  PasscodeDisabled,\n  PasscodeNewPasscode,\n  PasscodeNewPasscodeConfirm,\n  PasscodeEnabled,\n  PasscodeChangePasscodeCurrent,\n  PasscodeChangePasscodeNew,\n  PasscodeChangePasscodeConfirm,\n  PasscodeTurnOff,\n  PasscodeCongratulations,\n  Experimental,\n  Stickers,\n  QuickReaction,\n  CustomEmoji,\n  DoNotTranslate,\n  FoldersShare,\n}\n\nexport type StickerSetOrReactionsSetOrRecent = Pick<ApiStickerSet, (\n  'id' | 'accessHash' | 'title' | 'count' | 'stickers' | 'isEmoji' | 'installedDate' | 'isArchived' |\n  'hasThumbnail' | 'hasStaticThumb' | 'hasAnimatedThumb' | 'hasVideoThumb' | 'thumbCustomEmojiId'\n)> & { reactions?: ApiReactionWithPaid[] };\n\nexport enum LeftColumnContent {\n  ChatList,\n  GlobalSearch,\n  Settings,\n  Contacts,\n  Archived,\n  NewChannelStep1,\n  NewChannelStep2,\n  NewGroupStep1,\n  NewGroupStep2,\n}\n\nexport enum GlobalSearchContent {\n  ChatList,\n  ChannelList,\n  BotApps,\n  Media,\n  Links,\n  Files,\n  Music,\n  Voice,\n}\n\nexport enum RightColumnContent {\n  ChatInfo,\n  Management,\n  Statistics,\n  BoostStatistics,\n  MessageStatistics,\n  StoryStatistics,\n  StickerSearch,\n  GifSearch,\n  PollResults,\n  AddingMembers,\n  CreateTopic,\n  EditTopic,\n  MonetizationStatistics,\n  NewGroup,\n}\n\nexport type MediaViewerMedia = ApiPhoto | ApiVideo | ApiDocument;\n\nexport enum MediaViewerOrigin {\n  Inline,\n  ScheduledInline,\n  SharedMedia,\n  ProfileAvatar,\n  SettingsAvatar,\n  MiddleHeaderAvatar,\n  Album,\n  ScheduledAlbum,\n  SearchResult,\n  ChannelAvatar,\n  SuggestedAvatar,\n  StarsTransaction,\n  PreviewMedia,\n  SponsoredMessage,\n}\n\nexport enum StoryViewerOrigin {\n  StoryRibbon,\n  MiddleHeaderAvatar,\n  ChatList,\n  SearchResult,\n}\n\nexport enum AudioOrigin {\n  Inline,\n  SharedMedia,\n  Search,\n  OneTimeModal,\n}\n\nexport enum ChatCreationProgress {\n  Idle,\n  InProgress,\n  Complete,\n  Error,\n}\n\nexport enum ProfileEditProgress {\n  Idle,\n  InProgress,\n  Complete,\n  Error,\n}\n\nexport enum ManagementProgress {\n  Idle,\n  InProgress,\n  Complete,\n  Error,\n}\n\nexport interface ManagementState {\n  isActive: boolean;\n  nextScreen?: ManagementScreens;\n  checkedUsername?: string;\n  isUsernameAvailable?: boolean;\n  error?: string;\n  invites?: ApiExportedInvite[];\n  revokedInvites?: ApiExportedInvite[];\n  editingInvite?: ApiExportedInvite;\n  inviteInfo?: {\n    invite: ApiExportedInvite;\n    importers?: ApiChatInviteImporter[];\n    requesters?: ApiChatInviteImporter[];\n  };\n}\n\nexport enum NewChatMembersProgress {\n  Closed,\n  InProgress,\n  Loading,\n}\n\nexport type ProfileTabType =\n  | 'members'\n  | 'commonChats'\n  | 'media'\n  | 'previewMedia'\n  | 'documents'\n  | 'links'\n  | 'audio'\n  | 'voice'\n  | 'stories'\n  | 'storiesArchive'\n  | 'similarChannels'\n  | 'similarBots'\n  | 'dialogs'\n  | 'gifts';\nexport type SharedMediaType = 'media' | 'documents' | 'links' | 'audio' | 'voice';\nexport type MiddleSearchType = 'chat' | 'myChats' | 'channels';\nexport type MiddleSearchParams = {\n  requestedQuery?: string;\n  savedTag?: ApiReaction;\n  isHashtag?: boolean;\n  fetchingQuery?: string;\n  type: MiddleSearchType;\n  results?: MiddleSearchResults;\n};\nexport type MiddleSearchResults = {\n  query: string;\n  totalCount?: number;\n  nextOffsetId?: number;\n  nextOffsetPeerId?: string;\n  nextOffsetRate?: number;\n  foundIds?: SearchResultKey[];\n};\n\nexport interface LoadingState {\n  areAllItemsLoadedForwards: boolean;\n  areAllItemsLoadedBackwards: boolean;\n}\n\nexport interface ChatMediaSearchSegment {\n  foundIds: number[];\n  loadingState: LoadingState;\n}\n\nexport interface ChatMediaSearchParams {\n  currentSegment: ChatMediaSearchSegment;\n  segments: ChatMediaSearchSegment[];\n  isLoading: boolean;\n}\n\nexport enum ProfileState {\n  Profile,\n  SharedMedia,\n  MemberList,\n  GiftList,\n  StoryList,\n  SavedDialogs,\n}\n\nexport enum PaymentStep {\n  Checkout,\n  SavedPayments,\n  ConfirmPassword,\n  PaymentInfo,\n  ShippingInfo,\n  Shipping,\n  ConfirmPayment,\n}\n\nexport const UPLOADING_WALLPAPER_SLUG = 'UPLOADING_WALLPAPER_SLUG';\n\nexport enum ManagementScreens {\n  Initial,\n  ChatPrivacyType,\n  Discussion,\n  ChannelSubscribers,\n  GroupType,\n  GroupPermissions,\n  GroupRemovedUsers,\n  ChannelRemovedUsers,\n  GroupUserPermissionsCreate,\n  GroupUserPermissions,\n  ChatAdministrators,\n  GroupRecentActions,\n  ChatAdminRights,\n  ChatNewAdminRights,\n  GroupMembers,\n  GroupAddAdmins,\n  Invites,\n  EditInvite,\n  Reactions,\n  InviteInfo,\n  JoinRequests,\n  NewDiscussionGroup,\n}\n\nexport type ManagementType = 'user' | 'group' | 'channel' | 'bot';\n\nexport type EmojiKeywords = {\n  isLoading?: boolean;\n  version?: number;\n  keywords?: Record<string, string[]>;\n};\n\nexport type InlineBotSettings = {\n  id: string;\n  help?: string;\n  query?: string;\n  offset?: string;\n  canLoadMore?: boolean;\n  results?: (ApiBotInlineResult | ApiBotInlineMediaResult)[];\n  isGallery?: boolean;\n  switchPm?: ApiBotInlineSwitchPm;\n  switchWebview?: ApiBotInlineSwitchWebview;\n  cacheTime: number;\n};\n\nexport type CustomPeerType = 'premium' | 'toBeDistributed' | 'contacts' | 'nonContacts'\n  | 'groups' | 'channels' | 'bots' | 'excludeMuted' | 'excludeArchived' | 'excludeRead' | 'stars';\n\nexport type CustomPeer = {\n  isCustomPeer: true;\n  key?: string | number;\n  subtitleKey?: string;\n  avatarIcon?: IconName;\n  isAvatarSquare?: boolean;\n  peerColorId?: number;\n  isVerified?: boolean;\n  fakeType?: ApiFakeType;\n  emojiStatusId?: string;\n  customPeerAvatarColor?: string;\n  withPremiumGradient?: boolean;\n  isPremium?: boolean;\n} & ({\n  titleKey: string;\n  title?: undefined;\n} | {\n  title: string;\n  titleKey?: undefined;\n});\n\nexport type UniqueCustomPeer<T = CustomPeerType> = CustomPeer & {\n  type: T;\n};\n\nexport type MessageListType =\n  'thread'\n  | 'pinned'\n  | 'scheduled';\n\nexport type ChatListType = 'active' | 'archived' | 'saved';\n\nexport interface MessageList {\n  chatId: string;\n  threadId: ThreadId;\n  type: MessageListType;\n}\n\nexport interface ActiveEmojiInteraction {\n  id: number;\n  x: number;\n  y: number;\n  messageId?: number;\n  startSize?: number;\n  animatedEffect?: string;\n  isReversed?: boolean;\n}\n\nexport type ActiveDownloads = Record<string, {\n  format: ApiMediaFormat;\n  filename: string;\n  size: number;\n  originChatId?: string;\n  originMessageId?: number;\n}>;\n\nexport type IDimensions = {\n  width: number;\n  height: number;\n};\n\nexport type StarsTransactionType = 'all' | 'inbound' | 'outbound';\nexport type StarsTransactionHistory = Record<StarsTransactionType, {\n  transactions: ApiStarsTransaction[];\n  nextOffset?: string;\n} | undefined>;\nexport type StarsSubscriptions = {\n  list: ApiStarsSubscription[];\n  nextOffset?: string;\n  isLoading?: boolean;\n};\n\nexport type ConfettiStyle = 'poppers' | 'top-down';\n\nexport type StarGiftInfo = {\n  peerId: string;\n  gift: ApiStarGiftRegular;\n  shouldHideName?: boolean;\n  message?: ApiFormattedText;\n  shouldUpgrade?: boolean;\n};\n\nexport interface TabThread {\n  scrollOffset?: number;\n  replyStack?: number[];\n  viewportIds?: number[];\n}\n\nexport interface Thread {\n  lastScrollOffset?: number;\n  lastViewportIds?: number[];\n  listedIds?: number[];\n  outlyingLists?: number[][];\n  pinnedIds?: number[];\n  scheduledIds?: number[];\n  editingId?: number;\n  editingScheduledId?: number;\n  editingDraft?: ApiFormattedText;\n  editingScheduledDraft?: ApiFormattedText;\n  draft?: ApiDraft;\n  noWebPage?: boolean;\n  threadInfo?: ApiThreadInfo;\n  firstMessageId?: number;\n  typingStatus?: ApiTypingStatus;\n}\n\nexport interface ServiceNotification {\n  id: number;\n  message: ApiMessage;\n  version?: string;\n  isUnread?: boolean;\n  isDeleted?: boolean;\n}\n\nexport interface TopicsInfo {\n  totalCount: number;\n  topicsById: Record<ThreadId, ApiTopic>;\n  listedTopicIds?: number[];\n  orderedPinnedTopicIds?: number[];\n}\n\nexport type TranslatedMessage = {\n  isPending?: boolean;\n  text?: ApiFormattedText;\n};\n\nexport type ChatTranslatedMessages = {\n  byLangCode: Record<string, Record<number, TranslatedMessage>>;\n};\n\nexport type ChatRequestedTranslations = {\n  toLanguage?: string;\n  manualMessages?: Record<number, string>;\n};\n\nexport type SimilarBotsInfo = {\n  similarBotsIds?: string[];\n  count: number;\n};\n\nexport type ConfettiParams = OptionalCombine<{\n  style?: ConfettiStyle;\n  withStars?: boolean;\n}, {\n    top?: number;\n    left?: number;\n    width?: number;\n    height?: number;\n  }>;\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport type WebPageMediaSize = 'large' | 'small';\n\nexport type StarGiftCategory = number | 'all' | 'limited' | 'stock' | 'resale';\n\nexport type CallSound = (\n  'join' | 'allowTalk' | 'leave' | 'connecting' | 'incoming' | 'end' | 'connect' | 'busy' | 'ringing'\n);\n\nexport type BotAppPermissions = {\n  geolocation?: boolean;\n};\n\nexport type GiftProfileFilterOptions = {\n  sortType: 'byDate' | 'byValue';\n  shouldIncludeUnlimited: boolean;\n  shouldIncludeLimited: boolean;\n  shouldIncludeUnique: boolean;\n  shouldIncludeDisplayed: boolean;\n  shouldIncludeHidden: boolean;\n};\nexport type ResaleGiftsSortType = 'byDate' | 'byPrice' | 'byNumber';\nexport type ResaleGiftsFilterOptions = {\n  sortType: ResaleGiftsSortType;\n  modelAttributes?: StarGiftAttributeIdModel[];\n  patternAttributes?: ApiStarGiftAttributeIdPattern[];\n  backdropAttributes?: ApiStarGiftAttributeIdBackdrop[];\n};\n\nexport type SendMessageParams = {\n  chat?: ApiChat;\n  attachments?: ApiAttachment[];\n  lastMessageId?: number;\n  text?: string;\n  entities?: ApiMessageEntity[];\n  replyInfo?: ApiInputReplyInfo;\n  suggestedPostInfo?: ApiInputSuggestedPostInfo;\n  attachment?: ApiAttachment;\n  sticker?: ApiSticker;\n  story?: ApiStory | ApiStorySkipped;\n  gif?: ApiVideo;\n  poll?: ApiNewPoll;\n  todo?: ApiNewMediaTodo;\n  contact?: ApiContact;\n  isSilent?: boolean;\n  scheduledAt?: number;\n  groupedId?: string;\n  noWebPage?: boolean;\n  sendAs?: ApiPeer;\n  shouldGroupMessages?: boolean;\n  shouldUpdateStickerSetOrder?: boolean;\n  wasDrafted?: boolean;\n  isInvertedMedia?: true;\n  effectId?: string;\n  webPageMediaSize?: WebPageMediaSize;\n  webPageUrl?: string;\n  starsAmount?: number;\n  isPending?: true;\n  messageList?: MessageList;\n  isReaction?: true; // Reaction to the story are sent in the form of a message\n  messagePriceInStars?: number;\n  localMessage?: ApiMessage;\n  forwardedLocalMessagesSlice?: ForwardedLocalMessagesSlice;\n  isForwarding?: boolean;\n  forwardParams?: ForwardMessagesParams;\n  isStoryReply?: boolean;\n  suggestedMedia?: MediaContent;\n};\n\nexport type ForwardedLocalMessagesSlice = {\n  messageIds: number[];\n  localMessages: ApiMessage[];\n};\n\nexport type ForwardMessagesParams = {\n  fromChat: ApiChat;\n  toChat: ApiChat;\n  toThreadId?: ThreadId;\n  messages: ApiMessage[];\n  isSilent?: boolean;\n  scheduledAt?: number;\n  sendAs?: ApiPeer;\n  withMyScore?: boolean;\n  noAuthors?: boolean;\n  noCaptions?: boolean;\n  isCurrentUserPremium?: boolean;\n  wasDrafted?: boolean;\n  lastMessageId?: number;\n  forwardedLocalMessagesSlice?: ForwardedLocalMessagesSlice;\n  messagePriceInStars?: number;\n};\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\ntype TickFunction = () => boolean | undefined;\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: TickFunction, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: TickFunction, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: TickFunction, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","import { getGlobal } from '../global';\n\nimport { DEBUG } from '../config';\nimport { selectTabState } from '../global/selectors';\n\nexport function updateAppBadge(unreadCount: number) {\n  if (!selectTabState(getGlobal()).isMasterTab) return;\n  if (typeof window.navigator.setAppBadge !== 'function') {\n    return;\n  }\n\n  window.navigator.setAppBadge(unreadCount).catch((err) => {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  });\n}\n","export function areDeepEqual<T>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n\n  return keys1.length === Object.keys(object2).length\n    && keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { IS_IOS } from './browser/windowEnvironment';\nimport { animate } from './animation';\nimport { fastRaf } from './schedulers';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","declare const globalThis: ServiceWorkerGlobalScope & WorkerGlobalScope & SharedWorkerGlobalScope & Window;\n\nexport const IS_MULTIACCOUNT_SUPPORTED = 'SharedWorker' in globalThis;\nexport const IS_INTL_LIST_FORMAT_SUPPORTED = 'ListFormat' in Intl;\nexport const IS_BAD_URL_PARSER = new URL('tg://host').host !== 'host';\nexport const ARE_WEBCODECS_SUPPORTED = 'VideoDecoder' in globalThis;\n","import {\n  clear,\n  createStore,\n  del,\n  delMany,\n  entries as getEntries,\n  get,\n  getMany,\n  keys as getKeys,\n  set,\n  setMany,\n  update,\n  values as getValues,\n} from 'idb-keyval';\n\nclass IdbStore {\n  public store: ReturnType<typeof createStore>;\n\n  constructor(name: string) {\n    this.store = createStore(name, 'store');\n  }\n\n  public set(key: string, value: any) {\n    return set(key, value, this.store);\n  }\n\n  public setMany(entries: [string, any][]) {\n    return setMany(entries, this.store);\n  }\n\n  public get<T = unknown>(key: string) {\n    return get<T>(key, this.store);\n  }\n\n  public getMany<T = unknown>(keys: string[]) {\n    return getMany<T>(keys, this.store);\n  }\n\n  public clear() {\n    return clear(this.store);\n  }\n\n  public del(key: string) {\n    return del(key, this.store);\n  }\n\n  public delMany(keys: string[]) {\n    return delMany(keys, this.store);\n  }\n\n  public entries() {\n    return getEntries(this.store);\n  }\n\n  public keys() {\n    return getKeys(this.store);\n  }\n\n  public values<T = unknown>() {\n    return getValues<T>(this.store);\n  }\n\n  public update<T = unknown>(key: string, updater: (oldValue: T | undefined) => T) {\n    return update(key, updater, this.store);\n  }\n}\n\nexport const MAIN_IDB_STORE = new IdbStore('tt-data');\nexport const PASSCODE_IDB_STORE = new IdbStore('tt-passcode');\n","type Part = {\n  type: 'literal' | 'element';\n  value: string;\n};\n\nexport function getBasicListFormat() {\n  return {\n    format: (items: string[]) => items.join(', '),\n    formatToParts: (items: string[]): Part[] => {\n      const result: Part[] = [];\n\n      items.forEach((item, i) => {\n        if (i > 0) {\n          result.push({ type: 'literal', value: ', ' });\n        }\n        result.push({ type: 'element', value: item });\n      });\n\n      return result;\n    },\n  };\n}\n","import { onFullyIdle } from '../../lib/teact/teact';\nimport { addCallback } from '../../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { LocalDb } from '../../api/gramjs/localDb';\nimport type { MethodArgs, Methods } from '../../api/gramjs/methods/types';\nimport type { ApiInitialArgs } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectTabState } from '../../global/selectors';\nimport {\n  callApiLocal,\n  cancelApiProgressMaster,\n  handleMethodCallback,\n  handleMethodResponse,\n  initApi,\n  updateFullLocalDb,\n  updateLocalDb,\n} from '../../api/gramjs';\nimport { deepDiff } from '../deepDiff';\nimport { deepMerge } from '../deepMerge';\nimport { getCurrentTabId, signalPasscodeHash, subscribeToTokenDied } from '../establishMultitabRole';\nimport { omit } from '../iteratees';\nimport { DATA_BROADCAST_CHANNEL_NAME, MULTITAB_STORAGE_KEY } from '../multiaccount';\n\ntype BroadcastChannelRefreshLangpack = {\n  type: 'langpackRefresh';\n  langCode: string;\n};\n\ntype BroadcastChannelRequestGlobal = {\n  type: 'requestGlobal';\n  token?: number;\n  appVersion: string;\n};\n\ntype BroadcastChannelGlobalUpdate = {\n  type: 'globalUpdate';\n  global: GlobalState;\n};\n\ntype BroadcastChannelCancelApiProgress = {\n  type: 'cancelApiProgress';\n  token: number;\n  messageId: string;\n};\n\ntype BroadcastChannelCallApi = {\n  type: 'callApi';\n  token: number;\n  messageId: string;\n  name: keyof Methods;\n  args: MethodArgs<keyof Methods>;\n  withCallback?: boolean;\n};\n\ntype BroadcastChannelMessageResponse = {\n  type: 'messageResponse';\n  token: number;\n  messageId: string;\n  response: any;\n};\n\ntype BroadcastChannelLocalDbUpdate = {\n  type: 'localDbUpdate';\n  batchedUpdates: {\n    name: keyof LocalDb;\n    prop: string;\n    value: any;\n  }[];\n};\n\ntype BroadcastChannelLocalDbUpdateFull = {\n  type: 'localDbUpdateFull';\n  localDb: any;\n};\n\ntype BroadcastChannelMessageCallback = {\n  type: 'messageCallback';\n  token: number;\n  messageId: string;\n  callbackArgs: any;\n};\n\ntype BroadcastChannelGlobalDiff = {\n  type: 'globalDiffUpdate';\n  diff: any;\n};\n\ntype BroadcastChannelInitApi = {\n  type: 'initApi';\n  token: number;\n  initialArgs: ApiInitialArgs;\n};\n\nconst MULTITAB_ESTABLISH_TIMEOUT = 800;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n  removeEventListener: (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n};\n\ntype BroadcastChannelMessage = (\n  BroadcastChannelRequestGlobal | BroadcastChannelGlobalUpdate | BroadcastChannelCallApi |\n  BroadcastChannelMessageResponse | BroadcastChannelRefreshLangpack |\n  BroadcastChannelMessageCallback | BroadcastChannelCancelApiProgress | BroadcastChannelLocalDbUpdate |\n  BroadcastChannelLocalDbUpdateFull | BroadcastChannelGlobalDiff | BroadcastChannelInitApi\n);\n\nlet resolveGlobalPromise: VoidFunction | undefined;\nlet isFirstGlobalResolved = false;\nlet currentGlobal: GlobalState | undefined;\nlet isDisabled = false;\n\nconst channel = new BroadcastChannel(DATA_BROADCAST_CHANNEL_NAME) as TypedBroadcastChannel;\n\nlet isBroadcastDiffScheduled = false;\nlet lastBroadcastDiffGlobal: GlobalState | undefined;\n\nfunction broadcastDiffOnIdle() {\n  if (isBroadcastDiffScheduled) return;\n\n  isBroadcastDiffScheduled = true;\n  lastBroadcastDiffGlobal = currentGlobal;\n\n  onFullyIdle(() => {\n    const diff = deepDiff(lastBroadcastDiffGlobal, currentGlobal);\n\n    if (typeof diff !== 'symbol') {\n      channel.postMessage({\n        type: 'globalDiffUpdate',\n        diff,\n      });\n    }\n\n    isBroadcastDiffScheduled = false;\n  });\n}\n\nexport function unsubcribeFromMultitabBroadcastChannel() {\n  channel.removeEventListener('message', handleMessage);\n  isDisabled = true;\n}\n\nexport function subscribeToMultitabBroadcastChannel() {\n  subscribeToTokenDied((token) => {\n    if (token === getCurrentTabId()) {\n      unsubcribeFromMultitabBroadcastChannel();\n      const global = getGlobal();\n      const newGlobal = {\n        ...global,\n        byTabId: omit(global.byTabId, [token]),\n      };\n\n      const diff = deepDiff(global, newGlobal);\n\n      if (typeof diff !== 'symbol') {\n        channel.postMessage({\n          type: 'globalDiffUpdate',\n          diff,\n        });\n      }\n      return;\n    }\n    let global = getGlobal();\n    global = {\n      ...global,\n      byTabId: omit(global.byTabId, [token]),\n    };\n\n    setGlobal(global);\n  });\n\n  addCallback((global: GlobalState) => {\n    if (!isFirstGlobalResolved || isDisabled) {\n      currentGlobal = global;\n      return;\n    }\n\n    if (currentGlobal === global) {\n      return;\n    }\n\n    if (!currentGlobal) {\n      currentGlobal = global;\n      channel.postMessage({\n        type: 'globalUpdate',\n        global,\n      });\n      return;\n    }\n\n    broadcastDiffOnIdle();\n\n    currentGlobal = global;\n  });\n\n  channel.addEventListener('message', handleMessage);\n}\n\nexport function handleMessage({ data }: { data: BroadcastChannelMessage }) {\n  if (!data) return;\n\n  switch (data.type) {\n    case 'initApi': {\n      const global = getGlobal();\n      if (!selectTabState(global).isMasterTab) return;\n\n      const { initialArgs } = data;\n      initApi(getActions().apiUpdate, initialArgs);\n      break;\n    }\n\n    case 'globalDiffUpdate': {\n      if (!isFirstGlobalResolved) return;\n      const { diff } = data;\n      const oldGlobal = getGlobal();\n      const global = deepMerge(oldGlobal, diff);\n\n      // @ts-ignore\n      global.DEBUG_randomId = oldGlobal.DEBUG_randomId;\n\n      currentGlobal = global;\n      setGlobal(global);\n      break;\n    }\n\n    case 'globalUpdate': {\n      if (isFirstGlobalResolved) return;\n      const oldGlobal = getGlobal();\n      // @ts-ignore\n      data.global.DEBUG_randomId = oldGlobal.DEBUG_randomId;\n      currentGlobal = data.global;\n      // eslint-disable-next-line tt-multitab/set-global-only-variable\n      setGlobal(data.global);\n      if (resolveGlobalPromise) {\n        resolveGlobalPromise();\n        resolveGlobalPromise = undefined;\n        isFirstGlobalResolved = true;\n      }\n      break;\n    }\n\n    case 'requestGlobal': {\n      const { appVersion } = data;\n      if (appVersion !== APP_VERSION) {\n        // If app version on the other tab was updated, reload the current page immediately and don't respond\n        // to the other tab's request because our current global might be incompatible with the new version\n        window.location.reload();\n        return;\n      }\n\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n\n      if (!selectTabState(global).isMasterTab) return;\n\n      channel.postMessage({\n        type: 'globalUpdate',\n        global,\n      });\n\n      signalPasscodeHash();\n      break;\n    }\n\n    case 'messageCallback': {\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n      if (selectTabState(global).isMasterTab) return;\n\n      handleMethodCallback(data);\n      break;\n    }\n\n    case 'localDbUpdate': {\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n      if (selectTabState(global).isMasterTab) return;\n\n      const {\n        batchedUpdates,\n      } = data;\n\n      batchedUpdates.forEach(({\n        name,\n        prop,\n        value,\n      }) => {\n        updateLocalDb(name, prop, value);\n      });\n      break;\n    }\n\n    case 'localDbUpdateFull': {\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n      if (selectTabState(global).isMasterTab) return;\n\n      const { localDb } = data;\n\n      updateFullLocalDb(localDb);\n      break;\n    }\n\n    case 'messageResponse': {\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n\n      if (selectTabState(global).isMasterTab) return;\n\n      handleMethodResponse(data);\n      break;\n    }\n\n    case 'cancelApiProgress': {\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n      if (!selectTabState(global).isMasterTab) return;\n\n      const { messageId } = data;\n\n      cancelApiProgressMaster(messageId);\n      break;\n    }\n\n    case 'callApi': {\n      if (!isFirstGlobalResolved) return;\n      const global = getGlobal();\n      if (!selectTabState(global).isMasterTab) return;\n\n      const {\n        name, messageId, token, args, withCallback,\n      } = data;\n\n      const argsWithCallback = (withCallback ? [...args, (...callbackArgs: any[]) => {\n        channel.postMessage({\n          type: 'messageCallback',\n          token,\n          messageId,\n          callbackArgs,\n        });\n      }] : args) as MethodArgs<keyof Methods>;\n\n      (async () => {\n        const result = await (callApiLocal(name, ...argsWithCallback));\n\n        channel.postMessage({\n          type: 'messageResponse',\n          token,\n          messageId,\n          response: result,\n        });\n      })();\n\n      break;\n    }\n\n    case 'langpackRefresh': {\n      getActions().refreshLangPackFromCache({ langCode: data.langCode });\n      break;\n    }\n  }\n}\n\nexport function requestGlobal(appVersion: string): Promise<void> {\n  channel.postMessage({\n    type: 'requestGlobal',\n    appVersion,\n  });\n\n  const resolveWithoutGlobal = () => {\n    if (resolveGlobalPromise) {\n      resolveGlobalPromise();\n      resolveGlobalPromise = undefined;\n    }\n    isFirstGlobalResolved = true;\n  };\n\n  if (localStorage.getItem(MULTITAB_STORAGE_KEY)) {\n    setTimeout(resolveWithoutGlobal, MULTITAB_ESTABLISH_TIMEOUT);\n  } else {\n    resolveWithoutGlobal();\n    return Promise.resolve();\n  }\n\n  return new Promise((resolve) => {\n    resolveGlobalPromise = resolve;\n  });\n}\n\nexport function notifyLangpackUpdate(langCode: string) {\n  channel.postMessage({\n    type: 'langpackRefresh',\n    langCode,\n  });\n}\n","export default function unloadVideo(video: HTMLVideoElement) {\n  video.pause();\n  // https://github.com/shaka-project/shaka-player/commit/0e3d10e61cb08cc35750e48face4e58f24542fc8\n  video.removeAttribute('src');\n  while (video.firstChild) {\n    video.removeChild(video.firstChild);\n  }\n\n  video.load();\n}\n","import { DEBUG } from '../../config';\nimport convertPunycode from '../../lib/punycode';\n\nconst PROTOCOL_WHITELIST = new Set(['http:', 'https:', 'tg:', 'ton:', 'mailto:', 'tel:']);\nconst FALLBACK_PREFIX = 'https://';\n\nexport function ensureProtocol(url: string) {\n  try {\n    const parsedUrl = new URL(url);\n\n    if (!PROTOCOL_WHITELIST.has(parsedUrl.protocol)) {\n      return `${FALLBACK_PREFIX}${url}`;\n    }\n\n    return url;\n  } catch (err) {\n    return `${FALLBACK_PREFIX}${url}`;\n  }\n}\n\nexport function getUnicodeUrl(url: string) {\n  const href = ensureProtocol(url);\n\n  try {\n    const parsedUrl = new URL(href);\n    const unicodeDomain = convertPunycode(parsedUrl.hostname);\n\n    try {\n      return decodeURI(parsedUrl.toString()).replace(parsedUrl.hostname, unicodeDomain);\n    } catch (err) { // URL contains invalid sequences, keep it as it is\n      return parsedUrl.toString().replace(parsedUrl.hostname, unicodeDomain);\n    }\n  } catch (error) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('SafeLink.getDecodedUrl error ', url, error);\n    }\n  }\n\n  return undefined;\n}\n\nexport function isMixedScriptUrl(url: string): boolean {\n  let domain;\n  try {\n    domain = convertPunycode(new URL(ensureProtocol(url)).hostname);\n  } catch (e) {\n    return true; // If URL is invalid, treat it as mixed script\n  }\n\n  let hasLatin = false;\n  let hasNonLatin = false;\n\n  for (const char of Array.from(domain)) {\n    if (!/\\p{L}/u.test(char)) continue; // Ignore non-letter characters\n\n    if (/\\p{Script=Latin}/u.test(char)) {\n      hasLatin = true;\n    } else {\n      hasNonLatin = true;\n    }\n\n    if (hasLatin && hasNonLatin) return true;\n  }\n\n  return false;\n}\n","import { IS_TEST, PRODUCTION_HOSTNAME } from '../../config';\n\nexport function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n    // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) return 'iOS';\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  return undefined;\n}\n\nexport const IS_PRODUCTION_HOST = window.location.host === PRODUCTION_HOSTNAME;\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_MOBILE = IS_IOS || IS_ANDROID;\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_YA_BROWSER = navigator.userAgent.includes('YaBrowser');\nexport const IS_FIREFOX = navigator.userAgent.toLowerCase().includes('firefox')\n  || navigator.userAgent.toLowerCase().includes('iceweasel')\n  || navigator.userAgent.toLowerCase().includes('icecat');\nexport const IS_ELECTRON = Boolean(window.electron);\n\nexport const MouseButton = {\n  Main: 0,\n  Auxiliary: 1,\n  Secondary: 2,\n  Fourth: 3,\n  Fifth: 4,\n};\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const IS_APP = IS_PWA || IS_ELECTRON;\n\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_VOICE_RECORDING_SUPPORTED = Boolean(\n  window.navigator.mediaDevices && 'getUserMedia' in window.navigator.mediaDevices && (\n    window.AudioContext || (window as any).webkitAudioContext\n  ),\n);\nexport const IS_EMOJI_SUPPORTED = PLATFORM_ENV && (IS_MAC_OS || IS_IOS) && isLastEmojiVersionSupported();\n\nexport const IS_SERVICE_WORKER_SUPPORTED = 'serviceWorker' in navigator;\n\n// Remove in mid-late 2025 when Chromium 132 is no longer a problem\n// https://issues.chromium.org/issues/390581541\nconst chromeVersion = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)?.[2];\nconst hasBrokenServiceWorkerStreaming = chromeVersion && Number(chromeVersion) === 132;\n// TODO Consider failed service worker\nexport const IS_PROGRESSIVE_SUPPORTED = IS_SERVICE_WORKER_SUPPORTED && !hasBrokenServiceWorkerStreaming;\nexport const IS_OPUS_SUPPORTED = Boolean((new Audio()).canPlayType('audio/ogg; codecs=opus'));\nexport const IS_CANVAS_FILTER_SUPPORTED = (\n  !IS_TEST && 'filter' in (document.createElement('canvas').getContext('2d') || {})\n);\nexport const IS_REQUEST_FULLSCREEN_SUPPORTED = 'requestFullscreen' in document.createElement('div');\nexport const ARE_CALLS_SUPPORTED = true;\nexport const LAYERS_ANIMATION_NAME = IS_ANDROID ? 'slideFade' : IS_IOS ? 'slideLayers' : 'pushSlide';\n\nexport const IS_WAVE_TRANSFORM_SUPPORTED = !IS_MOBILE\n  && !IS_FIREFOX // https://bugzilla.mozilla.org/show_bug.cgi?id=1961378\n  && !IS_SAFARI; // https://bugs.webkit.org/show_bug.cgi?id=245510\nexport const IS_SNAP_EFFECT_SUPPORTED = !IS_MOBILE\n  && !IS_FIREFOX // https://bugzilla.mozilla.org/show_bug.cgi?id=1896504\n  && !IS_SAFARI;\nexport const IS_FLUID_BACKGROUND_SUPPORTED = !IS_FIREFOX;\n\nconst TEST_VIDEO = document.createElement('video');\n\nexport const IS_WEBM_SUPPORTED = Boolean(TEST_VIDEO.canPlayType('video/webm; codecs=\"vp9\"').replace('no', ''));\n\nexport const MASK_IMAGE_DISABLED = true;\nexport const IS_OPFS_SUPPORTED = Boolean(navigator.storage?.getDirectory);\nif (IS_OPFS_SUPPORTED) {\n  // Clear old contents\n  (async () => {\n    try {\n      const directory = await navigator.storage.getDirectory();\n      await directory.removeEntry('downloads', { recursive: true });\n    } catch {\n      // Ignore\n    }\n  })();\n}\n\nexport const IS_OFFSET_PATH_SUPPORTED = CSS.supports('offset-rotate: 0deg');\nexport const IS_BACKDROP_BLUR_SUPPORTED = CSS.supports('backdrop-filter: blur()')\n  || CSS.supports('-webkit-backdrop-filter: blur()');\nexport const IS_INSTALL_PROMPT_SUPPORTED = 'onbeforeinstallprompt' in window;\nexport const IS_OPEN_IN_NEW_TAB_SUPPORTED = !(IS_PWA && IS_MOBILE);\nexport const IS_TRANSLATION_SUPPORTED = !IS_TEST;\nexport const IS_VIEW_TRANSITION_SUPPORTED = 'ViewTransition' in window;\n\nexport const MESSAGE_LIST_SENSITIVE_AREA = 750;\n\nexport const SCROLLBAR_WIDTH = (() => {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow:scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n  const width = el.offsetWidth - el.clientWidth;\n  el.remove();\n\n  document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n\n  return width;\n})();\n\nexport const MAX_BUFFER_SIZE = (IS_MOBILE ? 512 : 2000) * 1024 ** 2; // 512 OR 2000 MB\n\nfunction isLastEmojiVersionSupported() {\n  const ALLOWABLE_CALCULATION_ERROR_SIZE = 5;\n  const inlineEl = document.createElement('span');\n  inlineEl.classList.add('emoji-test-element');\n  document.body.appendChild(inlineEl);\n\n  inlineEl.innerText = '🇨🇶'; // Emoji from 16.0 version\n  const newEmojiWidth = inlineEl.offsetWidth;\n  inlineEl.innerText = '❤️'; // Emoji from 1.0 version\n  const legacyEmojiWidth = inlineEl.offsetWidth;\n\n  document.body.removeChild(inlineEl);\n\n  return Math.abs(newEmojiWidth - legacyEmojiWidth) < ALLOWABLE_CALCULATION_ERROR_SIZE;\n}\n\nexport const IS_GEOLOCATION_SUPPORTED = 'geolocation' in navigator;\n\nexport const getGeolocationStatus = async () => {\n  try {\n    const permissionStatus = await navigator.permissions.query({ name: 'geolocation' });\n\n    if (permissionStatus.state === 'granted' || permissionStatus.state === 'prompt') {\n      const geolocation = await new Promise<GeolocationCoordinates>((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(\n          (position) => resolve(position.coords),\n          (error) => reject(error),\n        );\n      });\n      return { accessRequested: true, accessGranted: true, geolocation };\n    }\n    if (permissionStatus.state === 'denied') {\n      return { accessRequested: true, accessGranted: false };\n    }\n  } catch (error) {\n    return { accessRequested: false, accessGranted: false };\n  }\n\n  return { accessRequested: false, accessGranted: false };\n};\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\nimport { ACCOUNT_SLOT } from './multiaccount';\n\nconst cacheApi = self.caches;\n\nconst SUFFIX = ACCOUNT_SLOT ? `_${ACCOUNT_SLOT}` : '';\n\nlet isSupported: boolean | undefined;\n\nexport async function isCacheApiSupported() {\n  if (!cacheApi) return false;\n\n  isSupported = isSupported ?? await cacheApi.has('test').then(() => true).catch(() => false);\n  return isSupported;\n}\n\nexport enum Type {\n  Text,\n  Blob,\n  Json,\n  ArrayBuffer,\n}\n\nexport async function fetch(\n  cacheName: string, key: string, type: Type, isHtmlAllowed = false,\n) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(`${cacheName}${SUFFIX}`);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    const contentType = response.headers.get('Content-Type');\n\n    switch (type) {\n      case Type.Text:\n        return await response.text();\n      case Type.Blob: {\n        // Ignore deprecated data-uri avatars\n        if (key.startsWith('avatar') && contentType && contentType.startsWith('text')) {\n          return undefined;\n        }\n\n        const blob = await response.blob();\n        const shouldRecreate = !blob.type || (!isHtmlAllowed && blob.type.includes('html'));\n        // iOS Safari fails to preserve `type` in cache\n        let resolvedType = blob.type || contentType;\n\n        if (!(shouldRecreate && resolvedType)) {\n          return blob;\n        }\n\n        // Prevent HTML-in-video attacks (for files that were cached before fix)\n        if (!isHtmlAllowed) {\n          resolvedType = resolvedType.replace(/html/gi, '');\n        }\n\n        return new Blob([blob], { type: resolvedType });\n      }\n      case Type.Json:\n        return await response.json();\n      case Type.ArrayBuffer:\n        return await response.arrayBuffer();\n      default:\n        return undefined;\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return false;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n    const cache = await cacheApi.open(`${cacheName}${SUFFIX}`);\n    await cache.put(request, response);\n\n    return true;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return false;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(`${cacheName}${SUFFIX}`);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(`${cacheName}${SUFFIX}`);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n","import captureKeyboardListener from './captureKeyboardListeners';\n\ntype IHandlerFunction = () => void;\n\nexport default function captureEscKeyListener(handler: IHandlerFunction) {\n  return captureKeyboardListener({ onEsc: handler });\n}\n","import { IS_IOS, IS_WINDOWS } from './browser/windowEnvironment';\nimport { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent.pageX!,\n              centerY: captureEvent.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = (e as RealTouchEvent).touches[0].pageX;\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","type HandlerName =\n  'onEnter'\n  | 'onBackspace'\n  | 'onDelete'\n  | 'onEsc'\n  | 'onUp'\n  | 'onDown'\n  | 'onLeft'\n  | 'onRight'\n  | 'onTab';\ntype Handler = (e: KeyboardEvent) => void | boolean;\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const handler = options[handlerName];\n    if (!handler) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(handler);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  for (let i = length - 1; i >= 0; i--) {\n    const handler = handlers[handlerName][i];\n    if (handler(e) !== false) {\n      e.stopPropagation();\n      break;\n    }\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const handler = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => cb === handler);\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","import { DEBUG } from '../config';\n\nexport const CLIPBOARD_ITEM_SUPPORTED = window.navigator.clipboard && window.ClipboardItem;\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): void => {\n  textCopyEl.value = str;\n  document.body.appendChild(textCopyEl);\n  const selection = document.getSelection();\n\n  if (selection) {\n    // Store previous selection\n    const rangeToRestore = selection.rangeCount > 0 && selection.getRangeAt(0);\n    textCopyEl.select();\n    document.execCommand('copy');\n    // Restore the original selection\n    if (rangeToRestore) {\n      selection.removeAllRanges();\n      selection.addRange(rangeToRestore);\n    }\n  }\n\n  document.body.removeChild(textCopyEl);\n};\n\nexport const copyHtmlToClipboard = (html: string, text: string): void => {\n  if (!window.navigator.clipboard?.write) {\n    copyTextToClipboard(text);\n    return;\n  }\n\n  window.navigator.clipboard.write([\n    new ClipboardItem({\n      'text/plain': new Blob([text], { type: 'text/plain' }),\n      'text/html': new Blob([html], { type: 'text/html' }),\n    }),\n  ]);\n};\n\nexport const copyImageToClipboard = (imageUrl?: string) => {\n  if (!imageUrl) return;\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const imageEl = new Image();\n  imageEl.onload = (e: Event) => {\n    if (ctx && e.currentTarget) {\n      const img = e.currentTarget as HTMLImageElement;\n      canvas.width = img.width;\n      canvas.height = img.height;\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      canvas.toBlob(copyBlobToClipboard, 'image/png', 1);\n    }\n  };\n\n  imageEl.src = imageUrl;\n};\n\nexport const copyTextToClipboardFromPromise = async (\n  getTextPromise: Promise<string | undefined>,\n  onSuccess: NoneToVoidFunction,\n  onFailure: NoneToVoidFunction,\n) => {\n  const copyTextToClipboardFallback = async () => {\n    try {\n      const text = await getTextPromise;\n      if (text) {\n        copyTextToClipboard(text);\n      } else {\n        onFailure();\n      }\n      return Boolean(text);\n    } catch {\n      onFailure();\n      return false;\n    }\n  };\n  if (!CLIPBOARD_ITEM_SUPPORTED || !navigator.clipboard.write) {\n    if (await copyTextToClipboardFallback()) onSuccess();\n    return;\n  }\n  try {\n    let hasGetDataError = false;\n    const rejectGetDataError = () => Promise.reject(new Error('GET_DATA_ERROR'));\n\n    const clipboardTextItem = new ClipboardItem({\n      'text/plain': getTextPromise.then((text) => text || rejectGetDataError()).catch(() => {\n        hasGetDataError = true;\n        return '';\n      }),\n    });\n    await navigator.clipboard.write([clipboardTextItem]);\n    if (hasGetDataError) {\n      onFailure();\n      return;\n    }\n  } catch {\n    // Promises in ClipboardItem aren't supported in older Chrome versions\n    if (!await copyTextToClipboardFallback()) return;\n  }\n  onSuccess();\n};\n\nasync function copyBlobToClipboard(pngBlob: Blob | null) {\n  if (!pngBlob || !CLIPBOARD_ITEM_SUPPORTED) {\n    return;\n  }\n\n  try {\n    await window.navigator.clipboard.write?.([\n      new ClipboardItem({\n        [pngBlob.type]: pngBlob,\n      }),\n    ]);\n  } catch (error) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n  }\n}\n","/* eslint-disable prefer-const */\n\nimport { preloadImage } from './files';\n\nconst LUMA_THRESHOLD = 128;\n\n/**\n * HEX > RGB\n * input: 'xxxxxx' (ex. 'ed15fa') case-insensitive\n * output: [r, g, b] ([0-255, 0-255, 0-255])\n */\nexport function hex2rgb(param: string): [number, number, number] {\n  return [\n    parseInt(param.substring(0, 2), 16),\n    parseInt(param.substring(2, 4), 16),\n    parseInt(param.substring(4, 6), 16),\n  ];\n}\n\n/**\n * RGB > HEX\n * input: [r, g, b] ([0-255, 0-255, 0-255])\n * output: 'xxxxxx' (ex. 'ff0000')\n */\nexport function rgb2hex(param: [number, number, number]) {\n  const p0 = param[0].toString(16);\n  const p1 = param[1].toString(16);\n  const p2 = param[2].toString(16);\n  return (p0.length == 1 ? '0' + p0 : p0) + (p1.length == 1 ? '0' + p1 : p1) + (p2.length == 1 ? '0' + p2 : p2);\n}\n\n/**\n * Converts an RGB color value to HSV. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes r, g, and b are contained in the set [0, 255] and\n * returns h, s, and v in the set [0, 1].\n *\n * @param   Number  r       The red color value\n * @param   Number  g       The green color value\n * @param   Number  b       The blue color value\n * @return  Array           The HSV representation\n */\nexport function rgb2hsb([r, g, b]: [number, number, number]): [number, number, number] {\n  r /= 255;\n  g /= 255;\n  b /= 255;\n\n  let max = Math.max(r, g, b), min = Math.min(r, g, b);\n  let h!: number, s: number, v: number = max;\n\n  let d = max - min;\n  s = max == 0 ? 0 : d / max;\n\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return [h, s, v];\n}\n\n/**\n * Converts an HSV color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes h, s, and v are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  v       The value\n * @return  Array           The RGB representation\n */\nexport function hsb2rgb([h, s, v]: [number, number, number]): [number, number, number] {\n  let r!: number, g!: number, b!: number;\n\n  let i = Math.floor(h * 6);\n  let f = h * 6 - i;\n  let p = v * (1 - s);\n  let q = v * (1 - f * s);\n  let t = v * (1 - (1 - f) * s);\n\n  switch (i % 6) {\n    case 0:\n      r = v;\n      g = t;\n      b = p;\n      break;\n    case 1:\n      r = q;\n      g = v;\n      b = p;\n      break;\n    case 2:\n      r = p;\n      g = v;\n      b = t;\n      break;\n    case 3:\n      r = p;\n      g = q;\n      b = v;\n      break;\n    case 4:\n      r = t;\n      g = p;\n      b = v;\n      break;\n    case 5:\n      r = v;\n      g = p;\n      b = q;\n      break;\n  }\n\n  return [\n    Math.round(r * 255),\n    Math.round(g * 255),\n    Math.round(b * 255),\n  ];\n}\n\nexport async function getAverageColor(url: string): Promise<[number, number, number]> {\n  // Only visit every 5 pixels\n  const blockSize = 5;\n  const defaultRGB: [number, number, number] = [0, 0, 0];\n  let data;\n  let width;\n  let height;\n  let i = -4;\n  let length;\n  let rgb: [number, number, number] = [0, 0, 0];\n  let count = 0;\n\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext && canvas.getContext('2d');\n  if (!context) {\n    return defaultRGB;\n  }\n\n  const image = await preloadImage(url);\n  height = image.naturalHeight || image.offsetHeight || image.height;\n  width = image.naturalWidth || image.offsetWidth || image.width;\n  canvas.height = height;\n  canvas.width = width;\n\n  context.drawImage(image, 0, 0);\n\n  try {\n    data = context.getImageData(0, 0, width, height);\n  } catch (e) {\n    return defaultRGB;\n  }\n\n  length = data.data.length;\n\n  while ((i += blockSize * 4) < length) {\n    if (data.data[i + 3] === 0) continue; // Ignore fully transparent pixels\n    ++count;\n    rgb[0] += data.data[i];\n    rgb[1] += data.data[i + 1];\n    rgb[2] += data.data[i + 2];\n  }\n\n  rgb[0] = Math.floor(rgb[0] / count);\n  rgb[1] = Math.floor(rgb[1] / count);\n  rgb[2] = Math.floor(rgb[2] / count);\n\n  return rgb;\n}\n\nexport function getColorLuma(rgbColor: [number, number, number]) {\n  const [r, g, b] = rgbColor;\n  const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  return luma;\n}\n// https://stackoverflow.com/a/64090995\nexport function hsl2rgb([h, s, l]: [number, number, number]): [number, number, number] {\n  let a = s * Math.min(l, 1 - l);\n  let f = (n: number, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\n\n// Function was adapted from https://github.com/telegramdesktop/tdesktop/blob/35ff621b5b52f7e3553fb0f990ea13ade7101b8e/Telegram/SourceFiles/data/data_wall_paper.cpp#L518\nexport function getPatternColor(rgbColor: [number, number, number]) {\n  let [hue, saturation, value] = rgb2hsb(rgbColor);\n\n  saturation = Math.min(1, saturation + 0.05 + 0.1 * (1 - saturation));\n  value = value > 0.5\n    ? Math.max(0, value * 0.65)\n    : Math.max(0, Math.min(1, 1 - value * 0.65));\n\n  const rgb = hsl2rgb([hue * 360, saturation, value]);\n  const hex = rgb2hex(rgb.map((c) => Math.floor(c * 255)) as [number, number, number]);\n  return `#${hex}66`;\n}\n\nexport const convertToRGBA = (color: number): string => {\n  const alpha = (color >> 24) & 0xff;\n  const red = (color >> 16) & 0xff;\n  const green = (color >> 8) & 0xff;\n  const blue = color & 0xff;\n\n  const alphaFloat = alpha / 255;\n  return `rgba(${red}, ${green}, ${blue}, ${alphaFloat})`;\n};\n\nexport const numberToHexColor = (color: number): string => {\n  return `#${color.toString(16).padStart(6, '0')}`;\n};\n\nexport const getTextColor = (color: number): string => {\n  const r = (color >> 16) & 0xff;\n  const g = (color >> 8) & 0xff;\n  const b = color & 0xff;\n  const luma = getColorLuma([r, g, b]);\n  return luma > LUMA_THRESHOLD ? 'black' : 'white';\n};\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type {\n  ApiLanguage, CachedLangData, LangPack, LangPackStringValuePlural,\n} from '../../api/types';\n\nimport readStrings from './readStrings';\n\nconst FALLBACK_LANG_CODE = 'en';\nconst FALLBACK_VERSION = 0;\nconst FALLBACK_TRANSLATE_URL = 'https://translations.telegram.org/en/weba';\n\nexport default async function readFallbackStrings(forLocalScript?: boolean): Promise<CachedLangData> {\n  let fileData;\n  if (forLocalScript) {\n    fileData = (await import('fs')).readFileSync('./src/assets/localization/fallback.strings', 'utf8');\n  } else {\n    const file = await import('../../assets/localization/fallback.strings');\n    fileData = file.default;\n  }\n  const rawStrings = readStrings(fileData);\n\n  const strings: LangPack['strings'] = {};\n\n  Object.entries(rawStrings).forEach(([key, value]) => {\n    const [clearKey, pluralSuffix] = key.split('_');\n\n    if (!pluralSuffix) {\n      strings[clearKey] = value;\n      return;\n    }\n\n    const knownValue = (strings[clearKey] || {}) as LangPackStringValuePlural;\n    knownValue[pluralSuffix as keyof LangPackStringValuePlural] = value;\n    strings[clearKey] = knownValue;\n  });\n\n  const langPack: LangPack = {\n    langCode: FALLBACK_LANG_CODE,\n    version: FALLBACK_VERSION,\n    strings,\n  };\n\n  const stringsCount = Object.keys(strings).length;\n\n  const language: ApiLanguage = {\n    langCode: FALLBACK_LANG_CODE,\n    name: 'English',\n    nativeName: 'English',\n    pluralCode: FALLBACK_LANG_CODE,\n    stringsCount,\n    translatedCount: stringsCount,\n    translationsUrl: FALLBACK_TRANSLATE_URL,\n  };\n\n  return {\n    langPack,\n    language,\n  };\n}\n","import { DEBUG } from '../../config';\n\nexport default function readStrings(data: string): Record<string, string> {\n  const lines = data.split(/;\\r?\\n?/);\n  const result: Record<string, string> = {};\n  for (const line of lines) {\n    if (!line.startsWith('\"')) continue;\n    const [key, value] = parseLine(line) || [];\n    if (!key || !value) {\n      // eslint-disable-next-line no-console\n      console.warn('Bad formatting in line:', line);\n      continue;\n    }\n    if (result[key]) {\n      // eslint-disable-next-line no-console\n      console.warn('Duplicate key:', key);\n    }\n    result[key] = value;\n  }\n  return result;\n}\n\nfunction parseLine(line: string) {\n  let isEscaped = false;\n  let isInsideString = false;\n\n  let separatorIndex;\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i];\n    if (char === '\\\\') {\n      isEscaped = !isEscaped;\n      continue;\n    }\n\n    if (char === '\"' && !isEscaped) {\n      isInsideString = !isInsideString;\n      continue;\n    }\n\n    if (char === '=' && !isInsideString) {\n      separatorIndex = i;\n      break;\n    }\n\n    isEscaped = false;\n  }\n\n  if (separatorIndex === undefined || separatorIndex === line.length - 1) return undefined;\n\n  try {\n    const key = JSON.parse(line.slice(0, separatorIndex));\n    const value = JSON.parse(line.slice(separatorIndex + 1));\n\n    return [key, value];\n  } catch (e) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('Error parsing line:', line, e);\n    }\n  }\n\n  return undefined;\n}\n","import type { OldLangFn } from '../../hooks/useOldLang';\nimport type { TimeFormat } from '../../types';\nimport type { LangFn } from '../localization';\n\nimport { getServerTime } from '../serverTime';\nimport withCache from '../withCache';\nimport { getDays, getHours, getMinutes } from './units';\n\nconst WEEKDAYS_FULL = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nconst MONTHS_FULL = [\n  'January', 'February', 'March', 'April', 'May', 'June',\n  'July', 'August', 'September', 'October', 'November', 'December',\n];\n\nconst MONTHS_FULL_LOWERCASE = MONTHS_FULL.map((month) => month.toLowerCase());\nconst MIN_SEARCH_YEAR = 2015;\nconst MAX_DAY_IN_MONTH = 31;\nconst MAX_MONTH_IN_YEAR = 12;\nexport const MILLISECONDS_IN_DAY = 24 * 60 * 60 * 1000;\n\nexport function isToday(date: Date) {\n  return getDayStartAt(new Date()) === getDayStartAt(date);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function toYearMonth(timestamp: number) {\n  const date = new Date(timestamp * 1000);\n  return `${date.getFullYear()}-${date.getMonth()}`;\n}\n\nfunction toIsoString(date: Date) {\n  return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n}\n\n// @optimization `toLocaleTimeString` is avoided because of bad performance\nexport function formatTime(lang: OldLangFn, datetime: number | Date) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n  const timeFormat = lang.timeFormat || '24h';\n\n  let hours = date.getHours();\n  let marker = '';\n  if (timeFormat === '12h') {\n    marker = hours >= 12 ? '\\xa0PM' : '\\xa0AM'; // NBSP\n    hours = hours > 12 ? hours % 12 : hours;\n  }\n\n  return `${String(hours).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}${marker}`;\n}\n\nexport function formatPastTimeShort(lang: OldLangFn, datetime: number | Date, alwaysShowTime = false) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n\n  const time = formatTime(lang, date);\n\n  const today = getDayStart(new Date());\n  if (date >= today) {\n    return time;\n  }\n\n  const weekAgo = new Date(today);\n  weekAgo.setDate(today.getDate() - 7);\n  if (date >= weekAgo) {\n    const weekday = lang(`Weekday.Short${WEEKDAYS_FULL[date.getDay()]}`);\n    return alwaysShowTime ? lang('FullDateTimeFormat', [weekday, time]) : weekday;\n  }\n\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  const formattedDate = formatDateToString(date, lang.code, noYear);\n  return alwaysShowTime ? lang('FullDateTimeFormat', [formattedDate, time]) : formattedDate;\n}\n\nexport function formatFullDate(lang: OldLangFn | LangFn, datetime: number | Date) {\n  return formatDateToString(datetime, lang.code, false, 'numeric');\n}\n\nexport function formatMonthAndYear(lang: OldLangFn | LangFn, date: Date, isShort = false) {\n  return formatDateToString(date, lang.code, false, isShort ? 'short' : 'long', true);\n}\n\nexport function formatCountdown(\n  lang: LangFn,\n  secondsLeft: number,\n) {\n  const days = getDays(secondsLeft);\n  if (secondsLeft < 0) {\n    return 0;\n  } else if (days < 1) {\n    return formatMediaDuration(secondsLeft);\n  } else if (days < 7) {\n    const count = days;\n    return lang('Days', { count }, { pluralValue: count });\n  } else if (days < 30) {\n    const count = Math.floor(days / 7);\n    return lang('Weeks', { count }, { pluralValue: count });\n  } else if (days < 365) {\n    const count = Math.floor(days / 30);\n    return lang('Months', { count }, { pluralValue: count });\n  } else {\n    const count = Math.floor(days / 365);\n    return lang('Years', { count }, { pluralValue: count });\n  }\n}\n\nexport function formatCountdownShort(lang: OldLangFn, msLeft: number): string {\n  if (msLeft < 60 * 1000) {\n    return Math.ceil(msLeft / 1000).toString();\n  } else if (msLeft < 60 * 60 * 1000) {\n    return Math.ceil(msLeft / (60 * 1000)).toString();\n  } else if (msLeft < MILLISECONDS_IN_DAY) {\n    return lang('MessageTimer.ShortHours', Math.ceil(msLeft / (60 * 60 * 1000)));\n  } else {\n    return lang('MessageTimer.ShortDays', Math.ceil(msLeft / MILLISECONDS_IN_DAY));\n  }\n}\n\nexport function formatLocationLastUpdate(lang: OldLangFn, currentTime: number, lastUpdated = currentTime) {\n  const seconds = currentTime - lastUpdated;\n  if (seconds < 60) {\n    return lang('LiveLocationUpdated.JustNow');\n  } else if (seconds < 60 * 60) {\n    return lang('LiveLocationUpdated.MinutesAgo', Math.floor(seconds / 60));\n  } else {\n    return lang('LiveLocationUpdated.TodayAt', formatTime(lang, lastUpdated));\n  }\n}\n\nexport function formatRelativePastTime(lang: OldLangFn, currentTime: number, lastUpdated = currentTime) {\n  const seconds = currentTime - lastUpdated;\n\n  if (seconds < 60) {\n    return lang('Time.JustNow');\n  }\n\n  // within an hour\n  if (seconds < 60 * 60) {\n    return lang('Time.MinutesAgo', Math.floor(seconds / 60));\n  }\n\n  const lastUpdatedDate = new Date(lastUpdated * 1000);\n  const today = getDayStart(new Date());\n  if (lastUpdatedDate >= today) {\n    return lang('Time.TodayAt', formatTime(lang, lastUpdatedDate));\n  }\n\n  const yesterday = new Date(today);\n  yesterday.setDate(today.getDate() - 1);\n  if (lastUpdatedDate > yesterday) {\n    return lang('Time.YesterdayAt', formatTime(lang, lastUpdatedDate));\n  }\n\n  return lang('Time.AtDate', formatFullDate(lang, lastUpdatedDate));\n}\n\nexport function formatPastDatetime(lang: LangFn, pastTime: number, currentTime = getServerTime()) {\n  const seconds = currentTime - pastTime;\n  const minutes = getMinutes(seconds);\n  const hours = getHours(seconds);\n  const days = getDays(seconds);\n\n  if (seconds < 60) {\n    return lang('JustNowAgo');\n  }\n\n  if (minutes < 60) {\n    return lang('MinutesAgo', { count: minutes }, { pluralValue: minutes });\n  }\n\n  if (hours < 24) {\n    return lang('HoursAgo', { count: hours }, { pluralValue: hours });\n  }\n\n  if (days < 28) {\n    return lang('DaysAgo', { count: days }, { pluralValue: days });\n  }\n\n  return lang('AtDateAgo', { date: formatFullDate(lang, pastTime) });\n}\n\ntype DurationType = 'Seconds' | 'Minutes' | 'Hours' | 'Days' | 'Weeks';\n\nexport function formatTimeDuration(lang: OldLangFn, duration: number, showLast = 2) {\n  if (!duration) {\n    return undefined;\n  }\n\n  const durationRecords: { duration: number; type: DurationType }[] = [];\n  const labels = [\n    { multiplier: 1, type: 'Seconds' },\n    { multiplier: 60, type: 'Minutes' },\n    { multiplier: 60, type: 'Hours' },\n    { multiplier: 24, type: 'Days' },\n    { multiplier: 7, type: 'Weeks' },\n  ] as Array<{ multiplier: number; type: DurationType }>;\n  let t = 1;\n  labels.forEach((label, idx) => {\n    t *= label.multiplier;\n\n    if (duration < t) {\n      return;\n    }\n\n    const modulus = labels[idx === (labels.length - 1) ? idx : idx + 1].multiplier;\n    durationRecords.push({\n      duration: Math.floor((duration / t) % modulus),\n      type: label.type,\n    });\n  });\n\n  const out = durationRecords.slice(-showLast).reverse();\n  for (let i = out.length - 1; i >= 0; --i) {\n    if (out[i].duration === 0) {\n      out.splice(i, 1);\n    }\n  }\n\n  // TODO In arabic we don't use \",\" as delimiter rather we use \"and\" each time\n  return out.map((part) => lang(part.type, part.duration, 'i')).join(', ');\n}\n\nexport function formatScheduledDateTime(\n  scheduleDateTimestamp: number,\n  lang: LangFn,\n  oldLang: OldLangFn,\n): string {\n  const scheduleDate = new Date(scheduleDateTimestamp * 1000);\n\n  return lang('FormatDateAtTime', {\n    date: isToday(scheduleDate)\n      ? lang('WeekdayToday')\n      : formatHumanDate(oldLang, scheduleDateTimestamp * 1000, true, false, true),\n    time: formatTime(oldLang, scheduleDateTimestamp * 1000),\n  });\n}\n\nexport function formatHumanDate(\n  lang: OldLangFn,\n  datetime: number | Date,\n  isShort = false,\n  noWeekdays = false,\n  isUpperFirst?: boolean,\n) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n\n  const today = getDayStart(new Date());\n\n  if (!noWeekdays) {\n    if (toIsoString(date) === toIsoString(today)) {\n      return (isUpperFirst || !isShort ? upperFirst : lowerFirst)(lang('Weekday.Today'));\n    }\n\n    const yesterday = new Date(today);\n    yesterday.setDate(today.getDate() - 1);\n    if (toIsoString(date) === toIsoString(yesterday)) {\n      return (isUpperFirst || !isShort ? upperFirst : lowerFirst)(lang('Weekday.Yesterday'));\n    }\n\n    const limitBefore = new Date(today);\n    limitBefore.setDate(today.getDate() - 6); // Avoid returning same weekday as today\n    const limitAhead = new Date(today);\n    limitAhead.setDate(today.getDate() + 6);\n\n    if (date >= limitBefore && date <= limitAhead) {\n      const weekDayString = formatWeekday(lang, date.getDay(), isShort);\n      return (isUpperFirst || !isShort ? upperFirst : lowerFirst)(weekDayString);\n    }\n  }\n\n  const noYear = date.getFullYear() === today.getFullYear();\n  const formattedDate = formatDateToString(date, lang.code, noYear, isShort ? 'short' : 'long');\n\n  return (isUpperFirst || !isShort ? upperFirst : lowerFirst)(formattedDate);\n}\n\n/**\n * Returns weekday name\n * @param day 0 - Sunday, 1 - Monday, ...\n */\nexport function formatWeekday(lang: OldLangFn, day: number, isShort = false) {\n  const weekDay = WEEKDAYS_FULL[day];\n  return isShort ? lang(`Weekday.Short${weekDay}`) : lang(`Weekday.${weekDay}`);\n}\n\nexport function formatMediaDateTime(\n  lang: OldLangFn,\n  datetime: number | Date,\n  isUpperFirst?: boolean,\n) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n\n  return `${formatHumanDate(lang, date, true, undefined, isUpperFirst)}, ${formatTime(lang, date)}`;\n}\n\nexport function formatMediaDuration(duration: number, maxValue?: number) {\n  const hours = Math.floor(duration / 3600);\n  const minutes = Math.floor((duration % 3600) / 60);\n  const seconds = Math.floor(duration % 3600 % 60);\n\n  const maxHours = maxValue ? Math.floor(maxValue / 3600) : 0;\n  const maxMinutes = maxValue ? Math.floor((maxValue % 3600) / 60) : 0;\n  let string = '';\n  if (hours > 0 || maxHours > 0) {\n    string += `${String(hours).padStart(2, '0')}:`;\n    string += `${String(minutes).padStart(2, '0')}:`;\n  } else if (maxMinutes >= 10) {\n    string += `${String(minutes).padStart(2, '0')}:`;\n  } else {\n    string += `${String(minutes)}:`;\n  }\n  string += String(seconds).padStart(2, '0');\n\n  return string;\n}\n\nexport function formatVoiceRecordDuration(durationInMs: number) {\n  const parts = [];\n\n  let milliseconds = durationInMs % 1000;\n  durationInMs -= milliseconds;\n  milliseconds = Math.floor(milliseconds / 10);\n\n  durationInMs = Math.floor(durationInMs / 1000);\n  const seconds = durationInMs % 60;\n  durationInMs -= seconds;\n\n  durationInMs = Math.floor(durationInMs / 60);\n  const minutes = durationInMs % 60;\n  durationInMs -= minutes;\n\n  durationInMs = Math.floor(durationInMs / 60);\n  const hours = durationInMs % 60;\n\n  if (hours > 0) {\n    parts.push(String(hours).padStart(2, '0'));\n  }\n  parts.push(String(minutes).padStart(hours > 0 ? 2 : 1, '0'));\n  parts.push(String(seconds).padStart(2, '0'));\n\n  return `${parts.join(':')},${String(milliseconds).padStart(2, '0')}`;\n}\n\nconst formatDayToStringWithCache = withCache((\n  dayStartAt: number,\n  locale: string,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' = 'short',\n  noDay?: boolean,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    locale,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat,\n      day: noDay ? undefined : 'numeric',\n    },\n  );\n});\n\nexport function formatDateToString(\n  datetime: Date | number,\n  locale = 'en-US',\n  noYear = false,\n  monthFormat: 'short' | 'long' | 'numeric' = 'short',\n  noDay = false,\n) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n  const dayStartAt = getDayStartAt(date);\n\n  return formatDayToStringWithCache(dayStartAt, locale, noYear, monthFormat, noDay);\n}\n\nexport function formatDateTimeToString(\n  datetime: Date | number, locale = 'en-US', noSeconds?: boolean,\n  timeFormat?: TimeFormat,\n) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n  return date.toLocaleString(\n    locale,\n    {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric',\n      second: noSeconds ? undefined : 'numeric',\n      hourCycle: timeFormat === '12h' ? 'h12' : 'h23',\n    },\n  );\n}\n\nexport function formatDateAtTime(\n  lang: OldLangFn,\n  datetime: number | Date,\n) {\n  const date = typeof datetime === 'number' ? new Date(datetime) : datetime;\n\n  const today = getDayStart(new Date());\n  const time = formatTime(lang, date);\n\n  if (toIsoString(date) === toIsoString(today)) {\n    return lang('Time.TodayAt', time);\n  }\n\n  const yesterday = new Date(today);\n  yesterday.setDate(today.getDate() - 1);\n  if (toIsoString(date) === toIsoString(yesterday)) {\n    return lang('Time.YesterdayAt', time);\n  }\n\n  const noYear = date.getFullYear() === today.getFullYear();\n  const formattedDate = formatDateToString(date, lang.code, noYear);\n\n  return lang('formatDateAtTime', [formattedDate, time]);\n}\n\nexport function formatShortDuration(lang: LangFn, duration: number, hoursPriority?: boolean) {\n  if (duration < 0) {\n    return lang('RightNow');\n  }\n\n  if (duration < 60) {\n    const count = Math.ceil(duration);\n    return lang('Seconds', { count }, { pluralValue: duration });\n  }\n\n  if (duration < 60 * 60) {\n    const count = Math.ceil(duration / 60);\n    return lang('Minutes', { count }, { pluralValue: count });\n  }\n\n  if (duration < 60 * 60 * 24 || (hoursPriority && duration <= 60 * 60 * 24 * 2)) {\n    const count = Math.ceil(duration / (60 * 60));\n    return lang('Hours', { count }, { pluralValue: count });\n  }\n\n  const count = Math.ceil(duration / (60 * 60 * 24));\n  return lang('Days', { count }, { pluralValue: count });\n}\n\nfunction isValidDate(day: number, month: number, year = 2021): boolean {\n  if (month > (MAX_MONTH_IN_YEAR - 1) || day > MAX_DAY_IN_MONTH) {\n    return false;\n  }\n  const date = new Date(year, month, day);\n  return !Number.isNaN(date.getTime()) && date.getDate() === day;\n}\n\nexport function parseDateString(query = ''): string | undefined {\n  const matchStringDate = query.match(/\\d{1,2}\\s[a-zA-Z]{3,}/);\n  const matchEuropeStringDate = query.match(/[a-zA-Z]{3,}\\s\\d{1,2}/);\n  const matchNumberDate = query.match(/\\d{1,2}[./-]\\d{1,2}([./-]\\d{2,4})?/);\n  if (!matchStringDate && !matchNumberDate && !matchEuropeStringDate) {\n    return undefined;\n  }\n\n  if (matchNumberDate) {\n    const [date, month, year] = query.split(/[./-]/).map(Number);\n    return !(year && year < MIN_SEARCH_YEAR) && isValidDate(date, month - 1, year || undefined)\n      ? `${year ? `${year}-` : ''}${String(month).padStart(2, '0')}-${String(date).padStart(2, '0')}`\n      : undefined;\n  }\n\n  const dateParts = query.split(' ');\n  const date = matchStringDate ? dateParts[0] : dateParts[1];\n  const month = (matchStringDate ? dateParts[1] : dateParts[0]).toLowerCase();\n  const monthIndex = MONTHS_FULL_LOWERCASE.findIndex((item) => item.startsWith(month));\n\n  return monthIndex !== -1 && isValidDate(Number(date), monthIndex)\n    ? `${String(monthIndex + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`\n    : undefined;\n}\n\nexport function timestampPlusDay(timestamp: number) {\n  return timestamp + MILLISECONDS_IN_DAY / 1000;\n}\n\nfunction lowerFirst(str: string) {\n  return `${str[0].toLowerCase()}${str.slice(1)}`;\n}\n\nfunction upperFirst(str: string) {\n  return `${str[0].toUpperCase()}${str.slice(1)}`;\n}\n\nexport function formatRegistrationMonth(lang: string, dateString: string) {\n  const [month, year] = dateString.split('.');\n  const date = new Date(`${year}-${month}`);\n\n  return new Intl.DateTimeFormat(lang, { month: 'long', year: 'numeric' }).format(date);\n}\n","import {\n  type ApiFormattedText,\n  type ApiMessageEntityTimestamp,\n  ApiMessageEntityTypes,\n} from '../../api/types';\n\nimport { getSeconds } from './units';\n\nconst TIMESTAMP_RE = /\\b(?:(\\d{1,2}):)?([0-5]?\\d):([0-5]\\d)\\b/g;\n\nexport function addTimestampEntities(apiText: ApiFormattedText): ApiFormattedText {\n  const resultText: Required<ApiFormattedText> = {\n    text: apiText.text,\n    entities: apiText.entities?.filter((e) => e.type !== ApiMessageEntityTypes.Timestamp) || [],\n  };\n\n  const text = resultText.text;\n\n  for (const match of text.matchAll(TIMESTAMP_RE)) {\n    const fullMatch = match[0];\n    const hourStr = match[1];\n    const minuteStr = match[2];\n    const secondStr = match[3];\n    const offset = match.index ?? 0;\n    const length = fullMatch.length;\n\n    const minutes = parseInt(minuteStr, 10);\n    const seconds = parseInt(secondStr, 10);\n\n    if (minutes > 59 || seconds > 59) {\n      continue;\n    }\n\n    let totalSeconds: number;\n    if (hourStr !== undefined) {\n      const hours = parseInt(hourStr, 10);\n      totalSeconds = getSeconds(hours, minutes, seconds);\n    } else {\n      totalSeconds = getSeconds(0, minutes, seconds);\n    }\n\n    let overlaps = false;\n    for (const entity of resultText.entities) {\n      if (offset < entity.offset + entity.length && offset + length > entity.offset) {\n        overlaps = true;\n        break;\n      }\n    }\n    if (overlaps) {\n      continue;\n    }\n\n    const newEntity: ApiMessageEntityTimestamp = {\n      type: ApiMessageEntityTypes.Timestamp,\n      offset,\n      length,\n      timestamp: totalSeconds,\n    };\n\n    let inserted = false;\n    for (let i = 0; i < resultText.entities.length; i++) {\n      if (offset < resultText.entities[i].offset) {\n        resultText.entities.splice(i, 0, newEntity);\n        inserted = true;\n        break;\n      }\n    }\n    if (!inserted) {\n      resultText.entities.push(newEntity);\n    }\n  }\n\n  return resultText;\n}\n\nexport function parseTimestampDuration(input: string): number | undefined {\n  input = input.trim();\n\n  if (!input.startsWith('-') && Number.isInteger(Number(input))) {\n    return parseInt(input, 10);\n  }\n\n  if (input.includes(':')) {\n    const parts = input.split(':');\n\n    if (parts.length === 2) {\n      const minutes = parseInt(parts[0], 10);\n      const seconds = parseInt(parts[1], 10);\n\n      if (\n        Number.isNaN(minutes) || Number.isNaN(seconds)\n        || minutes < 0 || seconds < 0 || seconds >= 60\n      ) {\n        return undefined;\n      }\n      return minutes * 60 + seconds;\n    }\n\n    if (parts.length === 3) {\n      const hours = parseInt(parts[0], 10);\n      const minutes = parseInt(parts[1], 10);\n      const seconds = parseInt(parts[2], 10);\n\n      if (\n        Number.isNaN(hours) || Number.isNaN(minutes) || Number.isNaN(seconds)\n        || hours < 0 || minutes < 0 || seconds < 0 || minutes >= 60 || seconds >= 60\n      ) {\n        return undefined;\n      }\n      return hours * 3600 + minutes * 60 + seconds;\n    }\n\n    return undefined;\n  }\n\n  const regex = /^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s)?$/i;\n  const match = input.match(regex);\n  if (!match) {\n    return undefined;\n  }\n\n  const hours = match[1] ? parseInt(match[1], 10) : 0;\n  const minutes = match[2] ? parseInt(match[2], 10) : 0;\n  const seconds = match[3] ? parseInt(match[3], 10) : 0;\n\n  if (\n    Number.isNaN(hours) || Number.isNaN(minutes) || Number.isNaN(seconds)\n    || minutes >= 60 || seconds >= 60\n  ) {\n    return undefined;\n  }\n  return hours * 3600 + minutes * 60 + seconds;\n}\n","/// In seconds\nexport const MINUTE = 60;\nexport const HOUR = 3600;\nexport const DAY = 86400;\n\nexport function getMinutes(seconds: number, roundDown?: boolean) {\n  const roundFunc = roundDown ? Math.floor : Math.ceil;\n  return roundFunc(seconds / MINUTE);\n}\n\nexport function getHours(seconds: number, roundDown?: boolean) {\n  const roundFunc = roundDown ? Math.floor : Math.ceil;\n  return roundFunc(seconds / HOUR);\n}\n\nexport function getDays(seconds: number, roundDown?: boolean) {\n  const roundFunc = roundDown ? Math.floor : Math.ceil;\n  return roundFunc(seconds / DAY);\n}\n\nexport function getSeconds(hours: number, minutes: number, seconds: number) {\n  return hours * HOUR + minutes * MINUTE + seconds;\n}\n","/* eslint-disable no-console */\n\nexport const DEBUG_LEVELS = ['log', 'error', 'warn', 'info', 'debug'] as const;\nexport type DebugLevel = typeof DEBUG_LEVELS[number];\n// @ts-ignore\nconst ORIGINAL_FUNCTIONS: Record<DebugLevel, (...args: any[]) => void> = DEBUG_LEVELS.reduce((acc, level) => {\n  // @ts-ignore\n  acc[level] = console[level];\n  return acc;\n}, {});\n\ntype DebugEntry = {\n  level: DebugLevel;\n  args: any[];\n  date: Date;\n};\nlet DEBUG_LOGS: DebugEntry[] = [];\n\nexport function logDebugMessage(level: DebugLevel, ...args: any[]) {\n  DEBUG_LOGS.push({\n    level,\n    args,\n    date: new Date(),\n  });\n  ORIGINAL_FUNCTIONS[level](...args);\n}\n\nexport function initDebugConsole() {\n  DEBUG_LOGS = [];\n  DEBUG_LEVELS.forEach((level) => {\n    // @ts-ignore\n    console[level] = (...args: any[]) => {\n      logDebugMessage(level, ...args);\n    };\n  });\n}\n\nexport function disableDebugConsole() {\n  DEBUG_LEVELS.forEach((level) => {\n    // @ts-ignore\n    console[level] = ORIGINAL_FUNCTIONS[level];\n  });\n  DEBUG_LOGS = [];\n}\n\nexport function getDebugLogs() {\n  return JSON.stringify(DEBUG_LOGS, (key, value) => (typeof value === 'bigint'\n    ? value.toString()\n    : value));\n}\n","import { throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '🔄';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\ntype NestedDiff<T> = T extends object\n  ? { [K in keyof T]?: NestedDiff<T[K]> | typeof DELETE_ALL_CHILDREN | typeof DELETE | null } : T;\n\nexport type DiffObject<T> = T extends object\n  ? { [K in keyof T]?: NestedDiff<T[K]> } | typeof DELETE_ALL_CHILDREN\n  : T;\n\nexport function deepDiff<T>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import type { ThreadId } from '../types';\n\nimport { RE_TG_LINK, RE_TME_LINK } from '../config';\nimport { IS_BAD_URL_PARSER } from './browser/globalEnvironment';\nimport { ensureProtocol } from './browser/url';\nimport { parseTimestampDuration } from './dates/timestamp';\nimport { toChannelId } from './entities/ids';\nimport { isUsernameValid } from './entities/username';\n\nexport type DeepLinkMethod = 'resolve' | 'login' | 'passport' | 'settings' | 'join' | 'addstickers' | 'addemoji' |\n  'setlanguage' | 'addtheme' | 'confirmphone' | 'socks' | 'proxy' | 'privatepost' | 'bg' | 'share' | 'msg' | 'msg_url' |\n  'invoice' | 'addlist' | 'boost' | 'giftcode' | 'message' | 'premium_offer' | 'premium_multigift' | 'stars_topup'\n  | 'nft' | 'stars' | 'ton';\n\ninterface PublicMessageLink {\n  type: 'publicMessageLink';\n  username: string;\n  messageId: number;\n  isSingle: boolean;\n  threadId?: ThreadId;\n  commentId?: number;\n  timestamp?: number;\n}\n\nexport interface PrivateMessageLink {\n  type: 'privateMessageLink';\n  channelId: string;\n  messageId: number;\n  isSingle: boolean;\n  threadId?: ThreadId;\n  commentId?: number;\n  timestamp?: number;\n}\n\ninterface ShareLink {\n  type: 'shareLink';\n  url: string;\n  text?: string;\n}\n\ninterface ChatFolderLink {\n  type: 'chatFolderLink';\n  slug: string;\n}\n\ninterface LoginCodeLink {\n  type: 'loginCodeLink';\n  code: string;\n}\n\ninterface TelegramPassportLink {\n  type: 'telegramPassportLink';\n  botId: number;\n  scope: string;\n  publicKey: string;\n  nonce: string;\n  callbackUrl?: string;\n  payload?: string;\n}\n\ninterface PublicUsernameOrBotLink {\n  type: 'publicUsernameOrBotLink';\n  username: string;\n  start?: string;\n  ref?: string;\n  startApp?: string;\n  mode?: string;\n  appName?: string;\n  startAttach?: string;\n  attach?: string;\n  text?: string;\n  choose?: string;\n}\n\ninterface PrivateChannelLink {\n  type: 'privateChannelLink';\n  channelId: string;\n}\n\ninterface ChatBoostLink {\n  type: 'chatBoostLink';\n  username?: string;\n  id?: string;\n}\n\ninterface BusinessChatLink {\n  type: 'businessChatLink';\n  slug: string;\n}\n\ninterface PremiumReferrerLink {\n  type: 'premiumReferrerLink';\n  referrer: string;\n}\n\ninterface PremiumMultigiftLink {\n  type: 'premiumMultigiftLink';\n  referrer: string;\n}\n\ninterface GiftUniqueLink {\n  type: 'giftUniqueLink';\n  slug: string;\n}\n\ninterface StarsModalLink {\n  type: 'stars';\n}\n\ninterface TonModalLink {\n  type: 'ton';\n}\n\ninterface SettingsScreenLink {\n  type: 'settings';\n  screen?: 'devices' | 'folders' | 'language' | 'privacy' | 'editProfile' | 'theme';\n}\n\ntype DeepLink =\n  TelegramPassportLink |\n  LoginCodeLink |\n  PublicMessageLink |\n  PrivateMessageLink |\n  ShareLink |\n  ChatFolderLink |\n  PublicUsernameOrBotLink |\n  PrivateChannelLink |\n  BusinessChatLink |\n  PremiumReferrerLink |\n  PremiumMultigiftLink |\n  ChatBoostLink |\n  GiftUniqueLink |\n  StarsModalLink |\n  TonModalLink |\n  SettingsScreenLink;\n\ntype BuilderParams<T extends DeepLink> = Record<keyof Omit<T, 'type'>, string | undefined>;\ntype BuilderReturnType<T extends DeepLink> = T | undefined;\ntype DeepLinkType = DeepLink['type'] | 'unknown';\n\ntype PrivateMessageLinkBuilderParams = Omit<BuilderParams<PrivateMessageLink>, 'isSingle'> & {\n  single?: string;\n};\n\ntype PublicMessageLinkBuilderParams = Omit<BuilderParams<PublicMessageLink>, 'isSingle'> & {\n  single?: string;\n};\n\nconst ELIGIBLE_HOSTNAMES = new Set(['t.me', 'telegram.me', 'telegram.dog']);\n\nexport function isDeepLink(link: string): boolean {\n  return Boolean(link.match(RE_TME_LINK) || link.match(RE_TG_LINK));\n}\n\nexport function tryParseDeepLink(link: string): DeepLink | undefined {\n  if (!isDeepLink(link)) {\n    return undefined;\n  }\n  try {\n    return parseDeepLink(link);\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function getUsernameFromDeepLink(url: string) {\n  const deepLink = tryParseDeepLink(url);\n  if (deepLink?.type === 'publicUsernameOrBotLink') {\n    return deepLink.username;\n  }\n  return undefined;\n}\n\nfunction parseDeepLink(url: string) {\n  const correctUrl = ensureProtocol(url);\n  if (!correctUrl) {\n    return undefined;\n  }\n  if (correctUrl.startsWith('https:') || correctUrl.startsWith('http:')) {\n    const urlParsed = new URL(correctUrl);\n    return parseHttpLink(urlParsed);\n  }\n  if (correctUrl.startsWith('tg:')) {\n    const urlToParse = IS_BAD_URL_PARSER ? correctUrl.replace(/^tg:\\/\\//, 'https://') : correctUrl;\n    const urlParsed = new URL(urlToParse);\n    return parseTgLink(urlParsed);\n  }\n  return undefined;\n}\n\nfunction parseTgLink(url: URL) {\n  const { hostname } = url;\n  const queryParams = getQueryParams(url);\n  const pathParams = getPathParams(url);\n  const method = hostname as DeepLinkMethod;\n\n  const deepLinkType = getTgDeepLinkType(queryParams, pathParams, method);\n  switch (deepLinkType) {\n    case 'publicMessageLink': {\n      const {\n        domain, post, single, thread, comment, t,\n      } = queryParams;\n      return buildPublicMessageLink({\n        username: domain,\n        messageId: post,\n        single,\n        threadId: thread,\n        commentId: comment,\n        timestamp: t,\n      });\n    }\n    case 'privateMessageLink': {\n      const {\n        channel, post, single, thread, comment, t,\n      } = queryParams;\n      return buildPrivateMessageLink({\n        channelId: channel,\n        messageId: post,\n        single,\n        threadId: thread,\n        commentId: comment,\n        timestamp: t,\n      });\n    }\n    case 'shareLink':\n      return buildShareLink({ text: queryParams.text, url: queryParams.url });\n    case 'chatFolderLink':\n      return buildChatFolderLink({ slug: queryParams.slug });\n    case 'loginCodeLink':\n      return buildLoginCodeLink({ code: queryParams.code });\n    case 'telegramPassportLink':\n      return buildTelegramPassportLink({\n        botId: queryParams.bot_id,\n        scope: queryParams.scope,\n        publicKey: queryParams.public_key,\n        nonce: queryParams.nonce,\n        callbackUrl: queryParams.callback_url,\n        payload: queryParams.payload,\n      });\n    case 'publicUsernameOrBotLink':\n      return buildPublicUsernameOrBotLink({\n        username: queryParams.domain,\n        start: queryParams.start,\n        text: queryParams.text,\n        appName: queryParams.appname,\n        startApp: queryParams.startapp,\n        mode: queryParams.mode,\n        startAttach: queryParams.startattach,\n        attach: queryParams.attach,\n        choose: queryParams.choose,\n        ref: queryParams.ref,\n      });\n    case 'privateChannelLink': {\n      return buildPrivateChannelLink({ channelId: queryParams.channel });\n    }\n    case 'businessChatLink':\n      return buildBusinessChatLink({ slug: queryParams.slug });\n    case 'premiumReferrerLink':\n      return buildPremiumReferrerLink({ referrer: queryParams.ref });\n    case 'premiumMultigiftLink':\n      return buildPremiumMultigiftLink({ referrer: queryParams.ref });\n    case 'chatBoostLink':\n      return buildChatBoostLink({ username: queryParams.domain, id: queryParams.channel });\n    case 'giftUniqueLink':\n      return buildGiftUniqueLink({ slug: queryParams.slug });\n    case 'stars':\n      return { type: 'stars' } satisfies StarsModalLink;\n    case 'ton':\n      return { type: 'ton' } satisfies TonModalLink;\n    case 'settings':\n      return buildSettingsScreenLink({ screen: pathParams.length === 1 ? pathParams[0] : undefined });\n    default:\n      break;\n  }\n  return undefined;\n}\n\nfunction parseHttpLink(url: URL) {\n  if (!ELIGIBLE_HOSTNAMES.has(url.hostname)) {\n    return undefined;\n  }\n  const queryParams = getQueryParams(url);\n  const pathParams = getPathParams(url);\n\n  const deepLinkType = getHttpDeepLinkType(queryParams, pathParams);\n  switch (deepLinkType) {\n    case 'publicMessageLink': {\n      const {\n        single, comment, t,\n      } = queryParams;\n      const {\n        username,\n        thread,\n        messageId,\n      } = pathParams.length === 2 ? {\n        username: pathParams[0],\n        thread: queryParams.thread,\n        messageId: pathParams[1],\n      } : {\n        username: pathParams[0],\n        thread: pathParams[1],\n        messageId: pathParams[2],\n      };\n      return buildPublicMessageLink({\n        username,\n        messageId,\n        single,\n        threadId: thread,\n        commentId: comment,\n        timestamp: t,\n      });\n    }\n    case 'privateMessageLink': {\n      const {\n        single, comment, t,\n      } = queryParams;\n      const {\n        channelId,\n        thread,\n        messageId,\n      } = pathParams.length === 3 ? {\n        channelId: pathParams[1],\n        thread: queryParams.thread,\n        messageId: pathParams[2],\n      } : {\n        channelId: pathParams[1],\n        thread: pathParams[2],\n        messageId: pathParams[3],\n      };\n      return buildPrivateMessageLink({\n        channelId,\n        messageId,\n        single,\n        threadId: thread,\n        commentId: comment,\n        timestamp: t,\n      });\n    }\n    case 'shareLink': {\n      return buildShareLink({ text: queryParams.text, url: queryParams.url });\n    }\n    case 'chatFolderLink':\n      return buildChatFolderLink({ slug: pathParams[1] });\n    case 'loginCodeLink':\n      return buildLoginCodeLink({ code: pathParams[1] });\n    case 'publicUsernameOrBotLink':\n      return buildPublicUsernameOrBotLink({\n        username: pathParams[0],\n        start: queryParams.start,\n        text: queryParams.text,\n        startApp: queryParams.startapp,\n        mode: queryParams.mode,\n        appName: undefined,\n        startAttach: queryParams.startattach,\n        attach: queryParams.attach,\n        choose: queryParams.choose,\n        ref: queryParams.ref,\n      });\n    case 'privateChannelLink': {\n      return buildPrivateChannelLink({ channelId: pathParams[1] });\n    }\n    case 'businessChatLink':\n      return buildBusinessChatLink({ slug: pathParams[1] });\n    case 'chatBoostLink': {\n      if (pathParams[0] === 'boost') {\n        return buildChatBoostLink({ username: pathParams[1], id: queryParams.c });\n      }\n      const isPrivateChannel = pathParams[0] === 'c';\n      return buildChatBoostLink({\n        username: !isPrivateChannel ? pathParams[0] : undefined,\n        id: isPrivateChannel ? pathParams[1] : undefined,\n      });\n    }\n    case 'giftUniqueLink': {\n      const slug = pathParams.slice(1).join('/');\n      return buildGiftUniqueLink({\n        slug,\n      });\n    }\n    default:\n      break;\n  }\n  return undefined;\n}\n\nfunction getHttpDeepLinkType(\n  queryParams: Record<string, string>,\n  pathParams: string[],\n): DeepLinkType {\n  const len = pathParams.length;\n  const method = pathParams[0];\n  if (len === 1) {\n    if (method === 'share') return 'shareLink';\n    if (method === 'boost' || queryParams.boost !== undefined) return 'chatBoostLink';\n\n    if (isUsernameValid(method)) {\n      return 'publicUsernameOrBotLink';\n    }\n  } else if (len === 2) {\n    if (method === 'addlist') return 'chatFolderLink';\n    if (method === 'login') return 'loginCodeLink';\n    if (method === 'm') return 'businessChatLink';\n    if (method === 'boost') return 'chatBoostLink';\n    if (method === 'nft') return 'giftUniqueLink';\n    if (method === 'c') {\n      if (queryParams.boost !== undefined) return 'chatBoostLink';\n      return 'privateChannelLink';\n    }\n\n    if (isUsernameValid(pathParams[0]) && isNumber(pathParams[1])) {\n      return 'publicMessageLink';\n    }\n  } else if (len === 3) {\n    if (method === 'c' && pathParams.slice(1).every(isNumber)) {\n      return 'privateMessageLink';\n    }\n    if (isUsernameValid(pathParams[0]) && pathParams.slice(1).every(isNumber)) {\n      return 'publicMessageLink';\n    }\n    if (method === 'nft') return 'giftUniqueLink';\n  } else if (len === 4) {\n    if (method === 'c' && pathParams.slice(1).every(isNumber)) {\n      return 'privateMessageLink';\n    }\n  }\n  return 'unknown';\n}\n\nfunction getTgDeepLinkType(\n  queryParams: Record<string, string>,\n  pathParams: string[],\n  method: DeepLinkMethod,\n): DeepLinkType {\n  switch (method) {\n    case 'resolve': {\n      const {\n\n        domain, post, bot_id, scope, public_key, nonce,\n      } = queryParams;\n      if (domain === 'telegrampassport' && bot_id && scope && public_key && nonce) {\n        return 'telegramPassportLink';\n      }\n      if (domain && post) {\n        return 'publicMessageLink';\n      }\n      if (isUsernameValid(domain)) {\n        return 'publicUsernameOrBotLink';\n      }\n      break;\n    }\n    case 'privatepost': {\n      const { channel, post } = queryParams;\n      if (channel) {\n        if (post) return 'privateMessageLink';\n        return 'privateChannelLink';\n      }\n      break;\n    }\n    case 'msg_url':\n      return 'shareLink';\n    case 'addlist':\n      return 'chatFolderLink';\n    case 'login':\n      return 'loginCodeLink';\n    case 'passport':\n      return 'telegramPassportLink';\n    case 'message':\n      return 'businessChatLink';\n    case 'premium_offer':\n      return 'premiumReferrerLink';\n    case 'premium_multigift':\n      return 'premiumMultigiftLink';\n    case 'boost':\n      return 'chatBoostLink';\n    case 'nft':\n      return 'giftUniqueLink';\n    case 'stars':\n      return 'stars';\n    case 'ton':\n      return 'ton';\n    case 'settings': {\n      return 'settings';\n    }\n    default:\n      break;\n  }\n  return 'unknown';\n}\n\nfunction buildShareLink(params: BuilderParams<ShareLink>): BuilderReturnType<ShareLink> {\n  const { url, text } = params;\n  if (!url) {\n    return undefined;\n  }\n  return {\n    type: 'shareLink',\n    url,\n    text,\n  };\n}\n\nfunction buildPublicMessageLink(params: PublicMessageLinkBuilderParams): BuilderReturnType<PublicMessageLink> {\n  const {\n    messageId, threadId, commentId, username, single, timestamp,\n  } = params;\n  if (!username || !isUsernameValid(username)) {\n    return undefined;\n  }\n  if (!messageId || !isNumber(messageId)) {\n    return undefined;\n  }\n  if (threadId && !isNumber(threadId)) {\n    return undefined;\n  }\n  if (commentId && !isNumber(commentId)) {\n    return undefined;\n  }\n  return {\n    type: 'publicMessageLink',\n    username,\n    messageId: Number(messageId),\n    isSingle: single === '',\n    threadId: threadId ? Number(threadId) : undefined,\n    commentId: commentId ? Number(commentId) : undefined,\n    timestamp: timestamp ? parseTimestampDuration(timestamp) : undefined,\n  };\n}\n\nfunction buildPrivateMessageLink(params: PrivateMessageLinkBuilderParams): BuilderReturnType<PrivateMessageLink> {\n  const {\n    messageId, threadId, commentId, channelId, single, timestamp,\n  } = params;\n  if (!channelId || !isNumber(channelId)) {\n    return undefined;\n  }\n  if (!messageId || !isNumber(messageId)) {\n    return undefined;\n  }\n  if (threadId && !isNumber(threadId)) {\n    return undefined;\n  }\n  if (commentId && !isNumber(commentId)) {\n    return undefined;\n  }\n  return {\n    type: 'privateMessageLink',\n    channelId: toChannelId(channelId),\n    messageId: Number(messageId),\n    isSingle: single === '',\n    threadId: threadId ? Number(threadId) : undefined,\n    commentId: commentId ? Number(commentId) : undefined,\n    timestamp: timestamp ? parseTimestampDuration(timestamp) : undefined,\n  };\n}\n\nfunction buildChatFolderLink(params: BuilderParams<ChatFolderLink>): BuilderReturnType<ChatFolderLink> {\n  const {\n    slug,\n  } = params;\n  if (!slug) {\n    return undefined;\n  }\n  return {\n    type: 'chatFolderLink',\n    slug,\n  };\n}\n\nfunction buildLoginCodeLink(params: BuilderParams<LoginCodeLink>): BuilderReturnType<LoginCodeLink> {\n  const {\n    code,\n  } = params;\n  if (!code) {\n    return undefined;\n  }\n  return {\n    type: 'loginCodeLink',\n    code,\n  };\n}\n\nfunction buildTelegramPassportLink(\n  params: BuilderParams<TelegramPassportLink>,\n): BuilderReturnType<TelegramPassportLink> {\n  const {\n    botId,\n    scope,\n    publicKey,\n    nonce,\n    callbackUrl,\n    payload,\n  } = params;\n  if (!botId || !isNumber(botId) || !scope || !publicKey || !nonce) {\n    return undefined;\n  }\n  return {\n    type: 'telegramPassportLink',\n    botId: Number(botId),\n    scope,\n    publicKey,\n    nonce,\n    callbackUrl,\n    payload,\n  };\n}\n\nfunction buildPublicUsernameOrBotLink(\n  params: BuilderParams<PublicUsernameOrBotLink>,\n): BuilderReturnType<PublicUsernameOrBotLink> {\n  const {\n    username,\n    start,\n    text,\n    startApp,\n    mode,\n    startAttach,\n    attach,\n    appName,\n    choose,\n    ref,\n  } = params;\n  if (!username) {\n    return undefined;\n  }\n  if (!isUsernameValid(username)) {\n    return undefined;\n  }\n  return {\n    type: 'publicUsernameOrBotLink',\n    username,\n    start,\n    startApp,\n    mode,\n    appName,\n    startAttach,\n    attach,\n    text,\n    choose,\n    ref,\n  };\n}\n\nfunction buildPrivateChannelLink(params: BuilderParams<PrivateChannelLink>): BuilderReturnType<PrivateChannelLink> {\n  const {\n    channelId,\n  } = params;\n  if (!channelId) {\n    return undefined;\n  }\n\n  return {\n    type: 'privateChannelLink',\n    channelId: toChannelId(channelId),\n  };\n}\n\nexport function buildChatBoostLink(params: BuilderParams<ChatBoostLink>): BuilderReturnType<ChatBoostLink> {\n  const {\n    username,\n    id,\n  } = params;\n\n  if (!username && !id) {\n    return undefined;\n  }\n\n  return {\n    type: 'chatBoostLink',\n    username,\n    id: id ? toChannelId(id) : undefined,\n  };\n}\n\nfunction buildBusinessChatLink(params: BuilderParams<BusinessChatLink>): BuilderReturnType<BusinessChatLink> {\n  const {\n    slug,\n  } = params;\n\n  if (!slug) {\n    return undefined;\n  }\n\n  return {\n    type: 'businessChatLink',\n    slug,\n  };\n}\n\nfunction buildGiftUniqueLink(params: BuilderParams<GiftUniqueLink>): BuilderReturnType<GiftUniqueLink> {\n  const {\n    slug,\n  } = params;\n\n  if (!slug) {\n    return undefined;\n  }\n\n  return {\n    type: 'giftUniqueLink',\n    slug,\n  };\n}\n\nfunction buildSettingsScreen(screenParam: string) {\n  switch (screenParam) {\n    case 'devices':\n      return 'devices';\n    case 'folders':\n      return 'folders';\n    case 'language':\n      return 'language';\n    case 'privacy':\n      return 'privacy';\n    case 'edit_profile':\n      return 'editProfile';\n    case 'theme':\n      return 'theme';\n    default:\n      break;\n  }\n  return undefined;\n}\n\nfunction buildSettingsScreenLink(params: BuilderParams<SettingsScreenLink>): BuilderReturnType<SettingsScreenLink> {\n  const {\n    screen,\n  } = params;\n\n  return {\n    type: 'settings',\n    screen: screen ? buildSettingsScreen(screen) : undefined,\n  };\n}\n\nfunction buildPremiumReferrerLink(params: BuilderParams<PremiumReferrerLink>): BuilderReturnType<PremiumReferrerLink> {\n  const {\n    referrer,\n  } = params;\n\n  if (!referrer) {\n    return undefined;\n  }\n\n  return {\n    type: 'premiumReferrerLink',\n    referrer,\n  };\n}\n\nfunction buildPremiumMultigiftLink(\n  params: BuilderParams<PremiumMultigiftLink>,\n): BuilderReturnType<PremiumMultigiftLink> {\n  const {\n    referrer,\n  } = params;\n\n  if (!referrer) {\n    return undefined;\n  }\n\n  return {\n    type: 'premiumMultigiftLink',\n    referrer,\n  };\n}\n\nfunction isNumber(s: string) {\n  return /^-?\\d+$/.test(s);\n}\n\nfunction getPathParams(url: URL) {\n  const parts = url.pathname.split('/').filter(Boolean);\n  if (parts[0] === 's') {\n    parts.shift();\n  }\n  return parts.map(decodeURI);\n}\n\nfunction getQueryParams(url: URL) {\n  return Object.fromEntries(url.searchParams);\n}\n","import type { DiffObject } from './deepDiff';\n\nimport { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T extends object>(value1: T, value2: DiffObject<T>): T {\n  if (value1 === value2) {\n    return value2 as unknown as T;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  if ('__deleteAllChildren' in value2) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = (value1 as AnyLiteral)[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    if (!value?.__delete) {\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { getActions } from '../global';\n\nimport type { ApiChatType, ApiFormattedText } from '../api/types';\nimport type { DeepLinkMethod } from './deepLinkParser';\nimport { LeftColumnContent, SettingsScreens } from '../types';\n\nimport { API_CHAT_TYPES, RE_TG_LINK, TON_CURRENCY_CODE } from '../config';\nimport { IS_BAD_URL_PARSER } from './browser/globalEnvironment';\nimport { tryParseDeepLink } from './deepLinkParser';\n\nexport const processDeepLink = (url: string): boolean => {\n  const actions = getActions();\n\n  const parsedLink = tryParseDeepLink(url);\n  if (parsedLink) {\n    switch (parsedLink.type) {\n      case 'privateMessageLink':\n        actions.openPrivateChannel({\n          id: parsedLink.channelId,\n          threadId: parsedLink.threadId,\n          messageId: parsedLink.messageId,\n          commentId: parsedLink.commentId,\n          timestamp: parsedLink.timestamp,\n        });\n        return true;\n      case 'publicMessageLink': {\n        actions.openChatByUsername({\n          username: parsedLink.username,\n          threadId: parsedLink.threadId,\n          messageId: parsedLink.messageId,\n          commentId: parsedLink.commentId,\n          timestamp: parsedLink.timestamp,\n        });\n        return true;\n      }\n      case 'publicUsernameOrBotLink': {\n        const choose = parseChooseParameter(parsedLink.choose);\n\n        actions.openChatByUsername({\n          username: parsedLink.username,\n          startParam: parsedLink.start,\n          ref: parsedLink.ref,\n          text: parsedLink.text,\n          startApp: parsedLink.startApp,\n          mode: parsedLink.mode,\n          startAttach: parsedLink.startAttach,\n          attach: parsedLink.attach,\n          choose,\n          originalParts: [parsedLink.username, parsedLink.appName],\n        });\n        return true;\n      }\n      case 'privateChannelLink': {\n        actions.openPrivateChannel({\n          id: parsedLink.channelId,\n        });\n        return true;\n      }\n      case 'businessChatLink':\n        actions.resolveBusinessChatLink({\n          slug: parsedLink.slug,\n        });\n        return true;\n      case 'premiumReferrerLink':\n        actions.openPremiumModal();\n        return true;\n      case 'premiumMultigiftLink':\n        actions.openGiftRecipientPicker();\n        return true;\n      case 'chatBoostLink':\n        actions.processBoostParameters({\n          usernameOrId: (parsedLink.username || parsedLink.id)!,\n          isPrivate: Boolean(parsedLink.id),\n        });\n        return true;\n      case 'giftUniqueLink':\n        actions.openUniqueGiftBySlug({ slug: parsedLink.slug });\n        return true;\n      case 'settings':\n        if (!parsedLink.screen) {\n          actions.openLeftColumnContent({ contentKey: LeftColumnContent.Settings });\n          return true;\n        }\n        switch (parsedLink.screen) {\n          case 'editProfile':\n            actions.openSettingsScreen({ screen: SettingsScreens.EditProfile });\n            break;\n          case 'language':\n            actions.openSettingsScreen({ screen: SettingsScreens.Language });\n            break;\n          case 'devices':\n            actions.openSettingsScreen({ screen: SettingsScreens.ActiveSessions });\n            break;\n          case 'privacy':\n            actions.openSettingsScreen({ screen: SettingsScreens.Privacy });\n            break;\n          case 'folders':\n            actions.openSettingsScreen({ screen: SettingsScreens.Folders });\n            break;\n          case 'theme':\n            actions.openSettingsScreen({ screen: SettingsScreens.General });\n            break;\n        }\n        return true;\n      case 'stars':\n        actions.openStarsBalanceModal({});\n        break;\n      case 'ton':\n        actions.openStarsBalanceModal({ currency: TON_CURRENCY_CODE });\n        break;\n      default:\n        break;\n    }\n  }\n\n  if (!url.match(RE_TG_LINK)) {\n    return false;\n  }\n\n  const urlToParse = IS_BAD_URL_PARSER ? url.replace(/^tg:\\/\\//, 'https://') : url;\n\n  const {\n    protocol, searchParams, hostname,\n  } = new URL(urlToParse);\n\n  if (protocol !== 'tg:') return false;\n\n  const method = hostname as DeepLinkMethod;\n  const params = Object.fromEntries(searchParams);\n\n  const {\n    checkChatInvite,\n    openChatByUsername,\n    openChatByPhoneNumber,\n    openStickerSet,\n    joinVoiceChatByLink,\n    openInvoice,\n    openChatWithDraft,\n    checkChatlistInvite,\n    openStoryViewerByUsername,\n    checkGiftCode,\n    openStarsBalanceModal,\n  } = actions;\n\n  switch (method) {\n    case 'resolve': {\n      const {\n        domain, phone, post, comment, voicechat, livestream, start, startattach, attach, thread, topic,\n        appname, startapp, mode, story, text,\n      } = params;\n\n      const threadId = Number(thread) || Number(topic) || undefined;\n\n      if (domain !== 'telegrampassport') {\n        if (appname) {\n          openChatByUsername({\n            username: domain,\n            startApp: startapp,\n            mode,\n            originalParts: [domain, appname],\n            text,\n          });\n        } else if (params.hasOwnProperty('voicechat') || params.hasOwnProperty('livestream')) {\n          joinVoiceChatByLink({\n            username: domain,\n            inviteHash: voicechat || livestream,\n          });\n        } else if (phone) {\n          openChatByPhoneNumber({\n            phoneNumber: phone,\n            startAttach: startattach,\n            attach,\n            text,\n          });\n        } else if (story) {\n          openStoryViewerByUsername({ username: domain, storyId: Number(story) });\n        } else {\n          openChatByUsername({\n            username: domain,\n            messageId: post ? Number(post) : undefined,\n            commentId: comment ? Number(comment) : undefined,\n            startParam: start,\n            mode,\n            startAttach: startattach,\n            attach,\n            threadId,\n          });\n        }\n      }\n      break;\n    }\n    case 'bg': {\n      // const {\n      //   slug, color, rotation, mode, intensity, bg_color: bgColor, gradient,\n      // } = params;\n      break;\n    }\n    case 'join': {\n      const { invite } = params;\n\n      checkChatInvite({ hash: invite });\n      break;\n    }\n    case 'addemoji':\n    case 'addstickers': {\n      const { set } = params;\n\n      openStickerSet({\n        stickerSetInfo: {\n          shortName: set,\n        },\n      });\n      break;\n    }\n    case 'share':\n    case 'msg':\n    case 'msg_url': {\n      const { url: urlParam, text } = params;\n      openChatWithDraft({ text: formatShareText(urlParam, text) });\n      break;\n    }\n    case 'addlist': {\n      checkChatlistInvite({ slug: params.slug });\n      break;\n    }\n\n    case 'login': {\n      // const { code, token } = params;\n      break;\n    }\n\n    case 'invoice': {\n      const { slug } = params;\n      openInvoice({ type: 'slug', slug });\n      break;\n    }\n\n    case 'stars_topup': {\n      const { balance, purpose } = params;\n      const balanceNeeded = Number(balance);\n      if (!balanceNeeded || balanceNeeded < 0) return true;\n\n      openStarsBalanceModal({ topup: { balanceNeeded, purpose } });\n      break;\n    }\n\n    case 'giftcode': {\n      const { slug } = params;\n      checkGiftCode({ slug });\n      break;\n    }\n    default:\n      // Unsupported deeplink\n      return false;\n  }\n  return true;\n};\n\nexport function formatShareText(url?: string, text?: string, title?: string): ApiFormattedText {\n  return {\n    text: [url, title, text].filter(Boolean).join('\\n'),\n  };\n}\n\nfunction parseChooseParameter(choose?: string) {\n  if (!choose) return undefined;\n  const types = choose.toLowerCase().split(' ').flatMap((type) => {\n    if (type === 'groups') {\n      return ['chats', 'groups'];\n    }\n    return [type];\n  });\n  return types.filter((type): type is ApiChatType => API_CHAT_TYPES.includes(type as ApiChatType));\n}\n","export default function calcTextLineHeightAndCount(textContainer: HTMLElement) {\n  const lineHeight = parseInt(getComputedStyle(textContainer).lineHeight, 10);\n\n  const totalLines = textContainer.scrollHeight / lineHeight;\n\n  return {\n    totalLines,\n    lineHeight,\n  };\n}\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\nexport default function jsxToHtml(jsx: VirtualElement) {\n  const fragment = document.createElement('div');\n  TeactDOM.render(jsx, fragment);\n\n  const children = Array.from(fragment.children);\n  TeactDOM.render(undefined, fragment);\n\n  return children;\n}\n","import { addCallback } from '../../lib/teact/teactn';\nimport { getGlobal } from '../../global';\n\nimport type { ApiSticker } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { getStickerHashById } from '../../global/helpers';\nimport { selectCanPlayAnimatedEmojis } from '../../global/selectors';\nimport { IS_WEBM_SUPPORTED } from '../browser/windowEnvironment';\nimport { createCallbackManager } from '../callbacks';\nimport generateUniqueId from '../generateUniqueId';\nimport * as mediaLoader from '../mediaLoader';\nimport { throttle } from '../schedulers';\n\nimport blankSrc from '../../assets/blank.png';\nimport placeholderSrc from '../../assets/square.svg';\n\ntype CustomEmojiLoadCallback = (customEmojis: GlobalState['customEmojis']) => void;\ntype CustomEmojiInputRenderCallback = (emojiId: string) => void;\n\nconst DOM_PROCESS_THROTTLE = 500;\n\nconst INPUT_WAITING_CUSTOM_EMOJI_IDS = new Set<string>();\n\nconst handlers = new Map<CustomEmojiLoadCallback, string>();\nconst renderCallbacks = createCallbackManager<CustomEmojiInputRenderCallback>();\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (\n    global.customEmojis.byId !== prevGlobal?.customEmojis.byId\n    || selectCanPlayAnimatedEmojis(global) !== selectCanPlayAnimatedEmojis(prevGlobal)\n  ) {\n    for (const entry of handlers) {\n      const [handler, id] = entry;\n      if (global.customEmojis.byId[id]) {\n        handler(global.customEmojis);\n      }\n    }\n\n    checkInputCustomEmojiLoad(global.customEmojis);\n  }\n\n  prevGlobal = global;\n});\n\nexport function addCustomEmojiCallback(handler: CustomEmojiLoadCallback, emojiId: string) {\n  handlers.set(handler, emojiId);\n}\n\nexport function removeCustomEmojiCallback(handler: CustomEmojiLoadCallback) {\n  handlers.delete(handler);\n}\n\nexport const addCustomEmojiInputRenderCallback = renderCallbacks.addCallback;\nconst callInputRenderHandlers = throttle(renderCallbacks.runCallbacks, DOM_PROCESS_THROTTLE);\n\nfunction processDomForCustomEmoji() {\n  const emojis = document.querySelectorAll<HTMLImageElement>('.custom-emoji.placeholder');\n  emojis.forEach((emoji) => {\n    const customEmoji = getGlobal().customEmojis.byId[emoji.dataset.documentId!];\n    if (!customEmoji) {\n      INPUT_WAITING_CUSTOM_EMOJI_IDS.add(emoji.dataset.documentId!);\n      return;\n    }\n    const [isPlaceholder, src, uniqueId] = getInputCustomEmojiParams(customEmoji);\n\n    if (customEmoji.shouldUseTextColor && !emoji.classList.contains('colorable')) {\n      requestMutation(() => {\n        emoji.classList.add('colorable');\n      });\n    }\n\n    if (!isPlaceholder) {\n      requestMutation(() => {\n        emoji.src = src;\n        emoji.classList.remove('placeholder');\n        if (uniqueId) emoji.dataset.uniqueId = uniqueId;\n\n        callInputRenderHandlers(customEmoji.id);\n      });\n    }\n  });\n}\n\nexport const processMessageInputForCustomEmoji = throttle(processDomForCustomEmoji, DOM_PROCESS_THROTTLE);\n\nfunction checkInputCustomEmojiLoad(customEmojis: GlobalState['customEmojis']) {\n  const loaded = Array.from(INPUT_WAITING_CUSTOM_EMOJI_IDS).filter((id) => Boolean(customEmojis.byId[id]));\n  if (loaded.length) {\n    loaded.forEach((id) => INPUT_WAITING_CUSTOM_EMOJI_IDS.delete(id));\n    processMessageInputForCustomEmoji();\n  }\n}\n\nexport function getCustomEmojiMediaDataForInput(emojiId: string, isPreview?: boolean) {\n  const mediaHash = getStickerHashById(emojiId, isPreview);\n  const data = mediaLoader.getFromMemory(mediaHash);\n  if (data) {\n    return data;\n  }\n\n  void fetchAndProcess(mediaHash);\n  return undefined;\n}\n\nfunction fetchAndProcess(mediaHash: string) {\n  return mediaLoader.fetch(mediaHash, ApiMediaFormat.BlobUrl).then(() => {\n    processMessageInputForCustomEmoji();\n  });\n}\n\nexport function getInputCustomEmojiParams(customEmoji?: ApiSticker) {\n  if (!customEmoji) return [true, placeholderSrc, undefined] as const;\n  const shouldUseStaticFallback = !IS_WEBM_SUPPORTED && customEmoji.isVideo;\n  const isUsingSharedCanvas = customEmoji.isLottie || (customEmoji.isVideo && !shouldUseStaticFallback);\n  if (isUsingSharedCanvas) {\n    void fetchAndProcess(`sticker${customEmoji.id}`);\n    return [false, blankSrc, generateUniqueId()] as const;\n  }\n\n  const mediaData = getCustomEmojiMediaDataForInput(customEmoji.id, shouldUseStaticFallback);\n\n  return [!mediaData, mediaData || placeholderSrc, undefined] as const;\n}\n","import { addExtraClass } from '../../lib/teact/teact-dom';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { removeVS16s } from '../../lib/twemojiRegex';\nimport withCache from '../withCache';\n\n// Due to the fact that emoji from Apple do not contain some characters, it is necessary to remove them from emoji-data\n// https://github.com/iamcal/emoji-data/issues/136\nconst EXCLUDE_EMOJIS = ['female_sign', 'male_sign', 'medical_symbol'];\n\nconst ISO_FLAGS_OFFSET = 127397;\n\nexport type EmojiRawData = typeof import('emoji-data-ios/emoji-data.json');\nexport type EmojiModule = { default: EmojiRawData };\n\nexport type EmojiData = {\n  categories: Array<EmojiCategory>;\n  emojis: Record<string, Emoji>;\n};\n\nfunction unifiedToNative(unified: string) {\n  const unicodes = unified.split('-');\n  const codePoints = unicodes.map((i) => parseInt(i, 16));\n\n  return String.fromCodePoint(...codePoints);\n}\n\nexport const LOADED_EMOJIS = new Set<string>();\n\nexport function handleEmojiLoad(event: React.SyntheticEvent<HTMLImageElement>) {\n  const emoji = event.currentTarget;\n\n  LOADED_EMOJIS.add(event.currentTarget.dataset.path!);\n\n  requestMutation(() => {\n    addExtraClass(emoji, 'open');\n  });\n}\n\nexport function nativeToUnified(emoji: string) {\n  let code;\n\n  if (emoji.length === 1) {\n    code = emoji.charCodeAt(0).toString(16).padStart(4, '0');\n  } else {\n    const pairs = [];\n    for (let i = 0; i < emoji.length; i++) {\n      if (emoji.charCodeAt(i) >= 0xd800 && emoji.charCodeAt(i) <= 0xdbff) {\n        if (emoji.charCodeAt(i + 1) >= 0xdc00 && emoji.charCodeAt(i + 1) <= 0xdfff) {\n          pairs.push(\n            (emoji.charCodeAt(i) - 0xd800) * 0x400\n            + (emoji.charCodeAt(i + 1) - 0xdc00) + 0x10000,\n          );\n        }\n      } else if (emoji.charCodeAt(i) < 0xd800 || emoji.charCodeAt(i) > 0xdfff) {\n        pairs.push(emoji.charCodeAt(i));\n      }\n    }\n\n    code = pairs.map((x) => x.toString(16).padStart(4, '0')).join('-');\n  }\n\n  return code;\n}\n\nfunction nativeToUnifiedExtended(emoji: string) {\n  return nativeToUnified(removeVS16s(emoji));\n}\n\nexport const nativeToUnifiedExtendedWithCache = withCache(nativeToUnifiedExtended);\n\nexport function uncompressEmoji(data: EmojiRawData): EmojiData {\n  const emojiData: EmojiData = { categories: [], emojis: {} };\n\n  for (let i = 0; i < data.length; i += 2) {\n    const category = {\n      id: data[i][0],\n      name: data[i][1],\n      emojis: [],\n    } as EmojiCategory;\n\n    for (let j = 0; j < data[i + 1].length; j++) {\n      const emojiRaw = data[i + 1][j];\n      if (!EXCLUDE_EMOJIS.includes(emojiRaw[1][0])) {\n        category.emojis.push(emojiRaw[1][0]);\n        emojiData.emojis[emojiRaw[1][0]] = {\n          id: emojiRaw[1][0],\n          names: emojiRaw[1] as string[],\n          native: unifiedToNative(emojiRaw[0] as string),\n          image: (emojiRaw[0] as string).toLowerCase(),\n        };\n      }\n    }\n\n    emojiData.categories.push(category);\n  }\n\n  return emojiData;\n}\n\nexport function isoToEmoji(iso: string) {\n  // Special case for Fragment numbers\n  if (iso === 'FT') {\n    return '\\uD83C\\uDFF4\\u200D\\u2620\\uFE0F';\n  }\n\n  const code = iso.toUpperCase();\n\n  if (!/^[A-Z]{2}$/.test(code)) return iso;\n  const codePoints = [...code].map((c) => c.codePointAt(0)! + ISO_FLAGS_OFFSET);\n  return String.fromCodePoint(...codePoints);\n}\n","import EMOJI_REGEX from '../../lib/twemojiRegex';\n\n// Non-standard variations of emojis, used on some devices\nconst EMOJI_EXCEPTIONS: [string | RegExp, string][] = [\n  [/\\u{1f3f3}\\u200d\\u{1f308}/gu, '\\u{1f3f3}\\ufe0f\\u200d\\u{1f308}'], // 🏳‍🌈\n  [/\\u{1f3f3}\\u200d\\u26a7\\ufe0f?/gu, '\\u{1f3f3}\\ufe0f\\u200d\\u26a7\\ufe0f'], // 🏳️‍⚧️\n  [/\\u26d3\\u200d\\u{1f4a5}/gu, '\\u26d3\\ufe0f\\u200d\\u{1f4a5}'], // ⛓‍💥\n  [/\\u200d([\\u2640\\u2642])(?!\\ufe0f)/gu, '\\u200d$1\\ufe0f'], // Gender variation without 0xFE0F\n];\n\nexport default function fixNonStandardEmoji(text: string) {\n  // Non-standard sequences typically parsed as separate emojis, so no need to fix text without any\n  if (!text.match(EMOJI_REGEX)) return text;\n\n  for (const [regex, replacement] of EMOJI_EXCEPTIONS) {\n    text = text.replace(regex, replacement);\n  }\n\n  return text;\n}\n","import EMOJI_REGEX from '../../lib/twemojiRegex';\nimport fixNonStandardEmoji from './fixNonStandardEmoji';\n\nconst DETECT_UP_TO = 100;\nconst MAX_LENGTH = DETECT_UP_TO * 8; // Maximum 8 code points per one emoji.\n\nexport default function parseEmojiOnlyString(text: string): number | false {\n  const standardizedText = fixNonStandardEmoji(text);\n  const lines = standardizedText.split('\\n');\n  const textWithoutNewlines = lines.join('');\n  if (textWithoutNewlines.length > MAX_LENGTH) {\n    return false;\n  }\n\n  const totalCount = countIfEmojiOnly(textWithoutNewlines);\n  if (!totalCount || totalCount > DETECT_UP_TO) {\n    return false;\n  }\n\n  // Calculate max emoji count per column or line. Used in UI to determine the size of the emoji.\n  let max = lines.length;\n  for (const line of lines) {\n    const count = countIfEmojiOnly(line);\n    if (count === false) {\n      return false;\n    }\n    if (count > max) {\n      max = count;\n    }\n  }\n\n  return max;\n}\n\nfunction countIfEmojiOnly(line: string): false | number {\n  const iterator = line.matchAll(EMOJI_REGEX);\n  let count = 0;\n  let currentIndex = 0;\n\n  for (const match of iterator) {\n    if (match.index !== currentIndex) {\n      return false;\n    }\n\n    count++;\n    currentIndex = match.index + match[0].length;\n  }\n\n  if (currentIndex !== line.length) {\n    return false;\n  }\n\n  return count;\n}\n","import { CHANNEL_ID_BASE } from '../../config';\n\nexport function isUserId(entityId: string) {\n  return !entityId.startsWith('-');\n}\n\nexport function isChannelId(entityId: string) {\n  const n = Number(entityId);\n  return n < -CHANNEL_ID_BASE;\n}\n\nexport function toChannelId(mtpId: string) {\n  const n = Number(mtpId);\n  return String(-CHANNEL_ID_BASE - n);\n}\n\nexport function getCleanPeerId(peerId: string) {\n  return isChannelId(peerId)\n    // Remove -1 and leading zeros\n    ? peerId.replace(/^-10+/, '')\n    : peerId.replace('-', '');\n}\n\nexport function getPeerIdDividend(peerId: string) {\n  return Math.abs(Number(getCleanPeerId(peerId)));\n}\n","export const MIN_USERNAME_LENGTH = 3; // Some bots have 3-letter usernames\nexport const MIN_UPDATE_USERNAME_LENGTH = 5; // 4 letter usernames are only available on Fragment\nexport const MAX_USERNAME_LENGTH = 32;\nexport const USERNAME_REGEX = /^[a-zA-Z]\\w+$/;\n\nexport function isUsernameValid(username: string, isUpdating?: boolean) {\n  const minUsernameLength = isUpdating ? MIN_UPDATE_USERNAME_LENGTH : MIN_USERNAME_LENGTH;\n  return username.length >= minUsernameLength\n    && username.length <= MAX_USERNAME_LENGTH\n    && USERNAME_REGEX.test(username);\n}\n","import { createCallbackManager } from './callbacks';\nimport { ESTABLISH_BROADCAST_CHANNEL_NAME } from './multiaccount';\nimport { getPasscodeHash, setPasscodeHash } from './passcode';\n\nimport Deferred from './Deferred';\n\nconst ESTABLISH_TIMEOUT = 100;\n\nconst { addCallback, runCallbacks } = createCallbackManager();\nconst { addCallback: addCallbackTokenDied, runCallbacks: runCallbacksTokenDied } = createCallbackManager();\nconst token = Number(Math.random().toString().substring(2));\nconst collectedTokens = new Set([token]);\nconst channel = new BroadcastChannel(ESTABLISH_BROADCAST_CHANNEL_NAME);\n\nlet isEstablished = false;\nconst initialEstablishment = new Deferred();\nlet masterToken: number | undefined;\nlet isWaitingForMaster = false;\nlet reestablishToken: number | undefined;\n\ntype EstablishMessage = {\n  collectedTokens: Set<number>;\n  masterToken?: number;\n  tokenDied?: number;\n  currentPasscodeHash?: ArrayBuffer;\n  reestablishToken?: number;\n  shouldGiveUpMaster?: boolean;\n  hasGaveUpMaster?: boolean;\n};\n\nconst handleMessage = ({ data }: { data: EstablishMessage }) => {\n  if (!data) return;\n\n  if (data.currentPasscodeHash) {\n    setPasscodeHash(data.currentPasscodeHash);\n  }\n\n  if (data.hasGaveUpMaster && isWaitingForMaster) {\n    masterToken = token;\n    isWaitingForMaster = false;\n    initialEstablishment.resolve();\n    runCallbacks(true);\n    return;\n  }\n\n  if (data.shouldGiveUpMaster) {\n    if (masterToken === token) {\n      runCallbacks(false);\n      channel.postMessage({ currentPasscodeHash: getPasscodeHash(), hasGaveUpMaster: true });\n    }\n    masterToken = data.masterToken;\n    return;\n  }\n\n  if (data.tokenDied) {\n    runCallbacksTokenDied(data.tokenDied);\n    collectedTokens.delete(data.tokenDied);\n    if (data.tokenDied === masterToken) {\n      collectedTokens.delete(data.tokenDied);\n      masterToken = undefined;\n      isEstablished = false;\n      reestablishToken = data.tokenDied;\n\n      channel.postMessage({\n        collectedTokens,\n        masterToken,\n        reestablishToken,\n      });\n      if (collectedTokens.size === 1) {\n        isEstablished = true;\n        masterToken = token;\n        reestablishToken = undefined;\n        initialEstablishment.resolve();\n        runCallbacks(true);\n      }\n    }\n  }\n\n  if (data.collectedTokens) {\n    if (!data.reestablishToken && reestablishToken) {\n      return;\n    }\n    if (data.reestablishToken && reestablishToken !== data.reestablishToken) {\n      data.collectedTokens.delete(data.reestablishToken);\n\n      reestablishToken = data.reestablishToken;\n    }\n    const prevLength = collectedTokens.size;\n    data.collectedTokens.forEach((l) => collectedTokens.add(l));\n    if (reestablishToken) data.collectedTokens.delete(reestablishToken);\n\n    if (!isEstablished) {\n      if (data.masterToken) {\n        reestablishToken = undefined;\n        masterToken = data.masterToken;\n        runCallbacks(masterToken === token);\n\n        if (!isEstablished) {\n          channel.postMessage({\n            collectedTokens,\n            masterToken,\n            reestablishToken,\n          });\n        }\n        initialEstablishment.resolve();\n        isEstablished = true;\n      } else if (prevLength !== collectedTokens.size) {\n        channel.postMessage({\n          collectedTokens,\n          masterToken,\n          reestablishToken,\n        });\n      } else {\n        reestablishToken = undefined;\n        masterToken = Math.max(...Array.from(collectedTokens));\n        runCallbacks(masterToken === token);\n\n        if (!isEstablished) {\n          channel.postMessage({\n            collectedTokens,\n            masterToken,\n            reestablishToken,\n          });\n        }\n        initialEstablishment.resolve();\n        isEstablished = true;\n      }\n    } else if (!data.masterToken) {\n      channel.postMessage({\n        collectedTokens,\n        masterToken,\n        reestablishToken,\n      });\n    }\n  }\n};\n\nexport function establishMultitabRole(shouldReestablishMasterToSelf?: boolean) {\n  channel.addEventListener('message', handleMessage);\n\n  channel.postMessage({ collectedTokens });\n\n  // To make the connection faster, we can ignore the waiting and connect right away,\n  // and then if we realize we're not master, drop the connection\n  setTimeout(() => {\n    if (masterToken === undefined) {\n      masterToken = token;\n      initialEstablishment.resolve();\n      runCallbacks(true);\n    } else if (shouldReestablishMasterToSelf) {\n      reestablishMasterToSelf();\n    }\n  }, ESTABLISH_TIMEOUT);\n\n  window.addEventListener('beforeunload', signalTokenDead);\n}\n\nexport function signalTokenDead() {\n  runCallbacksTokenDied(token);\n  channel.removeEventListener('message', handleMessage);\n  channel.postMessage({ tokenDied: token, currentPasscodeHash: getPasscodeHash() });\n  channel.close();\n}\n\nexport function signalPasscodeHash() {\n  channel.postMessage({ currentPasscodeHash: getPasscodeHash() });\n}\n\nexport function getCurrentTabId() {\n  return token;\n}\n\nexport function getAllMultitabTokens() {\n  return Array.from(collectedTokens);\n}\n\nexport function reestablishMasterToSelf() {\n  isWaitingForMaster = true;\n  channel.postMessage({\n    collectedTokens, masterToken: token, shouldGiveUpMaster: true,\n  });\n}\n\nexport const subscribeToTokenDied = addCallbackTokenDied;\nexport const subscribeToMasterChange = addCallback;\n\nexport const initialEstablishmentPromise = initialEstablishment.promise;\n\nexport function isCurrentTabMaster() {\n  return masterToken === token;\n}\n","import { CONTENT_TYPES_WITH_PREVIEW } from '../config';\nimport { pause } from './schedulers';\n\n// Polyfill for Safari: `File` is not available in web worker\nif (typeof File === 'undefined') {\n  self.File = class extends Blob {\n    name: string;\n\n    constructor(fileBits: BlobPart[], fileName: string, options?: FilePropertyBag) {\n      if (options) {\n        const { type, ...rest } = options;\n        super(fileBits, { type });\n        Object.assign(this, rest);\n      } else {\n        super(fileBits);\n      }\n\n      this.name = fileName;\n    }\n  } as typeof File;\n}\n\nexport function blobToDataUri(blob: Blob): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = (e: ProgressEvent<FileReader>) => {\n      const { result } = e.target || {};\n      if (typeof result === 'string') {\n        resolve(result);\n      }\n\n      reject(new Error('Failed to read blob'));\n    };\n\n    reader.onerror = reject;\n    reader.readAsDataURL(blob);\n  });\n}\n\nexport function blobToFile(blob: Blob, fileName: string) {\n  return new File([blob], fileName, {\n    lastModified: Date.now(),\n    type: blob.type,\n  });\n}\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n\nexport function preloadVideo(url: string): Promise<HTMLVideoElement> {\n  return new Promise((resolve, reject) => {\n    const video = document.createElement('video');\n    video.volume = 0;\n    video.onloadedmetadata = () => resolve(video);\n    video.onerror = reject;\n    video.src = url;\n  });\n}\n\nexport async function createPosterForVideo(url: string): Promise<string | undefined> {\n  try {\n    const video = await preloadVideo(url);\n\n    return await Promise.race([\n      pause(2000) as Promise<undefined>,\n      new Promise<string | undefined>((resolve, reject) => {\n        video.onseeked = () => {\n          if (!video.videoWidth || !video.videoHeight) {\n            resolve(undefined);\n          }\n\n          const canvas = document.createElement('canvas');\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          const ctx = canvas.getContext('2d')!;\n          ctx.drawImage(video, 0, 0);\n\n          canvas.toBlob((blob) => {\n            resolve(blob ? URL.createObjectURL(blob) : undefined);\n          });\n        };\n        video.onerror = reject;\n        video.currentTime = Math.min(video.duration, 1);\n      }),\n    ]);\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport async function fetchBlob(blobUrl: string) {\n  const response = await fetch(blobUrl);\n  return response.blob();\n}\n\nexport async function fetchFile(blobUrl: string, fileName: string) {\n  const blob = await fetchBlob(blobUrl);\n  return blobToFile(blob, fileName);\n}\n\nexport function imgToCanvas(img: HTMLImageElement) {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  const ctx = canvas.getContext('2d')!;\n  ctx.drawImage(img, 0, 0);\n\n  return canvas;\n}\n\nexport function hasPreview(file: File) {\n  return CONTENT_TYPES_WITH_PREVIEW.has(file.type);\n}\n\nexport function validateFiles(files: File[] | FileList | null): File[] | undefined {\n  if (!files?.length) {\n    return undefined;\n  }\n  return Array.from(files).map(fixMovMime).filter((file) => file.size);\n}\n\n// .mov MIME type not reported sometimes https://developer.mozilla.org/en-US/docs/Web/API/File/type#sect1\nfunction fixMovMime(file: File) {\n  const ext = file.name.split('.').pop()!;\n  if (!file.type && ext.toLowerCase() === 'mov') {\n    return new File([file], file.name, { type: 'video/quicktime' });\n  }\n  return file;\n}\n","import { onFullyIdle } from '../lib/teact/teact';\nimport { addCallback } from '../lib/teact/teactn';\nimport { addActionHandler, getGlobal } from '../global';\n\nimport type {\n  ApiChat, ApiChatFolder, ApiNotifyPeerType, ApiPeerNotifySettings, ApiUser,\n} from '../api/types';\nimport type { GlobalState } from '../global/types';\nimport type { CallbackManager } from './callbacks';\n\nimport {\n  ALL_FOLDER_ID, ARCHIVED_FOLDER_ID, DEBUG, SAVED_FOLDER_ID, SERVICE_NOTIFICATIONS_USER_ID,\n} from '../config';\nimport { getIsChatMuted } from '../global/helpers/notifications';\nimport {\n  selectChatLastMessage,\n  selectIsChatRestricted,\n  selectNotifyDefaults,\n  selectTabState,\n  selectTopics,\n} from '../global/selectors';\nimport arePropsShallowEqual from './arePropsShallowEqual';\nimport { createCallbackManager } from './callbacks';\nimport { areSortedArraysEqual, unique } from './iteratees';\nimport { throttle } from './schedulers';\n\ninterface FolderSummary {\n  id: number;\n  listIds?: Set<string>;\n  orderedPinnedIds?: string[];\n  contacts?: true;\n  nonContacts?: true;\n  groups?: true;\n  channels?: true;\n  bots?: true;\n  excludeMuted?: true;\n  excludeRead?: true;\n  excludeArchived?: true;\n  excludedChatIds?: Set<string>;\n  includedChatIds?: Set<string>;\n  pinnedChatIds?: Set<string>;\n}\n\ninterface ChatSummary {\n  id: string;\n  type: ApiChat['type'];\n  isListedInAll: boolean;\n  isListedInSaved: boolean;\n  isArchived: boolean;\n  isMuted: boolean;\n  isUnread: boolean;\n  unreadCount?: number;\n  unreadMentionsCount?: number;\n  orderInAll: number;\n  orderInSaved: number;\n  isUserBot?: boolean;\n  isUserContact?: boolean;\n}\n\nconst UPDATE_THROTTLE = 500;\nconst DEBUG_DURATION_LIMIT = 6;\n\nconst initials = buildInitials();\n\nlet prevGlobal: {\n  allFolderListIds?: GlobalState['chats']['listIds']['active'];\n  allFolderPinnedIds?: GlobalState['chats']['orderedPinnedIds']['active'];\n  archivedFolderListIds?: GlobalState['chats']['listIds']['archived'];\n  archivedFolderPinnedIds?: GlobalState['chats']['orderedPinnedIds']['archived'];\n  savedFolderListIds?: GlobalState['chats']['listIds']['saved'];\n  savedFolderPinnedIds?: GlobalState['chats']['orderedPinnedIds']['saved'];\n  isAllFolderFullyLoaded?: boolean;\n  isArchivedFolderFullyLoaded?: boolean;\n  isSavedFolderFullyLoaded?: boolean;\n  lastAllMessageIds?: GlobalState['chats']['lastMessageIds']['all'];\n  lastSavedMessageIds?: GlobalState['chats']['lastMessageIds']['saved'];\n  topicsInfoById: GlobalState['chats']['topicsInfoById'];\n  chatsById: Record<string, ApiChat>;\n  foldersById: Record<string, ApiChatFolder>;\n  usersById: Record<string, ApiUser>;\n  notifyDefaults?: Record<ApiNotifyPeerType, ApiPeerNotifySettings>;\n  notifyExceptions?: Record<number, ApiPeerNotifySettings>;\n} = initials.prevGlobal;\n\nlet prepared: {\n  folderSummariesById: Record<string, FolderSummary>;\n  chatSummariesById: Map<string, ChatSummary>;\n  folderIdsByChatId: Record<string, number[]>;\n  chatIdsByFolderId: Record<number, Set<string> | undefined>;\n  isOrderedListJustPatched: Record<number, boolean | undefined>;\n} = initials.prepared;\n\nlet results: {\n  orderedIdsByFolderId: Record<string, string[] | undefined>;\n  pinnedCountByFolderId: Record<string, number | undefined>; // Also watched by `callbacks.orderedIdsByFolderId`\n  chatsCountByFolderId: Record<string, number | undefined>;\n  unreadCountersByFolderId: Record<string, {\n    chatsCount: number;\n    notificationsCount: number;\n  } | undefined>;\n  unreadChatIdsByFolderId: Record<string, string[] | undefined>;\n} = initials.results;\n\nlet callbacks: {\n  orderedIdsByFolderId: Record<number, CallbackManager>;\n  chatsCountByFolderId: CallbackManager;\n  unreadCountersByFolderId: CallbackManager;\n  unreadChatIdsByFolderId: CallbackManager;\n} = initials.callbacks;\n\nif (DEBUG) {\n  (window as any).DEBUG_getFolderManager = () => ({\n    prepared,\n    results,\n  });\n}\n\nconst updateFolderManagerThrottled = throttle(() => {\n  onFullyIdle(() => {\n    updateFolderManager(getGlobal());\n  });\n}, UPDATE_THROTTLE);\n\nlet inited = false;\n\n/* Getters */\n\nexport function init() {\n  inited = true;\n\n  addCallback(updateFolderManagerThrottled);\n  addActionHandler('reset', reset);\n\n  const global = getGlobal();\n  if (!selectTabState(global).isMasterTab) {\n    updateFolders(global, true, true, true, true);\n  }\n  updateFolderManager(global);\n}\n\nexport function getOrderedIds(folderId: number) {\n  if (!inited) init();\n\n  return results.orderedIdsByFolderId[folderId];\n}\n\nexport function getPinnedChatsCount(folderId: number) {\n  if (!inited) init();\n\n  return results.pinnedCountByFolderId[folderId] || 0;\n}\n\nexport function getChatsCount() {\n  if (!inited) init();\n\n  return results.chatsCountByFolderId;\n}\n\nexport function getUnreadCounters() {\n  if (!inited) init();\n\n  return results.unreadCountersByFolderId;\n}\n\nexport function getUnreadChatsByFolderId() {\n  if (!inited) init();\n\n  return results.unreadChatIdsByFolderId;\n}\n\nexport function getAllNotificationsCount() {\n  return getUnreadCounters()[ALL_FOLDER_ID]?.notificationsCount || 0;\n}\n\nexport function getOrderKey(chatId: string, isForSaved?: boolean) {\n  const summary = prepared.chatSummariesById.get(chatId)!;\n  return isForSaved ? summary.orderInSaved : summary.orderInAll;\n}\n\n/* Callback managers */\n\nexport function addOrderedIdsCallback(folderId: number, callback: (orderedIds: string[]) => void) {\n  if (!callbacks.orderedIdsByFolderId[folderId]) {\n    callbacks.orderedIdsByFolderId[folderId] = createCallbackManager();\n  }\n\n  return callbacks.orderedIdsByFolderId[folderId].addCallback(callback);\n}\n\nexport function addChatsCountCallback(callback: (chatsCount: typeof results.chatsCountByFolderId) => void) {\n  return callbacks.chatsCountByFolderId.addCallback(callback);\n}\n\nexport function addUnreadChatsByFolderIdCallback(\n  callback: (unreadChats: typeof results.unreadChatIdsByFolderId) => void,\n) {\n  return callbacks.unreadChatIdsByFolderId.addCallback(callback);\n}\n\nexport function addUnreadCountersCallback(callback: (unreadCounters: typeof results.unreadCountersByFolderId) => void) {\n  return callbacks.unreadCountersByFolderId.addCallback(callback);\n}\n\n/* Global update handlers */\n\nfunction updateFolderManager(global: GlobalState) {\n  let DEBUG_startedAt: number;\n  if (DEBUG) {\n    DEBUG_startedAt = performance.now();\n  }\n\n  const isAllFolderChanged = Boolean(\n    global.chats.listIds.active\n    && isMainFolderChanged(ALL_FOLDER_ID, global.chats.listIds.active, global.chats.orderedPinnedIds.active),\n  );\n  const isArchivedFolderChanged = Boolean(\n    global.chats.listIds.archived\n    && isMainFolderChanged(ARCHIVED_FOLDER_ID, global.chats.listIds.archived, global.chats.orderedPinnedIds.archived),\n  );\n  const isSavedFolderChanged = Boolean(\n    global.chats.listIds.saved\n    && isMainFolderChanged(SAVED_FOLDER_ID, global.chats.listIds.saved, global.chats.orderedPinnedIds.saved),\n  );\n  const isAllFullyLoadedChanged = global.chats.isFullyLoaded.active !== prevGlobal.isAllFolderFullyLoaded;\n  const isArchivedFullyLoadedChanged = global.chats.isFullyLoaded.archived !== prevGlobal.isArchivedFolderFullyLoaded;\n  const isSavedFolderFullyLoadedChanged = global.chats.isFullyLoaded.saved !== prevGlobal.isSavedFolderFullyLoaded;\n\n  const areFoldersChanged = global.chatFolders.byId !== prevGlobal.foldersById;\n  const areChatsChanged = global.chats.byId !== prevGlobal.chatsById;\n  const areSavedLastMessageIdsChanged = global.chats.lastMessageIds.saved !== prevGlobal.lastSavedMessageIds;\n  const areAllLastMessageIdsChanged = global.chats.lastMessageIds.all !== prevGlobal.lastAllMessageIds;\n  const areTopicsChanged = global.chats.topicsInfoById !== prevGlobal.topicsInfoById;\n  const areUsersChanged = global.users.byId !== prevGlobal.usersById;\n  const areNotifyDefaultsChanged = selectNotifyDefaults(global) !== prevGlobal.notifyDefaults;\n  const areNotifyExceptionsChanged = global.chats.notifyExceptionById !== prevGlobal.notifyExceptions;\n\n  let affectedFolderIds: number[] = [];\n\n  if (isAllFullyLoadedChanged || isArchivedFullyLoadedChanged || isSavedFolderFullyLoadedChanged) {\n    affectedFolderIds = affectedFolderIds.concat(\n      updateFullyLoaded(global, isArchivedFullyLoadedChanged, isSavedFolderFullyLoadedChanged),\n    );\n  }\n\n  if (!(\n    isAllFolderChanged || isArchivedFolderChanged || isSavedFolderChanged || areFoldersChanged\n    || areChatsChanged || areUsersChanged || areTopicsChanged || areNotifyDefaultsChanged || areNotifyExceptionsChanged\n    || areSavedLastMessageIdsChanged || areAllLastMessageIdsChanged\n  )\n  ) {\n    if (affectedFolderIds.length) {\n      updateResults(affectedFolderIds);\n    }\n\n    return;\n  }\n\n  const prevAllFolderListIds = prevGlobal.allFolderListIds;\n  const prevArchivedFolderListIds = prevGlobal.archivedFolderListIds;\n  const prevSavedFolderListIds = prevGlobal.savedFolderListIds;\n\n  updateFolders(global, isAllFolderChanged, isArchivedFolderChanged, isSavedFolderChanged, areFoldersChanged);\n\n  affectedFolderIds = affectedFolderIds.concat(updateChats(\n    global,\n    areFoldersChanged || isAllFolderChanged || isArchivedFolderChanged || isSavedFolderChanged,\n    areNotifyDefaultsChanged,\n    areNotifyExceptionsChanged,\n    prevAllFolderListIds,\n    prevArchivedFolderListIds,\n    prevSavedFolderListIds,\n  ));\n\n  updateResults(unique(affectedFolderIds));\n\n  if (DEBUG) {\n    const duration = performance.now() - DEBUG_startedAt!;\n    if (duration > DEBUG_DURATION_LIMIT) {\n      // eslint-disable-next-line no-console\n      console.warn(`Slow \\`updateFolderManager\\`: ${Math.round(duration)} ms`);\n    }\n  }\n}\n\nfunction isMainFolderChanged(folderId: number, newListIds?: string[], newPinnedIds?: string[]) {\n  const currentListIds = folderId === ALL_FOLDER_ID\n    ? prevGlobal.allFolderListIds\n    : folderId === SAVED_FOLDER_ID\n      ? prevGlobal.savedFolderListIds : prevGlobal.archivedFolderListIds;\n  const currentPinnedIds = folderId === ALL_FOLDER_ID\n    ? prevGlobal.allFolderPinnedIds\n    : folderId === SAVED_FOLDER_ID\n      ? prevGlobal.savedFolderPinnedIds : prevGlobal.archivedFolderPinnedIds;\n\n  return currentListIds !== newListIds || currentPinnedIds !== newPinnedIds;\n}\n\nfunction updateFullyLoaded(\n  global: GlobalState,\n  isArchivedFullyLoadedChanged = false,\n  isSavedFolderFullyLoadedChanged = false,\n) {\n  let affectedFolderIds = [];\n\n  if (isArchivedFullyLoadedChanged) {\n    affectedFolderIds.push(ARCHIVED_FOLDER_ID);\n  }\n\n  if (isSavedFolderFullyLoadedChanged) {\n    affectedFolderIds.push(SAVED_FOLDER_ID);\n  }\n\n  const isAllFolderFullyLoaded = global.chats.isFullyLoaded.active;\n  const isArchivedFolderFullyLoaded = global.chats.isFullyLoaded.archived;\n  const isSavedFolderFullyLoaded = global.chats.isFullyLoaded.saved;\n\n  if (isAllFolderFullyLoaded && isArchivedFolderFullyLoaded) {\n    const emptyFolderIds = Object.keys(prepared.folderSummariesById)\n      .filter((folderId) => !results.orderedIdsByFolderId[folderId])\n      .map(Number);\n\n    affectedFolderIds = affectedFolderIds.concat(emptyFolderIds);\n  }\n\n  prevGlobal.isAllFolderFullyLoaded = isAllFolderFullyLoaded;\n  prevGlobal.isArchivedFolderFullyLoaded = isArchivedFolderFullyLoaded;\n  prevGlobal.isSavedFolderFullyLoaded = isSavedFolderFullyLoaded;\n\n  return affectedFolderIds;\n}\n\nfunction updateFolders(\n  global: GlobalState,\n  isAllFolderChanged: boolean,\n  isArchivedFolderChanged: boolean,\n  isSavedFolderChanged: boolean,\n  areFoldersChanged: boolean,\n) {\n  const changedFolders = [];\n\n  if (isAllFolderChanged) {\n    const newListIds = global.chats.listIds.active!;\n    const newPinnedIds = global.chats.orderedPinnedIds.active;\n\n    prepared.folderSummariesById[ALL_FOLDER_ID] = buildFolderSummaryFromMainList(\n      ALL_FOLDER_ID, newListIds, newPinnedIds,\n    );\n\n    prevGlobal.allFolderListIds = newListIds;\n    prevGlobal.allFolderPinnedIds = newPinnedIds;\n\n    changedFolders.push(ALL_FOLDER_ID);\n  }\n\n  if (isArchivedFolderChanged) {\n    const newListIds = global.chats.listIds.archived!;\n    const newPinnedIds = global.chats.orderedPinnedIds.archived;\n\n    prepared.folderSummariesById[ARCHIVED_FOLDER_ID] = buildFolderSummaryFromMainList(\n      ARCHIVED_FOLDER_ID, newListIds, newPinnedIds,\n    );\n\n    prevGlobal.archivedFolderListIds = newListIds;\n    prevGlobal.archivedFolderPinnedIds = newPinnedIds;\n\n    changedFolders.push(ARCHIVED_FOLDER_ID);\n  }\n\n  if (isSavedFolderChanged) {\n    const newListIds = global.chats.listIds.saved!;\n    const newPinnedIds = global.chats.orderedPinnedIds.saved;\n\n    prepared.folderSummariesById[SAVED_FOLDER_ID] = buildFolderSummaryFromMainList(\n      SAVED_FOLDER_ID, newListIds, newPinnedIds,\n    );\n\n    prevGlobal.savedFolderListIds = newListIds;\n    prevGlobal.savedFolderPinnedIds = newPinnedIds;\n\n    changedFolders.push(SAVED_FOLDER_ID);\n  }\n\n  if (areFoldersChanged) {\n    const newFoldersById = global.chatFolders.byId;\n\n    Object.values(newFoldersById).forEach((folder) => {\n      if (folder === prevGlobal.foldersById[folder.id]) {\n        return;\n      }\n\n      prepared.folderSummariesById[folder.id] = buildFolderSummary(folder);\n\n      changedFolders.push(folder.id);\n    });\n\n    prevGlobal.foldersById = newFoldersById;\n  }\n\n  return changedFolders;\n}\n\nfunction buildFolderSummaryFromMainList(\n  folderId: number, listIds: string[], orderedPinnedIds?: string[],\n): FolderSummary {\n  return {\n    id: folderId,\n    listIds: new Set(listIds),\n    orderedPinnedIds,\n    pinnedChatIds: new Set(orderedPinnedIds),\n  };\n}\n\nfunction buildFolderSummary(folder: ApiChatFolder): FolderSummary {\n  return {\n    ...folder,\n    orderedPinnedIds: folder.pinnedChatIds,\n    excludedChatIds: folder.excludedChatIds ? new Set(folder.excludedChatIds) : undefined,\n    includedChatIds: folder.excludedChatIds ? new Set(folder.includedChatIds) : undefined,\n    pinnedChatIds: folder.excludedChatIds ? new Set(folder.pinnedChatIds) : undefined,\n  };\n}\n\nfunction updateChats(\n  global: GlobalState,\n  areFoldersChanged: boolean,\n  areNotifyDefaultsChanged: boolean,\n  areNotifyExceptionsChanged: boolean,\n  prevAllFolderListIds?: string[],\n  prevArchivedFolderListIds?: string[],\n  prevSavedFolderListIds?: string[],\n) {\n  const newChatsById = global.chats.byId;\n  const newUsersById = global.users.byId;\n  const newAllLastMessageIds = global.chats.lastMessageIds.all;\n  const newSavedLastMessageIds = global.chats.lastMessageIds.saved;\n  const newNotifyDefaults = selectNotifyDefaults(global);\n  const newNotifyExceptions = global.chats.notifyExceptionById;\n  const folderSummaries = Object.values(prepared.folderSummariesById);\n  const affectedFolderIds = new Set<number>();\n\n  const newAllFolderListIds = global.chats.listIds.active;\n  const newArchivedFolderListIds = global.chats.listIds.archived;\n  const newSavedFolderListIds = global.chats.listIds.saved;\n\n  const newGeneralIds = [...newAllFolderListIds || [], ...newArchivedFolderListIds || []];\n  const newAllIds = [...newGeneralIds, ...newSavedFolderListIds || []];\n  let allIds = newAllIds;\n  if (newAllFolderListIds !== prevAllFolderListIds || newArchivedFolderListIds !== prevArchivedFolderListIds\n    || newSavedFolderListIds !== prevSavedFolderListIds) {\n    allIds = unique(allIds.concat(\n      prevAllFolderListIds || [], prevArchivedFolderListIds || [], prevSavedFolderListIds || [],\n    ));\n  }\n\n  allIds.forEach((chatId) => {\n    const chat = newChatsById[chatId];\n\n    if (\n      !areFoldersChanged\n      && !areNotifyDefaultsChanged\n      && !areNotifyExceptionsChanged\n      && chat === prevGlobal.chatsById[chatId]\n      && newUsersById[chatId] === prevGlobal.usersById[chatId]\n      && newAllLastMessageIds?.[chatId] === prevGlobal.lastAllMessageIds?.[chatId]\n      && newSavedLastMessageIds?.[chatId] === prevGlobal.lastSavedMessageIds?.[chatId]\n    ) {\n      return;\n    }\n\n    let newFolderIds: number[];\n    if (chat) {\n      const currentSummary = prepared.chatSummariesById.get(chatId);\n      const isRemovedFromAll = !newGeneralIds.includes(chatId);\n      const isRemovedFromSaved = !newSavedFolderListIds?.includes(chatId);\n      const newSummary = buildChatSummary(\n        global,\n        chat,\n        newNotifyDefaults,\n        newNotifyExceptions,\n        newUsersById[chatId],\n        isRemovedFromAll,\n        isRemovedFromSaved,\n      );\n\n      if (!areFoldersChanged && currentSummary && arePropsShallowEqual(newSummary, currentSummary)) {\n        return;\n      }\n\n      prepared.chatSummariesById.set(chatId, newSummary);\n\n      newFolderIds = buildChatFolderIds(newSummary, folderSummaries);\n      newFolderIds.forEach((folderId) => {\n        affectedFolderIds.add(folderId);\n      });\n    } else {\n      prepared.chatSummariesById.delete(chatId);\n      newFolderIds = [];\n    }\n\n    const currentFolderIds = prepared.folderIdsByChatId[chatId] || [];\n    if (areSortedArraysEqual(newFolderIds, currentFolderIds)) {\n      return;\n    }\n\n    const deletedFolderIds = updateListsForChat(chatId, currentFolderIds, newFolderIds);\n    deletedFolderIds.forEach((folderId) => {\n      affectedFolderIds.add(folderId);\n    });\n  });\n\n  prevGlobal.chatsById = newChatsById;\n  prevGlobal.usersById = newUsersById;\n  prevGlobal.lastAllMessageIds = newAllLastMessageIds;\n  prevGlobal.lastSavedMessageIds = newSavedLastMessageIds;\n  prevGlobal.notifyDefaults = newNotifyDefaults;\n  prevGlobal.notifyExceptions = newNotifyExceptions;\n\n  return Array.from(affectedFolderIds);\n}\n\nfunction buildChatSummary<T extends GlobalState>(\n  global: T,\n  chat: ApiChat,\n  notifyDefaults?: Record<ApiNotifyPeerType, ApiPeerNotifySettings>,\n  notifyExceptions?: Record<string, ApiPeerNotifySettings>,\n  user?: ApiUser,\n  isRemovedFromAll?: boolean,\n  isRemovedFromSaved?: boolean,\n): ChatSummary {\n  const {\n    id, type, isNotJoined, migratedTo, folderId,\n    unreadCount: chatUnreadCount, unreadMentionsCount: chatUnreadMentionsCount, hasUnreadMark,\n    isForum,\n  } = chat;\n  const isRestricted = selectIsChatRestricted(global, id);\n  const topics = selectTopics(global, chat.id);\n\n  const { unreadCount, unreadMentionsCount } = isForum\n    ? Object.values(topics || {}).reduce((acc, topic) => {\n      acc.unreadCount += topic.unreadCount;\n      acc.unreadMentionsCount += topic.unreadMentionsCount;\n\n      return acc;\n    }, { unreadCount: 0, unreadMentionsCount: 0 })\n    : { unreadCount: chatUnreadCount, unreadMentionsCount: chatUnreadMentionsCount };\n\n  const userInfo = type === 'chatTypePrivate' && user;\n  const lastMessage = selectChatLastMessage(global, chat.id);\n  const shouldHideServiceChat = chat.id === SERVICE_NOTIFICATIONS_USER_ID && (\n    !lastMessage || lastMessage.content.action?.type === 'historyClear'\n  );\n\n  const orderInAll = Math.max(chat.creationDate || 0, chat.draftDate || 0, lastMessage?.date || 0);\n\n  const lastMessageInSaved = selectChatLastMessage(global, chat.id, 'saved');\n  const orderInSaved = lastMessageInSaved?.date || 0;\n\n  return {\n    id,\n    type,\n    isListedInAll: Boolean(!isRestricted && !isNotJoined && !migratedTo && !shouldHideServiceChat && !isRemovedFromAll),\n    isListedInSaved: !isRemovedFromSaved,\n    isArchived: folderId === ARCHIVED_FOLDER_ID,\n    isMuted: getIsChatMuted(chat, notifyDefaults, notifyExceptions?.[chat.id]),\n    isUnread: Boolean(unreadCount || unreadMentionsCount || hasUnreadMark),\n    unreadCount,\n    unreadMentionsCount,\n    isUserBot: userInfo ? userInfo.type === 'userTypeBot' : undefined,\n    isUserContact: userInfo ? userInfo.isContact : undefined,\n    orderInAll,\n    orderInSaved,\n  };\n}\n\nfunction buildChatFolderIds(chatSummary: ChatSummary, folderSummaries: FolderSummary[]) {\n  return folderSummaries.reduce<number[]>((acc, folderSummary) => {\n    if (isChatInFolder(chatSummary, folderSummary)) {\n      acc.push(folderSummary.id);\n    }\n\n    return acc;\n  }, []).sort();\n}\n\nfunction isChatInFolder(\n  chatSummary: ChatSummary,\n  folderSummary: FolderSummary,\n) {\n  const isListed = folderSummary.id === SAVED_FOLDER_ID ? chatSummary.isListedInSaved : chatSummary.isListedInAll;\n  if (!isListed) {\n    return false;\n  }\n\n  const { id: chatId, type } = chatSummary;\n\n  if (folderSummary.listIds) {\n    if (\n      (chatSummary.isArchived && folderSummary.id === ALL_FOLDER_ID)\n      || (!chatSummary.isArchived && folderSummary.id === ARCHIVED_FOLDER_ID)\n    ) {\n      return false;\n    }\n\n    return folderSummary.listIds.has(chatId);\n  }\n\n  if (folderSummary.excludedChatIds?.has(chatId)) {\n    return false;\n  }\n\n  if (folderSummary.includedChatIds?.has(chatId)) {\n    return true;\n  }\n\n  if (folderSummary.pinnedChatIds?.has(chatId)) {\n    return true;\n  }\n\n  if (folderSummary.excludeArchived && chatSummary.isArchived) {\n    return false;\n  }\n\n  if (folderSummary.excludeRead && !chatSummary.isUnread) {\n    return false;\n  }\n\n  if (folderSummary.excludeMuted && chatSummary.isMuted && !chatSummary.unreadMentionsCount) {\n    return false;\n  }\n\n  if (type === 'chatTypePrivate') {\n    if (chatSummary.isUserBot) {\n      if (folderSummary.bots) {\n        return true;\n      }\n    } else {\n      if (folderSummary.contacts && chatSummary.isUserContact) {\n        return true;\n      }\n\n      if (folderSummary.nonContacts && !chatSummary.isUserContact) {\n        return true;\n      }\n    }\n  } else if (type === 'chatTypeChannel') {\n    return Boolean(folderSummary.channels);\n  } else if (type === 'chatTypeBasicGroup' || type === 'chatTypeSuperGroup') {\n    return Boolean(folderSummary.groups);\n  }\n\n  return false;\n}\n\nfunction updateListsForChat(chatId: string, currentFolderIds: number[], newFolderIds: number[]) {\n  const currentFolderIdsSet = new Set(currentFolderIds);\n  const newFolderIdsSet = new Set(newFolderIds);\n  const deletedFolderIds: number[] = [];\n\n  unique([...currentFolderIds, ...newFolderIds]).forEach((folderId) => {\n    let currentFolderOrderedIds = results.orderedIdsByFolderId[folderId];\n\n    if (currentFolderIdsSet.has(folderId) && !newFolderIdsSet.has(folderId)) {\n      prepared.chatIdsByFolderId[folderId]!.delete(chatId);\n\n      deletedFolderIds.push(folderId);\n\n      if (currentFolderOrderedIds) {\n        currentFolderOrderedIds = currentFolderOrderedIds.filter((id) => id !== chatId);\n        prepared.isOrderedListJustPatched[folderId] = true;\n      }\n    } else if (!currentFolderIdsSet.has(folderId) && newFolderIdsSet.has(folderId)) {\n      if (!prepared.chatIdsByFolderId[folderId]) {\n        prepared.chatIdsByFolderId[folderId] = new Set();\n      }\n\n      prepared.chatIdsByFolderId[folderId].add(chatId);\n\n      if (currentFolderOrderedIds) {\n        currentFolderOrderedIds.push(chatId);\n        prepared.isOrderedListJustPatched[folderId] = true;\n      }\n    }\n\n    results.orderedIdsByFolderId[folderId] = currentFolderOrderedIds;\n  });\n\n  prepared.folderIdsByChatId[chatId] = newFolderIds;\n\n  return deletedFolderIds;\n}\n\nfunction updateResults(affectedFolderIds: number[]) {\n  let wasUnreadCountersChanged = false;\n  let wasChatsCountChanged = false;\n  let wasUnreadChatsChanged = false;\n\n  Array.from(affectedFolderIds).forEach((folderId) => {\n    const { pinnedCount: newPinnedCount, orderedIds: newOrderedIds } = buildFolderOrderedIds(folderId);\n    // When signed out\n    if (!newOrderedIds) {\n      return;\n    }\n\n    const currentOrderedIds = results.orderedIdsByFolderId[folderId];\n    const currentPinnedCount = results.pinnedCountByFolderId[folderId];\n    const areOrderedIdsChanged = (\n      !currentOrderedIds\n      || currentPinnedCount === undefined || currentPinnedCount !== newPinnedCount\n      || prepared.isOrderedListJustPatched[folderId]\n      || !areSortedArraysEqual(newOrderedIds, currentOrderedIds)\n    );\n    if (areOrderedIdsChanged) {\n      prepared.isOrderedListJustPatched[folderId] = false;\n      results.orderedIdsByFolderId[folderId] = newOrderedIds;\n      results.pinnedCountByFolderId[folderId] = newPinnedCount;\n      callbacks.orderedIdsByFolderId[folderId]?.runCallbacks(newOrderedIds);\n    }\n\n    const currentChatsCount = results.chatsCountByFolderId[folderId];\n    const newChatsCount = newOrderedIds.length;\n    if (!wasChatsCountChanged) {\n      wasChatsCountChanged = currentChatsCount !== newChatsCount;\n    }\n    results.chatsCountByFolderId[folderId] = newChatsCount;\n\n    const currentUnreadCounters = results.unreadCountersByFolderId[folderId];\n    const newUnreadCounters = buildFolderUnreadCounters(folderId);\n    if (!wasUnreadCountersChanged) {\n      wasUnreadCountersChanged = (\n        !currentUnreadCounters || !arePropsShallowEqual(newUnreadCounters, currentUnreadCounters)\n      );\n    }\n    results.unreadCountersByFolderId[folderId] = newUnreadCounters;\n\n    const currentUnreadChats = results.unreadChatIdsByFolderId[folderId];\n    const newUnreadChats = buildFolderByUnreadChats(folderId);\n    if (!wasUnreadChatsChanged) {\n      wasUnreadChatsChanged = (\n        !currentUnreadChats || !areSortedArraysEqual(newUnreadChats, currentUnreadChats)\n      );\n    }\n    results.unreadChatIdsByFolderId[folderId] = newUnreadChats;\n  });\n\n  if (wasChatsCountChanged) {\n    // We need to update the entire object as it will be returned from a hook\n    const newValue = { ...results.chatsCountByFolderId };\n    results.chatsCountByFolderId = newValue;\n    callbacks.chatsCountByFolderId.runCallbacks(newValue);\n  }\n\n  if (wasUnreadCountersChanged) {\n    // We need to update the entire object as it will be returned from a hook\n    const newValue = { ...results.unreadCountersByFolderId };\n    results.unreadCountersByFolderId = newValue;\n    callbacks.unreadCountersByFolderId.runCallbacks(newValue);\n  }\n\n  if (wasUnreadChatsChanged) {\n    callbacks.unreadChatIdsByFolderId.runCallbacks(results.unreadChatIdsByFolderId);\n  }\n}\n\nfunction buildFolderOrderedIds(folderId: number) {\n  const folderSummary = prepared.folderSummariesById[folderId];\n  if (!folderSummary) {\n    return {};\n  }\n\n  const { orderedPinnedIds, pinnedChatIds } = folderSummary;\n  const {\n    chatIdsByFolderId: { [folderId]: chatIds },\n  } = prepared;\n  const {\n    orderedIdsByFolderId: { [folderId]: prevOrderedIds },\n  } = results;\n\n  const isSavedFolder = folderId === SAVED_FOLDER_ID;\n\n  const sortedPinnedIds = chatIds ? orderedPinnedIds?.filter((id) => chatIds.has(id)) : orderedPinnedIds;\n  const allListIds = prevOrderedIds || (chatIds && Array.from(chatIds)) || [];\n  const notPinnedIds = pinnedChatIds ? allListIds.filter((id) => !pinnedChatIds.has(id)) : allListIds;\n  const sortedNotPinnedIds = notPinnedIds.sort((chatId1: string, chatId2: string) => {\n    return getOrderKey(chatId2, isSavedFolder) - getOrderKey(chatId1, isSavedFolder);\n  });\n\n  return {\n    pinnedCount: sortedPinnedIds?.length || 0,\n    orderedIds: [\n      ...(sortedPinnedIds || []),\n      ...sortedNotPinnedIds,\n    ],\n  };\n}\n\nfunction buildFolderUnreadCounters(folderId: number) {\n  const {\n    chatSummariesById,\n  } = prepared;\n  const {\n    orderedIdsByFolderId: { [folderId]: orderedIds },\n  } = results;\n\n  return orderedIds!.reduce((newUnreadCounters, chatId) => {\n    const chatSummary = chatSummariesById.get(chatId);\n    if (!chatSummary) {\n      return newUnreadCounters;\n    }\n\n    if (chatSummary.isUnread) {\n      newUnreadCounters.chatsCount++;\n\n      if (chatSummary.unreadMentionsCount) {\n        newUnreadCounters.notificationsCount += chatSummary.unreadMentionsCount;\n      }\n\n      if (!chatSummary.isMuted) {\n        if (chatSummary.unreadCount) {\n          newUnreadCounters.notificationsCount += chatSummary.unreadCount;\n        } else if (!chatSummary.unreadMentionsCount) {\n          newUnreadCounters.notificationsCount += 1; // Manually marked unread\n        }\n      }\n    }\n\n    return newUnreadCounters;\n  }, {\n    chatsCount: 0,\n    notificationsCount: 0,\n  });\n}\n\nfunction buildFolderByUnreadChats(folderId: number) {\n  const { chatSummariesById } = prepared;\n  const { orderedIdsByFolderId: { [folderId]: orderedIds } } = results;\n\n  return orderedIds!.filter((chatId) => {\n    const chatSummary = chatSummariesById.get(chatId);\n    return chatSummary?.isUnread;\n  });\n}\n\nfunction buildInitials() {\n  return {\n    prevGlobal: {\n      foldersById: {},\n      chatsById: {},\n      usersById: {},\n      topicsInfoById: {},\n    },\n\n    prepared: {\n      folderSummariesById: {},\n      chatSummariesById: new Map(),\n      folderIdsByChatId: {},\n      chatIdsByFolderId: {},\n      isOrderedListJustPatched: {},\n    },\n\n    results: {\n      orderedIdsByFolderId: {},\n      pinnedCountByFolderId: {},\n      chatsCountByFolderId: {},\n      unreadCountersByFolderId: {},\n      unreadChatIdsByFolderId: {},\n    },\n\n    callbacks: {\n      orderedIdsByFolderId: {},\n      chatsCountByFolderId: createCallbackManager(),\n      unreadCountersByFolderId: createCallbackManager(),\n      unreadChatIdsByFolderId: createCallbackManager(),\n    },\n  };\n}\n\nfunction reset() {\n  const newInitials = buildInitials();\n\n  prevGlobal = newInitials.prevGlobal;\n  prepared = newInitials.prepared;\n  results = newInitials.results;\n  callbacks = newInitials.callbacks;\n}\n","const SITE_FONTS = ['400 1em Roboto', '500 1em Roboto', '500 1em \\'Numbers Rounded\\''];\n\nexport default function preloadFonts() {\n  if ('fonts' in document) {\n    return Promise.all(SITE_FONTS.map((font) => document.fonts.load(font)));\n  }\n\n  return undefined;\n}\n","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import { type TeactNode } from '../lib/teact/teact';\n\nimport type { LangFn } from './localization';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../config';\nimport { formatStarsAsIcon, formatTonAsIcon } from './localization/format';\n\nexport function convertCurrencyFromBaseUnit(amount: number, currency: string) {\n  return amount / 10 ** getCurrencyExp(currency);\n}\n\nexport function convertCurrencyToBaseUnit(amount: number, currency: string) {\n  return amount * 10 ** getCurrencyExp(currency);\n}\n\nexport function convertTonFromNanos(nanos: number): number {\n  return convertCurrencyFromBaseUnit(nanos, TON_CURRENCY_CODE);\n}\n\nexport function convertTonToNanos(ton: number): number {\n  return convertCurrencyToBaseUnit(ton, TON_CURRENCY_CODE);\n}\n\nexport function formatCurrency(\n  lang: LangFn,\n  totalPrice: number,\n  currency: string,\n  options?: {\n    shouldOmitFractions?: boolean;\n    iconClassName?: string;\n    asFontIcon?: boolean;\n  },\n): TeactNode {\n  const price = convertCurrencyFromBaseUnit(totalPrice, currency);\n\n  if (currency === STARS_CURRENCY_CODE) {\n    return formatStarsAsIcon(lang, price, { asFont: options?.asFontIcon, className: options?.iconClassName });\n  }\n\n  if (currency === TON_CURRENCY_CODE) {\n    return formatTonAsIcon(lang, price, { asFont: options?.asFontIcon, className: options?.iconClassName });\n  }\n\n  return formatCurrencyAsString(totalPrice, currency, lang.code, options);\n}\n\nexport function convertTonToUsd(amount: number, usdRate: number): number {\n  const tonInRegularUnits = convertTonFromNanos(amount);\n  return tonInRegularUnits * usdRate * 100;\n}\n\nexport function formatCurrencyAsString(\n  totalPrice: number,\n  currency: string,\n  locale: string = 'en',\n  options?: {\n    shouldOmitFractions?: boolean;\n  },\n) {\n  const price = convertCurrencyFromBaseUnit(totalPrice, currency);\n\n  if ((options?.shouldOmitFractions || currency === STARS_CURRENCY_CODE) && Number.isInteger(price)) {\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  }\n\n  if (currency === TON_CURRENCY_CODE) {\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 10,\n    }).format(price);\n  }\n\n  return new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency,\n  }).format(price);\n}\n\nfunction getCurrencyExp(currency: string) {\n  if (currency === TON_CURRENCY_CODE) {\n    return 9;\n  }\n  if (currency === 'CLF') {\n    return 4;\n  }\n  if (['BHD', 'IQD', 'JOD', 'KWD', 'LYD', 'OMR', 'TND'].includes(currency)) {\n    return 3;\n  }\n  if ([\n    'BIF', 'BYR', 'CLP', 'CVE', 'DJF', 'GNF', 'ISK', 'JPY', 'KMF', 'KRW', 'MGA', 'PYG', 'RWF', 'UGX', 'UYI',\n    'VND', 'VUV', 'XAF', 'XOF', 'XPF', STARS_CURRENCY_CODE,\n  ].includes(currency)) {\n    return 0;\n  }\n  if (currency === 'MRO') {\n    return 1;\n  }\n  return 2;\n}\n","import blue from '../assets/icons/forumTopic/blue.svg';\nimport green from '../assets/icons/forumTopic/green.svg';\nimport grey from '../assets/icons/forumTopic/grey.svg';\nimport red from '../assets/icons/forumTopic/red.svg';\nimport rose from '../assets/icons/forumTopic/rose.svg';\nimport violet from '../assets/icons/forumTopic/violet.svg';\nimport yellow from '../assets/icons/forumTopic/yellow.svg';\n\n// https://github.com/telegramdesktop/tdesktop/blob/1aece79a471d99a8b63d826b1bce1f36a04d7293/Telegram/SourceFiles/data/data_forum_topic.cpp#L50\nconst TOPIC_MAPPING: Record<number, [string, string]> = {\n  0x6FB9F0: [blue, 'blue'],\n  0xFFD67E: [yellow, 'yellow'],\n  0xCB86DB: [violet, 'violet'],\n  0x8EEE98: [green, 'green'],\n  0xFF93B2: [rose, 'rose'],\n  0xFB6F5F: [red, 'red'],\n};\n\nexport function getTopicColors() {\n  return Object.keys(TOPIC_MAPPING).map((key) => parseInt(key, 10));\n}\n\nexport function getTopicDefaultIcon(iconColor?: number) {\n  return (iconColor && TOPIC_MAPPING[iconColor][0]) || grey;\n}\n\nexport function getTopicColorCssVariable(iconColor?: number) {\n  const color = (iconColor && TOPIC_MAPPING[iconColor][1]) || 'grey';\n  return `--color-topic-${color}`;\n}\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n\nexport function generateUniqueNumberId() {\n  const timestamp = Date.now() % 100000000;\n  const random = Math.floor(Math.random() * 1000);\n  return timestamp + random;\n}\n","import type { ApiError, ApiFieldError } from '../api/types';\n\nimport { DEBUG } from '../config';\n\nconst READABLE_ERROR_MESSAGES: Record<string, string> = {\n  CHAT_RESTRICTED: 'You can\\'t send messages in this chat, you were restricted',\n  CHAT_SEND_POLL_FORBIDDEN: 'You can\\'t create polls in this chat',\n  CHAT_SEND_STICKERS_FORBIDDEN: 'You can\\'t send stickers in this chat',\n  CHAT_SEND_GIFS_FORBIDDEN: 'You can\\'t send gifs in this chat',\n  CHAT_SEND_MEDIA_FORBIDDEN: 'You can\\'t send media in this chat',\n  CHAT_LINK_EXISTS: 'The chat is public, you can\\'t hide the history to new users',\n  // eslint-disable-next-line @stylistic/max-len\n  SLOWMODE_WAIT_X: 'Slowmode is enabled in this chat: you must wait for the specified number of seconds before sending another message to the chat.',\n  USER_BANNED_IN_CHANNEL: 'You\\'re banned from sending messages in supergroups / channels',\n  USER_IS_BLOCKED: 'You were blocked by this user',\n  YOU_BLOCKED_USER: 'You blocked this user',\n  IMAGE_PROCESS_FAILED: 'Failure while processing image',\n  MEDIA_EMPTY: 'The provided media object is invalid',\n  MEDIA_GROUPED_INVALID: 'Failed to replace album media',\n  MEDIA_NEW_INVALID: 'Failed to replace new media',\n  MESSAGE_NOT_MODIFIED: 'Message not modified. The new content is identical to the current one.',\n  MEDIA_INVALID: 'Media invalid',\n  PASSWORD_HASH_INVALID: 'Incorrect password',\n  PHOTO_EXT_INVALID: 'The extension of the photo is invalid',\n  PHOTO_INVALID_DIMENSIONS: 'The photo dimensions are invalid',\n  PHOTO_SAVE_FILE_INVALID: 'Internal issues, try again later',\n  // eslint-disable-next-line @stylistic/max-len\n  MESSAGE_DELETE_FORBIDDEN: 'You can\\'t delete one of the messages you tried to delete, most likely because it is a service message.',\n  MESSAGE_POLL_CLOSED: 'Poll closed',\n  MESSAGE_EDIT_TIME_EXPIRED: 'You can\\'t edit this message anymore.',\n  PINNED_DIALOGS_TOO_MUCH: 'Sorry, you can only pin 5 chats to the top',\n  CHANNEL_PRIVATE: 'This channel is private',\n  MEDIA_CAPTION_TOO_LONG: 'The provided caption is too long',\n  ADDRESS_STREET_LINE1_INVALID: 'The address you provided is not valid',\n  ADDRESS_STREET_LINE2_INVALID: 'The address you provided is not valid',\n  ADDRESS_CITY_INVALID: 'The city you provided is not valid',\n  ADDRESS_COUNTRY_INVALID: 'The country you provided is not valid',\n  ADDRESS_POSTCODE_INVALID: 'The postcode you provided is not valid',\n  ADDRESS_STATE_INVALID: 'The state you provided is not valid',\n  REQ_INFO_NAME_INVALID: 'The name you provided is not valid',\n  REQ_INFO_PHONE_INVALID: 'The phone you provided is not valid',\n  REQ_INFO_EMAIL_INVALID: 'The email you provided is not valid',\n  // TODO Bring back after fixing the weird bug\n  // CHANNEL_INVALID: 'An error occurred. Please try again later',\n  LINK_NOT_MODIFIED: 'This discussion is already linked to the channel',\n  MESSAGE_TOO_LONG: 'Message is too long',\n\n  // Non-API errors\n  // eslint-disable-next-line @stylistic/max-len\n  SERVICE_WORKER_DISABLED: 'Service Worker is disabled. Streaming media may not be supported. Try reloading the page without holding <Shift> key',\n  // eslint-disable-next-line @stylistic/max-len\n  MESSAGE_TOO_LONG_PLEASE_REMOVE_CHARACTERS: 'The provided message is too long. Please remove {EXTRA_CHARS_COUNT} character{PLURAL_S}.',\n  // eslint-disable-next-line @stylistic/max-len\n  FRESH_RESET_AUTHORISATION_FORBIDDEN: 'You can’t logout other sessions if less than 24 hours have passed since you logged on the current session',\n\n  BOTS_TOO_MUCH: 'There are too many bots in this chat/channel',\n  BOT_GROUPS_BLOCKED: 'This bot can\\'t be added to groups',\n  USERS_TOO_MUCH: 'The maximum number of users has been exceeded',\n  USER_CHANNELS_TOO_MUCH: 'One of the users you tried to add is already in too many channels/supergroups',\n  USER_KICKED: 'This user was kicked from this supergroup/channel',\n  USER_NOT_MUTUAL_CONTACT: 'The provided user is not a mutual contact',\n  USER_PRIVACY_RESTRICTED: 'The user\\'s privacy settings do not allow you to do this',\n  INVITE_HASH_EMPTY: 'The invite hash is empty',\n  INVITE_HASH_EXPIRED: 'The invite link has expired',\n  INVITE_HASH_INVALID: 'The invite hash is invalid',\n  CHANNELS_TOO_MUCH: 'You have joined too many channels/supergroups',\n  USER_ALREADY_PARTICIPANT: 'You already in the group',\n  SCHEDULE_DATE_INVALID: 'Invalid schedule date provided',\n  WALLPAPER_DIMENSIONS_INVALID: 'The wallpaper dimensions are invalid, please select another file',\n  ADMINS_TOO_MUCH: 'There are too many admins',\n  ADMIN_RANK_EMOJI_NOT_ALLOWED: 'An admin rank cannot contain emojis',\n  ADMIN_RANK_INVALID: 'The specified admin rank is invalid',\n  FRESH_CHANGE_ADMINS_FORBIDDEN: 'You were just elected admin, you can\\'t add or modify other admins yet',\n  INPUT_USER_DEACTIVATED: 'Can\\'t do this action to a deleted account',\n  BOT_PRECHECKOUT_TIMEOUT: 'The request for payment has expired',\n  PROVIDER_ACCOUNT_TIMEOUT: 'Request to the payment provider has expired',\n\n  STARGIFT_CONVERT_TOO_OLD: 'This gift no longer can be converted to Stars',\n  SUBSCRIPTION_ALREADY_ACTIVE: 'You are already subscribed',\n\n  PEERS_LIST_EMPTY: 'No chats are added to the list',\n\n  PAID_MEDIA_FORBIDDEN: 'You can\\'t send paid media in this chat',\n\n  USER_DISALLOWED_STARGIFTS: 'User is not accepting gifts',\n};\n\nif (DEBUG) {\n  READABLE_ERROR_MESSAGES.CHAT_WRITE_FORBIDDEN = 'You can\\'t write in this chat';\n  READABLE_ERROR_MESSAGES.CHAT_ADMIN_REQUIRED = 'You must be an admin in this chat to do this';\n}\n\nexport const SHIPPING_ERRORS: Record<string, ApiFieldError> = {\n  ADDRESS_STREET_LINE1_INVALID: {\n    field: 'streetLine1',\n    message: 'Incorrect street address',\n  },\n  ADDRESS_STREET_LINE2_INVALID: {\n    field: 'streetLine2',\n    message: 'Incorrect street address',\n  },\n  ADDRESS_CITY_INVALID: {\n    field: 'city',\n    message: 'Incorrect city',\n  },\n  ADDRESS_COUNTRY_INVALID: {\n    field: 'countryIso2',\n    message: 'Incorrect country',\n  },\n  ADDRESS_POSTCODE_INVALID: {\n    field: 'postCode',\n    message: 'Incorrect post code',\n  },\n  ADDRESS_STATE_INVALID: {\n    field: 'state',\n    message: 'Incorrect state',\n  },\n  REQ_INFO_NAME_INVALID: {\n    field: 'fullName',\n    message: 'Incorrect name',\n  },\n  REQ_INFO_PHONE_INVALID: {\n    field: 'phone',\n    message: 'Incorrect phone',\n  },\n  REQ_INFO_EMAIL_INVALID: {\n    field: 'email',\n    message: 'Incorrect email',\n  },\n};\n\nconst FINAL_PAYMENT_ERRORS = new Set([\n  'BOT_PRECHECKOUT_FAILED',\n  'PAYMENT_FAILED',\n]);\n\nexport default function getReadableErrorText(error: ApiError) {\n  const { message, isSlowMode, textParams } = error;\n  // Currently, Telegram API doesn't return `SLOWMODE_WAIT_X` error as described in the docs\n  if (isSlowMode) {\n    const extraPartIndex = message.indexOf(' (caused by');\n    return extraPartIndex > 0 ? message.substring(0, extraPartIndex) : message;\n  }\n  let errorMessage = READABLE_ERROR_MESSAGES[message];\n  if (errorMessage && textParams) {\n    errorMessage = Object.keys(textParams).reduce((acc, current) => {\n      return acc.replace(current, textParams[current]);\n    }, errorMessage);\n  }\n  return errorMessage;\n}\n\nexport function getShippingError(error: ApiError): ApiFieldError | undefined {\n  return SHIPPING_ERRORS[error.message];\n}\n\nexport function shouldClosePaymentModal(error: ApiError): boolean {\n  return FINAL_PAYMENT_ERRORS.has(error.message);\n}\n","import {\n  DEBUG,\n  DEBUG_ALERT_MSG,\n  IS_BYPASS_AUTH,\n  IS_WALLET_CREATED,\n} from \"../config\";\nimport { isCurrentTabMaster } from \"./establishMultitabRole\";\nimport { throttle } from \"./schedulers\";\n\nlet showError = true;\nlet error: Error | undefined;\n\nwindow.addEventListener(\"error\", handleErrorEvent);\nwindow.addEventListener(\"unhandledrejection\", handleErrorEvent);\n\nif (DEBUG) {\n  window.addEventListener(\"focus\", () => {\n    if (!isCurrentTabMaster()) {\n      return;\n    }\n    showError = true;\n    if (error) {\n      window.alert(getErrorMessage(error));\n      error = undefined;\n    }\n  });\n  window.addEventListener(\"blur\", () => {\n    if (!isCurrentTabMaster()) {\n      return;\n    }\n    showError = false;\n  });\n}\n\nconst throttleError = throttle((err) => {\n  if (showError) {\n    window.alert(getErrorMessage(err));\n  } else {\n    error = err;\n  }\n}, 1500);\n\nexport function handleError(err: Error) {\n  // Suppress errors in bypass auth mode (except for console logging)\n  if (IS_BYPASS_AUTH) {\n    // eslint-disable-next-line no-console\n    console.log(\">>> SUPPRESSING ERROR - BYPASS AUTH MODE:\", err);\n    return;\n  }\n\n  // Suppress errors in wallet created dev mode (except for console logging)\n  if (IS_WALLET_CREATED) {\n    // eslint-disable-next-line no-console\n    console.log(\">>> SUPPRESSING ERROR - WALLET CREATED DEV MODE:\", err);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.error(err);\n  if (DEBUG) {\n    throttleError(err);\n  }\n}\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (\n    e instanceof ErrorEvent &&\n    e.message === \"ResizeObserver loop limit exceeded\"\n  ) {\n    return;\n  }\n\n  e.preventDefault();\n  handleError(e instanceof ErrorEvent ? e.error || e.message : e.reason);\n}\n\nfunction getErrorMessage(err: Error) {\n  return `${DEBUG_ALERT_MSG}\\n\\n${err?.message || err}\\n${err?.stack}`;\n}\n","import { getAverageColor, getColorLuma } from './colors';\n\nconst LUMA_THRESHOLD = 240;\n\nexport function scaleImage(image: string | Blob, ratio: number, outputType: string = 'image/png'): Promise<string> {\n  const url = image instanceof Blob ? URL.createObjectURL(image) : image;\n  const img = new Image();\n  return new Promise((resolve) => {\n    img.onload = () => {\n      scale(img, img.width * ratio, img.height * ratio, outputType)\n        .then((blob) => {\n          if (!blob) throw new Error('Image resize failed!');\n          return URL.createObjectURL(blob);\n        })\n        .then(resolve)\n        .finally(() => {\n          if (image instanceof Blob) {\n            URL.revokeObjectURL(url); // Revoke blob url that we created\n          }\n        });\n    };\n    img.src = url;\n  });\n}\n\nexport function resizeImage(\n  image: string | Blob, width: number, height: number, outputType: string = 'image/png',\n): Promise<string> {\n  const url = image instanceof Blob ? URL.createObjectURL(image) : image;\n  const img = new Image();\n  return new Promise((resolve) => {\n    img.onload = () => {\n      scale(img, width, height, outputType)\n        .then((blob) => {\n          if (!blob) throw new Error('Image resize failed!');\n          return URL.createObjectURL(blob);\n        })\n        .then(resolve)\n        .finally(() => {\n          if (image instanceof Blob) {\n            URL.revokeObjectURL(url); // Revoke blob url that we created\n          }\n        });\n    };\n    img.src = url;\n  });\n}\n\nasync function scale(\n  img: HTMLImageElement, width: number, height: number, outputType: string = 'image/png',\n): Promise<Blob | null> {\n  // Safari does not have built-in resize method with quality control\n  if ('createImageBitmap' in window) {\n    try {\n      const bitmap = await window.createImageBitmap(img,\n        { resizeWidth: width, resizeHeight: height, resizeQuality: 'high' });\n      if (bitmap.height !== height || bitmap.width !== width) {\n        throw new Error('Image bitmap resize not supported!'); // FF93 added support for options, but not resize\n      }\n      const averageColor = await getAverageColor(img.src);\n      const fillColor = getColorLuma(averageColor) < LUMA_THRESHOLD ? '#fff' : '#000';\n      return await new Promise((res) => {\n        const canvas = document.createElement('canvas');\n        canvas.width = bitmap.width;\n        canvas.height = bitmap.height;\n        const ctx2D = canvas.getContext('2d')!;\n        ctx2D.fillStyle = fillColor;\n        ctx2D.fillRect(0, 0, canvas.width, canvas.height);\n        const ctx = canvas.getContext('bitmaprenderer');\n        if (ctx) {\n          ctx.transferFromImageBitmap(bitmap);\n        } else {\n          ctx2D.drawImage(bitmap, 0, 0);\n        }\n        canvas.toBlob(res, outputType);\n      });\n    } catch (e) {\n      // Fallback. Firefox below 93 does not recognize `createImageBitmap` with 2 parameters\n      return steppedScale(img, width, height, undefined, outputType);\n    }\n  } else {\n    return steppedScale(img, width, height, undefined, outputType);\n  }\n}\n\nasync function steppedScale(\n  img: HTMLImageElement, width: number, height: number, step: number = 0.5, outputType: string = 'image/png',\n): Promise<Blob | null> {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d')!;\n  const oc = document.createElement('canvas');\n  const octx = oc.getContext('2d')!;\n\n  canvas.width = width;\n  canvas.height = height;\n\n  if (img.width * step > width) { // For performance avoid unnecessary drawing\n    const mul = 1 / step;\n    let cur = {\n      width: Math.floor(img.width * step),\n      height: Math.floor(img.height * step),\n    };\n\n    oc.width = cur.width;\n    oc.height = cur.height;\n\n    octx.drawImage(img, 0, 0, cur.width, cur.height);\n\n    while (cur.width * step > width) {\n      cur = {\n        width: Math.floor(cur.width * step),\n        height: Math.floor(cur.height * step),\n      };\n      octx.drawImage(oc, 0, 0, cur.width * mul, cur.height * mul, 0, 0, cur.width, cur.height);\n    }\n\n    ctx.drawImage(oc, 0, 0, cur.width, cur.height, 0, 0, canvas.width, canvas.height);\n  } else {\n    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n  }\n\n  const averageColor = await getAverageColor(img.src);\n  const fillColor = getColorLuma(averageColor) < LUMA_THRESHOLD ? '#fff' : '#000';\n  ctx.fillStyle = fillColor;\n  ctx.globalCompositeOperation = 'destination-over';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  return new Promise((resolve) => {\n    canvas.toBlob(resolve, outputType);\n  });\n}\n","import type { GlobalState } from \"../global/types\";\n\nimport { IS_MOCKED_CLIENT, IS_WALLET_CREATED } from \"../config\";\nimport { loadCache, loadCachedSharedState } from \"../global/cache\";\nimport { getGlobal, setGlobal } from \"../global/index\";\nimport { INITIAL_GLOBAL_STATE } from \"../global/initialState\";\nimport { updatePasscodeSettings } from \"../global/reducers\";\nimport { cloneDeep } from \"./iteratees\";\nimport { clearStoredSession } from \"./sessions\";\n\nexport async function initGlobal(\n  force: boolean = false,\n  prevGlobal?: GlobalState\n) {\n  prevGlobal = prevGlobal || getGlobal();\n  if (!force && \"byTabId\" in prevGlobal) {\n    return;\n  }\n\n  const initial = cloneDeep(INITIAL_GLOBAL_STATE);\n  const cache = await loadCache(initial);\n  let global = cache || initial;\n  if (IS_MOCKED_CLIENT) global.authState = \"authorizationStateReady\";\n  if (IS_WALLET_CREATED) global.authState = \"authorizationStateWalletCreated\";\n\n  const { hasPasscode, isScreenLocked } = global.passcode;\n  if (hasPasscode && !isScreenLocked) {\n    global = updatePasscodeSettings(global, {\n      isScreenLocked: true,\n    });\n\n    clearStoredSession();\n  }\n\n  if (force) {\n    global.byTabId = prevGlobal.byTabId;\n  }\n\n  if (!cache) {\n    // Try loading shared state separately\n    const storedSharedState = await loadCachedSharedState();\n    if (storedSharedState) {\n      global.sharedState = storedSharedState;\n    }\n  }\n\n  setGlobal(global);\n}\n","import { getActions } from '../global';\n\nlet promptInstall: () => Promise<void>;\n\nexport function setupBeforeInstallPrompt() {\n  window.addEventListener('beforeinstallprompt', (e: any) => {\n    promptInstall = async () => {\n      e.prompt();\n      const userChoice = await e.userChoice;\n      const isInstalled = userChoice.outcome === 'accepted';\n\n      if (!isInstalled) return;\n      getActions().setInstallPrompt({ canInstall: false });\n    };\n    getActions().setInstallPrompt({ canInstall: true });\n  });\n}\n\nexport function getPromptInstall() {\n  return promptInstall;\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ntype OrderCallback<T> = (member: T) => unknown;\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T) {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function buildCollectionByCallback<T extends AnyLiteral, K extends number | string, R>(\n  collection: T[],\n  callback: (member: T) => [K, R],\n) {\n  return collection.reduce((byKey: Record<K, R>, member: T) => {\n    const [key, value] = callback(member);\n    byKey[key] = value;\n\n    return byKey;\n  }, {} as Record<K, R>);\n}\n\nexport function mapValues<R, M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    // @ts-expect-error Rely on the JS to handle the comparison\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function uniqueByField<T>(array: T[], field: keyof T): T[] {\n  return [...new Map(array.map((item) => [item[field], item])).values()];\n}\n\nexport function compact<T>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function areSortedArraysIntersecting(array1: any[], array2: any[]) {\n  return array1[0] <= array2[array2.length - 1] && array1[array1.length - 1] >= array2[0];\n}\nexport function isInsideSortedArrayRange(value: any, array: any[]) {\n  return array[0] <= value && value <= array[array.length - 1];\n}\n\nexport function findIntersectionWithSet<T>(array: T[], set: Set<T>): T[] {\n  return array.filter((a) => set.has(a));\n}\n/**\n * Exlude elements from base array. Both arrays should be sorted in same order\n * @param base\n * @param toExclude\n * @returns New array without excluded elements\n */\nexport function excludeSortedArray<T>(base: T[], toExclude: T[]) {\n  if (!base?.length) return base;\n\n  const result: T[] = [];\n\n  let excludeIndex = 0;\n\n  for (let i = 0; i < base.length; i++) {\n    if (toExclude[excludeIndex] === base[i]) {\n      excludeIndex += 1;\n    } else {\n      result.push(base[i]);\n    }\n  }\n\n  return result;\n}\n\nexport function split<T>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function partition<T>(\n  array: T[], filter: (value: T, index: number, array: T[]) => boolean | undefined,\n): [T[], T[]] {\n  const pass: T[] = [];\n  const fail: T[] = [];\n\n  array.forEach((e, idx, arr) => (filter(e, idx, arr) ? pass : fail).push(e));\n\n  return [pass, fail];\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function compareFields<T>(a: T, b: T) {\n  return Number(b) - Number(a);\n}\n","import type { ApiMessage, ApiSponsoredMessage } from '../../api/types';\n\nexport type MessageKey = `msg${string}-${number}`;\n\nexport function getMessageKey(message: ApiMessage | ApiSponsoredMessage): MessageKey {\n  const {\n    chatId,\n  } = message;\n\n  if ('randomId' in message) {\n    return buildMessageKey(chatId, Number(message.randomId));\n  }\n  return buildMessageKey(chatId, message.previousLocalId || message.id);\n}\n\nexport function getMessageServerKey(message: ApiMessage): MessageKey | undefined {\n  if (isLocalMessageId(message.id)) {\n    return undefined;\n  }\n  const { chatId, id } = message;\n  return buildMessageKey(chatId, id);\n}\n\nexport function buildMessageKey(chatId: string, msgId: number): MessageKey {\n  return `msg${chatId}-${msgId}`;\n}\n\nexport function parseMessageKey(key: MessageKey) {\n  const match = key.match(/^msg(-?\\d+)-(\\d+)/)!;\n\n  return { chatId: match[1], messageId: Number(match[2]) };\n}\n\nexport function isLocalMessageId(id: number) {\n  return !Number.isInteger(id);\n}\n","import type { ApiMessage } from '../../api/types';\n\nexport type SearchResultKey = `${string}_${number}`;\n\nexport function getSearchResultKey(message: ApiMessage): SearchResultKey {\n  const { chatId, id } = message;\n\n  return `${chatId}_${id}`;\n}\n\nexport function parseSearchResultKey(key: SearchResultKey) {\n  const [chatId, messageId] = key.split('_');\n\n  return [chatId, Number(messageId)] as const;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) <= Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","import type { LangFn } from './types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../config';\nimport { convertCurrencyFromBaseUnit } from '../../util/formatCurrency';\nimport buildClassName from '../buildClassName';\n\nimport Icon from '../../components/common/icons/Icon';\nimport StarIcon from '../../components/common/icons/StarIcon';\n\nexport function formatStarsAsText(lang: LangFn, amount: number) {\n  return lang('StarsAmountText', { amount }, { pluralValue: amount });\n}\n\nexport function formatTonAsText(lang: LangFn, amount: number) {\n  return lang('TonAmountText', { amount: lang.preciseNumber(amount) }, { pluralValue: amount });\n}\n\nexport function formatTonAsIcon(lang: LangFn, amount: number | string, options?: {\n  asFont?: boolean; className?: string; containerClassName?: string; shouldConvertFromNanos?: boolean; }) {\n  const { className, containerClassName, shouldConvertFromNanos } = options || {};\n  const formattedAmount = shouldConvertFromNanos ? convertCurrencyFromBaseUnit(Number(amount), 'TON') : amount;\n  const icon = <Icon name=\"toncoin\" className={buildClassName('ton-amount-icon', className)} />;\n\n  if (containerClassName) {\n    return (\n      <span className={containerClassName}>\n        {lang('TonAmount', { amount: formattedAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            '💎': icon,\n          },\n        })}\n      </span>\n    );\n  }\n\n  return lang('TonAmount', { amount: formattedAmount }, {\n    withNodes: true,\n    specialReplacement: {\n      '💎': icon,\n    },\n  });\n}\n\nexport function formatStarsAsIcon(lang: LangFn, amount: number | string, options?: {\n  asFont?: boolean; className?: string; containerClassName?: string; }) {\n  const { asFont, className, containerClassName } = options || {};\n  const icon = asFont\n    ? <Icon name=\"star\" className={buildClassName('star-amount-icon', className)} />\n    : <StarIcon type=\"gold\" className={buildClassName('star-amount-icon', className)} size=\"adaptive\" />;\n\n  if (containerClassName) {\n    return (\n      <span className={containerClassName}>\n        {lang('StarsAmount', { amount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: icon,\n          },\n        })}\n      </span>\n    );\n  }\n\n  return lang('StarsAmount', { amount }, {\n    withNodes: true,\n    specialReplacement: {\n      [STARS_ICON_PLACEHOLDER]: icon,\n    },\n  });\n}\n","import type { TeactNode } from '../../lib/teact/teact';\n\nimport type {\n  ApiLanguage,\n  CachedLangData,\n  LangPack,\n  LangPackStringValue,\n} from '../../api/types';\nimport type { LangKey, LangVariable } from '../../types/language';\nimport {\n  type AdvancedLangFnOptions,\n  type AdvancedLangFnOptionsWithPlural,\n  type AdvancedLangFnParameters,\n  areAdvancedLangFnOptions,\n  isDeletedLangString,\n  isPluralLangString,\n  type LangFn,\n  type LangFnOptions,\n  type LangFnOptionsWithPlural,\n  type LangFnParameters,\n  type LangFormatters,\n  type RegularLangFnParameters,\n} from './types';\n\nimport { DEBUG, LANG_PACK } from '../../config';\nimport { callApi } from '../../api/gramjs';\nimport renderText from '../../components/common/helpers/renderText';\nimport { IS_INTL_LIST_FORMAT_SUPPORTED } from '../browser/globalEnvironment';\nimport { MAIN_IDB_STORE } from '../browser/idb';\nimport { getBasicListFormat } from '../browser/intlListFormat';\nimport { notifyLangpackUpdate } from '../browser/multitab';\nimport { createCallbackManager } from '../callbacks';\nimport readFallbackStrings from '../data/readFallbackStrings';\nimport { initialEstablishmentPromise, isCurrentTabMaster } from '../establishMultitabRole';\nimport { omit, unique } from '../iteratees';\nimport { replaceInStringsWithTeact } from '../replaceWithTeact';\nimport { fastRaf } from '../schedulers';\n\nimport Deferred from '../Deferred';\nimport LimitedMap from '../primitives/LimitedMap';\n\nimport initialStrings from '../../assets/localization/initialStrings';\n\nconst LANGPACK_STORE_PREFIX = 'langpack-';\nconst FORMATTERS_FALLBACK_LANG = 'en';\n\nconst STRING_CACHE_LIMIT = 400;\nconst TRANSLATION_CACHE = new LimitedMap<string, string>(STRING_CACHE_LIMIT);\n\nlet language: ApiLanguage | undefined;\nlet formatters: LangFormatters | undefined;\n\nlet langPack: LangPack | undefined;\nlet fallbackLangPack: LangPack | undefined;\n\nlet translationFn = createTranslationFn();\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nlet areCallbacksScheduled = false;\nfunction scheduleCallbacks() {\n  if (areCallbacksScheduled) return;\n  areCallbacksScheduled = true;\n  fastRaf(() => {\n    runCallbacks();\n    areCallbacksScheduled = false;\n  });\n}\n\nconst localizationReady = new Deferred<void>();\n\nfunction loadCachedLangData(langCode: string) {\n  return MAIN_IDB_STORE.get<CachedLangData>(`${LANGPACK_STORE_PREFIX}${langCode}`);\n}\n\nfunction cacheLangData(data: CachedLangData) {\n  notifyLangpackUpdate(data.language.langCode);\n  return MAIN_IDB_STORE.set(`${LANGPACK_STORE_PREFIX}${data.language.langCode}`, data);\n}\n\nlet fallbackLoadPromise: Promise<CachedLangData> | undefined;\nasync function loadFallbackPack() {\n  if (fallbackLangPack || fallbackLoadPromise) return;\n  fallbackLoadPromise = readFallbackStrings();\n  const fallbackData = await fallbackLoadPromise;\n  fallbackLangPack = fallbackData.langPack;\n\n  TRANSLATION_CACHE.clear();\n\n  if (!language) {\n    updateLanguage(fallbackData.language);\n  } else {\n    translationFn = createTranslationFn();\n    scheduleCallbacks();\n  }\n}\n\nasync function fetchDifference() {\n  if (!langPack || !language) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[Localization] Trying to fetch difference without loaded data');\n    }\n    return;\n  }\n\n  await initialEstablishmentPromise;\n  if (!isCurrentTabMaster()) return;\n\n  const result = await callApi('fetchLangDifference', {\n    langPack: LANG_PACK,\n    langCode: langPack.langCode,\n    fromVersion: langPack.version,\n  });\n  if (!result) return;\n\n  applyLangPackDifference(result.version, result.strings, result.keysToRemove);\n}\n\nexport function applyLangPackDifference(\n  version: number, strings: Record<string, LangPackStringValue>, keysToRemove: string[],\n) {\n  if (!langPack || !language || version === langPack.version) return;\n\n  const newLangPack = {\n    ...langPack,\n    version,\n    strings: {\n      ...omit(langPack.strings, keysToRemove),\n      ...strings,\n    },\n  };\n  updateLangPack(newLangPack);\n\n  cacheLangData({\n    langPack: newLangPack,\n    language,\n  });\n  scheduleCallbacks();\n}\n\nfunction updateLanguage(newLang: ApiLanguage) {\n  language = newLang;\n\n  createFormatters();\n\n  translationFn = createTranslationFn();\n\n  scheduleCallbacks();\n}\n\nfunction createFormatters() {\n  if (!language) return;\n  const langCode = language.pluralCode;\n  const listFormatFallback = getBasicListFormat();\n\n  function createListFormat(lang: string, type: 'conjunction' | 'disjunction') {\n    return IS_INTL_LIST_FORMAT_SUPPORTED ? new Intl.ListFormat(lang, { type }) : listFormatFallback;\n  }\n\n  try {\n    formatters = {\n      pluralRules: new Intl.PluralRules(langCode),\n      region: new Intl.DisplayNames(langCode, { type: 'region' }),\n      conjunction: createListFormat(langCode, 'conjunction'),\n      disjunction: createListFormat(langCode, 'disjunction'),\n      number: new Intl.NumberFormat(langCode),\n      preciseNumber: new Intl.NumberFormat(langCode, {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 10,\n      }),\n    };\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.warn('Failed to create formatters:', e);\n    formatters = {\n      pluralRules: new Intl.PluralRules(FORMATTERS_FALLBACK_LANG),\n      region: new Intl.DisplayNames(FORMATTERS_FALLBACK_LANG, { type: 'region' }),\n      conjunction: createListFormat(FORMATTERS_FALLBACK_LANG, 'conjunction'),\n      disjunction: createListFormat(FORMATTERS_FALLBACK_LANG, 'disjunction'),\n      number: new Intl.NumberFormat(FORMATTERS_FALLBACK_LANG),\n      preciseNumber: new Intl.NumberFormat(FORMATTERS_FALLBACK_LANG, {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 10,\n      }),\n    };\n  }\n}\n\nfunction updateLangPack(newLangPack: LangPack) {\n  langPack = newLangPack;\n\n  TRANSLATION_CACHE.clear();\n\n  scheduleCallbacks();\n}\n\nexport async function initLocalization(langCode: string, canLoadFromServer?: boolean) {\n  if (language) return;\n\n  const cachedData = await loadCachedLangData(langCode);\n  if (cachedData) {\n    langPack = cachedData.langPack;\n    language = cachedData.language;\n    createFormatters();\n\n    fetchDifference();\n  } else if (canLoadFromServer) {\n    await loadAndChangeLanguage(langCode);\n  }\n\n  // Always start loading fallback pack in the background. Some languages may not have every string translated.\n  loadFallbackPack();\n\n  translationFn = createTranslationFn();\n  scheduleCallbacks();\n  localizationReady.resolve();\n}\n\nexport async function refreshFromCache(langCode: string) {\n  if (isCurrentTabMaster()) return;\n\n  const cachedData = await loadCachedLangData(langCode);\n  if (cachedData) {\n    updateLangPack(cachedData.langPack);\n    updateLanguage(cachedData.language);\n  }\n}\n\nexport async function loadAndChangeLanguage(langCode: string, shouldCheckCache?: boolean) {\n  if (shouldCheckCache) { // Can be removed when old lang provider is phased out. Cache is checked in `initLocalization`.\n    const cachedData = await loadCachedLangData(langCode);\n    if (cachedData) {\n      return changeLanguage(cachedData.language);\n    }\n  }\n\n  await initialEstablishmentPromise;\n  if (!isCurrentTabMaster()) return undefined;\n\n  const remoteLanguage = await callApi('fetchLanguage', {\n    langPack: LANG_PACK,\n    langCode,\n  });\n\n  if (!remoteLanguage) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to fetch language', langCode);\n    }\n    return undefined;\n  }\n\n  return changeLanguage(remoteLanguage);\n}\n\nexport function requestLangPackDifference(langCode: string) {\n  if (language?.langCode !== langCode) return;\n  fetchDifference();\n}\n\nexport async function changeLanguage(newLanguage: ApiLanguage) {\n  if (langPack && language?.langCode === newLanguage.langCode) return;\n\n  const cachedData = await loadCachedLangData(newLanguage.langCode);\n  if (cachedData) {\n    updateLangPack(cachedData.langPack);\n    updateLanguage(cachedData.language);\n\n    fetchDifference();\n  } else {\n    await initialEstablishmentPromise;\n    if (!isCurrentTabMaster()) return;\n    const remoteLangPack = await callApi('fetchLangPack', {\n      langPack: LANG_PACK,\n      langCode: newLanguage.langCode,\n    });\n    if (!remoteLangPack) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to fetch lang pack');\n      return;\n    }\n\n    updateLangPack({\n      langCode: newLanguage.langCode,\n      version: remoteLangPack.version,\n      strings: remoteLangPack.strings,\n    });\n    updateLanguage(newLanguage);\n\n    cacheLangData({\n      langPack: langPack!,\n      language: newLanguage,\n    });\n  }\n\n  document.documentElement.lang = newLanguage.baseLangCode || newLanguage.langCode;\n\n  scheduleCallbacks();\n}\n\nfunction createTranslationFn(): LangFn {\n  const fn: LangFn = ((\n    key: LangKey,\n    variables: Record<string, unknown> | undefined,\n    options: LangFnOptions | AdvancedLangFnOptions | undefined,\n  ) => {\n    if (options && areAdvancedLangFnOptions(options)) {\n      return processTranslationAdvanced(key, variables as Record<string, TeactNode>, options);\n    }\n    return processTranslation(key, variables as Record<string, string | number>, options);\n  }) as LangFn;\n  fn.rawCode = language?.langCode || FORMATTERS_FALLBACK_LANG;\n  fn.isRtl = language?.isRtl;\n  fn.code = language?.pluralCode || FORMATTERS_FALLBACK_LANG;\n  fn.with = ({ key, variables, options }: LangFnParameters) => {\n    if (options && areAdvancedLangFnOptions(options)) {\n      return processTranslationAdvanced(key, variables as Record<string, TeactNode | undefined>, options);\n    }\n    return processTranslation(key, variables as Record<string, LangVariable>, options);\n  };\n  fn.withRegular = ({ key, variables, options }: RegularLangFnParameters) => {\n    return processTranslation(key, variables, options);\n  };\n  fn.withAdvanced = ({ key, variables, options }: AdvancedLangFnParameters) => {\n    return processTranslationAdvanced(key, variables, options);\n  };\n  fn.region = (code: string) => formatters?.region.of(code);\n  fn.conjunction = (list: string[]) => formatters?.conjunction.format(list) || list.join(', ');\n  fn.disjunction = (list: string[]) => formatters?.disjunction.format(list) || list.join(', ');\n  fn.number = (value: number) => formatters?.number.format(value) || String(value);\n  fn.preciseNumber = (value: number) => formatters?.preciseNumber.format(value) || String(value);\n  fn.internalFormatters = formatters!;\n  fn.languageInfo = language!;\n  return fn;\n}\n\nexport function getTranslationFn(): LangFn {\n  return translationFn;\n}\n\nfunction getString(langKey: LangKey, count: number) {\n  let langPackStringValue = langPack?.strings[langKey];\n\n  if (!langPackStringValue && !fallbackLangPack) {\n    loadFallbackPack();\n  }\n\n  langPackStringValue ||= fallbackLangPack?.strings[langKey];\n  langPackStringValue ||= initialStrings[langKey];\n\n  if (!langPackStringValue || isDeletedLangString(langPackStringValue)) return undefined;\n\n  const pluralSuffix = formatters?.pluralRules.select(count) || 'other';\n\n  const string = isPluralLangString(langPackStringValue)\n    ? (langPackStringValue[pluralSuffix] || langPackStringValue.other)\n    : langPackStringValue;\n\n  return string;\n}\n\nfunction processTranslation(\n  langKey: LangKey,\n  variables?: Record<string, LangVariable | RegularLangFnParameters>,\n  options?: LangFnOptions | LangFnOptionsWithPlural,\n): string {\n  const cacheKey = `${langKey}-${JSON.stringify(variables)}-${JSON.stringify(options)}`;\n  if (TRANSLATION_CACHE.has(cacheKey)) {\n    return TRANSLATION_CACHE.get(cacheKey)!;\n  }\n\n  const pluralValue = options && 'pluralValue' in options ? Number(options.pluralValue) : 0;\n  const string = getString(langKey, pluralValue);\n\n  if (!string) return langKey;\n\n  const variableEntries = variables ? Object.entries(variables) : [];\n  const finalString = variableEntries.reduce((result, [key, value]) => {\n    if (value === undefined) return result;\n    if (typeof value === 'object') { // Allow recursive variables in basic `lang.with`\n      value = processTranslation(value.key, value.variables, value.options);\n    }\n\n    const valueAsString = Number.isFinite(value) ? formatters!.number.format(value as number) : String(value);\n    return result.replaceAll(`{${key}}`, valueAsString);\n  }, string);\n\n  TRANSLATION_CACHE.set(cacheKey, finalString);\n\n  return finalString;\n}\n\nfunction processTranslationAdvanced(\n  langKey: LangKey,\n  variables?: Record<string, TeactNode | undefined>,\n  options?: AdvancedLangFnOptions | AdvancedLangFnOptionsWithPlural,\n): TeactNode {\n  const pluralValue = options && 'pluralValue' in options ? Number(options.pluralValue) : 0;\n  const string = getString(langKey, pluralValue);\n  if (!string) return langKey;\n\n  const variableEntries = variables ? Object.entries(variables) : [];\n\n  let tempResult: TeactNode = [string];\n  if (options?.specialReplacement) {\n    const specialReplacements = Object.entries(options.specialReplacement);\n    tempResult = specialReplacements.reduce((acc, [key, value]) => {\n      return replaceInStringsWithTeact(acc, key, value);\n    }, tempResult);\n  }\n\n  const withRenderText = options?.withMarkdown || options?.renderTextFilters;\n\n  if (withRenderText) {\n    const filters = options?.withMarkdown\n      ? unique((options.renderTextFilters || []).concat(['simple_markdown', 'emoji']))\n      : options.renderTextFilters;\n\n    return tempResult.flatMap((curr: TeactNode) => {\n      if (typeof curr !== 'string') {\n        return curr;\n      }\n\n      return renderText(curr, filters, {\n        markdownPostProcessor: (part: string) => {\n          return variableEntries.reduce((result, [key, value]): TeactNode[] => {\n            if (value === undefined) return result;\n\n            const preparedValue = Number.isFinite(value) ? formatters!.number.format(value as number) : value;\n            return replaceInStringsWithTeact(result, `{${key}}`, renderText(preparedValue));\n          }, [part] as TeactNode[]);\n        },\n      });\n    });\n  }\n\n  return variableEntries.reduce((result, [key, value]): TeactNode[] => {\n    if (value === undefined) return result;\n\n    const preparedValue = Number.isFinite(value) ? formatters!.number.format(value as number) : value;\n    return replaceInStringsWithTeact(result, `{${key}}`, renderText(preparedValue));\n  }, tempResult);\n}\n\nexport const localizationReadyPromise = localizationReady.promise;\n\nexport {\n  addCallback as addLocalizationCallback,\n  removeCallback as removeLocalizationCallback,\n};\n\nexport type {\n  LangFn,\n  LangFnParameters,\n  RegularLangFnParameters,\n  AdvancedLangFnParameters,\n};\n","import type { TeactNode } from '../../lib/teact/teact';\n\nimport type {\n  ApiLanguage,\n  LangPackStringValue,\n  LangPackStringValueDeleted,\n  LangPackStringValuePlural,\n  LangPackStringValueRegular,\n} from '../../api/types';\nimport type { TextFilter } from '../../components/common/helpers/renderText';\nimport type {\n  LangPairPluralWithVariables,\n  LangPairWithVariables,\n  LangVariable,\n  PluralLangKey,\n  PluralLangKeyWithVariables,\n  RegularLangKey,\n  RegularLangKeyWithVariables,\n} from '../../types/language';\n\nexport interface LangFnOptionsRegular {\n  withNodes?: never;\n  withMarkdown?: never;\n  pluralValue?: never;\n}\n\nexport type LangFnOptionsWithPlural = Omit<LangFnOptionsRegular, 'pluralValue'> & {\n  pluralValue: number;\n};\n\nexport type LangFnOptions = LangFnOptionsRegular | LangFnOptionsWithPlural;\n\nexport interface AdvancedLangFnOptionsRegular {\n  withNodes: true;\n  withMarkdown?: boolean;\n  pluralValue?: never;\n  renderTextFilters?: TextFilter[];\n  specialReplacement?: Record<string, TeactNode>;\n}\n\nexport type AdvancedLangFnOptionsWithPlural = Omit<AdvancedLangFnOptionsRegular, 'pluralValue'> & {\n  pluralValue: number;\n};\n\nexport type AdvancedLangFnOptions = AdvancedLangFnOptionsRegular | AdvancedLangFnOptionsWithPlural;\n\ntype LangPairWithNodes = LangPairWithVariables<TeactNode | undefined>;\ntype LangPairPluralWithNodes = LangPairPluralWithVariables<TeactNode | undefined>;\n\ntype RegularLangFnParametersWithoutVariables = {\n  key: RegularLangKey;\n  variables?: undefined;\n  options?: LangFnOptions;\n};\n\ntype RegularLangFnParametersWithVariables<T = LangPairWithVariables> = {\n  [K in keyof T]: {\n    key: K;\n    variables: {\n      [key in keyof T[K]]: LangVariable | RegularLangFnParameters;\n    };\n    options?: LangFnOptions;\n  }\n}[keyof T];\n\ntype RegularLangFnPluralParameters = {\n  key: PluralLangKey;\n  variables?: undefined;\n  options: LangFnOptionsWithPlural;\n};\n\ntype RegularLangFnPluralParametersWithVariables<T = LangPairPluralWithVariables> = {\n  [K in keyof T]: {\n    key: K;\n    variables: {\n      [key in keyof T[K]]: LangVariable | RegularLangFnParameters;\n    };\n    options: LangFnOptionsWithPlural;\n  }\n}[keyof T];\n\nexport type RegularLangFnParameters =\n  | RegularLangFnParametersWithoutVariables\n  | RegularLangFnParametersWithVariables\n  | RegularLangFnPluralParameters\n  | RegularLangFnPluralParametersWithVariables;\n\ntype AdvancedLangFnParametersWithoutVariables = {\n  key: RegularLangKey;\n  variables?: undefined;\n  options: AdvancedLangFnOptions;\n};\n\ntype AdvancedLangFnParametersWithVariables<T = LangPairWithNodes> = {\n  [K in keyof T]: {\n    key: K;\n    variables: T[K];\n    options: AdvancedLangFnOptions;\n  }\n}[keyof T];\n\ntype AdvancedLangFnPluralParameters = {\n  key: PluralLangKey;\n  variables?: undefined;\n  options: AdvancedLangFnOptionsWithPlural;\n};\n\ntype AdvancedLangFnPluralParametersWithVariables<T = LangPairPluralWithNodes> = {\n  [K in keyof T]: {\n    key: K;\n    variables: T[K];\n    options: AdvancedLangFnOptionsWithPlural;\n  }\n}[keyof T];\n\nexport type AdvancedLangFnParameters =\n  | AdvancedLangFnParametersWithoutVariables\n  | AdvancedLangFnParametersWithVariables\n  | AdvancedLangFnPluralParameters\n  | AdvancedLangFnPluralParametersWithVariables;\n\nexport type LangFnParameters = RegularLangFnParameters | AdvancedLangFnParameters;\n\nexport type LangFn = {\n  <K extends RegularLangKey = RegularLangKey>(\n    key: K, variables?: undefined, options?: LangFnOptions,\n  ): string;\n  <K extends PluralLangKey = PluralLangKey>(\n    key: K, variables: undefined, options: LangFnOptionsWithPlural,\n  ): string;\n  <K extends RegularLangKeyWithVariables = RegularLangKeyWithVariables>(\n    key: K, variables: LangPairWithVariables[K], options?: LangFnOptions,\n  ): string;\n  <K extends PluralLangKeyWithVariables = PluralLangKeyWithVariables>(\n    key: K, variables: LangPairPluralWithVariables[K], options: LangFnOptionsWithPlural,\n  ): string;\n\n  <K extends RegularLangKey = RegularLangKey>(\n    key: K, variables?: undefined, options?: AdvancedLangFnOptions,\n  ): TeactNode;\n  <K extends PluralLangKey = PluralLangKey>(\n    key: K, variables: undefined, options: AdvancedLangFnOptionsWithPlural,\n  ): TeactNode;\n  <K extends RegularLangKeyWithVariables = RegularLangKeyWithVariables>(\n    key: K, variables: LangPairWithVariables<TeactNode | undefined>[K], options: AdvancedLangFnOptions,\n  ): TeactNode;\n  <K extends PluralLangKeyWithVariables = PluralLangKeyWithVariables>(\n    key: K, variables: LangPairPluralWithVariables<TeactNode | undefined>[K], options: AdvancedLangFnOptionsWithPlural,\n  ): TeactNode;\n\n  with: (params: LangFnParameters) => TeactNode;\n  withRegular: (params: RegularLangFnParameters) => string;\n  withAdvanced: (params: AdvancedLangFnParameters) => TeactNode;\n  region: (code: string) => string | undefined;\n  conjunction: (list: string[]) => string;\n  disjunction: (list: string[]) => string;\n  number: (value: number) => string;\n  preciseNumber: (value: number) => string;\n  internalFormatters: LangFormatters;\n  isRtl?: boolean;\n  rawCode: string;\n  code: string;\n  languageInfo: ApiLanguage;\n};\n\n// Allow basic polyfill\ntype ListFormat = Pick<Intl.ListFormat, 'format' | 'formatToParts'>;\n\nexport type LangFormatters = {\n  pluralRules: Intl.PluralRules;\n  region: Intl.DisplayNames;\n  conjunction: ListFormat;\n  disjunction: ListFormat;\n  number: Intl.NumberFormat;\n  preciseNumber: Intl.NumberFormat;\n};\n\n/* GUARDS */\n\nexport function isDeletedLangString(string: LangPackStringValue): string is LangPackStringValueDeleted {\n  return typeof string === 'object' && 'isDeleted' in string;\n}\n\nexport function isRegularLangString(string: LangPackStringValue): string is LangPackStringValueRegular {\n  return typeof string === 'string';\n}\n\nexport function isPluralLangString(string: LangPackStringValue): string is LangPackStringValuePlural {\n  return !isRegularLangString(string) && !isDeletedLangString(string);\n}\n\nexport function isLangFnParam(object: unknown): object is LangFnParameters {\n  return Boolean(object) && typeof object === 'object' && 'key' in object! && !('type' in object);\n}\n\nexport function areAdvancedLangFnOptions(\n  params: LangFnOptions | AdvancedLangFnOptions,\n): params is AdvancedLangFnOptions {\n  return 'withNodes' in params && Boolean(params.withNodes);\n}\n","import type { TeactNode } from '../../lib/teact/teact';\n\nimport type { LangFn } from './types';\n\nconst UNIQUE_PLACEHOLDER_PREFIX = '$PLACEHOLDER-';\n\nexport function conjuctionWithNodes(langFn: LangFn, nodes: TeactNode[]) {\n  const placeholders = nodes.map((node, i) => `${UNIQUE_PLACEHOLDER_PREFIX}${i}`);\n  const replaced = langFn.internalFormatters.conjunction.formatToParts(placeholders);\n  const result: TeactNode[] = [];\n  replaced.forEach((part) => {\n    if (part.type === 'literal') {\n      result.push(part.value);\n      return;\n    }\n\n    const index = Number(part.value.slice(UNIQUE_PLACEHOLDER_PREFIX.length));\n    result.push(nodes[index]);\n  });\n\n  return result;\n}\n\nexport function disjunctionWithNodes(langFn: LangFn, nodes: TeactNode[]) {\n  const placeholders = nodes.map((node, i) => `${UNIQUE_PLACEHOLDER_PREFIX}${i}`);\n  const replaced = langFn.internalFormatters.disjunction.formatToParts(placeholders);\n  const result: TeactNode[] = [];\n  replaced.forEach((part) => {\n    if (part.type === 'literal') {\n      result.push(part.value);\n      return;\n    }\n\n    const index = Number(part.value.slice(UNIQUE_PLACEHOLDER_PREFIX.length));\n    result.push(nodes[index]);\n  });\n\n  return result;\n}\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const ceil = (num: number, decimals: number = 0) => Math.ceil(num * 10 ** decimals) / 10 ** decimals;\nexport const floor = (num: number, decimals: number = 0) => Math.floor(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import type {\n  ApiOnProgress,\n  ApiParsedMedia,\n  ApiPreparedMedia,\n} from '../api/types';\nimport {\n  ApiMediaFormat,\n} from '../api/types';\n\nimport {\n  DEBUG, ELECTRON_HOST_URL,\n  IS_PACKAGED_ELECTRON, MEDIA_CACHE_DISABLED, MEDIA_CACHE_NAME, MEDIA_CACHE_NAME_AVATARS,\n} from '../config';\nimport { callApi, cancelApiProgress } from '../api/gramjs';\nimport {\n  IS_OPUS_SUPPORTED, IS_PROGRESSIVE_SUPPORTED,\n} from './browser/windowEnvironment';\nimport * as cacheApi from './cacheApi';\nimport { fetchBlob } from './files';\nimport { ACCOUNT_SLOT } from './multiaccount';\nimport { oggToWav } from './oggToWav';\n\nconst asCacheApiType = {\n  [ApiMediaFormat.BlobUrl]: cacheApi.Type.Blob,\n  [ApiMediaFormat.Text]: cacheApi.Type.Text,\n  [ApiMediaFormat.DownloadUrl]: undefined,\n  [ApiMediaFormat.Progressive]: undefined,\n};\n\nconst PROGRESSIVE_URL_PREFIX = `${IS_PACKAGED_ELECTRON ? ELECTRON_HOST_URL : '.'}/progressive/`;\nconst DOWNLOAD_URL_PREFIX = './download/';\nconst MAX_MEDIA_RETRIES = 5;\n\nconst memoryCache = new Map<string, ApiPreparedMedia>();\nconst fetchPromises = new Map<string, Promise<ApiPreparedMedia | undefined>>();\nconst progressCallbacks = new Map<string, Map<string, ApiOnProgress>>();\nconst cancellableCallbacks = new Map<string, ApiOnProgress>();\n\nexport function fetch<T extends ApiMediaFormat>(\n  url: string,\n  mediaFormat: T,\n  isHtmlAllowed = false,\n  onProgress?: ApiOnProgress,\n  callbackUniqueId?: string,\n): Promise<ApiPreparedMedia> {\n  if (mediaFormat === ApiMediaFormat.Progressive) {\n    return (\n      IS_PROGRESSIVE_SUPPORTED\n        ? Promise.resolve(getProgressiveUrl(url))\n        : fetch(url, ApiMediaFormat.BlobUrl, isHtmlAllowed, onProgress, callbackUniqueId)\n    );\n  }\n\n  if (mediaFormat === ApiMediaFormat.DownloadUrl) {\n    return (\n      IS_PROGRESSIVE_SUPPORTED\n        ? Promise.resolve(getDownloadUrl(url))\n        : fetch(url, ApiMediaFormat.BlobUrl, isHtmlAllowed, onProgress, callbackUniqueId)\n    );\n  }\n\n  if (!fetchPromises.has(url)) {\n    const promise = fetchFromCacheOrRemote(url, mediaFormat, isHtmlAllowed)\n      .catch((err) => {\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.warn(err);\n        }\n\n        return undefined;\n      })\n      .finally(() => {\n        fetchPromises.delete(url);\n        progressCallbacks.delete(url);\n        cancellableCallbacks.delete(url);\n      });\n\n    fetchPromises.set(url, promise);\n  }\n\n  if (onProgress && callbackUniqueId) {\n    let activeCallbacks = progressCallbacks.get(url);\n    if (!activeCallbacks) {\n      activeCallbacks = new Map<string, ApiOnProgress>();\n      progressCallbacks.set(url, activeCallbacks);\n    }\n    activeCallbacks.set(callbackUniqueId, onProgress);\n  }\n\n  return fetchPromises.get(url) as Promise<ApiPreparedMedia>;\n}\n\nexport function getFromMemory(url: string) {\n  return memoryCache.get(url) as ApiPreparedMedia;\n}\n\nexport function cancelProgress(progressCallback: ApiOnProgress) {\n  progressCallbacks.forEach((map, url) => {\n    map.forEach((callback) => {\n      if (callback === progressCallback) {\n        const parentCallback = cancellableCallbacks.get(url);\n        if (!parentCallback) return;\n\n        cancelApiProgress(parentCallback);\n        cancellableCallbacks.delete(url);\n        progressCallbacks.delete(url);\n      }\n    });\n  });\n}\n\nexport function removeCallback(url: string, callbackUniqueId: string) {\n  const callbacks = progressCallbacks.get(url);\n  if (!callbacks) return;\n  callbacks.delete(callbackUniqueId);\n}\n\nexport function getProgressiveUrl(url: string) {\n  const base = new URL(`${PROGRESSIVE_URL_PREFIX}${url}`, window.location.href);\n  if (ACCOUNT_SLOT) base.searchParams.set('account', ACCOUNT_SLOT.toString());\n  memoryCache.set(url, base.href); // Needed for hooks to detect document as already loaded and apply URL\n  return base.href;\n}\n\nfunction getDownloadUrl(url: string) {\n  const base = new URL(`${DOWNLOAD_URL_PREFIX}${url}`, window.location.href);\n  if (ACCOUNT_SLOT) base.searchParams.set('account', ACCOUNT_SLOT.toString());\n  return base.href;\n}\n\nasync function fetchFromCacheOrRemote(\n  url: string, mediaFormat: ApiMediaFormat, isHtmlAllowed: boolean, retryNumber = 0,\n): Promise<string> {\n  if (!MEDIA_CACHE_DISABLED) {\n    const cacheName = url.startsWith('avatar') ? MEDIA_CACHE_NAME_AVATARS : MEDIA_CACHE_NAME;\n    const cached = await cacheApi.fetch(cacheName, url, asCacheApiType[mediaFormat]!, isHtmlAllowed);\n\n    if (cached) {\n      let media = cached;\n\n      if (cached.type === 'audio/ogg' && !IS_OPUS_SUPPORTED) {\n        media = await oggToWav(media);\n      }\n\n      const prepared = prepareMedia(media);\n\n      memoryCache.set(url, prepared);\n\n      return prepared;\n    }\n  }\n\n  const onProgress = makeOnProgress(url);\n  cancellableCallbacks.set(url, onProgress);\n\n  const remote = await callApi('downloadMedia', { url, mediaFormat, isHtmlAllowed }, onProgress);\n  if (!remote) {\n    if (retryNumber >= MAX_MEDIA_RETRIES) {\n      throw new Error(`Failed to fetch media ${url}`);\n    }\n    await new Promise((resolve) => {\n      setTimeout(resolve, getRetryTimeout(retryNumber));\n    });\n    // eslint-disable-next-line no-console\n    if (DEBUG) console.debug(`Retrying to fetch media ${url}`);\n    return fetchFromCacheOrRemote(url, mediaFormat, isHtmlAllowed, retryNumber + 1);\n  }\n\n  let { mimeType } = remote;\n  let prepared = prepareMedia(remote.dataBlob);\n\n  if (mimeType === 'audio/ogg' && !IS_OPUS_SUPPORTED) {\n    const blob = await fetchBlob(prepared);\n    URL.revokeObjectURL(prepared);\n    const media = await oggToWav(blob);\n    prepared = prepareMedia(media);\n    mimeType = media.type;\n  }\n\n  memoryCache.set(url, prepared);\n\n  return prepared;\n}\n\nfunction makeOnProgress(url: string) {\n  const onProgress: ApiOnProgress = (progress: number) => {\n    progressCallbacks.get(url)?.forEach((callback) => {\n      callback(progress);\n      if (callback.isCanceled) onProgress.isCanceled = true;\n    });\n  };\n\n  return onProgress;\n}\n\nfunction prepareMedia(mediaData: Exclude<ApiParsedMedia, ArrayBuffer>): ApiPreparedMedia {\n  if (mediaData instanceof Blob) {\n    return URL.createObjectURL(mediaData);\n  }\n\n  return mediaData;\n}\n\nif (IS_PROGRESSIVE_SUPPORTED) {\n  navigator.serviceWorker.addEventListener('message', async (e) => {\n    const { type, messageId, params } = e.data as {\n      type: string;\n      messageId: string;\n      params: { url: string; start: number; end: number };\n    };\n\n    if (type !== 'requestPart') {\n      return;\n    }\n\n    async function downloadWithRetry(retryNumber = 0) {\n      const result = await callApi('downloadMedia', { mediaFormat: ApiMediaFormat.Progressive, ...params });\n      if (!result) {\n        if (retryNumber >= MAX_MEDIA_RETRIES) {\n          if (DEBUG) {\n            // eslint-disable-next-line no-console\n            console.warn(`Failed to download media part after ${MAX_MEDIA_RETRIES} retries:`, params.url);\n          }\n          return undefined;\n        }\n        await new Promise((resolve) => {\n          setTimeout(resolve, getRetryTimeout(retryNumber));\n        });\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.debug(`Retrying to download media part ${params.url}, attempt ${retryNumber + 1}`);\n        }\n        return downloadWithRetry(retryNumber + 1);\n      }\n      return result;\n    }\n\n    const result = await downloadWithRetry();\n    if (!result) {\n      return;\n    }\n\n    const { arrayBuffer, mimeType, fullSize } = result;\n\n    navigator.serviceWorker.controller!.postMessage({\n      type: 'partResponse',\n      messageId,\n      result: {\n        arrayBuffer,\n        mimeType,\n        fullSize,\n      },\n    }, [arrayBuffer!]);\n  });\n}\n\nfunction getRetryTimeout(retryNumber: number) {\n  // 250ms, 500ms, 1s, 2s, 4s\n  return 250 * 2 ** retryNumber;\n}\n","export const MEMO_EMPTY_ARRAY = [];\n","import { DEBUG } from '../config';\nimport { createCallbackManager } from './callbacks';\n\nexport enum Bundles {\n  Auth,\n  Main,\n  Extra,\n  Calls,\n  Stars,\n}\n\ninterface ImportedBundles {\n  [Bundles.Auth]: typeof import('../bundles/auth');\n  [Bundles.Main]: typeof import('../bundles/main');\n  [Bundles.Extra]: typeof import('../bundles/extra');\n  [Bundles.Calls]: typeof import('../bundles/calls');\n  [Bundles.Stars]: typeof import('../bundles/stars');\n}\n\ntype BundlePromises = {\n  [K in keyof ImportedBundles]: Promise<ImportedBundles[K]>\n};\n\nexport type BundleModules<B extends keyof ImportedBundles> = keyof ImportedBundles[B];\n\nconst LOAD_PROMISES: Partial<BundlePromises> = {};\nconst MEMORY_CACHE: Partial<ImportedBundles> = {};\n\nconst { addCallback, runCallbacks } = createCallbackManager();\n\nexport async function loadBundle<B extends Bundles>(bundleName: B) {\n  if (!LOAD_PROMISES[bundleName]) {\n    switch (bundleName) {\n      case Bundles.Auth:\n        LOAD_PROMISES[Bundles.Auth] = import(/* webpackChunkName: \"BundleAuth\" */ '../bundles/auth');\n        break;\n      case Bundles.Main:\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.log('>>> START LOAD MAIN BUNDLE');\n        }\n\n        LOAD_PROMISES[Bundles.Main] = import(/* webpackChunkName: \"BundleMain\" */ '../bundles/main');\n        break;\n      case Bundles.Extra:\n        LOAD_PROMISES[Bundles.Extra] = import(/* webpackChunkName: \"BundleExtra\" */ '../bundles/extra');\n        break;\n      case Bundles.Calls:\n        LOAD_PROMISES[Bundles.Calls] = import(/* webpackChunkName: \"BundleCalls\" */ '../bundles/calls');\n        break;\n      case Bundles.Stars:\n        LOAD_PROMISES[Bundles.Stars] = import(/* webpackChunkName: \"BundleStars\" */ '../bundles/stars');\n        break;\n    }\n\n    (LOAD_PROMISES[bundleName]!).then(runCallbacks);\n  }\n\n  const bundle = (await LOAD_PROMISES[bundleName]) as unknown as ImportedBundles[B];\n\n  if (!MEMORY_CACHE[bundleName]) {\n    MEMORY_CACHE[bundleName] = bundle;\n  }\n\n  return bundle;\n}\n\nexport async function loadModule<B extends Bundles>(bundleName: B) {\n  await loadBundle(bundleName);\n}\n\nexport function getModuleFromMemory<B extends Bundles, M extends BundleModules<B>>(\n  bundleName: B, moduleName: M,\n): ImportedBundles[B][M] | undefined {\n  const bundle = MEMORY_CACHE[bundleName] as ImportedBundles[B];\n\n  if (!bundle) {\n    return undefined;\n  }\n\n  return bundle[moduleName];\n}\n\nexport const addLoadListener = addCallback;\n","import type { AccountInfo, SessionUserInfo, SharedSessionData } from '../types';\n\nimport {\n  ACCOUNT_QUERY,\n  DATA_BROADCAST_CHANNEL_PREFIX,\n  ESTABLISH_BROADCAST_CHANNEL_PREFIX,\n  GLOBAL_STATE_CACHE_PREFIX,\n  MULTIACCOUNT_MAX_SLOTS,\n  MULTITAB_LOCALSTORAGE_KEY_PREFIX,\n  SESSION_ACCOUNT_PREFIX,\n} from '../config';\nimport { IS_MULTIACCOUNT_SUPPORTED } from './browser/globalEnvironment';\n\nconst WORKER_NAME = typeof WorkerGlobalScope !== 'undefined' && globalThis.self instanceof WorkerGlobalScope\n  ? globalThis.self.name : undefined;\nconst WORKER_ACCOUNT_SLOT = WORKER_NAME ? Number(new URLSearchParams(WORKER_NAME).get(ACCOUNT_QUERY)) : undefined;\n\nexport const ACCOUNT_SLOT = WORKER_ACCOUNT_SLOT || (\n  IS_MULTIACCOUNT_SUPPORTED ? getAccountSlot(globalThis.location.href) : undefined\n);\n\nexport const DATA_BROADCAST_CHANNEL_NAME = `${DATA_BROADCAST_CHANNEL_PREFIX}_${ACCOUNT_SLOT || 1}`;\nexport const ESTABLISH_BROADCAST_CHANNEL_NAME = `${ESTABLISH_BROADCAST_CHANNEL_PREFIX}_${ACCOUNT_SLOT || 1}`;\nexport const MULTITAB_STORAGE_KEY = `${MULTITAB_LOCALSTORAGE_KEY_PREFIX}_${ACCOUNT_SLOT || 1}`;\nexport const GLOBAL_STATE_CACHE_KEY = ACCOUNT_SLOT\n  ? `${GLOBAL_STATE_CACHE_PREFIX}_${ACCOUNT_SLOT}` : GLOBAL_STATE_CACHE_PREFIX;\n\nexport function getAccountSlot(url: string) {\n  const params = new URL(url).searchParams;\n  const slot = params.get(ACCOUNT_QUERY);\n  const slotNumber = slot ? Number(slot) : 1;\n  if (!slotNumber || Number.isNaN(slotNumber) || slotNumber === 1) return undefined;\n  return slotNumber;\n}\n\nexport function getAccountsInfo() {\n  if (!IS_MULTIACCOUNT_SUPPORTED) return {};\n  const accountInfo: Record<number, AccountInfo> = {};\n  for (let i = 1; i <= MULTIACCOUNT_MAX_SLOTS; i++) {\n    const info = getAccountInfo(i);\n    if (info) {\n      accountInfo[i] = info;\n    }\n  }\n  return accountInfo;\n}\n\nfunction getAccountInfo(slot: number): AccountInfo | undefined {\n  const sessionData = loadSlotSession(slot);\n  const {\n    userId, avatarUri, color, emojiStatusId, firstName, lastName, isPremium, isTest, phone,\n  } = sessionData || {};\n\n  if (!userId) return undefined;\n\n  return {\n    userId,\n    avatarUri,\n    color,\n    emojiStatusId,\n    firstName,\n    lastName,\n    isPremium,\n    isTest,\n    phone,\n  };\n}\n\nexport function loadSlotSession(slot: number | undefined): SharedSessionData | undefined {\n  try {\n    const data = JSON.parse(localStorage.getItem(`${SESSION_ACCOUNT_PREFIX}${slot || 1}`) || '{}') as SharedSessionData;\n    if (!data.dcId) return undefined;\n    return data;\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport function storeAccountData(slot: number | undefined, data: Partial<SessionUserInfo>) {\n  const currentSlotData = loadSlotSession(slot);\n\n  if (!currentSlotData) return;\n\n  const updatedSharedData: SharedSessionData = {\n    ...currentSlotData,\n    ...data,\n  };\n\n  if (!updatedSharedData.userId) return;\n\n  writeSlotSession(slot, updatedSharedData);\n}\n\nexport function writeSlotSession(slot: number | undefined, data: SharedSessionData) {\n  localStorage.setItem(`${SESSION_ACCOUNT_PREFIX}${slot || 1}`, JSON.stringify(data));\n}\n\nexport function getAccountSlotUrl(slot: number, forLogin?: boolean) {\n  const url = new URL(globalThis.location.href);\n  if (slot !== 1) {\n    url.searchParams.set(ACCOUNT_QUERY, String(slot));\n  } else {\n    url.searchParams.delete(ACCOUNT_QUERY);\n  }\n  url.hash = forLogin ? 'login' : '';\n  return url.toString();\n}\n\n// Validate current version across all tabs to avoid conflicts\nif (typeof window === 'object') {\n  const versionChannel = new BroadcastChannel('tt-version');\n  versionChannel.postMessage({ version: APP_VERSION });\n\n  versionChannel.addEventListener('message', (event) => {\n    const { version } = event.data;\n    if (!version) return;\n    if (semverCompare(APP_VERSION, version) === -1) {\n      window.location.reload();\n    }\n\n    // If incoming version is older, send back the current version\n    if (semverCompare(APP_VERSION, version) === 1) {\n      versionChannel.postMessage({ version: APP_VERSION });\n    }\n  });\n}\n\nfunction semverCompare(a: string, b: string) {\n  if (a.startsWith(`${b}-`)) return -1;\n  if (b.startsWith(`${a}-`)) return 1;\n  return a.localeCompare(b, undefined, { numeric: true, sensitivity: 'case', caseFirst: 'upper' });\n}\n","import { getActions, getGlobal, setGlobal } from '../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPeer, ApiPeerReaction,\n  ApiPhoneCall, ApiUser,\n} from '../api/types';\nimport { ApiMediaFormat } from '../api/types';\n\nimport { APP_NAME, DEBUG, IS_TEST } from '../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getMessageRecentReaction,\n  getPrivateChatUserId,\n  getUserFullName,\n} from '../global/helpers';\nimport { getIsChatMuted, getIsChatSilent, getShouldShowMessagePreview } from '../global/helpers/notifications';\nimport { getMessageSenderName } from '../global/helpers/peers';\nimport {\n  selectCurrentMessageList,\n  selectIsChatWithSelf,\n  selectNotifyDefaults,\n  selectNotifyException,\n  selectPeer,\n  selectSender,\n  selectSettingsKeys,\n  selectTopicFromMessage,\n} from '../global/selectors';\nimport { callApi } from '../api/gramjs';\nimport { IS_ELECTRON, IS_SERVICE_WORKER_SUPPORTED, IS_TOUCH_ENV } from './browser/windowEnvironment';\nimport jsxToHtml from './element/jsxToHtml';\nimport { buildCollectionByKey } from './iteratees';\nimport * as mediaLoader from './mediaLoader';\nimport { oldTranslate } from './oldLangProvider';\nimport { debounce } from './schedulers';\nimport { getServerTime } from './serverTime';\n\nimport MessageSummary from '../components/common/MessageSummary';\n\nfunction getDeviceToken(subscription: PushSubscription) {\n  const data = subscription.toJSON();\n  return JSON.stringify({\n    endpoint: data.endpoint,\n    keys: data.keys,\n  });\n}\n\nfunction checkIfPushSupported() {\n  if (!IS_SERVICE_WORKER_SUPPORTED || IS_ELECTRON) return false;\n\n  if (!('showNotification' in ServiceWorkerRegistration.prototype)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[PUSH] Push notifications aren\\'t supported.');\n    }\n    return false;\n  }\n\n  // If permission is denied, it is blocked until the user manually changes their settings\n  if (Notification.permission === 'denied') {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[PUSH] The user has blocked push notifications.');\n    }\n    return false;\n  }\n\n  // Check if push messaging is supported\n  if (!('PushManager' in window)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[PUSH] Push messaging isn\\'t supported.');\n    }\n    return false;\n  }\n\n  return true;\n}\n\nexport function checkIfNotificationsSupported() {\n  // Let's check if the browser supports notifications\n  if (!('Notification' in window)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[PUSH] This browser does not support desktop notification');\n    }\n    return false;\n  }\n\n  if (Notification.permission === 'denied' as NotificationPermission) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[PUSH] The user has blocked push notifications.');\n    }\n    return false;\n  }\n  return true;\n}\n\nconst expirationTime = 12 * 60 * 60 * 1000; // 12 hours\n// Notification id is removed from soundPlayed cache after 3 seconds\nconst soundPlayedDelay = 3 * 1000;\nconst soundPlayedIds = new Set<string>();\nconst notificationSound = new Audio('./notification.mp3');\nnotificationSound.setAttribute('mozaudiochannel', 'notification');\n\nexport async function playNotifySound(id?: string, volume?: number) {\n  if (id !== undefined && soundPlayedIds.has(id)) return;\n  const { notificationSoundVolume } = selectSettingsKeys(getGlobal());\n  const currentVolume = volume ? volume / 10 : notificationSoundVolume / 10;\n  if (currentVolume === 0) return;\n  notificationSound.volume = currentVolume;\n  if (id !== undefined) {\n    notificationSound.addEventListener('ended', () => {\n      soundPlayedIds.add(id);\n    }, { once: true });\n\n    setTimeout(() => {\n      soundPlayedIds.delete(id);\n    }, soundPlayedDelay);\n  }\n\n  try {\n    await notificationSound.play();\n  } catch (error) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[PUSH] Unable to play notification sound');\n    }\n  }\n}\n\nexport const playNotifySoundDebounced = debounce(playNotifySound, 1000, true, false);\n\nfunction checkIfShouldResubscribe(subscription: PushSubscription | null) {\n  const global = getGlobal();\n  if (!global.push || !subscription) return true;\n  if (getDeviceToken(subscription) !== global.push.deviceToken) return true;\n  return Date.now() - global.push.subscribedAt > expirationTime;\n}\n\nexport async function requestPermission() {\n  if (!('Notification' in window)) {\n    return false;\n  }\n  let permission = Notification.permission;\n  if (!['granted', 'denied'].includes(permission)) {\n    permission = await Notification.requestPermission();\n  }\n  return permission === 'granted';\n}\n\nasync function unsubscribeFromPush(subscription: PushSubscription | null) {\n  const { deleteDeviceToken } = getActions();\n  if (subscription) {\n    try {\n      const deviceToken = getDeviceToken(subscription);\n      await callApi('unregisterDevice', deviceToken);\n      await subscription.unsubscribe();\n      deleteDeviceToken();\n      return;\n    } catch (error) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.log('[PUSH] Unable to unsubscribe from push.', error);\n      }\n    }\n  }\n  const global = getGlobal();\n  if (global.push) {\n    await callApi('unregisterDevice', global.push.deviceToken);\n    deleteDeviceToken();\n  }\n}\n\nexport async function unsubscribe() {\n  if (!checkIfPushSupported()) return;\n  const serviceWorkerRegistration = await navigator.serviceWorker.ready;\n  const subscription = await serviceWorkerRegistration.pushManager.getSubscription();\n  await unsubscribeFromPush(subscription);\n}\n\n// Load custom emoji from the api if it's not cached already\nasync function loadCustomEmoji(id: string) {\n  let global = getGlobal();\n  if (global.customEmojis.byId[id]) return;\n  const customEmoji = await callApi('fetchCustomEmoji', {\n    documentId: [id],\n  });\n  if (!customEmoji) return;\n  global = getGlobal();\n  global = {\n    ...global,\n    customEmojis: {\n      ...global.customEmojis,\n      byId: {\n        ...global.customEmojis.byId,\n        ...buildCollectionByKey(customEmoji, 'id'),\n      },\n    },\n  };\n  setGlobal(global);\n}\n\nlet isSubscriptionFailed = false;\nexport function checkIfOfflinePushFailed() {\n  return isSubscriptionFailed;\n}\n\nexport async function subscribe() {\n  const { setDeviceToken, updateWebNotificationSettings } = getActions();\n  let hasWebNotifications = false;\n  let hasPushNotifications = false;\n  if (!checkIfPushSupported()) {\n    // Ask for notification permissions only if service worker notifications are not supported\n    // As pushManager.subscribe automatically triggers permission popup\n    hasWebNotifications = await requestPermission();\n    updateWebNotificationSettings({\n      hasWebNotifications,\n      hasPushNotifications,\n    });\n    return;\n  }\n  const serviceWorkerRegistration = await navigator.serviceWorker.ready;\n  let subscription = await serviceWorkerRegistration.pushManager.getSubscription();\n  if (!checkIfShouldResubscribe(subscription)) return;\n  await unsubscribeFromPush(subscription);\n  try {\n    subscription = await serviceWorkerRegistration.pushManager.subscribe({\n      userVisibleOnly: true,\n    });\n    const deviceToken = getDeviceToken(subscription);\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('[PUSH] Received push subscription: ', deviceToken);\n    }\n    await callApi('registerDevice', deviceToken);\n    setDeviceToken({ token: deviceToken });\n    hasPushNotifications = true;\n    hasWebNotifications = true;\n  } catch (error: any) {\n    if (Notification.permission === 'denied') {\n      // The user denied the notification permission which\n      // means we failed to subscribe and the user will need\n      // to manually change the notification permission to\n      // subscribe to push messages\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.warn('[PUSH] The user has blocked push notifications.');\n      }\n    } else {\n      // A problem occurred with the subscription, this can\n      // often be down to an issue or lack of the gcm_sender_id\n      // and / or gcm_user_visible_only\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.log('[PUSH] Unable to subscribe to push.', error);\n      }\n      // Request permissions and fall back to local notifications\n      // if pushManager.subscribe was aborted due to invalid VAPID key.\n      if ([DOMException.ABORT_ERR, DOMException.NOT_SUPPORTED_ERR].includes(error.code)) {\n        isSubscriptionFailed = true;\n        hasWebNotifications = await requestPermission();\n      }\n    }\n  }\n  updateWebNotificationSettings({\n    hasWebNotifications,\n    hasPushNotifications,\n  });\n}\n\nfunction checkIfShouldNotify(chat: ApiChat, message: Partial<ApiMessage>) {\n  const global = getGlobal();\n  const isChatMuted = getIsChatMuted(chat, selectNotifyDefaults(global), selectNotifyException(global, chat.id));\n  const topic = selectTopicFromMessage(global, message as ApiMessage);\n  const topicMutedUntil = topic?.notifySettings.mutedUntil;\n  const isMuted = topicMutedUntil === undefined ? isChatMuted : topicMutedUntil > getServerTime();\n  const shouldIgnoreMute = message.isMentioned;\n\n  const shouldNotifyAboutMessage = message.content?.action?.type !== 'phoneCall';\n  if ((isMuted && !shouldIgnoreMute) || !shouldNotifyAboutMessage\n    || chat.isNotJoined || !chat.isListed || selectIsChatWithSelf(global, chat.id)) {\n    return false;\n  }\n  // On touch devices show notifications when chat is not active\n  if (IS_TOUCH_ENV) {\n    const {\n      chatId,\n      type,\n    } = selectCurrentMessageList(global) || {};\n    return !(chatId === chat.id && type === 'thread');\n  }\n  // On desktop show notifications when window is not focused\n  return !document.hasFocus();\n}\n\nfunction getNotificationContent(chat: ApiChat, message: ApiMessage, reaction?: ApiPeerReaction) {\n  const global = getGlobal();\n  let sender = selectSender(global, message);\n  const hasReaction = Boolean(reaction);\n  if (hasReaction) {\n    sender = selectPeer(global, reaction.peerId);\n  }\n\n  const { isScreenLocked } = global.passcode;\n  const privateChatUserId = getPrivateChatUserId(chat);\n  const isSelf = privateChatUserId === global.currentUserId;\n\n  let body: string;\n  if (\n    !isScreenLocked\n    && getShouldShowMessagePreview(chat, selectNotifyDefaults(global), selectNotifyException(global, chat.id))\n  ) {\n    const senderName = sender ? getMessageSenderName(oldTranslate, chat.id, sender) : undefined;\n    let summary = jsxToHtml(<span><MessageSummary message={message} /></span>)[0].textContent || '';\n\n    if (hasReaction) {\n      const emoji = getReactionEmoji(reaction);\n      summary = oldTranslate('PushReactText', [emoji, summary]);\n    }\n\n    body = senderName ? `${senderName}: ${summary}` : summary;\n  } else {\n    body = 'New message';\n  }\n\n  let title = isScreenLocked ? APP_NAME : getChatTitle(oldTranslate, chat, isSelf);\n\n  if (message.isSilent) {\n    title += ' 🔕';\n  }\n\n  return { title, body };\n}\n\nasync function getAvatar(chat: ApiPeer) {\n  const imageHash = getChatAvatarHash(chat);\n  if (!imageHash) return undefined;\n  let mediaData = mediaLoader.getFromMemory(imageHash);\n  if (!mediaData) {\n    await mediaLoader.fetch(imageHash, ApiMediaFormat.BlobUrl);\n    mediaData = mediaLoader.getFromMemory(imageHash);\n  }\n  return mediaData;\n}\n\nfunction getReactionEmoji(reaction: ApiPeerReaction) {\n  let emoji;\n  if (reaction.reaction.type === 'emoji') {\n    emoji = reaction.reaction.emoticon;\n  }\n\n  if (reaction.reaction.type === 'custom') {\n    emoji = getGlobal().customEmojis.byId[reaction.reaction.documentId]?.emoji;\n  }\n  return emoji || '❤️';\n}\n\nexport async function notifyAboutCall({\n  call, user,\n}: {\n  call: ApiPhoneCall; user: ApiUser;\n}) {\n  const { hasWebNotifications } = selectSettingsKeys(getGlobal());\n  if (document.hasFocus() || !hasWebNotifications) return;\n  const areNotificationsSupported = checkIfNotificationsSupported();\n  if (!areNotificationsSupported) return;\n\n  const icon = await getAvatar(user);\n\n  const options: NotificationOptions = {\n    body: getUserFullName(user),\n    icon,\n    badge: icon,\n    tag: `call_${call.id}`,\n  };\n\n  if ('vibrate' in navigator) {\n    // @ts-ignore\n    options.vibrate = [200, 100, 200];\n  }\n\n  const notification = new Notification(oldTranslate('VoipIncoming'), options);\n\n  notification.onclick = () => {\n    notification.close();\n    if (window.focus) {\n      window.focus();\n    }\n  };\n}\n\nexport async function notifyAboutMessage({\n  chat,\n  message,\n  isReaction = false,\n}: { chat: ApiChat; message: Partial<ApiMessage>; isReaction?: boolean }) {\n  const global = getGlobal();\n  const { hasWebNotifications } = selectSettingsKeys(global);\n  if (!checkIfShouldNotify(chat, message)) return;\n  const isChatSilent = getIsChatSilent(\n    chat, selectNotifyDefaults(getGlobal()), selectNotifyException(getGlobal(), chat.id),\n  );\n  const topic = selectTopicFromMessage(global, message as ApiMessage);\n  const isSilent = topic?.notifySettings.hasSound === undefined ? isChatSilent : !topic.notifySettings.hasSound;\n\n  const areNotificationsSupported = checkIfNotificationsSupported();\n  if (!hasWebNotifications || !areNotificationsSupported) {\n    if (!isSilent && !message.isSilent && !isReaction && !IS_ELECTRON) {\n      // Only play sound if web notifications are disabled\n      playNotifySoundDebounced(String(message.id) || chat.id);\n    }\n\n    return;\n  }\n  if (!areNotificationsSupported) return;\n\n  if (!message.id) return;\n\n  const activeReaction = getMessageRecentReaction(message);\n  // Do not notify about reactions on messages that are not outgoing\n  if (isReaction && !activeReaction) return;\n\n  // If this is a custom emoji reaction we need to make sure it is loaded\n  if (isReaction && activeReaction && activeReaction.reaction.type === 'custom') {\n    await loadCustomEmoji(activeReaction.reaction.documentId);\n  }\n\n  const icon = await getAvatar(chat);\n\n  const {\n    title,\n    body,\n  } = getNotificationContent(chat, message as ApiMessage, activeReaction);\n\n  if (checkIfPushSupported()) {\n    if (navigator.serviceWorker?.controller) {\n      // notify service worker about new message notification\n      navigator.serviceWorker.controller.postMessage({\n        type: 'showMessageNotification',\n        payload: {\n          title,\n          body,\n          icon,\n          chatId: chat.id,\n          messageId: message.id,\n          shouldReplaceHistory: true,\n          isSilent: isSilent || message.isSilent,\n          reaction: activeReaction?.reaction,\n        },\n      });\n    }\n  } else {\n    const dispatch = getActions();\n    const options: NotificationOptions = {\n      body,\n      icon,\n      badge: icon,\n      tag: String(message.id),\n    };\n\n    if ('vibrate' in navigator) {\n      // @ts-ignore\n      options.vibrate = [200, 100, 200];\n    }\n\n    const notification = new Notification(title, options);\n\n    notification.onclick = () => {\n      notification.close();\n      dispatch.focusMessage({\n        chatId: chat.id,\n        messageId: message.id!,\n        shouldReplaceHistory: true,\n      });\n      if (window.focus) {\n        window.focus();\n      }\n    };\n\n    // Play sound when notification is displayed\n    notification.onshow = () => {\n      // TODO Update when reaction badges are implemented\n      if (isReaction || message.isSilent || IS_ELECTRON) return;\n      playNotifySoundDebounced(String(message.id) || chat.id);\n    };\n  }\n}\n\nexport function closeMessageNotifications(payload: { chatId: string; lastReadInboxMessageId?: number }) {\n  if (IS_TEST || !navigator.serviceWorker?.controller) return;\n  navigator.serviceWorker.controller.postMessage({\n    type: 'closeMessageNotifications',\n    payload,\n  });\n}\n\n// Notify service worker that client is fully loaded\nexport function notifyClientReady() {\n  if (!navigator.serviceWorker?.controller) return;\n  navigator.serviceWorker.controller.postMessage({\n    type: 'clientReady',\n  });\n}\n","const SAMPLE_RATE = 48000;\nconst BIT_DEPTH = 16;\n\nexport async function oggToWav(opusData: Blob): Promise<Blob> {\n  const arrayBuffer = await new Response(opusData).arrayBuffer();\n\n  return new Promise((resolve) => {\n    const typedArray = new Uint8Array(arrayBuffer);\n\n    let decoderWorker: Worker | undefined = new Worker(\n      new URL('opus-recorder/dist/decoderWorker.min.js', import.meta.url),\n    );\n    let wavWorker: Worker | undefined = new Worker(new URL('opus-recorder/dist/waveWorker.min.js', import.meta.url));\n\n    decoderWorker.onmessage = (e) => {\n      // eslint-disable-next-line no-null/no-null\n      if (e.data === null) {\n        // `null` means decoder is finished\n        wavWorker!.postMessage({ command: 'done' });\n      } else {\n        // `e.data` contains decoded buffers as float32 values\n        wavWorker!.postMessage(\n          {\n            command: 'encode',\n            buffers: e.data,\n          },\n          e.data.map(({ buffer }: Float32Array) => buffer),\n        );\n      }\n    };\n\n    wavWorker.onmessage = (e) => {\n      if (e.data.message === 'page') {\n        resolve(new Blob([e.data.page], { type: 'audio/wav' }));\n\n        decoderWorker!.terminate();\n        decoderWorker = undefined;\n        wavWorker!.terminate();\n        wavWorker = undefined;\n      }\n    };\n\n    wavWorker.postMessage({\n      command: 'init',\n      wavBitDepth: BIT_DEPTH,\n      wavSampleRate: SAMPLE_RATE,\n    });\n\n    decoderWorker.postMessage({\n      command: 'init',\n      decoderSampleRate: SAMPLE_RATE,\n      outputBufferSampleRate: SAMPLE_RATE,\n    });\n\n    decoderWorker.postMessage({\n      command: 'decode',\n      pages: typedArray,\n    }, [typedArray.buffer]);\n  });\n}\n","import { getGlobal } from '../global';\n\nimport type { ApiOldLangPack, ApiOldLangString } from '../api/types';\nimport type { LangCode, TimeFormat } from '../types';\n\nimport {\n  LANG_CACHE_NAME, LANG_PACKS,\n} from '../config';\nimport { selectSharedSettings } from '../global/selectors/sharedState';\nimport { callApi } from '../api/gramjs';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { loadAndChangeLanguage } from './localization';\nimport { formatInteger } from './textFormat';\n\nexport interface LangFn {\n  (key: string, value?: any, format?: 'i', pluralValue?: number): string;\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n  timeFormat?: TimeFormat;\n}\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\nconst PLURAL_RULES = {\n  /* eslint-disable @stylistic/max-len */\n  en: (n: number) => (n !== 1 ? 6 : 2),\n  ar: (n: number) => (n === 0 ? 1 : n === 1 ? 2 : n === 2 ? 3 : n % 100 >= 3 && n % 100 <= 10 ? 4 : n % 100 >= 11 ? 5 : 6),\n  be: (n: number) => {\n    const s = String(n).split('.');\n    const t0 = Number(s[0]) === n;\n    const n10 = t0 ? Number(s[0].slice(-1)) : 0;\n    const n100 = t0 ? Number(s[0].slice(-2)) : 0;\n    return n10 === 1 && n100 !== 11\n      ? 2\n      : (n10 >= 2 && n10 <= 4) && (n100 < 12 || n100 > 14)\n        ? 4\n        : (t0 && n10 === 0) || (n10 >= 5 && n10 <= 9) || (n100 >= 11 && n100 <= 14)\n          ? 5\n          : 6;\n  },\n  ca: (n: number) => (n !== 1 ? 6 : 2),\n  cs: (n: number) => {\n    const s = String(n).split('.');\n    const i = Number(s[0]);\n    const v0 = !s[1];\n    return n === 1 && v0 ? 2 : (i >= 2 && i <= 4) && v0 ? 4 : !v0 ? 5 : 6;\n  },\n  de: (n: number) => (n !== 1 ? 6 : 2),\n  es: (n: number) => (n !== 1 ? 6 : 2),\n  fa: (n: number) => (n > 1 ? 6 : 2),\n  fi: (n: number) => (n !== 1 ? 6 : 2),\n  fr: (n: number) => (n > 1 ? 6 : 2),\n  id: () => 0,\n  it: (n: number) => (n !== 1 ? 6 : 2),\n  hr: (n: number) => {\n    const s = String(n).split('.');\n    const i = s[0];\n    const f = s[1] || '';\n    const v0 = !s[1];\n    const i10 = Number(i.slice(-1));\n    const i100 = Number(i.slice(-2));\n    const f10 = Number(f.slice(-1));\n    const f100 = Number(f.slice(-2));\n    return (v0 && i10 === 1 && i100 !== 11) || (f10 === 1 && f100 !== 11) ? 2\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)) || ((f10 >= 2 && f10 <= 4) && (f100 < 12 || f100 > 14)) ? 4\n        : 6;\n  },\n  hu: (n: number) => (n > 1 ? 6 : 2),\n  ko: () => 0,\n  ms: () => 0,\n  nb: (n: number) => (n > 1 ? 6 : 2),\n  nl: (n: number) => (n !== 1 ? 6 : 2),\n  pl: (n: number) => (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  'pt-br': (n: number) => (n > 1 ? 6 : 2),\n  ru: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  sk: (n: number) => {\n    const s = String(n).split('.');\n    const i = Number(s[0]);\n    const v0 = !s[1];\n    return n === 1 && v0 ? 2 : (i >= 2 && i <= 4) && v0 ? 4 : !v0 ? 5 : 6;\n  },\n  sr: (n: number) => {\n    const s = String(n).split('.');\n    const i = s[0];\n    const f = s[1] || '';\n    const v0 = !s[1];\n    const i10 = Number(i.slice(-1));\n    const i100 = Number(i.slice(-2));\n    const f10 = Number(f.slice(-1));\n    const f100 = Number(f.slice(-2));\n    return (v0 && i10 === 1 && i100 !== 11) || (f10 === 1 && f100 !== 11) ? 2\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)) || ((f10 >= 2 && f10 <= 4) && (f100 < 12 || f100 > 14)) ? 4\n        : 6;\n  },\n  tr: (n: number) => (n > 1 ? 6 : 2),\n  uk: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  uz: (n: number) => (n > 1 ? 6 : 2),\n  /* eslint-enable @stylistic/max-len */\n};\n\nconst cache = new Map<string, string>();\n\nlet langPack: ApiOldLangPack | undefined;\nlet fallbackLangPack: ApiOldLangPack | undefined;\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nlet currentLangCode: string | undefined;\nlet currentTimeFormat: TimeFormat | undefined;\n\nfunction createLangFn() {\n  return (key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!fallbackLangPack) {\n      void importFallbackLangPack();\n    }\n\n    const langString = langPack?.[key] || fallbackLangPack?.[key];\n    if (!langString) {\n      return key;\n    }\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  };\n}\n\nlet translationFn: LangFn = createLangFn();\n\n/**\n * @deprecated Do not translate inside non-reactive contexts. Pass parameters to the component instead\n */\nexport function oldTranslate(...args: Parameters<LangFn>) {\n  return translationFn(...args);\n}\n\nexport function getTranslationFn(): LangFn {\n  return translationFn;\n}\n\n/**\n * @deprecated Migrate to `changeLanguage` in `util/localization.ts` instead\n */\nexport async function oldSetLanguage(langCode: LangCode, callback?: NoneToVoidFunction, withFallback = false) {\n  loadAndChangeLanguage(langCode, true);\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode, cacheApi.Type.Json);\n  if (!newLangPack) {\n    if (withFallback) {\n      await importFallbackLangPack();\n    }\n\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const global = getGlobal();\n  const { languages, timeFormat } = selectSharedSettings(global);\n  const langInfo = languages?.find((lang) => lang.langCode === langCode);\n  translationFn = createLangFn();\n  translationFn.isRtl = Boolean(langInfo?.isRtl);\n  translationFn.code = langCode.replace('-raw', '') as LangCode;\n  translationFn.langName = langInfo?.nativeName;\n  translationFn.timeFormat = timeFormat;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function setTimeFormat(timeFormat: TimeFormat) {\n  if (timeFormat && timeFormat === currentTimeFormat) {\n    return;\n  }\n\n  currentTimeFormat = timeFormat;\n  translationFn.timeFormat = timeFormat;\n\n  runCallbacks();\n}\n\nasync function importFallbackLangPack() {\n  if (fallbackLangPack) {\n    return;\n  }\n\n  fallbackLangPack = (await import('./fallbackLangPack')).default;\n  runCallbacks();\n}\n\nasync function fetchRemote(langCode: string): Promise<ApiOldLangPack | undefined> {\n  const remote = await callApi('oldFetchLangPack', { sourceLangPacks: LANG_PACKS, langCode });\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote.langPack);\n    return remote.langPack;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || 'en';\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\nfunction processTranslation(\n  langString: ApiOldLangString | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template?.trim()) {\n    const parts = key.split('.');\n\n    return parts[parts.length - 1];\n  }\n\n  if (value !== undefined) {\n    const formattedValue = format === 'i' ? formatInteger(value) : value;\n    const result = processTemplate(template, formattedValue);\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n    return result;\n  }\n\n  return template;\n}\n","import { LEGACY_PASSCODE_CACHE_NAME } from '../config';\nimport { PASSCODE_IDB_STORE } from './browser/idb';\nimport * as cacheApi from './cacheApi';\n\nconst IV_LENGTH = 12;\nconst SALT = 'harder better faster stronger';\n\nlet currentPasscodeHash: ArrayBuffer | undefined;\n\nexport class UnrecoverablePasscodeError extends Error {}\n\nexport function getPasscodeHash() {\n  return currentPasscodeHash;\n}\n\nexport function setPasscodeHash(passcodeHash: ArrayBuffer) {\n  currentPasscodeHash = passcodeHash;\n}\n\nexport async function setupPasscode(passcode: string) {\n  currentPasscodeHash = await sha256(passcode);\n}\n\nexport async function encryptSession(sessionJson?: string, globalJson?: string) {\n  if (!currentPasscodeHash) {\n    // eslint-disable-next-line no-console\n    console.error('[api/passcode] Missing current passcode');\n    throw new Error('[api/passcode] Missing current passcode');\n  }\n\n  await Promise.all([\n    (async () => {\n      if (!sessionJson) return;\n\n      const sessionEncrypted = await aesEncrypt(sessionJson, currentPasscodeHash);\n      await store('sessionEncrypted', sessionEncrypted);\n    })(),\n    (async () => {\n      if (!globalJson) return;\n\n      const globalEncrypted = await aesEncrypt(globalJson, currentPasscodeHash);\n      await store('globalEncrypted', globalEncrypted);\n    })(),\n  ]);\n}\n\nexport async function decryptSessionByCurrentHash() {\n  if (!currentPasscodeHash) {\n    // eslint-disable-next-line no-console\n    console.error('[api/passcode] Missing current passcode');\n    throw new Error('[api/passcode] Missing current passcode');\n  }\n\n  const [sessionEncrypted, globalEncrypted] = await Promise.all([\n    load('sessionEncrypted'),\n    load('globalEncrypted'),\n  ]);\n\n  if (!sessionEncrypted || !globalEncrypted) {\n    // eslint-disable-next-line no-console\n    console.error('[api/passcode] Missing required stored fields');\n    throw new Error('[api/passcode] Missing required stored fields');\n  }\n\n  try {\n    const [sessionJson, globalJson] = await Promise.all([\n      aesDecrypt(sessionEncrypted, currentPasscodeHash),\n      aesDecrypt(globalEncrypted, currentPasscodeHash),\n    ]);\n\n    return { sessionJson, globalJson };\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error('[api/passcode] Error decrypting session', err);\n    throw err;\n  }\n}\n\nexport async function decryptSession(passcode: string) {\n  const passcodeHash = await sha256(passcode);\n\n  const [sessionEncrypted, globalEncrypted] = await Promise.all([\n    load('sessionEncrypted'),\n    load('globalEncrypted'),\n  ]);\n\n  if (!sessionEncrypted || !globalEncrypted) {\n    // eslint-disable-next-line no-console\n    console.error('[api/passcode] Missing required stored fields');\n    throw new UnrecoverablePasscodeError('[api/passcode] Missing required stored fields');\n  }\n\n  try {\n    const [sessionJson, globalJson] = await Promise.all([\n      aesDecrypt(sessionEncrypted, passcodeHash),\n      aesDecrypt(globalEncrypted, passcodeHash),\n    ]);\n\n    currentPasscodeHash = passcodeHash;\n\n    return { sessionJson, globalJson };\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error('[api/passcode] Error decrypting session', err);\n    throw err;\n  }\n}\n\nexport function forgetPasscode() {\n  currentPasscodeHash = undefined;\n}\n\nexport function clearEncryptedSession() {\n  forgetPasscode();\n  PASSCODE_IDB_STORE.clear();\n  return cacheApi.clear(LEGACY_PASSCODE_CACHE_NAME);\n}\n\nfunction sha256(plaintext: string) {\n  return crypto.subtle.digest('SHA-256', new TextEncoder().encode(`${plaintext}${SALT}`));\n}\n\nfunction store(key: string, value: ArrayBuffer) {\n  const asArray = Array.from(new Uint8Array(value));\n  return PASSCODE_IDB_STORE.set(key, asArray);\n}\n\nexport function hasEncryptedSession() {\n  return PASSCODE_IDB_STORE.get('sessionEncrypted');\n}\n\nasync function load(key: string) {\n  const cached = await PASSCODE_IDB_STORE.get<number[]>(key);\n  if (cached) {\n    const asArrayBuffer = new Uint8Array(cached).buffer;\n    return asArrayBuffer;\n  }\n  // Fallback for old data\n  return cacheApi.fetch(LEGACY_PASSCODE_CACHE_NAME, key, cacheApi.Type.ArrayBuffer);\n}\n\nasync function aesEncrypt(plaintext: string, pwHash: ArrayBuffer) {\n  const iv = crypto.getRandomValues(new Uint8Array(IV_LENGTH));\n  const alg = { name: 'AES-GCM', iv };\n  const key = await crypto.subtle.importKey('raw', pwHash, alg, false, ['encrypt']);\n  const ptUint8 = new TextEncoder().encode(plaintext);\n  const ctBuffer = await crypto.subtle.encrypt(alg, key, ptUint8);\n  const ct = new Uint8Array(ctBuffer);\n  const result = new Uint8Array(IV_LENGTH + ct.length);\n  result.set(iv, 0);\n  result.set(ct, IV_LENGTH);\n  return result.buffer;\n}\n\nasync function aesDecrypt(data: ArrayBuffer, pwHash: ArrayBuffer) {\n  const dataArray = new Uint8Array(data);\n  const iv = dataArray.slice(0, IV_LENGTH);\n  const alg = { name: 'AES-GCM', iv };\n  const key = await crypto.subtle.importKey('raw', pwHash, alg, false, ['decrypt']);\n  const ct = dataArray.slice(IV_LENGTH);\n  const plainBuffer = await crypto.subtle.decrypt(alg, key, ct);\n\n  return new TextDecoder().decode(plainBuffer);\n}\n","/*\n * Thanks to Ace Monkey for this mind-blowing patch.\n */\n\nexport function patchSafariProgressiveAudio(audioEl: HTMLAudioElement) {\n  if (audioEl.dataset.patchedForSafari) {\n    return;\n  }\n\n  audioEl.addEventListener('play', () => {\n    const t = audioEl.currentTime;\n\n    audioEl.dataset.patchForSafariInProgress = 'true';\n    function onProgress() {\n      if (!audioEl.buffered.length) {\n        return;\n      }\n      audioEl.currentTime = audioEl.duration - 1;\n      audioEl.addEventListener('progress', () => {\n        delete audioEl.dataset.patchForSafariInProgress;\n        audioEl.currentTime = t;\n        if (audioEl.paused && !audioEl.dataset.preventPlayAfterPatch) {\n          audioEl.play();\n        }\n      }, { once: true });\n\n      audioEl.removeEventListener('progress', onProgress);\n    }\n\n    audioEl.addEventListener('progress', onProgress);\n  }, { once: true });\n\n  audioEl.dataset.patchedForSafari = 'true';\n}\n\nexport function isSafariPatchInProgress(audioEl: HTMLAudioElement) {\n  return Boolean(audioEl.dataset.patchForSafariInProgress);\n}\n","import type { PerformanceType } from '../types';\n\nexport function applyPerformanceSettings(performanceType: PerformanceType) {\n  const {\n    pageTransitions,\n    messageSendingAnimations,\n    mediaViewerAnimations,\n    messageComposerAnimations,\n    contextMenuAnimations,\n    contextMenuBlur,\n    rightColumnAnimations,\n  } = performanceType;\n\n  const root = document.body;\n\n  root.classList.toggle('no-page-transitions', !pageTransitions);\n  root.classList.toggle('no-message-sending-animations', !messageSendingAnimations);\n  root.classList.toggle('no-media-viewer-animations', !mediaViewerAnimations);\n  root.classList.toggle('no-message-composer-animations', !messageComposerAnimations);\n  root.classList.toggle('no-context-menu-animations', !contextMenuAnimations);\n  root.classList.toggle('no-menu-blur', !contextMenuBlur);\n  root.classList.toggle('no-right-column-animations', !rightColumnAnimations);\n}\n","import { getActions } from '../global';\n\nimport { PRODUCTION_HOSTNAME, WEB_VERSION_BASE } from '../config';\nimport { clearWebsync } from './websync';\n\ntype AvailableVersions = 'Z' | 'K';\n\nconst SEARCH_ENGINE_REGEX = /(^|\\.)(google|bing|duckduckgo|ya|yandex)\\./i;\n// Handled by the legacy version. Cannot be updated\nconst PERMANENT_VERSION_KEY = 'kz_version';\nconst CLIENT_VERSION: AvailableVersions = 'Z';\n\nfunction setPermanentWebVersion(version: AvailableVersions) {\n  localStorage.setItem(PERMANENT_VERSION_KEY, JSON.stringify(version));\n}\n\nexport function getPermanentWebVersion(): AvailableVersions | undefined {\n  const version = localStorage.getItem(PERMANENT_VERSION_KEY);\n  if (version) {\n    return JSON.parse(version);\n  }\n\n  return undefined;\n}\n\nexport function switchPermanentWebVersion(version: AvailableVersions) {\n  setPermanentWebVersion(version);\n  clearWebsync();\n  getActions().skipLockOnUnload();\n  window.location.assign(`${WEB_VERSION_BASE}${version.toLowerCase()}`);\n}\n\nexport function checkAndAssignPermanentWebVersion() {\n  if (window.location.hostname !== PRODUCTION_HOSTNAME) return;\n\n  const referrer = document.referrer.toLowerCase();\n  if (!referrer) return;\n  try {\n    const isSearchEngine = new URL(referrer).host.match(SEARCH_ENGINE_REGEX);\n    if (!isSearchEngine) return;\n\n    const currentVersion = getPermanentWebVersion();\n    if (currentVersion) {\n      if (currentVersion !== CLIENT_VERSION) {\n        switchPermanentWebVersion(currentVersion);\n      }\n      return;\n    }\n\n    const urlParams = new URLSearchParams(window.location.search);\n    const hasTest = (urlParams.get('test') ?? undefined) !== undefined;\n    const shouldRedirect = Math.random() < 0.5;\n\n    if (hasTest || !shouldRedirect) {\n      setPermanentWebVersion('Z');\n      return;\n    }\n\n    switchPermanentWebVersion('K');\n  } catch (e) {\n    // Ignore\n  }\n}\n","import type { ApiCountryCode } from '../api/types';\n\nconst PATTERN_PLACEHOLDER = 'X';\nconst DEFAULT_PATTERN = 'XXX XXX XXX XXX';\n\nexport function getCountryCodeByIso(phoneCodeList: ApiCountryCode[], iso: string) {\n  return phoneCodeList.find((country) => country.iso2 === iso);\n}\n\nexport function getCountryFromPhoneNumber(phoneCodeList: ApiCountryCode[], input = '') {\n  let phoneNumber = input.replace(/[^\\d+]+/g, '');\n  if (phoneNumber.startsWith('+')) {\n    phoneNumber = phoneNumber.substr(1);\n  }\n\n  const possibleCountries = phoneCodeList\n    .filter((country) => phoneNumber.startsWith(country.countryCode));\n  const codesWithPrefix: { code: string; country: ApiCountryCode }[] = possibleCountries\n    .map((country) => (country.prefixes || ['']).map((prefix) => {\n      return {\n        code: `${country.countryCode}${prefix}`,\n        country,\n      };\n    }))\n    .flat();\n\n  const bestMatches = codesWithPrefix\n    .filter(({ code }) => phoneNumber.startsWith(code))\n    .sort((a, b) => a.code.length - b.code.length);\n\n  return bestMatches[bestMatches.length - 1]?.country;\n}\n\nexport function formatPhoneNumber(input: string, country?: ApiCountryCode) {\n  if (!input) {\n    return '';\n  }\n\n  let phoneNumber = input.replace(/[^\\d]+/g, '');\n  if (country) {\n    phoneNumber = phoneNumber.substr(country.countryCode.length);\n  } else if (input.startsWith('+')) {\n    return input;\n  }\n  const pattern = getBestPattern(phoneNumber, country?.patterns);\n\n  const result: string[] = []; // Result character array\n  let j = 0; // Position inside pattern\n  for (let i = 0; i < phoneNumber.length; i++) {\n    while (pattern[j] !== PATTERN_PLACEHOLDER && j < pattern.length) {\n      result.push(pattern[j]);\n      if (pattern[j] === phoneNumber[i]) { // If pattern contains digits, move input position too\n        i++;\n        if (i === phoneNumber.length) break; // But don't overdo it, or it will insert full pattern unexpectedly\n      }\n      j++;\n    }\n\n    result.push(phoneNumber[i]); // For placeholder characters, setting current input digit\n    j++;\n  }\n\n  return result.join('');\n}\n\nfunction getBestPattern(numberWithoutCode: string, patterns?: string[]) {\n  if (!patterns || patterns.length === 0) return DEFAULT_PATTERN;\n  if (patterns.length === 1) return patterns[0];\n\n  const defaultPattern = patterns.find((pattern) => pattern.startsWith(PATTERN_PLACEHOLDER)) || DEFAULT_PATTERN;\n\n  const bestMatches = patterns.filter((pattern) => {\n    const stripped = pattern.replace(/[^\\dX]+/g, '');\n    if (stripped.startsWith(PATTERN_PLACEHOLDER)) return false; // Don't consider default number format here\n    for (let i = 0; i < numberWithoutCode.length; i++) {\n      if (i > stripped.length - 1 || (stripped[i] !== PATTERN_PLACEHOLDER && stripped[i] !== numberWithoutCode[i])) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  // Playing it safe: if not sure, use default for that region\n  return bestMatches.length === 1 ? bestMatches[0] : defaultPattern;\n}\n\nexport function formatPhoneNumberWithCode(phoneCodeList: ApiCountryCode[], phoneNumber: string) {\n  if (!phoneNumber) {\n    return '';\n  }\n\n  const numberWithPlus = phoneNumber.startsWith('+') ? phoneNumber : `+${phoneNumber}`;\n  const country = getCountryFromPhoneNumber(phoneCodeList, numberWithPlus);\n  if (!country) {\n    return numberWithPlus;\n  }\n  return `+${country.countryCode} ${formatPhoneNumber(numberWithPlus, country)}`;\n}\n","const PRETTY_BY_ALIAS: Record<string, string | undefined> = {\n  js: 'JavaScript',\n  javascript: 'JavaScript',\n  ts: 'TypeScript',\n  typescript: 'TypeScript',\n  python: 'Python',\n  py: 'Python',\n  go: 'Go',\n  rust: 'Rust',\n  func: 'FunC',\n  c: 'C',\n  'c++': 'C++',\n  cpp: 'C++',\n  fortran: 'Fortran',\n  f90: 'Fortran',\n  f: 'Fortran',\n  java: 'Java',\n  sql: 'SQL',\n  swift: 'Swift',\n  'objective-c': 'Objective-C',\n  kotlin: 'Kotlin',\n  ruby: 'Ruby',\n  rb: 'Ruby',\n  php: 'PHP',\n  perl: 'Perl',\n  bash: 'Bash',\n  sh: 'Shell',\n  markdown: 'Markdown',\n  'c#': 'C#',\n  cs: 'C#',\n  json: 'JSON',\n  yaml: 'YAML',\n  yml: 'YAML',\n  solidity: 'Solidity',\n  sol: 'Solidity',\n  tl: 'TL',\n};\n\nexport function getPrettyCodeLanguageName(codeLanguage: string) {\n  const prettyLangName = PRETTY_BY_ALIAS[codeLanguage.toLowerCase()];\n  return prettyLangName ?? codeLanguage;\n}\n","/**\n * A Map that has a limited size. When the limit is reached, the oldest entry is removed.\n * Ignores last access time, only cares about insertion order.\n */\nexport default class LimitedMap<K, V> {\n  private map: Map<K, V>;\n\n  private insertionQueue: Set<K>;\n\n  constructor(private limit: number) {\n    this.map = new Map();\n    this.insertionQueue = new Set<K>();\n  }\n\n  public get(key: K): V | undefined {\n    return this.map.get(key);\n  }\n\n  public set(key: K, value: V): this {\n    if (this.map.size === this.limit) {\n      const keyToRemove = Array.from(this.insertionQueue).shift();\n      if (keyToRemove) {\n        this.map.delete(keyToRemove);\n        this.insertionQueue.delete(keyToRemove);\n      }\n    }\n\n    this.map.set(key, value);\n    this.insertionQueue.add(key);\n\n    return this;\n  }\n\n  public has(key: K): boolean {\n    return this.map.has(key);\n  }\n\n  public delete(key: K): boolean {\n    const result = this.map.delete(key);\n    if (result) {\n      this.insertionQueue.delete(key);\n    }\n    return result;\n  }\n\n  public clear(): void {\n    this.map.clear();\n    this.insertionQueue.clear();\n  }\n\n  public forEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: unknown): void {\n    this.map.forEach(callbackfn, thisArg);\n  }\n\n  public get size(): number {\n    return this.map.size;\n  }\n\n  public get [Symbol.toStringTag](): string {\n    return this.map[Symbol.toStringTag];\n  }\n\n  public [Symbol.iterator](): IterableIterator<[K, V]> {\n    return this.map[Symbol.iterator]();\n  }\n\n  public entries(): IterableIterator<[K, V]> {\n    return this.map.entries();\n  }\n\n  public keys(): IterableIterator<K> {\n    return this.map.keys();\n  }\n\n  public values(): IterableIterator<V> {\n    return this.map.values();\n  }\n}\n","import { type TeactNode } from '../lib/teact/teact';\n\nexport function replaceWithTeact(\n  input: string, searchValue: string | RegExp, replaceValue: TeactNode,\n) {\n  const parts = input.split(searchValue);\n  const [firstElement, ...rest] = parts;\n\n  return rest.reduce((acc: TeactNode[], curr: string): TeactNode[] => (\n    acc.concat(replaceValue, curr)\n  ), [firstElement]).filter(Boolean);\n}\n\nexport function replaceInStringsWithTeact(\n  input: TeactNode[], searchValue: string | RegExp, replaceValue: TeactNode,\n) {\n  return input.flatMap((curr: TeactNode) => {\n    if (typeof curr === 'string') return replaceWithTeact(curr, searchValue, replaceValue);\n    return curr;\n  }, []);\n}\n","import { getActions } from '../global';\n\nimport type { CallbackAction } from '../global/types';\n\nconst callbacks = new Map<string, number>();\n\n// TODO Pass callbacks to the master tab. Sync them on master change\nexport default function requestActionTimeout(action: CallbackAction, timeout: number) {\n  const name = action.action;\n  clearTimeout(callbacks.get(name));\n  const timerId = window.setTimeout(() => {\n    // @ts-expect-error -- No idea how to properly type this\n    getActions()[name](action.payload);\n  }, timeout);\n  callbacks.set(name, timerId);\n}\n","import type { MessageListType, ThreadId } from '../types';\nimport { MAIN_THREAD_ID } from '../api/types';\n\nimport { IS_MOCKED_CLIENT } from '../config';\n\nlet parsedInitialLocationHash: Record<string, string> | undefined;\nlet messageHash: string | undefined;\nlet isAlreadyParsed = false;\nlet initialLocationHash = window.location.hash;\n\nexport function resetInitialLocationHash() {\n  isAlreadyParsed = false;\n  messageHash = undefined;\n  parsedInitialLocationHash = undefined;\n  initialLocationHash = '';\n}\n\nexport function resetLocationHash() {\n  window.location.hash = '';\n}\n\nexport const createLocationHash = (chatId: string, type: MessageListType, threadId: ThreadId): string => {\n  const displayType = type === 'thread' ? undefined : type;\n  const parts = threadId === MAIN_THREAD_ID ? [chatId, displayType] : [chatId, threadId, displayType];\n\n  return parts.filter(Boolean).join('_');\n};\n\nexport function parseLocationHash(currentUserId?: string) {\n  parseInitialLocationHash();\n\n  if (!messageHash) return undefined;\n\n  const parts = messageHash.split('_');\n  let chatId: string | undefined;\n  let type: string | undefined;\n  let threadId: string | undefined;\n  if (parts.length === 1) {\n    chatId = parts[0];\n  } else if (parts.length === 2) {\n    const isType = ['thread', 'pinned', 'scheduled'].includes(parts[1]);\n    chatId = parts[0];\n    type = isType ? parts[1] : 'thread';\n    threadId = !isType ? parts[1] : undefined;\n  } else if (parts.length >= 3) {\n    [chatId, threadId, type] = parts;\n  }\n  if (!chatId?.match(/^-?\\d+$/)) return undefined;\n\n  const isType = ['thread', 'pinned', 'scheduled'].includes(type!);\n\n  const castedThreadId = (chatId === currentUserId ? threadId : Number(threadId)) || MAIN_THREAD_ID;\n\n  return {\n    chatId,\n    type: type && isType ? (type as MessageListType) : 'thread',\n    threadId: castedThreadId,\n  };\n}\n\nexport const createMessageHashUrl = (chatId: string, type: MessageListType, threadId: ThreadId): string => {\n  const url = new URL(window.location.href);\n  url.hash = createLocationHash(chatId, type, threadId);\n  return url.href;\n};\n\nexport function parseInitialLocationHash() {\n  if (parsedInitialLocationHash) return parsedInitialLocationHash;\n\n  if (isAlreadyParsed) return undefined;\n\n  const locationHash = getInitialLocationHash();\n  if (!locationHash) return undefined;\n\n  let parsedHash = locationHash.replace(/^#/, '');\n  if (parsedHash.includes('?')) {\n    [messageHash, parsedHash] = parsedHash.split('?');\n    if (!IS_MOCKED_CLIENT) {\n      window.location.hash = messageHash;\n    }\n  } else if (parsedHash.includes('=')) {\n    if (!IS_MOCKED_CLIENT) {\n      window.location.hash = '';\n    }\n  }\n\n  parsedInitialLocationHash = parsedHash.includes('=') ? parsedHash.split('&').reduce((acc, cur) => {\n    const [key, value] = cur.split('=');\n    acc[key] = value;\n    return acc;\n  }, {} as Record<string, string>) : undefined;\n  isAlreadyParsed = true;\n  if (!parsedInitialLocationHash) {\n    messageHash = parsedHash;\n  }\n\n  return parsedInitialLocationHash;\n}\n\nexport function clearWebTokenAuth() {\n  if (!parsedInitialLocationHash) return;\n\n  delete parsedInitialLocationHash.tgWebAuthToken;\n}\n\nexport function getInitialLocationHash() {\n  return initialLocationHash;\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","import { DEBUG } from '../config';\n\nconst safePlay = (mediaEl: HTMLMediaElement) => {\n  mediaEl.play().catch((err) => {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn(err, mediaEl);\n    }\n  });\n};\n\nexport const getIsVideoPlaying = (video: HTMLVideoElement) => {\n  return video.currentTime > 0 && !video.paused && !video.ended && video.readyState > 2;\n};\n\nexport default safePlay;\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          self.clearInterval(interval);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          const currentCallbacks = fastRafCallbacks;\n          currentTimeoutCallbacks.forEach((callback) => currentCallbacks.delete(callback));\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","let RE_NOT_LETTER: RegExp;\n\ntry {\n  RE_NOT_LETTER = /[^\\p{L}\\p{M}]+/ui;\n} catch (e) {\n  // Support for older versions of firefox\n  RE_NOT_LETTER = /[^\\wа-яёґєії]+/i;\n}\n\nexport default function searchWords(haystack: string, needle: string | string[]) {\n  if (!haystack || !needle) {\n    return false;\n  }\n\n  const needleWords = typeof needle === 'string' ? needle.toLowerCase().split(RE_NOT_LETTER) : needle;\n  const haystackLower = haystack.toLowerCase();\n\n  // @optimization\n  if (needleWords.length === 1 && !haystackLower.includes(needleWords[0])) {\n    return false;\n  }\n\n  let haystackWords: string[];\n\n  return needleWords.every((needleWord) => {\n    if (!haystackLower.includes(needleWord)) {\n      return false;\n    }\n\n    if (!haystackWords) {\n      haystackWords = haystackLower.split(RE_NOT_LETTER);\n    }\n\n    return haystackWords.some((haystackWord) => haystackWord.startsWith(needleWord));\n  });\n}\n\nexport function prepareSearchWordsForNeedle(needle: string) {\n  const needleWords = needle.toLowerCase().split(RE_NOT_LETTER);\n\n  return (haystack: string) => searchWords(haystack, needleWords);\n}\n","let serverTimeOffset = 0;\n\nexport function setServerTimeOffset(_serverTimeOffset: number) {\n  serverTimeOffset = _serverTimeOffset;\n}\n\nexport function getServerTimeOffset() {\n  return serverTimeOffset;\n}\n\nexport function getServerTime() {\n  return Math.floor(Date.now() / 1000) + serverTimeOffset;\n}\n","import type { ApiSessionData } from '../api/types';\nimport type { DcId, SharedSessionData } from '../types';\n\nimport {\n  DC_IDS,\n  DEBUG, IS_SCREEN_LOCKED_CACHE_KEY,\n  SESSION_ACCOUNT_PREFIX,\n  SESSION_LEGACY_USER_KEY,\n} from '../config';\nimport { ACCOUNT_SLOT, storeAccountData, writeSlotSession } from './multiaccount';\n\nexport function hasStoredSession() {\n  if (checkSessionLocked()) {\n    return true;\n  }\n\n  const slotData = loadSlotSession(ACCOUNT_SLOT);\n  if (slotData) return Boolean(slotData.dcId);\n\n  if (!ACCOUNT_SLOT) {\n    const legacyAuthJson = localStorage.getItem(SESSION_LEGACY_USER_KEY);\n    if (legacyAuthJson) {\n      try {\n        const userAuth = JSON.parse(legacyAuthJson);\n        return Boolean(userAuth && userAuth.id && userAuth.dcID);\n      } catch (err) {\n        // Do nothing.\n        return false;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function storeSession(sessionData: ApiSessionData) {\n  const {\n    mainDcId, keys, isTest,\n  } = sessionData;\n\n  const currentSlotData = loadSlotSession(ACCOUNT_SLOT);\n  const newSlotData: SharedSessionData = {\n    ...currentSlotData,\n    dcId: mainDcId,\n    isTest,\n  };\n\n  Object.keys(keys).map(Number).forEach((dcId) => {\n    newSlotData[`dc${dcId as DcId}_auth_key`] = keys[dcId];\n  });\n\n  if (!ACCOUNT_SLOT) {\n    storeLegacySession(sessionData, currentSlotData?.userId);\n  }\n\n  writeSlotSession(ACCOUNT_SLOT, newSlotData);\n}\n\nfunction storeLegacySession(sessionData: ApiSessionData, currentUserId?: string) {\n  const {\n    mainDcId, keys, isTest,\n  } = sessionData;\n\n  localStorage.setItem(SESSION_LEGACY_USER_KEY, JSON.stringify({\n    dcID: mainDcId,\n    id: currentUserId,\n    test: isTest,\n  }));\n  localStorage.setItem('dc', String(mainDcId));\n  Object.keys(keys).map(Number).forEach((dcId) => {\n    localStorage.setItem(`dc${dcId}_auth_key`, JSON.stringify(keys[dcId]));\n  });\n}\n\nexport function clearStoredSession(slot?: number) {\n  if (!slot) {\n    clearStoredLegacySession();\n  }\n\n  localStorage.removeItem(`${SESSION_ACCOUNT_PREFIX}${slot || 1}`);\n}\n\nfunction clearStoredLegacySession() {\n  [\n    SESSION_LEGACY_USER_KEY,\n    'dc',\n    ...DC_IDS.map((dcId) => `dc${dcId}_auth_key`),\n    ...DC_IDS.map((dcId) => `dc${dcId}_hash`),\n    ...DC_IDS.map((dcId) => `dc${dcId}_server_salt`),\n  ].forEach((key) => {\n    localStorage.removeItem(key);\n  });\n}\n\nexport function loadStoredSession(): ApiSessionData | undefined {\n  if (!hasStoredSession()) {\n    return undefined;\n  }\n\n  const slotData = loadSlotSession(ACCOUNT_SLOT);\n\n  if (!slotData) {\n    if (ACCOUNT_SLOT) return undefined;\n    return loadStoredLegacySession();\n  }\n\n  const sessionData: ApiSessionData = {\n    mainDcId: slotData.dcId,\n    keys: DC_IDS.reduce((acc, dcId) => {\n      const key = slotData[`dc${dcId}_auth_key` as const];\n      if (key) {\n        acc[dcId] = key;\n      }\n      return acc;\n    }, {} as Record<number, string>),\n    isTest: slotData.isTest || undefined,\n  };\n\n  return sessionData;\n}\n\nfunction loadStoredLegacySession(): ApiSessionData | undefined {\n  if (!hasStoredSession()) {\n    return undefined;\n  }\n\n  const userAuth = JSON.parse(localStorage.getItem(SESSION_LEGACY_USER_KEY) || 'null');\n  if (!userAuth) {\n    return undefined;\n  }\n  const mainDcId = Number(userAuth.dcID);\n  const isTest = userAuth.test;\n  const keys: Record<number, string> = {};\n\n  DC_IDS.forEach((dcId) => {\n    try {\n      const key = localStorage.getItem(`dc${dcId}_auth_key`);\n      if (key) {\n        keys[dcId] = JSON.parse(key);\n      }\n    } catch (err) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.warn('Failed to load stored session', err);\n      }\n      // Do nothing.\n    }\n  });\n\n  if (!Object.keys(keys).length) return undefined;\n\n  return {\n    mainDcId,\n    keys,\n    isTest,\n  };\n}\n\nexport function loadSlotSession(slot: number | undefined): SharedSessionData | undefined {\n  try {\n    const data = JSON.parse(localStorage.getItem(`${SESSION_ACCOUNT_PREFIX}${slot || 1}`) || '{}') as SharedSessionData;\n    if (!data.dcId) return undefined;\n    return data;\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport function updateSessionUserId(currentUserId: string) {\n  const slotData = loadSlotSession(ACCOUNT_SLOT);\n  if (!slotData) return;\n  storeAccountData(ACCOUNT_SLOT, { userId: currentUserId });\n}\n\nexport function importTestSession() {\n  const sessionJson = process.env.TEST_SESSION!;\n  try {\n    const sessionData = JSON.parse(sessionJson) as ApiSessionData & { userId: string };\n    storeLegacySession(sessionData, sessionData.userId);\n  } catch (err) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to load test session', err);\n    }\n  }\n}\n\nexport function checkSessionLocked() {\n  return localStorage.getItem(IS_SCREEN_LOCKED_CACHE_KEY) === 'true';\n}\n","import { getActions } from '../global';\n\nimport { DEBUG, DEBUG_MORE, IS_TEST } from '../config';\nimport { IS_ANDROID, IS_IOS, IS_SERVICE_WORKER_SUPPORTED } from './browser/windowEnvironment';\nimport { formatShareText } from './deeplink';\nimport { validateFiles } from './files';\nimport { notifyClientReady, playNotifySoundDebounced } from './notifications';\n\ntype WorkerAction = {\n  type: string;\n  payload: Record<string, any>;\n};\n\nconst IGNORE_WORKER_PATH = '/k/';\n\nfunction handleWorkerMessage(e: MessageEvent) {\n  const action: WorkerAction = e.data;\n  if (DEBUG_MORE) {\n    // eslint-disable-next-line no-console\n    console.log('[SW] Message from worker', action);\n  }\n  if (!action.type) return;\n  const dispatch = getActions();\n  const payload = action.payload;\n  switch (action.type) {\n    case 'focusMessage':\n      dispatch.focusMessage?.(payload as any);\n      break;\n    case 'playNotificationSound':\n      playNotifySoundDebounced(action.payload.id);\n      break;\n    case 'share':\n      dispatch.openChatWithDraft({\n        text: formatShareText(payload.url, payload.text, payload.title),\n        files: validateFiles(payload.files),\n      });\n      break;\n  }\n}\n\nfunction subscribeToWorker() {\n  navigator.serviceWorker.removeEventListener('message', handleWorkerMessage);\n  navigator.serviceWorker.addEventListener('message', handleWorkerMessage);\n  // Notify web worker that client is ready to receive messages\n  notifyClientReady();\n}\n\nif (IS_SERVICE_WORKER_SUPPORTED) {\n  window.addEventListener('load', async () => {\n    try {\n      const controller = navigator.serviceWorker.controller;\n      if (!controller || controller.scriptURL.includes(IGNORE_WORKER_PATH)) {\n        const registrations = await navigator.serviceWorker.getRegistrations();\n        const ourRegistrations = registrations.filter((r) => !r.scope.includes(IGNORE_WORKER_PATH));\n        if (ourRegistrations.length) {\n          if (DEBUG) {\n            // eslint-disable-next-line no-console\n            console.log('[SW] Hard reload detected, re-enabling Service Worker');\n          }\n          await Promise.all(ourRegistrations.map((r) => r.unregister()));\n        }\n      }\n\n      await navigator.serviceWorker.register(new URL('../serviceWorker', import.meta.url));\n\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.log('[SW] ServiceWorker registered');\n      }\n\n      await navigator.serviceWorker.ready;\n\n      // Wait for registration to be available\n      await navigator.serviceWorker.getRegistration();\n\n      if (navigator.serviceWorker.controller) {\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.log('[SW] ServiceWorker ready');\n        }\n        subscribeToWorker();\n      } else {\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.error('[SW] ServiceWorker not available');\n        }\n\n        if (!IS_IOS && !IS_ANDROID && !IS_TEST) {\n          getActions().showDialog?.({ data: { message: 'SERVICE_WORKER_DISABLED', hasErrorKey: true } });\n        }\n      }\n    } catch (err) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[SW] ServiceWorker registration failed: ', err);\n      }\n    }\n  });\n  window.addEventListener('focus', async () => {\n    await navigator.serviceWorker.ready;\n    subscribeToWorker();\n  });\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = unknown> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n  once: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter<T = unknown> = (newValue: T) => void;\n\nexport function isSignal(obj: unknown): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import type React from '../lib/teact/teact';\n\nconst stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport default stopEvent;\n","import { SVG_NAMESPACE } from '../config';\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport jsxToHtml from './element/jsxToHtml';\nimport generateUniqueId from './generateUniqueId';\n\nconst DEFINITION_MAP = new Map<string, Element>();\n\nlet defs: SVGElement | undefined;\n\nfunction init() {\n  if (defs) return;\n\n  const container = document.createElementNS(SVG_NAMESPACE, 'svg');\n  container.setAttribute('width', '0');\n  container.setAttribute('height', '0');\n  container.setAttribute('viewBox', '0 0 1 1');\n  container.classList.add('svg-definitions');\n  document.body.appendChild(container);\n\n  defs = document.createElementNS(SVG_NAMESPACE, 'defs');\n  container.appendChild(defs);\n}\n\nfunction appendElement(element: Element) {\n  requestMutation(() => {\n    if (!defs) init();\n    defs!.appendChild(element);\n  });\n}\n\nexport function addSvgDefinition(element: React.JSX.Element, id?: string) {\n  id ??= generateUniqueId();\n  element.props.id = id;\n\n  const htmlElement = jsxToHtml(element)[0];\n  DEFINITION_MAP.set(element.props.id, htmlElement);\n  appendElement(htmlElement);\n  return id;\n}\n\nexport function removeSvgDefinition(id: string) {\n  const element = DEFINITION_MAP.get(id);\n  if (element) {\n    requestMutation(() => {\n      element.remove();\n    });\n    DEFINITION_MAP.delete(id);\n  }\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS } from './browser/windowEnvironment';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    excludedClosestSelector?: string;\n    selectorToPreventScroll?: string;\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    excludedClosestSelector: options.excludedClosestSelector,\n    selectorToPreventScroll: options.selectorToPreventScroll,\n    swipeThreshold: 10,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","import type { ThemeKey } from '../types';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport themeColors from '../styles/themes.json';\nimport { animate } from './animation';\nimport { lerp } from './math';\n\ntype RGBAColor = {\n  r: number;\n  g: number;\n  b: number;\n  a?: number;\n};\n\nlet isInitialized = false;\n\nconst DECIMAL_PLACES = 3;\nconst HEX_COLOR_REGEX = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i;\nconst DURATION_MS = 200;\nconst ENABLE_ANIMATION_DELAY_MS = 500;\nconst RGB_VARIABLES = new Set([\n  '--color-text',\n  '--color-primary-shade',\n  '--color-text-secondary',\n  '--color-accent-own',\n]);\n\nconst DISABLE_ANIMATION_CSS = `\n.no-animations #root *,\n.no-animations #root *::before,\n.no-animations #root *::after {\n  transition: none !important;\n}`;\n\nconst colors = (Object.keys(themeColors) as Array<keyof typeof themeColors>).map((property) => ({\n  property,\n  colors: [hexToRgb(themeColors[property][0]), hexToRgb(themeColors[property][1])],\n}));\n\nconst injectCss = (css: string) => {\n  const style = document.createElement('style');\n  style.textContent = css;\n  document.head.appendChild(style);\n  return () => {\n    document.head.removeChild(style);\n  };\n};\n\nconst switchTheme = (theme: ThemeKey, withAnimation: boolean) => {\n  const themeClassName = `theme-${theme}`;\n  if (document.documentElement.classList.contains(themeClassName)) {\n    return;\n  }\n  const isDarkTheme = theme === 'dark';\n  const shouldAnimate = isInitialized && withAnimation;\n  const startIndex = isDarkTheme ? 0 : 1;\n  const endIndex = isDarkTheme ? 1 : 0;\n  const startAt = Date.now();\n  const themeColorTag = document.querySelector('meta[name=\"theme-color\"]');\n\n  requestMutation(() => {\n    document.documentElement.classList.remove(`theme-${isDarkTheme ? 'light' : 'dark'}`);\n    let uninjectCss: (() => void) | undefined;\n    if (isInitialized) {\n      uninjectCss = injectCss(DISABLE_ANIMATION_CSS);\n      document.documentElement.classList.add('no-animations');\n    }\n    document.documentElement.classList.add(themeClassName);\n    if (themeColorTag) {\n      themeColorTag.setAttribute('content', isDarkTheme ? '#212121' : '#fff');\n    }\n\n    setTimeout(() => {\n      requestMutation(() => {\n        uninjectCss?.();\n        document.documentElement.classList.remove('no-animations');\n      });\n    }, ENABLE_ANIMATION_DELAY_MS);\n\n    isInitialized = true;\n\n    if (shouldAnimate) {\n      animate(() => {\n        const t = Math.min((Date.now() - startAt) / DURATION_MS, 1);\n\n        applyColorAnimationStep(startIndex, endIndex, transition(t));\n\n        return t < 1;\n      }, requestMutation);\n    } else {\n      applyColorAnimationStep(startIndex, endIndex);\n    }\n  });\n};\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n\nexport function hexToRgb(hex: string): RGBAColor {\n  const result = HEX_COLOR_REGEX.exec(hex)!;\n\n  return {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16),\n    a: result[4] !== undefined ? parseInt(result[4], 16) : undefined,\n  };\n}\n\nexport function lerpRgb(start: RGBAColor, end: RGBAColor, interpolationRatio: number): RGBAColor {\n  const r = Math.round(lerp(start.r, end.r, interpolationRatio));\n  const g = Math.round(lerp(start.g, end.g, interpolationRatio));\n  const b = Math.round(lerp(start.b, end.b, interpolationRatio));\n  const a = start.a !== undefined\n    ? Math.round(lerp(start.a, end.a!, interpolationRatio))\n    : undefined;\n\n  return {\n    r, g, b, a,\n  };\n}\n\nfunction applyColorAnimationStep(startIndex: number, endIndex: number, interpolationRatio: number = 1) {\n  colors.forEach(({ property, colors: propertyColors }) => {\n    const {\n      r, g, b, a,\n    } = lerpRgb(propertyColors[startIndex], propertyColors[endIndex], interpolationRatio);\n\n    const roundedA = a !== undefined ? Math.round((a / 255) * 10 ** DECIMAL_PLACES) / 10 ** DECIMAL_PLACES : undefined;\n\n    document.documentElement.style.setProperty(property, `rgb(${r},${g},${b}${roundedA ? `,${roundedA}` : ''})`);\n\n    if (RGB_VARIABLES.has(property)) {\n      document.documentElement.style.setProperty(`${property}-rgb`, `${r},${g},${b}`);\n    }\n  });\n}\n\nexport default switchTheme;\n","import type { ThemeKey } from '../types';\n\nlet systemThemeCache: ThemeKey = (\n  window.matchMedia?.('(prefers-color-scheme: dark)').matches\n) ? 'dark' : 'light';\n\nlet themeChangeCallback: ((newTheme: ThemeKey) => void) | undefined;\n\nexport function getSystemTheme() {\n  return systemThemeCache;\n}\n\nfunction handleSystemThemeChange(e: MediaQueryListEventMap['change']) {\n  systemThemeCache = e.matches ? 'dark' : 'light';\n\n  themeChangeCallback?.(systemThemeCache);\n}\n\nexport function setSystemThemeChangeCallback(callback: (newTheme: ThemeKey) => void) {\n  themeChangeCallback = callback;\n}\n\nwindow.matchMedia('(prefers-color-scheme: dark)')\n  .addEventListener('change', handleSystemThemeChange);\n","import type { OldLangFn } from '../hooks/useOldLang';\nimport type { LangFn } from './localization';\n\nimport EMOJI_REGEX from '../lib/twemojiRegex';\nimport fixNonStandardEmoji from './emoji/fixNonStandardEmoji';\nimport { floor } from './math';\nimport withCache from './withCache';\n\nexport function formatInteger(value: number) {\n  return String(value).replace(/\\d(?=(\\d{3})+$)/g, '$& ');\n}\n\nexport function formatIntegerCompact(lang: LangFn, views: number) {\n  if (views < 1e3) {\n    return lang.number(views);\n  }\n\n  if (views < 1e6) {\n    return `${lang.number(floor(views / 1e3, 1))}K`;\n  }\n\n  return `${lang.number(floor(views / 1e6, 1))}M`;\n}\n\nexport function formatPercent(value: number, fractionDigits = 1) {\n  return `${Number.isInteger(value) ? value : value.toFixed(fractionDigits)}%`;\n}\n\nexport const getFirstLetters = withCache((phrase: string, count = 2) => {\n  return phrase\n    .replace(/[.,!@#$%^&*()_+=\\-`~[\\]/\\\\{}:\"|<>?]+/gi, '')\n    .trim()\n    .split(/\\s+/)\n    .slice(0, count)\n    .map((word: string) => {\n      if (!word.length) return '';\n      word = fixNonStandardEmoji(word);\n      const emojis = word.match(EMOJI_REGEX);\n      if (emojis && word.startsWith(emojis[0])) {\n        return emojis[0];\n      }\n      return word.match(/./u)![0].toUpperCase();\n    })\n    .join('');\n});\n\nconst FILE_SIZE_UNITS = ['B', 'KB', 'MB', 'GB'];\nexport function formatFileSize(lang: OldLangFn, bytes: number, decimals = 1): string {\n  if (bytes === 0) {\n    return lang('FileSize.B', 0);\n  }\n\n  const k = 1024;\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  const value = (bytes / (k ** i)).toFixed(Math.max(decimals, 0));\n\n  return lang(`FileSize.${FILE_SIZE_UNITS[i]}`, value);\n}\n","import type { ApiPeerColors } from '../api/types';\n\nimport { PEER_COLOR_BG_ACTIVE_OPACITY, PEER_COLOR_BG_OPACITY, PEER_COLOR_GRADIENT_STEP } from '../config';\nimport { fastRaf } from './schedulers';\n\nconst GENERAL_VARIABLES = new Map<string, string>();\nconst LIGHT_VARIABLES = new Map<string, string>();\nconst DARK_VARIABLES = new Map<string, string>();\n\nconst style = document.createElement('style');\ndocument.head.appendChild(style);\n\nexport function setVariable(name: string, generalValue: string): void;\nexport function setVariable(name: string, lightValue: string, darkValue?: string): void;\nexport function setVariable(name: string, lightValueOrGeneral: string, darkValue?: string) {\n  if (!darkValue) {\n    GENERAL_VARIABLES.set(name, lightValueOrGeneral);\n    LIGHT_VARIABLES.delete(name);\n    DARK_VARIABLES.delete(name);\n  } else {\n    GENERAL_VARIABLES.delete(name);\n    LIGHT_VARIABLES.set(name, lightValueOrGeneral);\n    DARK_VARIABLES.set(name, darkValue);\n  }\n\n  scheduleVariableUpdate();\n}\n\nlet isUpdateScheduled = false;\nfunction scheduleVariableUpdate() {\n  if (isUpdateScheduled) return;\n  isUpdateScheduled = true;\n  fastRaf(updateVariables);\n}\n\nfunction updateVariables() {\n  const generalVariables = buildVariables(GENERAL_VARIABLES);\n  const lightVariables = buildVariables(LIGHT_VARIABLES);\n  const darkVariables = buildVariables(DARK_VARIABLES);\n\n  style.textContent = `\n    html {\n      ${generalVariables}\n    }\n\n    html.theme-light {\n      ${lightVariables}\n    }\n\n    html.theme-dark {\n      ${darkVariables}\n    }\n  `;\n}\n\nfunction buildVariables(map: Map<string, string>) {\n  return Array.from(map.entries()).map(([name, value]) => `--${name}: ${value};`).join(' ');\n}\n\nexport function updatePeerColors(\n  peerColors: ApiPeerColors['general'],\n) {\n  setPeerColor('0', ['#D45246']);\n  setPeerColor('1', ['#F68136']);\n  setPeerColor('2', ['#6C61DF']);\n  setPeerColor('3', ['#46BA43']);\n  setPeerColor('4', ['#5CAFFA']);\n  setPeerColor('5', ['#408ACF']);\n  setPeerColor('6', ['#D95574']);\n\n  Object.entries(peerColors).forEach(([key, value]) => {\n    if (!value.colors) return;\n    setPeerColor(key, value.colors, value.darkColors);\n  });\n}\n\nfunction setPeerColor(n: string, colors: string[], darkColors?: string[]) {\n  const mainLightColor = colors[0];\n  const mainDarkColor = darkColors?.[0];\n  if (!mainLightColor) return;\n\n  const lightBgColor = `${mainLightColor}${PEER_COLOR_BG_OPACITY}`;\n  const darkBgColor = mainDarkColor ? `${mainDarkColor}${PEER_COLOR_BG_OPACITY}` : undefined;\n\n  const lightBgActiveColor = `${mainLightColor}${PEER_COLOR_BG_ACTIVE_OPACITY}`;\n  const darkBgActiveColor = mainDarkColor ? `${mainDarkColor}${PEER_COLOR_BG_ACTIVE_OPACITY}` : undefined;\n\n  setVariable(`color-peer-${n}`, mainLightColor, mainDarkColor);\n  setVariable(`color-peer-bg-${n}`, lightBgColor, darkBgColor);\n  setVariable(`color-peer-bg-active-${n}`, lightBgActiveColor, darkBgActiveColor);\n\n  if (colors.length > 1) {\n    const lightGradientColors = colors.map((color, i) => (\n      `${color} ${i * PEER_COLOR_GRADIENT_STEP}px, ${color} ${(i + 1) * PEER_COLOR_GRADIENT_STEP}px`\n    ));\n    const darkGradientColors = darkColors?.map((color, i) => (\n      `${color} ${i * PEER_COLOR_GRADIENT_STEP}px, ${color} ${(i + 1) * PEER_COLOR_GRADIENT_STEP}px`\n    ));\n\n    const lightGradient = `repeating-linear-gradient(-45deg, ${lightGradientColors.join(', ')})`;\n    const darkGradient = darkGradientColors\n      ? `repeating-linear-gradient(-45deg, ${darkGradientColors.join(', ')})`\n      : undefined;\n    setVariable(`color-peer-gradient-${n}`, lightGradient, darkGradient);\n  }\n}\n","import type { ApiThemeParameters } from '../api/types';\n\nexport function extractCurrentThemeParams(): ApiThemeParameters {\n  const style = getComputedStyle(document.documentElement);\n\n  const backgroundColor = getPropertyHexColor(style, '--color-background')!;\n  const secondaryTextColor = getPropertyHexColor(style, '--color-text-secondary')!;\n\n  const bgColor = backgroundColor;\n  const textColor = getPropertyHexColor(style, '--color-text')!;\n  const buttonColor = getPropertyHexColor(style, '--color-primary')!;\n  const buttonTextColor = getPropertyHexColor(style, '--color-white')!;\n  const linkColor = getPropertyHexColor(style, '--color-links')!;\n  const hintColor = secondaryTextColor;\n  const secondaryBgColor = getPropertyHexColor(style, '--color-background-secondary')!;\n  const sectionSeparatorColor = getPropertyHexColor(style, '--color-divider')!;\n\n  const headerBgColor = backgroundColor;\n  const accentTextColor = getPropertyHexColor(style, '--color-primary')!;\n  const sectionBgColor = backgroundColor;\n  const sectionHeaderTextColor = secondaryTextColor;\n  const subtitleTextColor = hintColor;\n  const destructiveTextColor = getPropertyHexColor(style, '--color-error')!;\n\n  return {\n    bg_color: bgColor,\n    text_color: textColor,\n    hint_color: hintColor,\n    link_color: linkColor,\n    button_color: buttonColor,\n    button_text_color: buttonTextColor,\n    secondary_bg_color: secondaryBgColor,\n    header_bg_color: headerBgColor,\n    accent_text_color: accentTextColor,\n    section_bg_color: sectionBgColor,\n    section_header_text_color: sectionHeaderTextColor,\n    subtitle_text_color: subtitleTextColor,\n    destructive_text_color: destructiveTextColor,\n    section_separator_color: sectionSeparatorColor,\n  };\n}\n\nexport function validateHexColor(color: string) {\n  return /^#[0-9A-F]{6}$/i.test(color);\n}\n\nexport function getPropertyHexColor(style: CSSStyleDeclaration, property: string) {\n  const value = style.getPropertyValue(property);\n  if (!value) return undefined;\n  return prepareHexColor(value.trim());\n}\n\nexport function prepareHexColor(color: string) {\n  if (validateHexColor(color)) return color;\n  return `#${color.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","export default function trimText<T extends string | undefined>(text: T, length?: number) {\n  if (!text || !length || text.length <= length) {\n    return text;\n  }\n\n  return `${text.substring(0, length)}...`;\n}\n","// Original idea was found here\n// https://medium.com/@alshakero/how-to-setup-your-web-app-manifest-dynamically-using-javascript-f7fbee899a61\n\nimport { DEBUG } from '../config';\nimport { IS_MAC_OS } from './browser/windowEnvironment';\n\nexport default function updateWebmanifest() {\n  if (!IS_MAC_OS) {\n    return;\n  }\n\n  const manifest = document.getElementById('the-manifest-placeholder');\n  if (!manifest) {\n    return;\n  }\n\n  const url = `site_apple${DEBUG ? '_dev' : ''}.webmanifest`;\n  manifest.setAttribute('href', url);\n}\n","import { getGlobal } from '../global';\n\nimport {\n  APP_CODE_NAME,\n  DEBUG, IS_MOCKED_CLIENT,\n} from '../config';\nimport { IS_ELECTRON } from './browser/windowEnvironment';\nimport { hasStoredSession } from './sessions';\n\nconst WEBSYNC_URLS = [\n  't.me',\n  'telegram.me',\n].map((domain) => `https://${domain}/_websync_?`);\nconst WEBSYNC_VERSION = `${APP_VERSION} ${APP_CODE_NAME}`;\nconst WEBSYNC_KEY = 'tgme_sync';\nconst WEBSYNC_TIMEOUT = 86400;\n\nconst getTs = () => {\n  return Math.floor(Number(new Date()) / 1000);\n};\n\nconst saveSync = (authed: boolean) => {\n  const ts = getTs();\n  localStorage.setItem(WEBSYNC_KEY, JSON.stringify({\n    canRedirect: authed,\n    ts,\n  }));\n};\n\nlet lastTimeout: NodeJS.Timeout | undefined;\n\nexport const forceWebsync = (authed: boolean) => {\n  if (IS_MOCKED_CLIENT || IS_ELECTRON) return undefined;\n  const currentTs = getTs();\n\n  const { canRedirect, ts } = JSON.parse(localStorage.getItem(WEBSYNC_KEY) || '{}');\n\n  if (canRedirect !== authed || ts + WEBSYNC_TIMEOUT <= currentTs) {\n    return Promise.all(WEBSYNC_URLS.map((url) => {\n      return new Promise<void>((resolve, reject) => {\n        const script = document.createElement('script');\n\n        const removeElement = () => Boolean(document.body.removeChild(script));\n\n        script.src = url + new URLSearchParams({\n          authed: Number(authed).toString(),\n          version: WEBSYNC_VERSION,\n        }).toString();\n\n        document.body.appendChild(script);\n\n        script.onload = () => {\n          saveSync(authed);\n          removeElement();\n          if (lastTimeout) {\n            clearTimeout(lastTimeout);\n            lastTimeout = undefined;\n          }\n          startWebsync();\n          resolve();\n        };\n\n        script.onerror = () => {\n          removeElement();\n          reject();\n        };\n      });\n    }));\n  } else {\n    return Promise.resolve();\n  }\n};\n\nexport function stopWebsync() {\n  if (DEBUG || IS_ELECTRON) return;\n\n  if (lastTimeout) clearTimeout(lastTimeout);\n}\n\nexport function startWebsync() {\n  if (DEBUG || IS_ELECTRON) {\n    return;\n  }\n\n  if (lastTimeout !== undefined) return;\n  const currentTs = getTs();\n\n  const { ts } = JSON.parse(localStorage.getItem(WEBSYNC_KEY) || '{}');\n\n  const timeout = WEBSYNC_TIMEOUT - (currentTs - ts);\n\n  lastTimeout = setTimeout(() => {\n    const { authState } = getGlobal();\n\n    const authed = authState === 'authorizationStateReady' || hasStoredSession();\n    forceWebsync(authed);\n  }, Math.max(0, timeout * 1000));\n}\n\nexport function clearWebsync() {\n  localStorage.removeItem(WEBSYNC_KEY);\n}\n","import type { IDimensions } from '../types';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS } from './browser/windowEnvironment';\nimport { throttle } from './schedulers';\n\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = 100;\nconst WINDOW_RESIZE_THROTTLE_MS = 250;\n\nlet initialHeight = window.innerHeight;\nlet currentWindowSize = updateSizes();\n\nconst handleResize = throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_RESIZE_THROTTLE_MS, true);\n\nconst handleOrientationChange = throttle(() => {\n  initialHeight = window.innerHeight;\n  handleResize();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false);\n\nwindow.addEventListener('orientationchange', handleOrientationChange);\nif (IS_IOS) {\n  window.visualViewport!.addEventListener('resize', handleResize);\n} else {\n  window.addEventListener('resize', handleResize);\n}\n\nexport function updateSizes(): IDimensions {\n  let height: number;\n  if (IS_IOS) {\n    height = window.visualViewport!.height + window.visualViewport!.pageTop;\n  } else {\n    height = window.innerHeight;\n  }\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\nconst windowSize = {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\nexport default windowSize;\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"_d64f\":\"99d93aca0a3966edc709\",\"src_assets_localization_fallback_strings\":\"e8eda1e01e3b80268cd0\",\"src_util_fallbackLangPack_ts\":\"ef2c6c63ffa9dd710cb8\",\"vendors-node_modules_lowlight_lib_index_js\":\"1dc69b0f254498d10857\",\"src_util_highlightCode_ts\":\"da1a084f8b89f37e1d8a\",\"src_lib_rlottie_RLottie_ts\":\"c75d4422c1dcb50f0423\",\"shared-components\":\"637d51e4046e7d6fd7e5\",\"src_global_helpers_payments_ts-src_hooks_useLayoutEffectWithPrevDeps_ts-src_util_directInputM-df920f\":\"6d6112117412de7a15a2\",\"BundleAuth\":\"bd5636d5dcdc1a7c6c59\",\"vendors-node_modules_solana_web3_js_lib_index_browser_esm_js-node_modules_opus-recorder_dist_-e9c23b\":\"6ea3cec6c19de0785368\",\"src_components_common_FullNameTitle_tsx-src_hooks_useContextMenuHandlers_ts-src_hooks_useInfi-f61103\":\"9c50b279c9911078cc81\",\"src_components_common_AnimatedIconFromSticker_tsx-src_components_common_BadgeButton_tsx-src_c-c239ba\":\"8b46679e8d7db650ef39\",\"src_components_right_DeleteMemberModal_tsx-src_global_selectors_calls_ts-src_global_selectors-18144d\":\"af75bb01c5bb15198159\",\"src_components_common_Composer_tsx-src_components_common_LinkField_tsx-src_components_common_-52fa71\":\"702669af6f6c29a590dc\",\"src_global_actions_ui_calls_ts\":\"e931b2d320f056123e4c\",\"src_components_common_gift_GiftMenuItems_tsx-src_components_middle_message_ActionMessage_tsx\":\"71efe8a0382a88f86e57\",\"BundleMain\":\"719f0628e423541b448c\",\"src_components_common_PeerBadge_tsx-src_components_common_pickers_PickerModal_tsx-src_compone-a8ae9b\":\"53cdefe45f47c880a083\",\"BundleExtra\":\"ca6685e477193fc269de\",\"BundleCalls\":\"561754d57533cbcbc168\",\"BundleStars\":\"9763a7bc01794911f32d\",\"vendors-node_modules_qr-code-styling_lib_qr-code-styling_js\":\"b2d8a09e827c4ab40031\",\"src_lib_hljs-tl_typelanguage_js\":\"33286f730a0845c4b5bd\",\"Highlight for 1c\":\"b93e205cada9e52ef6f1\",\"Highlight for abnf\":\"b6151daab524e412aca8\",\"Highlight for accesslog\":\"74c23e20aa13d4d75b09\",\"Highlight for actionscript\":\"b27cdba6c507de6fe75c\",\"Highlight for ada\":\"e4055afdcc7707530bc1\",\"Highlight for angelscript\":\"32a77a71fb67d012f500\",\"Highlight for apache\":\"5e9aa126aadbbf8089be\",\"Highlight for applescript\":\"0d4f84dd8e780e9a10d9\",\"Highlight for arcade\":\"150139eec9cd9b9ddb8a\",\"Highlight for arduino\":\"50474e4154ab34de3874\",\"Highlight for armasm\":\"c1fc23cc0f3a79ed80ee\",\"Highlight for asciidoc\":\"13a3824b5c76d7f67f62\",\"Highlight for aspectj\":\"147397ba35e25ab7cb94\",\"Highlight for autohotkey\":\"c1ae3ec57b87b71f0780\",\"Highlight for autoit\":\"808d5c44fcaa002e43a2\",\"Highlight for avrasm\":\"59a8cfc5358109021490\",\"Highlight for awk\":\"3e27e7045ade0222bf70\",\"Highlight for axapta\":\"b102584aa6bb7be1d2e5\",\"Highlight for bash\":\"dc83156885793aced074\",\"Highlight for basic\":\"272a548a9ad647481fc4\",\"Highlight for bnf\":\"71e550000f1a7e4e6701\",\"Highlight for brainfuck\":\"e6a62d0a945aa307fb09\",\"Highlight for c\":\"9b54d44f374cde2fd05b\",\"Highlight for cal\":\"ad222a3698e40ef40880\",\"Highlight for capnproto\":\"e94cf89bdb6f5db66915\",\"Highlight for ceylon\":\"bae48fec19331f406056\",\"Highlight for clean\":\"faeb5e520b61a5299305\",\"Highlight for clojure\":\"19d7289d027dda0732af\",\"Highlight for clojure-repl\":\"86abd7d4d1ab8461ed04\",\"Highlight for cmake\":\"e15ac017b1aa217077ee\",\"Highlight for coffeescript\":\"6fb30e28687325720993\",\"Highlight for coq\":\"251ba909fa1284c20d7a\",\"Highlight for cos\":\"4d470aaead3cb720f7b9\",\"Highlight for cpp\":\"759967ef0130029798f1\",\"Highlight for crmsh\":\"ebccb7024d6ee4cee647\",\"Highlight for crystal\":\"9f447f4aa2473b0f8bb0\",\"Highlight for csharp\":\"121369b293d0828e52f9\",\"Highlight for csp\":\"d36b84592db0256370c0\",\"Highlight for css\":\"9c454ed5eb23c45d4796\",\"Highlight for d\":\"4e3d4216e1ca61362c90\",\"Highlight for dart\":\"22a89134a1667fe96334\",\"Highlight for delphi\":\"dce6e5f446f208d83922\",\"Highlight for diff\":\"fabec05680e4338c1aa8\",\"Highlight for django\":\"dc967e0db1205ccfb0b5\",\"Highlight for dns\":\"6c6cbfc7e517443d4456\",\"Highlight for dockerfile\":\"d6d1cc51364bff948aa3\",\"Highlight for dos\":\"c7ade12fd51aa6cb3f96\",\"Highlight for dsconfig\":\"080cdc36a577c20f8517\",\"Highlight for dts\":\"f89d83461a9d7f78ed0a\",\"Highlight for dust\":\"f580411929c2da361b29\",\"Highlight for ebnf\":\"968055c09d674d1aeeca\",\"Highlight for elixir\":\"52bf59f399396a81c25f\",\"Highlight for elm\":\"c93d07dbb4aada40a81e\",\"Highlight for erb\":\"29b5512c2a00d47e5e8a\",\"Highlight for erlang\":\"fd28e948c245598d7e60\",\"Highlight for erlang-repl\":\"788f979b8ca5fd0b23bf\",\"Highlight for excel\":\"96dc42b4ea7388304e97\",\"Highlight for fix\":\"bc7e3765bb42b4dceae5\",\"Highlight for flix\":\"cd5ab53e35aa2cc63a12\",\"Highlight for fortran\":\"a3303c425768c0899144\",\"Highlight for fsharp\":\"e657861b9216876f4b35\",\"Highlight for gams\":\"e267792695ad4cb19e36\",\"Highlight for gauss\":\"088c2c9df03d9114f7cd\",\"Highlight for gcode\":\"c34479e787fcf50cefa1\",\"Highlight for gherkin\":\"4fe9a13ac8237477eaea\",\"Highlight for glsl\":\"d7bc176ae12483889846\",\"Highlight for gml\":\"782cd7808767d4d46c48\",\"Highlight for go\":\"4661731ddde28b81b28d\",\"Highlight for golo\":\"f0ce53cdbd8633bfc564\",\"Highlight for gradle\":\"bb027ab439978bb76dcc\",\"Highlight for graphql\":\"b5303c40da9b12f10bb9\",\"Highlight for groovy\":\"0c24bfbb57cdcd216c26\",\"Highlight for haml\":\"7cab4371e1537facdafe\",\"Highlight for handlebars\":\"0eea4e34dba7d3033e3d\",\"Highlight for haskell\":\"f63f94988ab3b7745831\",\"Highlight for haxe\":\"0b8cdfb4fafb54783314\",\"Highlight for hsp\":\"07b0ce4d34824428425a\",\"Highlight for http\":\"7bc7a2f19de0563498ef\",\"Highlight for hy\":\"827d87d566da275e3d82\",\"Highlight for inform7\":\"115b262edb8058f9f4b8\",\"Highlight for ini\":\"6e237425ce73490579ae\",\"Highlight for irpf90\":\"b48333e78158bbcad860\",\"Highlight for isbl\":\"0be4ed8dd1c3dd440731\",\"Highlight for java\":\"c9d2fb44ba17c6393324\",\"Highlight for javascript\":\"d3375eefd2dbf0c9289e\",\"Highlight for jboss-cli\":\"52756f4a0b8e2e90cd1c\",\"Highlight for json\":\"abcb23c3cf8ca15b98f3\",\"Highlight for julia\":\"7994b4674c9dd47c616b\",\"Highlight for julia-repl\":\"6197039a09cfd6b08a4e\",\"Highlight for kotlin\":\"810c5b338e340a2c2ce8\",\"Highlight for lasso\":\"58898cfd278e0db84b9b\",\"Highlight for latex\":\"375a71c69fd0737d7806\",\"Highlight for ldif\":\"7aec27761d6d18ff88ad\",\"Highlight for leaf\":\"dc4737c870b2b8c9570f\",\"Highlight for less\":\"2bfd367b3dd01ade4ecb\",\"Highlight for lisp\":\"841b8f52fdb4a095606f\",\"Highlight for livecodeserver\":\"961cbf298ca505db5c14\",\"Highlight for livescript\":\"75c1f493e15c5184b4bf\",\"Highlight for llvm\":\"1ad998e9c4faa370dc4c\",\"Highlight for lsl\":\"4fa844ffe719b60b3fba\",\"Highlight for lua\":\"3513f875f7ca325f1904\",\"Highlight for makefile\":\"1f6e834c0651197e66d3\",\"Highlight for markdown\":\"8fbbfe55621a1e531afe\",\"Highlight for mathematica\":\"8bba3be221db3e9596e9\",\"Highlight for matlab\":\"0fb307677768faa375b7\",\"Highlight for maxima\":\"e6bd81bae78f4194d354\",\"Highlight for mel\":\"2ec2ac3a861e0dc5917c\",\"Highlight for mercury\":\"c73c8d91d52c55d30d25\",\"Highlight for mipsasm\":\"e9e634a7e28ce6908555\",\"Highlight for mizar\":\"f797620fcf18380c3e24\",\"Highlight for mojolicious\":\"f1d320ce86fb5e4451ae\",\"Highlight for monkey\":\"e5320fd64eb09fa1fdb1\",\"Highlight for moonscript\":\"17ef05a03eb23368d1d7\",\"Highlight for n1ql\":\"deded190717545a54b99\",\"Highlight for nestedtext\":\"a9b79b872468fd82f532\",\"Highlight for nginx\":\"aad280a2122a4f921384\",\"Highlight for nim\":\"98524bc8e1b919bfae87\",\"Highlight for nix\":\"4087e5052616998a59f6\",\"Highlight for node-repl\":\"cf284c794a34e4b819d8\",\"Highlight for nsis\":\"fd5028401f0d389d7d2c\",\"Highlight for objectivec\":\"3f0e5519b9f551a206b2\",\"Highlight for ocaml\":\"8d2b4987869832baff35\",\"Highlight for openscad\":\"9f9e6c9fb0a886e12128\",\"Highlight for oxygene\":\"7da8ddfa01003553cff4\",\"Highlight for parser3\":\"cba7305d0b573645cb96\",\"Highlight for perl\":\"effbbd929ec3bb46f6fd\",\"Highlight for pf\":\"4b6cf0db4c3359d4c690\",\"Highlight for pgsql\":\"737f970798bbf11b9704\",\"Highlight for php\":\"de796baa7885f6f4374f\",\"Highlight for php-template\":\"cdac06099ff8aa7d26f8\",\"Highlight for plaintext\":\"b02b5f2d2464d767b408\",\"Highlight for pony\":\"79cfd21ff887cbe31ae6\",\"Highlight for powershell\":\"d2312c3f03c047bc3c53\",\"Highlight for processing\":\"4d87e3446f720777c37a\",\"Highlight for profile\":\"1a16917db353963dcf6f\",\"Highlight for prolog\":\"e68ca0ccb13c5fd505b7\",\"Highlight for properties\":\"a32c6119c223cbfcd2f0\",\"Highlight for protobuf\":\"c9e3c5aedca3a24930e5\",\"Highlight for puppet\":\"2b7ab07e5a39177638e3\",\"Highlight for purebasic\":\"78827e5788a57ccdeccf\",\"Highlight for python\":\"90ba8ea6a044ad72fc99\",\"Highlight for python-repl\":\"f6b9e9d66941dea4f18e\",\"Highlight for q\":\"722fb246e012c1a955fa\",\"Highlight for qml\":\"28f66d6ab372eeec3841\",\"Highlight for r\":\"32816409b0e9cc00fc35\",\"Highlight for reasonml\":\"6df127c08e63b4e8ab9f\",\"Highlight for rib\":\"dc6490a02b858c270b63\",\"Highlight for roboconf\":\"8e87992397b50bc6f442\",\"Highlight for routeros\":\"26bcc387a7473988987c\",\"Highlight for rsl\":\"76cf41b691998bf1e6ac\",\"Highlight for ruby\":\"24c7d5c907507bbacf6e\",\"Highlight for ruleslanguage\":\"6fd11b43389f5d96036f\",\"Highlight for rust\":\"72d64bb1e8e4b4edfd6d\",\"Highlight for sas\":\"3b15cff4df901ee48caa\",\"Highlight for scala\":\"d6e69723306c8f630b06\",\"Highlight for scheme\":\"77f3438de8ad34613b91\",\"Highlight for scilab\":\"dede30f7dfea3e0fad52\",\"Highlight for scss\":\"7340b9a688c8401f2cd1\",\"Highlight for shell\":\"f17588e20986e1c628e1\",\"Highlight for smali\":\"83b1ff626a9f7bd1f23d\",\"Highlight for smalltalk\":\"216c6f07ad5954fcdf5d\",\"Highlight for sml\":\"a7fb1265917177564131\",\"Highlight for sqf\":\"892f14be963df4e8ba24\",\"Highlight for sql\":\"1a4e8650b310152b92c4\",\"Highlight for stan\":\"9e8ed84bd38dd6337a68\",\"Highlight for stata\":\"7406eb9f3b61a51da664\",\"Highlight for step21\":\"e772ffc6e5d9bf9cf442\",\"Highlight for stylus\":\"93206a81f8d395294439\",\"Highlight for subunit\":\"4a815e27943a3dcab333\",\"Highlight for swift\":\"542960b1eb614116dead\",\"Highlight for taggerscript\":\"a5a8d1b8472ff02c66cd\",\"Highlight for tap\":\"fa94ef36725444a4173d\",\"Highlight for tcl\":\"142b67ba88533d060e0c\",\"Highlight for thrift\":\"85291d10c23fbd08c75d\",\"Highlight for tp\":\"91fdecb7e3ccc16d0d7f\",\"Highlight for twig\":\"803cd154e6b8d22129e4\",\"Highlight for typescript\":\"a615b6643d980259c87a\",\"Highlight for vala\":\"4cadadd03e8287ed6931\",\"Highlight for vbnet\":\"181eeefa30cddbfb480f\",\"Highlight for vbscript\":\"55bd225e0365bee8e987\",\"Highlight for vbscript-html\":\"216231cf8cc78919044a\",\"Highlight for verilog\":\"24c75f794b27229663a7\",\"Highlight for vhdl\":\"35caecaff51ff7e22b44\",\"Highlight for vim\":\"a0d2c821c957af234b1d\",\"Highlight for wasm\":\"f4bae77d039f1a6950d9\",\"Highlight for wren\":\"1c00f4ba812640122cf6\",\"Highlight for x86asm\":\"c565fe03bee16cec5f10\",\"Highlight for xl\":\"8a5af9bb7c1d96ab1df3\",\"Highlight for xml\":\"368c99c7718ca6a54d6a\",\"Highlight for xquery\":\"2e4ade8526adbf792519\",\"Highlight for yaml\":\"9e87102a04086adb96fb\",\"Highlight for zephir\":\"f0a1d520c93682dd784e\",\"vendors-node_modules_music-metadata_lib_ParserFactory_js-node_modules_music-metadata_lib_core_js\":\"12037525bcdf807bfc77\",\"vendors-node_modules_emoji-data-ios_emoji-data_json\":\"da7962df7d2ed3a75d08\",\"node_modules_opus-recorder_dist_recorder_min_js\":\"0ec14efb74b98eb5fa43\",\"src_lib_lovely-chart_LovelyChart_js\":\"64dd210615fd37d87e2f\",\"vendors-node_modules_music-metadata_lib_id3v2_ID3v2Parser_js\":\"95b2487e1c746fbe0bea\",\"vendors-node_modules_music-metadata_lib_mpeg_MpegParser_js\":\"7e42dbf99fdcadb3636b\",\"vendors-node_modules_music-metadata_lib_asf_AsfParser_js\":\"b44b99eddcb715b32aab\",\"node_modules_music-metadata_lib_dsdiff_DsdiffParser_js\":\"f7456fa4c9827ca32dfc\",\"node_modules_music-metadata_lib_aiff_AiffParser_js\":\"71416cc03714fcf7bf50\",\"node_modules_music-metadata_lib_dsf_DsfParser_js\":\"32c96e8a316e07ceaf92\",\"vendors-node_modules_music-metadata_lib_flac_FlacParser_js\":\"57d1a0bdbe4a08635217\",\"vendors-node_modules_music-metadata_lib_matroska_MatroskaParser_js\":\"3f4339a76b0b676676b1\",\"vendors-node_modules_music-metadata_lib_mp4_MP4Parser_js\":\"4acef80b84352b64e6d9\",\"vendors-node_modules_music-metadata_lib_musepack_MusepackParser_js\":\"4e21885159ca47333a2c\",\"vendors-node_modules_music-metadata_lib_ogg_OggParser_js\":\"e392a491ae2d30596f2e\",\"node_modules_music-metadata_lib_wavpack_WavPackParser_js\":\"4c6f71a29be4df7dab82\",\"vendors-node_modules_music-metadata_lib_wav_WaveParser_js\":\"e6a01818b725b606b68a\",\"src_serviceWorker_index_ts\":\"9c7a72e77b072181f925\",\"src_api_gramjs_worker_worker_ts\":\"1cdbdd4b2efa1e7d0b29\",\"_a587\":\"56eb02d9f64d3170f9b4\",\"node_modules_opus-recorder_dist_waveWorker_min_js\":\"a2e1ac49ffd10c4ef7fd\",\"src_global_shared_sharedState_worker_ts\":\"a14369a5060de55e8b3f\",\"src_lib_mediaWorker_index_worker_ts\":\"6c8a568dc70e3a3ee940\",\"src_lib_fasttextweb_fasttext_worker_ts\":\"578c0f624726a21f451d\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"shared-components\":\"637d51e4046e7d6fd7e5\",\"BundleAuth\":\"bd5636d5dcdc1a7c6c59\",\"src_components_common_AnimatedIconFromSticker_tsx-src_components_common_BadgeButton_tsx-src_c-c239ba\":\"8b46679e8d7db650ef39\",\"src_components_common_Composer_tsx-src_components_common_LinkField_tsx-src_components_common_-52fa71\":\"702669af6f6c29a590dc\",\"BundleMain\":\"719f0628e423541b448c\",\"BundleExtra\":\"ca6685e477193fc269de\",\"BundleCalls\":\"561754d57533cbcbc168\",\"BundleStars\":\"9763a7bc01794911f32d\",\"src_lib_lovely-chart_LovelyChart_js\":\"64dd210615fd37d87e2f\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"telegram-t:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","if (typeof document === \"undefined\") return;\nvar createStylesheet = (chunkId, fullhref, oldTag, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t\"main\": 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"shared-components\":1,\"BundleAuth\":1,\"src_components_common_AnimatedIconFromSticker_tsx-src_components_common_BadgeButton_tsx-src_c-c239ba\":1,\"src_components_common_Composer_tsx-src_components_common_LinkField_tsx-src_components_common_-52fa71\":1,\"BundleMain\":1,\"BundleExtra\":1,\"BundleCalls\":1,\"BundleStars\":1,\"src_lib_lovely-chart_LovelyChart_js\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktelegram_t\"] = self[\"webpackChunktelegram_t\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","import './util/handleError';\nimport './util/setupServiceWorker';\nimport './global/init';\n\nimport TeactDOM from './lib/teact/teact-dom';\nimport {\n  getActions, getGlobal,\n} from './global';\n\nimport {\n  DEBUG, STRICTERDOM_ENABLED,\n} from './config';\nimport { enableStrict, requestMutation } from './lib/fasterdom/fasterdom';\nimport { selectTabState } from './global/selectors';\nimport { selectSharedSettings } from './global/selectors/sharedState';\nimport { betterView } from './util/betterView';\nimport { requestGlobal, subscribeToMultitabBroadcastChannel } from './util/browser/multitab';\nimport { establishMultitabRole, subscribeToMasterChange } from './util/establishMultitabRole';\nimport { initGlobal } from './util/init';\nimport { initLocalization } from './util/localization';\nimport { MULTITAB_STORAGE_KEY } from './util/multiaccount';\nimport { checkAndAssignPermanentWebVersion } from './util/permanentWebVersion';\nimport { onBeforeUnload } from './util/schedulers';\nimport updateWebmanifest from './util/updateWebmanifest';\n\nimport App from './components/App';\n\nimport './assets/fonts/roboto.css';\nimport './styles/index.scss';\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\ninit();\n\nasync function init() {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> INIT');\n  }\n\n  if (!(window as any).isCompatTestPassed) return;\n\n  checkAndAssignPermanentWebVersion();\n\n  await window.electron?.restoreLocalStorage();\n\n  subscribeToMultitabBroadcastChannel();\n  await requestGlobal(APP_VERSION);\n  localStorage.setItem(MULTITAB_STORAGE_KEY, '1');\n  onBeforeUnload(() => {\n    const global = getGlobal();\n    if (Object.keys(global.byTabId).length === 1) {\n      localStorage.removeItem(MULTITAB_STORAGE_KEY);\n    }\n  });\n\n  await initGlobal();\n  getActions().init();\n\n  getActions().updateShouldEnableDebugLog();\n  getActions().updateShouldDebugExportedSenders();\n\n  const global = getGlobal();\n\n  initLocalization(selectSharedSettings(global).language, true);\n\n  subscribeToMasterChange((isMasterTab) => {\n    getActions()\n      .switchMultitabRole({ isMasterTab }, { forceSyncOnIOs: true });\n  });\n  const shouldReestablishMasterToSelf = getGlobal().authState !== 'authorizationStateReady';\n  establishMultitabRole(shouldReestablishMasterToSelf);\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    updateWebmanifest();\n\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  if (DEBUG) {\n    document.addEventListener('dblclick', () => {\n      // eslint-disable-next-line no-console\n      console.warn('TAB STATE', selectTabState(getGlobal()));\n      // eslint-disable-next-line no-console\n      console.warn('GLOBAL STATE', getGlobal());\n    });\n  }\n}\n\nonBeforeUnload(() => {\n  const actions = getActions();\n  actions.leaveGroupCall?.({ isPageUnload: true });\n  actions.hangUp?.({ isPageUnload: true });\n});\n"],"names":["initApi","callApi","cancelApiProgress","cancelApiProgressMaster","callApiLocal","handleMethodCallback","handleMethodResponse","updateFullLocalDb","updateLocalDb","setShouldEnableDebugLog","DEBUG","IGNORE_UNHANDLED_ERRORS","logDebugMessage","Deferred","getCurrentTabId","subscribeToMasterChange","generateUniqueId","ACCOUNT_SLOT","DATA_BROADCAST_CHANNEL_NAME","pause","throttleWithTickEnd","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","NO_QUEUE_BEFORE_INIT","Set","worker","requestStates","Map","requestStatesByCallback","pendingPayloads","savedLocalDb","chats","users","documents","stickerSets","photos","webDocuments","commonBoxState","channelPtsById","isMasterTab","isMasterTabNew","channel","BroadcastChannel","postMessagesOnTickEnd","payloads","postMessage","postMessageOnTickEnd","payload","push","initApiOnMasterTab","initialArgs","type","token","updateCallback","localApiRequestsQueue","apiRequestsQueue","isInited","onUpdate","Promise","resolve","console","log","params","URLSearchParams","set","String","Worker","URL","import","meta","url","name","toString","subscribeToWorker","platform","setupIosHealthCheck","makeRequest","args","then","forEach","request","fnName","deferred","catch","reject","prop","value","initial","Object","assign","callApiOnMasterTab","isEnabled","has","undefined","promise","response","allowedResponse","err","makeRequestToMaster","progressCallback","isCanceled","messageId","get","addEventListener","data","DEBUG_startAt","performance","now","updates","duration","warn","length","message","error","Error","navigator","sendBeacon","level","requestState","callback","callbackArgs","withCallback","pop","finally","delete","DEBUG_payload","startedAt","Date","window","ensureWorkerPing","setTimeout","isResolved","race","terminate","ApiMediaFormat","ApiMessageEntityTypes","MAIN_THREAD_ID","MESSAGE_DELETED","WrongNumber","SentAppCode","LoginJustSentSms","LoginHeaderPassword","LoginEnterPasswordDescription","StartText","AuthTitle","LoginPhonePlaceholder","LoginNext","LoginQRLogin","LoginQRTitle","LoginQRSubtitle","LoginQRHelp1","LoginQRHelp2","LoginQRHelp3","LoginQRCancel","YourName","LoginRegisterDesc","LoginRegisterFirstNamePlaceholder","LoginRegisterLastNamePlaceholder","LoginSelectCountryTitle","CountryNone","PleaseEnterPassword","ErrorPhoneNumberInvalid","ErrorCodeInvalid","ErrorIncorrectPassword","ErrorPasswordFlood","ErrorPhoneBanned","ErrorFloodTime","ErrorUnexpected","ErrorUnexpectedMessage","WalletCreatedTitle","WalletCreatedMessage","Continue","Create","useEffect","useLayoutEffect","withGlobal","getActions","getGlobal","setGlobal","DARK_THEME_BG_COLOR","INACTIVE_MARKER","IS_BYPASS_AUTH","IS_WALLET_CREATED","LIGHT_THEME_BG_COLOR","PAGE_TITLE","selectTabState","selectTheme","IS_INSTALL_PROMPT_SUPPORTED","PLATFORM_ENV","buildClassName","setupBeforeInstallPrompt","getAccountsInfo","getAccountSlotUrl","hasEncryptedSession","getInitialLocationHash","parseInitialLocationHash","checkSessionLocked","hasStoredSession","updateSizes","useAppLayout","useFlag","usePreviousDeprecated","Auth","UiLoader","AppInactive","LockScreen","Main","Transition","styles","jsx","_jsx","jsxs","_jsxs","AppScreens","TRANSITION_RENDER_COUNT","keys","INACTIVE_PAGE_TITLE","initMockData","global","mockUserId","mockUser","id","isMin","isSelf","isContact","accessHash","firstName","lastName","phoneNumber","updatedGlobal","currentUserId","authState","isSynced","byId","listIds","active","archived","saved","isFullyLoaded","totalCount","all","App","isScreenLocked","hasPasscode","isInactiveAuth","hasWebAuthTokenFailed","isTestServer","theme","isInactive","markInactive","unmarkInactive","isMobile","isMobileOs","hash","accounts","map","Number","sort","a","b","key","slot","account","location","href","checkMultiaccPasscode","body","document","handleDrag","e","preventDefault","dataTransfer","target","dataset","dropzone","dropEffect","handleDrop","removeEventListener","checkWallet","testUserId","telegramUserId","activeKey","page","main","auth","inactive","lock","tgWebAuthToken","title","prevActiveKey","renderContent","isLocked","classList","add","bg","style","setProperty","children","shouldCleanup","className","renderCount","passcode","hasWebAuthTokenPasswordRequired","config","memo","useRef","useCurrentOrPrev","useElectronDrag","useHistoryBack","AuthCode","AuthPassword","AuthPhoneNumber","AuthQrCode","AuthRegister","AuthWalletCreated","returnToAuthPhoneNumber","goToAuthQrCode","handleChangeAuthorizationMethod","isActive","onBack","containerRef","renderingAuthState","getScreen","getActiveKey","ref","Bundles","useModuleLoader","Loading","AuthCodeAsync","AuthPasswordAsync","useMemo","useState","requestMeasure","IS_SAFARI","IS_TOUCH_ENV","preloadImage","preloadFonts","pick","oldSetLanguage","formatPhoneNumber","getCountryCodeByIso","getCountryFromPhoneNumber","navigateBack","getSuggestedLanguage","useLang","useLangString","useLastCallback","useMultiaccountInfo","Icon","Button","Checkbox","InputText","CountryCodeInput","monkeyPath","phoneLoginIcon","MIN_NUMBER_LENGTH","isPreloadInitiated","connectionState","authPhoneNumber","authIsLoading","authIsLoadingQrCode","authErrorKey","authRememberMe","authNearestCountry","phoneCodeList","language","setAuthPhoneNumber","setAuthRememberMe","loadNearestCountry","loadCountryList","clearAuthErrorKey","setSharedSettingOption","lang","inputRef","suggestedLanguage","isConnected","continueText","country","setCountry","setPhoneNumber","isTouched","setIsTouched","lastSelection","setLastSelection","isLoading","markIsLoading","unmarkIsLoading","accountsInfo","hasActiveAccount","values","phoneNumberSlots","entries","filter","info","isTest","reduce","acc","phone","fullNumber","countryCode","canSubmit","replace","current","focus","langCode","parseFullNumber","newFullNumber","suggestedCountry","selectedCountry","iso2","handleLangChange","setSelectionRange","isJustPastedRef","handlePaste","handleBackNavigation","handleCountryChange","handlePhoneNumberChange","selectionStart","selectionEnd","shouldFixSafariAutoComplete","handleKeepSessionChange","checked","handleSubmit","event","adaptedPhoneNumber","handleGoToAuthQrCode","isAuthReady","size","round","color","onClick","src","alt","action","onSubmit","onChange","label","withRegular","inputMode","onPaste","Boolean","ripple","isText","sharedState","settings","countryList","phoneCodes","STRICTERDOM_ENABLED","disableStrict","enableStrict","selectSharedSettings","LOCAL_TGS_URLS","useAsync","useMediaTransitionDeprecated","AnimatedIcon","blankUrl","DATA_PREFIX","QR_SIZE","QR_PLANE_SIZE","QR_CODE_MUTATION_DURATION","qrCodeStylingPromise","ensureQrCodeStyling","authQrCode","qrCodeRef","isQrMounted","markQrMounted","unmarkQrMounted","result","qrCode","QrCodeStyling","default","width","height","image","margin","dotsOptions","cornersSquareOptions","imageOptions","imageSize","qrOptions","errorCorrectionLevel","transitionClassNames","container","update","append","handleReturnToAuthPhoneNumber","tgsUrl","QrPlane","nonInteractive","noLoop","withNodes","withMarkdown","AuthRegisterAsync","axios","VIVA_API_KEY","selectUser","currentUser","isCreating","setIsCreating","walletAddress","setWalletAddress","privateKey","setPrivateKey","walletId","setWalletId","setError","copySuccess","setCopySuccess","hasClickedCopy","setHasClickedCopy","hasConfirmedSaved","setHasConfirmedSaved","handleContinue","isMocked","process","env","APP_MOCKED_CLIENT","mockWalletData","Math","random","substr","post","telegramAccessHash","telegramPhoneNumber","telegramFirstName","telegramLastName","telegramUsername","usernames","username","telegramIsPremium","isPremium","telegramIsVerified","isVerified","telegramIsContact","telegramIsSelf","headers","isAxiosError","handleCopyWalletAddress","clipboard","writeText","handleCopyPrivateKey","handleCopyAllPrivateKeys","allKeys","handleProceedToApp","apiUpdate","authorizationState","handleCheckboxChange","htmlFor","disabled","useCallback","ANIMATION_END_DELAY","IS_EMOJI_SUPPORTED","isoToEmoji","prepareSearchWordsForNeedle","renderText","useSyncEffect","DropdownMenu","MenuItem","Spinner","MENU_HIDING_DURATION","SELECT_TIMEOUT","setFilter","filteredList","setFilteredList","updateFilter","filterValue","getFilteredList","prevPhoneCodeList","handleChange","handleInput","currentTarget","handleInputKeyDown","keyCode","CodeInput","onTrigger","isOpen","handleTrigger","select","formEl","getElementById","scrollTo","top","scrollHeight","behavior","handleCodeInput","emoji","defaultName","inputValue","join","autoComplete","onFocus","onInput","onKeyDown","trigger","searchWords","currentUrl","referrer","origin","pathname","searchParams","toLowerCase","AnimatedSticker","DEFAULT_SIZE","props","play","noTransition","onLoad","otherProps","isAnimationLoaded","markAnimationLoaded","handleLoad","playKey","setPlayKey","handleClick","getIsHeavyAnimating","useUnmountCleanup","ensureRLottie","getRLottie","IS_ELECTRON","buildStyle","hexToRgb","useColorFilter","useEffectWithPrevDeps","useHeavyAnimation","usePriorityPlaybackCheck","isPriorityPlaybackActive","useSharedIntersectionObserver","useStateRef","useThrottledCallback","useUniqueId","useBackgroundMode","isBackgroundModeActive","THROTTLE_MS","renderId","playSegment","speed","quality","isLowPriority","forceAlways","forceOnHeavyAnimation","sharedCanvas","sharedCanvasCoords","onEnded","onLoop","viewId","animation","setAnimation","animationRef","isFirstRender","shouldUseColorFilter","colorFilter","playRef","playSegmentRef","rgbColor","shouldForceOnHeavyAnimation","canInitialize","markCanInitialize","unmarkCanInitialize","r","g","isUnmountedRef","init","offsetWidth","offsetHeight","newAnimation","coords","setSpeed","throttledInit","setColor","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","IS_TEST","getChatAvatarHash","getChatTitle","getPeerStoryHtmlId","getUserFullName","getVideoProfilePhotoMediaHash","getWebDocumentHash","isAnonymousForwardsChat","isChatWithRepliesBot","isDeletedUser","isApiPeerChat","isApiPeerUser","createClassNameBuilder","isUserId","getFirstLetters","REM","getPeerColorClass","useFastClick","useMedia","useOldLang","OptimizedVideo","AvatarStoryCircle","Fragment","_Fragment","LOOP_COUNT","AVATAR_SIZES","micro","mini","tiny","small","medium","large","giant","jumbo","cn","media","icon","Avatar","peer","photo","webPhoto","previewUrl","text","isSavedMessages","isSavedDialog","withVideo","withStory","forPremiumPromo","withStoryGap","withStorySolid","forceFriendStorySolid","forceUnreadStorySolid","storyViewerOrigin","storyViewerMode","loopIndefinitely","noPersonalPhoto","asMessageBubble","onContextMenu","openStoryViewer","videoLoopCountRef","isCustomPeer","realPeer","user","chat","isDeleted","isReplies","isAnonymousForwards","isForum","imageHash","videoHash","pxSize","shouldLoadVideo","isVideo","isBig","specialIcon","avatarIcon","imgBlobUrl","BlobUrl","videoBlobUrl","imgUrl","hasBlobUrl","shouldPlayVideo","handleVideoEnded","video","display","content","author","role","ariaLabel","decoding","draggable","canPlay","muted","loop","autoPlay","disablePictureInPicture","playsInline","userFullName","titleKey","isRoundedRect","isAvatarSquare","hasStories","isPremiumGradient","withPremiumGradient","customColor","customPeerAvatarColor","fullClassName","hasUnreadStories","hasMedia","handleMouseDown","stopPropagation","peerId","isSinglePeer","onMouseDown","withExtraGap","selectPeerStories","useDevicePixelRatio","BLUE","GREEN","PURPLE","GRAY","DARK_GRAY","STROKE_WIDTH","STROKE_WIDTH_READ","GAP_PERCENT","SEGMENTS_MAX","LARGE_AVATAR_SIZE","GAP_PERCENT_EXTRA","EXTRA_GAP_ANGLE","PI","EXTRA_GAP_SIZE","EXTRA_GAP_START","EXTRA_GAP_END","peerStories","storyIds","lastReadId","appTheme","dpr","adaptedSize","total","read","isCloseFriend","some","story","isRead","isForCloseFriends","drawGradientCircle","canvas","segmentsCount","readSegmentsCount","readSegmentColor","orderedIds","strokeModifier","max","ctx","getContext","centerCoordinate","radius","segmentAngle","gapSize","gradient","createLinearGradient","ceil","cos","sin","colorStops","colorStop","index","addColorStop","lineCap","clearRect","Array","from","_","i","startAngle","endAngle","strokeStyle","lineWidth","beginPath","arc","stroke","useCollapsibleLines","MAX_LINES","Blockquote","canBeCollapsible","isToggleDisabled","isCollapsed","isCollapsible","setIsCollapsed","canExpand","handleExpand","handleToggle","prev","root","collapsed","blockquote","gradientContainer","collapseIcon","clickable","selectIsAlwaysHighPriorityEmoji","safePlay","useDynamicColorListener","useCustomEmoji","Sparkles","StickerView","blankImg","STICKER_SIZE","CustomEmoji","documentId","noPlay","noVideoOnMobile","loopLimit","isSelectable","withSharedAnimation","sharedCanvasRef","sharedCanvasHqRef","withTranslucentThumb","shouldPreloadPreview","observeIntersectionForLoading","observeIntersectionForPlaying","onAnimationEnd","withSparkles","sparklesStyle","sparklesClassName","customEmoji","loopCountRef","shouldPlay","setShouldPlay","hasCustomColor","shouldUseTextColor","currentTime","handleStickerLoop","isHq","stickerSetInfo","sparkles","preset","highlightCatch","placeholder","sticker","isSmall","thumbClassName","thumb","fullMediaClassName","shouldLoop","onVideoEnded","onAnimatedStickerLoop","extractMessageText","getMessagePollId","groupStatefulContent","isActionMessage","getMessageSummaryDescription","getMessageSummaryEmoji","getMessageSummaryText","TRUNCATED_SUMMARY_LENGTH","selectPeerStory","selectPollFromMessage","trimText","ActionMessageText","MessageText","MessageSummary","translatedText","noEmoji","highlight","truncateLength","withTranslucentThumbs","inChatList","emojiSize","poll","extractedText","hasPoll","isAction","statefulContent","summaryText","trimmedText","renderMessageText","asPreview","messageOrStory","flat","storyData","CONTENT_NOT_SUPPORTED","stripCustomEmoji","insertTextEntity","renderTextWithEntities","MIN_CUSTOM_EMOJIS_FOR_SHARED_CANVAS","isForAnimation","isProtected","shouldRenderAsHtml","forcePlayback","focusedQuote","focusedQuoteOffset","isInSelectMode","canBeEmpty","maxTimestamp","threadId","textCacheBusterRef","formattedText","adaptedFormattedText","entities","entitiesWithFocusedQuote","offsetIndex","indexOf","lendth","offset","QuoteFocus","containerId","withSharedCanvas","hasSpoilers","Spoiler","customEmojisCount","cacheBuster","chatId","getApiPeerColorClass","EmojiIconBackground","PeerColorWrapper","peerColor","noUserColors","shouldReset","emojiIconClassName","backgroundEmojiId","emojiDocumentId","ensureProtocol","getUnicodeUrl","isMixedScriptUrl","SafeLink","isRtl","shouldSkipModal","openUrl","isRegularLink","isTrustedLink","classNames","rel","dir","Url","SYMBOL","ANIMATION_DURATION","BUTTON_POSITIONS","x","y","durationShift","PROGRESS_POSITIONS","generateRandomProgressPositions","presetSettings","button","position","shiftX","atan2","shiftY","symbol","progress","velocityX","velocityY","scale","count","positions","getStickerMediaHash","IS_ANDROID","IS_IOS","IS_WEBM_SUPPORTED","mediaLoader","useCoordsInSharedCanvas","useIsIntersecting","useMediaTransition","useMountAfterHeavyAnimation","useThumbnail","SHARED_PREFIX","fullMediaHash","noLoad","isLottie","isVideoBroken","markVideoBroken","isUnsupportedVideo","isStatic","previewMediaHash","filterStyle","isIntersectingForLoading","shouldLoad","isIntersectingForPlaying","hasIntersectedForPlayingRef","cachedPreview","getFromMemory","isReadyToMountFullMedia","shouldForcePreview","shouldLoadPreview","previewMediaData","withPreview","shouldSkipLoadingFullMedia","fullMediaData","shouldRenderFullMedia","isPlayerReady","markPlayerReady","isFullMediaReady","thumbDataUri","thumbnail","thumbData","isThumbOpaque","noCrossTransition","thumbRef","noCloseTransition","fullMediaRef","noOpenTransition","randomIdPrefix","thumbOpaque","isPriority","onReady","onBroken","GENERAL_TOPIC_ID","getTopicDefaultIcon","TopicDefaultIcon","letterClassName","topicId","iconColor","iconSrc","selectIsRightColumnShown","localizationReadyPromise","loadModule","useEffectOnce","useShowTransitionDeprecated","appStyles","lockPreviewPath","spoilerMaskPath","telegramLogoPath","MAX_PRELOAD_DELAY","SECOND_STATE_DELAY","AVATARS_TO_PRELOAD","preloadAvatars","slice","avatarHash","fetch","preloadTasks","authCode","authPassword","authWalletCreated","isRightColumnShown","shouldSkipHistoryAnimations","leftColumnWidth","setIsUiReady","isReady","markReady","shouldRender","shouldRenderMask","timeout","safePreload","uiReadyState","clearTimeout","mask","left","middle","right","blank","tabState","getPrettyCodeLanguageName","CodeOverlay","CodeBlock","noCopy","isWordWrap","setWordWrap","highlighted","lib","handleWordWrapToggle","wrap","blockClass","Pre","onWordWrapToggle","copyTextToClipboard","areLinesWrapping","useWindowSize","showNotification","windowSize","setIsWordWrap","withWordWrapButton","setWithWordWrapButton","checkWordWrap","isWrap","parentElement","handleCopy","handleWordWrapClick","contentClass","hidden","overlayClass","overlay","wrapClass","wrapOn","copy","requestMutation","useThrottleForHeavyAnimation","useResizeObserver","ICON_POSITIONS","inline","block","opacity","EMOJI_SIZE","LOTTIE_TINT_OPACITY","NON_LOTTIE_TINT_OPACITY","canvasRef","emojiImage","setEmojiImage","preloadAfterHeavyAnimation","updateCanvas","context","save","globalAlpha","translate","drawImage","restore","tintColor","fillStyle","globalCompositeOperation","fillRect","updateCanvasAfterHeavyAnimation","updateCanvasSize","parentWidth","parentHeight","handleResize","entry","contentRect","getBoundingClientRect","BannedDuck","CameraFlip","HandFilled","HandOutline","Speaker","VoiceAllowTalk","VoiceMini","VoiceMuted","VoiceOutlined","Diamond","Flame","Mention","PartyPopper","Invite","JoinRequest","LastSeen","MonkeyClose","MonkeyIdle","MonkeyPeek","MonkeyTracking","ReadTime","Report","SearchingDuck","Congratulations","DiscussionGroups","Experimental","FoldersAll","FoldersNew","FoldersShare","Lock","StarReaction","StarReactionEffect","Unlock","ONE_GIGABYTE","ONE_MEGABYTE","getFileSizeString","bytes","toFixed","getDocumentExtension","fileName","mimeType","getFileExtension","split","getColorFromExtension","extension","getDocumentHasPreview","previewBlobUrl","STICKER_SIZE_INLINE_DESKTOP_FACTOR","STICKER_SIZE_INLINE_MOBILE_FACTOR","getPhotoInlineDimensions","getVideoDimensions","MEDIA_VIEWER_MEDIA_QUERY","parseInt","getComputedStyle","documentElement","fontSize","ROUND_VIDEO_DIMENSIONS_PX","GIF_MIN_WIDTH","AVATAR_FULL_DIMENSIONS","VIDEO_AVATAR_FULL_DIMENSIONS","LIKE_STICKER_ID","DEFAULT_MEDIA_DIMENSIONS","MOBILE_SCREEN_NO_AVATARS_MESSAGE_EXTRA_WIDTH_REM","MOBILE_SCREEN_MESSAGE_EXTRA_WIDTH_REM","MESSAGE_MAX_WIDTH_REM","MESSAGE_OWN_MAX_WIDTH_REM","cachedMaxWidthOwn","cachedMaxWidth","cachedMaxWidthNoAvatar","getMaxMessageWidthRem","fromOwnMessage","noAvatars","regularMaxWidth","windowWidth","min","getAvailableWidth","isWebPageMedia","extraPaddingRem","availableWidthRem","getAvailableHeight","isGif","aspectRatio","calculateDimensionsForMessageMedia","availableWidth","availableHeight","mediaWidth","mediaHeight","calculateDimensions","getMediaViewerAvailableDimensions","withFooter","mql","matchMedia","windowHeight","occupiedHeightRem","matches","calculateInlineImageDimensions","asForwarded","calculateVideoDimensions","calculateExtendedPreviewDimensions","preview","getPictogramDimensions","getDocumentThumbnailDimensions","smaller","getStickerDimensions","baseWidth","calculatedHeight","calculateMediaViewerDimensions","calculatedWidth","getPeerColorCount","getPeerColorKey","peerColorId","BASE_URL","IS_PACKAGED_ELECTRON","RE_LINK_TEMPLATE","RE_MENTION_TEMPLATE","EMOJI_REGEX","isDeepLink","handleEmojiLoad","LOADED_EMOJIS","nativeToUnifiedExtendedWithCache","fixNonStandardEmoji","compact","MentionLink","SIMPLE_MARKDOWN_REGEX","part","filters","escapeHtml","lastIndex","replaceEmojis","addLineBreaks","addHighlight","addLinks","replaceSimpleMarkdown","markdownPostProcessor","textParts","divEl","createElement","innerText","innerHTML","parts","emojis","match","emojiResult","code","baseSrcUrl","isLoaded","splittenParts","line","source","trimmedLine","trimLeft","indentLength","fromCharCode","repeat","lowerCaseText","queryPosition","newParts","substring","RE_LINK","RegExp","allowOnlyTgLinks","links","nextLink","shift","startsWith","endsWith","postProcessor","postProcess","entityResult","entity","element","lines","trim","lineHeight","lineHeightParsed","parseFloat","clientHeight","oldTranslate","buildCustomEmojiHtmlFromEntity","HQ_EMOJI_THRESHOLD","noCustomEmojiPlayback","renderMessagePart","deleteLineBreakAfterPre","organizedEntities","organizeEntities","renderEntity","textPartStart","textPartEnd","organizedEntity","isLastEntity","renderResult","nestedEntities","textBefore","textBeforeLength","entityStartIndex","entityEndIndex","entityContent","nestedEntityContent","nestedIndex","nestedEntity","nestedEntityIndex","nestedResult","nestedEntityEndIndex","newEntity","processEntityAsHtml","processEntity","isArray","textAfter","arrayIndex","getTextWithEntitiesAsHtml","c","emojiFilter","resultEntities","newEntityStart","newEntityEnd","existingEntity","existingEntityStart","existingEntityEnd","organizedEntityIndexes","organizeEntity","organizedIndexes","organizedIndex","parsedNestedEntities","parsedEntity","isChanged","entityText","renderedContent","renderNestedMessagePart","Bold","canCollapse","BotCommand","handleBotCommandClick","Hashtag","tag","handleHashtagClick","Cashtag","Code","handleCodeClick","tabIndex","Email","Italic","MentionName","userId","Phone","Strike","TextUrl","getLinkUrl","Underline","Timestamp","timestamp","handleTimecodeClick","rawEntityText","trimEnd","sendBotCommand","command","hashtag","openChatByUsername","onChatChanged","searchHashtag","openMediaFromTimestamp","selectCanPlayAnimatedEmojis","addCustomEmojiCallback","removeCustomEmojiCallback","useEnsureCustomEmoji","setCustomEmoji","customEmojis","setCanPlay","handleGlobalChange","newGlobal","character","STAR_PATH","StarIcon","randomId","validSvgRandomId","renderIcon","GoldStarIcon","PremiumStarIcon","RegularStarIcon","mask1Id","mask2Id","gradient1Id","gradient2Id","gradient3Id","svg","viewBox","fill","maskUnits","d","x1","y1","x2","y2","gradientUnits","stopEvent","revealByContainerId","contentRef","isRevealed","revealSpoiler","reveal","appInactivePath","handleReload","reload","shouldResetUrlHash","LockScreenAsync","MainAsync","EMOJI_SIZES","getInputCustomEmojiParams","INPUT_CUSTOM_EMOJI_SELECTOR","buildCustomEmojiHtml","isPlaceholder","uniqueId","rawText","getCustomEmojiSize","maxEmojisInLine","EDITABLE_INPUT_ID","preventMessageInputBlur","withBubbling","activeElement","preventMessageInputBlurWithBubbling","SERVICE_NOTIFICATIONS_USER_ID","STARS_CURRENCY_CODE","TME_LINK_PREFIX","TON_CURRENCY_CODE","getMainUsername","getMessageInvoice","getMessageText","isChatChannel","getMessageContent","getPeerTitle","getMessageReplyInfo","selectChat","selectChatMessage","selectMonoforumChannel","selectPeer","selectSender","selectThreadIdFromMessage","selectTopic","formatDateTimeToString","formatScheduledDateTime","formatShortDuration","formatCurrency","convertTonFromNanos","formatStarsAsText","formatTonAsText","conjuctionWithNodes","getServerTime","getCallMessageKey","getPinnedMediaValue","renderMessageLink","renderPeerLink","translateWithYou","Link","NBSP","DEFAULT_TOPIC_ICON_ID","UNSUPPORTED_LANG_KEY","sender","replyMessage","isInsideTopic","openThread","openTelegramLink","isOutgoing","oldLang","renderStrong","strong","renderActionText","isServiceNotificationsChat","isChannel","senderTitle","chatTitle","userFallbackText","chatFallbackText","channelFallbackText","senderLink","chatLink","textLink","mediaValue","messageLink","score","gameTitle","game","gameLink","pluralValue","isViaRequest","inviterId","inviter","inviterLink","channelId","channelLink","originalChatId","originalChatLink","iconEmojiId","topicLink","topic","isClosed","isHidden","currentTopic","topicPlaceholderLink","link","boosts","userIds","userTitle","userLink","userLinks","app","domain","isAttachMenu","isFromRequest","senderUsername","shortName","appLink","stars","amount","winnersCount","isStars","unclaimedCount","currency","cryptoAmount","cryptoCurrency","price","asFontIcon","cryptoPrice","cost","durationText","scheduleDate","formattedDate","date","totalAmount","isRecurringInit","isRecurringUsed","invoice","invoiceTitle","peerTitle","peerLink","gift","alreadyPaidUpgradeStars","savedId","fromId","isToChannel","fromPeer","fromTitle","fromLink","starsAmount","channelPeer","isYou","channelTitle","isTransferred","isUpgrade","resaleStars","number","isAnonymous","actionPeer","actionPeerLink","isRoundVideo","isVoice","isAllowedInChannel","isMonoforum","formattedAmount","payerInitiated","replyInfo","replyToMsgId","postSender","postSenderTitle","postSenderLink","suggestedPostInfo","isRejected","isBalanceTooLow","rejectComment","replyMessageSender","replyPeerTitle","currencyName","publishDate","isPostPublished","completedIds","incompletedIds","completedItem","incompletedItem","todo","todoItems","items","find","item","includes","incompletedTaskTitle","incompletedTaskLink","task","completedTaskTitle","completedTaskLink","completedText","completedLink","noEllipsis","incompletedText","incompletedLink","listTitle","listLink","taskTitle","taskLink","list","tasksText","tasksLink","tasks","replyToPeerId","userOrChat","openChat","closeStoryViewer","setShouldCloseRightColumn","variables","options","asText","renderTextFilters","translationKey","audio","contact","giveaway","giveawayResults","paidMedia","pollId","voice","groupedId","isRound","withMultilineFix","targetMessage","focusMessage","isMissed","reason","isCancelled","useVideoAutoPause","playerRef","canPlayRef","usePlayPause","unfreezePlaying","unfreezePlayingOnRaf","handlePlaying","mediaRef","shouldPauseRef","isLoadingPlayRef","contains","MouseButton","RippleEffect","CLICKED_TIMEOUT","onMouseUp","onMouseEnter","onMouseLeave","backgroundImage","pill","badge","fluid","isShiny","withSparkleEffect","onTransitionEnd","ariaControls","hasPopup","download","allowDisabledClick","noFastClick","faded","isRectangular","noPreventDefault","shouldStopPropagation","noForcedUpperCase","elementRef","isClicked","setIsClicked","isNotInteractive","AVATAR_SIZE","labelText","subLabel","withIcon","blocking","permissionGroup","rightIcon","onlyInput","nestedCheckbox","nestedCheckboxCount","nestedOptionList","leftElement","onCheck","onClickLabel","labelRef","showNested","setShowNested","renderingUser","toggleNested","handleInputClick","labelClassName","nestedOption","Menu","bubbleClassName","transformOriginX","transformOriginY","positionX","positionY","footer","forceOpen","onOpen","onClose","onMouseEnterBackdrop","onHide","autoClose","menuRef","setIsOpen","toggleIsOpen","handleKeyDown","menu","focusedElement","elementChildren","handleClose","triggerComponent","isMenuOpen","onCloseAnimationEnd","success","readOnly","maxLength","teactExperimentControlled","onKeyPress","onBlur","isPrimary","backgroundColor","beginHeavyAnimation","IS_BACKDROP_BLUR_SUPPORTED","captureEscKeyListener","useKeyboardListNavigation","useMenuPosition","useShowTransition","useVirtualBackdrop","Portal","externalRef","shouldCloseFast","ariaLabelledBy","noCloseOnBackdrop","backdropExcludedSelector","noCompact","withPortal","positionOptions","isTouchScreen","bubbleRef","shouldBeReplaced","prevIsOpen","bubbleFullClassName","isCharIcon","customIcon","destructive","withWrap","clickArg","withPreventDefaultOnMouseDown","useBuffering","useVideoCleanup","onTimeUpdate","restProps","localRef","handlePlayingForAutoPause","isReadyRef","handleReady","isBuffered","bufferingHandlers","onPlaying","handlePlayingForBuffering","otherBufferingHandlers","prevIsBuffered","mergedOtherBufferingHandlers","mergedHandlers","keyString","TeactDOM","containerSelector","querySelector","appendChild","render","removeChild","debounce","ANIMATION_DURATION_MS","ripples","setRipples","cleanUpDebounced","rippleSize","clientX","clientY","addExtraClass","removeExtraClass","setExtraStyles","toggleExtraClass","requestForcedReflow","selectCanAnimateInterface","waitForAnimationEnd","waitForTransitionEnd","forceReflow","omit","allowSwipeControlForTransition","useForceUpdate","FALLBACK_ANIMATION_END","CLASSES","slide","to","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","DISABLEABLE_ANIMATIONS","nextKey","direction","shouldRestoreHeight","cleanupExceptionKey","cleanupOnlyKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","isBlockingAnimation","onStart","onStop","currentKeyRef","shouldDisableAnimation","rendersRef","forceUpdate","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","cleanup","isSlideOptimized","prevActiveIndex","activeIndex","childNodes","childElements","el","childElement","transition","transform","performSlideOptimized","node","HTMLElement","endHeavyAnimation","watchedNode","giveUpAnimationEnd","clientWidth","flexBasis","asFastList","renders","renderKeys","contents","rendered","teactOrderKey","teactFastList","toSlide","fromSlide","APP_CODE_NAME","APP_NAME","RELEASE_DATETIME","PRODUCTION_HOSTNAME","PRODUCTION_URL","WEB_VERSION_BASE","ACCOUNT_QUERY","IS_MOCKED_CLIENT","APP_BYPASS_AUTH","APP_WALLET_CREATED","IS_DEV","APP_ENV","IS_PERF","IS_BETA","ELECTRON_WINDOW_DRAG_EVENT_START","ELECTRON_WINDOW_DRAG_EVENT_END","PAID_MESSAGES_PURPOSE","DEBUG_MORE","DEBUG_LOG_FILENAME","BOT_VERIFICATION_PEERS_LIMIT","BETA_CHANGELOG_URL","ELECTRON_HOST_URL","DEBUG_ALERT_MSG","DEBUG_GRAMJS","APP_TITLE","DEBUG_PAYMENT_SMART_GLOCAL","SESSION_LEGACY_USER_KEY","SESSION_ACCOUNT_PREFIX","LEGACY_PASSCODE_CACHE_NAME","MULTIACCOUNT_MAX_SLOTS","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_PREFIX","SHARED_STATE_CACHE_KEY","GLOBAL_STATE_CACHE_USER_LIST_LIMIT","GLOBAL_STATE_CACHE_CHAT_LIST_LIMIT","GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT","GLOBAL_STATE_CACHE_CUSTOM_EMOJI_LIMIT","IS_SCREEN_LOCKED_CACHE_KEY","MEDIA_CACHE_DISABLED","MEDIA_CACHE_NAME","MEDIA_CACHE_NAME_AVATARS","MEDIA_PROGRESSIVE_CACHE_DISABLED","MEDIA_PROGRESSIVE_CACHE_NAME","MEDIA_CACHE_MAX_BYTES","CUSTOM_BG_CACHE_NAME","LANG_CACHE_NAME","ASSET_CACHE_NAME","AUTODOWNLOAD_FILESIZE_MB_LIMITS","DATA_BROADCAST_CHANNEL_PREFIX","ESTABLISH_BROADCAST_CHANNEL_PREFIX","MULTITAB_LOCALSTORAGE_KEY_PREFIX","DC_IDS","DOWNLOAD_WORKERS","UPLOAD_WORKERS","isBigScreen","innerHeight","MIN_PASSWORD_LENGTH","MESSAGE_LIST_SLICE","MESSAGE_LIST_VIEWPORT_LIMIT","ARCHIVE_MINIMIZED_HEIGHT","CHAT_HEIGHT_PX","TOPIC_HEIGHT_PX","PEER_PICKER_ITEM_HEIGHT_PX","CHAT_LIST_SLICE","CHAT_LIST_LOAD_SLICE","SHARED_MEDIA_SLICE","CHAT_MEDIA_SLICE","MESSAGE_SEARCH_SLICE","GLOBAL_SEARCH_SLICE","GLOBAL_TOPIC_SEARCH_SLICE","GLOBAL_SEARCH_CONTACTS_LIMIT","MEMBERS_SLICE","MEMBERS_LOAD_SLICE","PINNED_MESSAGES_LIMIT","BLOCKED_LIST_LIMIT","PROFILE_SENSITIVE_AREA","TOPIC_LIST_SENSITIVE_AREA","GROUP_CALL_PARTICIPANTS_LIMIT","STORY_LIST_LIMIT","API_GENERAL_ID_LIMIT","STATISTICS_PUBLIC_FORWARDS_LIMIT","RESALE_GIFTS_LIMIT","TODO_ITEMS_LIMIT","TODO_TITLE_LENGTH_LIMIT","TODO_ITEM_LENGTH_LIMIT","STARS_SUGGESTED_POST_AMOUNT_MAX","STARS_SUGGESTED_POST_AMOUNT_MIN","STARS_SUGGESTED_POST_COMMISSION_PERMILLE","STARS_SUGGESTED_POST_AGE_MIN","STARS_SUGGESTED_POST_FUTURE_MAX","STARS_SUGGESTED_POST_FUTURE_MIN","TON_SUGGESTED_POST_COMMISSION_PERMILLE","TON_USD_RATE_DEFAULT","VERIFY_AGE_MIN_DEFAULT","TON_TOPUP_URL_DEFAULT","TON_SUGGESTED_POST_AMOUNT_MIN","TON_SUGGESTED_POST_AMOUNT_MAX","STORY_VIEWS_MIN_SEARCH","STORY_MIN_REACTIONS_SORT","STORY_VIEWS_MIN_CONTACTS_FILTER","MEDIA_TIMESTAMP_SAVE_MINIMUM_DURATION","GLOBAL_SUGGESTED_CHANNELS_ID","TOP_REACTIONS_LIMIT","RECENT_REACTIONS_LIMIT","REACTION_LIST_LIMIT","REACTION_UNREAD_SLICE","MENTION_UNREAD_SLICE","TOPICS_SLICE","TOPICS_SLICE_SECOND_LOAD","TOP_CHAT_MESSAGES_PRELOAD_LIMIT","SPONSORED_MESSAGE_CACHE_MS","DEFAULT_CHARGE_FOR_MESSAGES","MINIMUM_CHARGE_FOR_MESSAGES","DEFAULT_MAXIMUM_CHARGE_FOR_MESSAGES","DEFAULT_VOLUME","DEFAULT_PLAYBACK_RATE","PLAYBACK_RATE_FOR_AUDIO_MIN_DURATION","ANIMATION_LEVEL_CUSTOM","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","DEFAULT_MESSAGE_TEXT_SIZE_PX","IOS_DEFAULT_MESSAGE_TEXT_SIZE_PX","MACOS_DEFAULT_MESSAGE_TEXT_SIZE_PX","PREVIEW_AVATAR_COUNT","DRAFT_DEBOUNCE","SEND_MESSAGE_ACTION_INTERVAL","APP_CONFIG_REFETCH_INTERVAL","GENERAL_REFETCH_INTERVAL","EDITABLE_INPUT_MODAL_ID","EDITABLE_STORY_INPUT_ID","EDITABLE_INPUT_CSS_SELECTOR","EDITABLE_INPUT_MODAL_CSS_SELECTOR","EDITABLE_STORY_INPUT_CSS_SELECTOR","CUSTOM_APPENDIX_ATTRIBUTE","MESSAGE_CONTENT_CLASS_NAME","MESSAGE_CONTENT_SELECTOR","VIEW_TRANSITION_CLASS_NAME","RESIZE_HANDLE_CLASS_NAME","RESIZE_HANDLE_SELECTOR","SNAP_EFFECT_CONTAINER_ID","SNAP_EFFECT_ID","STARS_ICON_PLACEHOLDER","MIN_SCREEN_WIDTH_FOR_STATIC_RIGHT_COLUMN","MIN_SCREEN_WIDTH_FOR_STATIC_LEFT_COLUMN","MOBILE_SCREEN_MAX_WIDTH","MOBILE_SCREEN_LANDSCAPE_MAX_WIDTH","MOBILE_SCREEN_LANDSCAPE_MAX_HEIGHT","MAX_INT_32","TMP_CHAT_ID","ANIMATION_WAVE_MIN_INTERVAL","MESSAGE_APPEARANCE_DELAY","PAID_SEND_DELAY","SCROLL_MIN_DURATION","SCROLL_MAX_DURATION","SCROLL_MAX_DISTANCE","SCROLL_SHORT_TRANSITION_MAX_DISTANCE","API_UPDATE_THROTTLE","API_THROTTLE_RESET_UPDATES","LOCK_SCREEN_ANIMATION_DURATION_MS","STICKER_SIZE_AUTH","STICKER_SIZE_AUTH_MOBILE","STICKER_SIZE_PICKER","EMOJI_SIZE_PICKER","COMPOSER_EMOJI_SIZE_PICKER","STICKER_SIZE_GENERAL_SETTINGS","STICKER_SIZE_PICKER_HEADER","STICKER_PICKER_MAX_SHARED_COVERS","STICKER_SIZE_SEARCH","STICKER_SIZE_MODAL","EMOJI_SIZE_MODAL","STICKER_SIZE_TWO_FA","STICKER_SIZE_PASSCODE","STICKER_SIZE_DISCUSSION_GROUPS","STICKER_SIZE_FOLDER_SETTINGS","STICKER_SIZE_INLINE_BOT_RESULT","STICKER_SIZE_JOIN_REQUESTS","STICKER_SIZE_INVITES","RECENT_STICKERS_LIMIT","RECENT_STATUS_LIMIT","EMOJI_STATUS_LOOP_LIMIT","TOP_SYMBOL_SET_ID","POPULAR_SYMBOL_SET_ID","RECENT_SYMBOL_SET_ID","COLLECTIBLE_STATUS_SET_ID","FAVORITE_SYMBOL_SET_ID","EFFECT_STICKERS_SET_ID","EFFECT_EMOJIS_SET_ID","CHAT_STICKER_SET_ID","DEFAULT_TOPIC_ICON_STICKER_ID","DEFAULT_STATUS_ICON_ID","EMOJI_IMG_REGEX","BASE_EMOJI_KEYWORD_LANG","MENU_TRANSITION_DURATION","SLIDE_TRANSITION_DURATION","BIRTHDAY_NUMBERS_SET","RESTRICTED_EMOJI_SET","SVG_NAMESPACE","SVG_EXTENSIONS","VIDEO_WEBM_TYPE","GIF_MIME_TYPE","LOTTIE_STICKER_MIME_TYPE","VIDEO_STICKER_MIME_TYPE","SUPPORTED_PHOTO_CONTENT_TYPES","SUPPORTED_VIDEO_CONTENT_TYPES","SUPPORTED_AUDIO_CONTENT_TYPES","CONTENT_TYPES_WITH_PREVIEW","SUPPORTED_TRANSLATION_LANGUAGES","RE_TG_LINK","RE_TME_LINK","RE_TELEGRAM_LINK","BOT_FATHER_USERNAME","USERNAME_PURCHASE_ERROR","MESSAGE_ID_REQUIRED_ERROR","PURCHASE_USERNAME","ACCEPTABLE_USERNAME_ERRORS","TME_WEB_DOMAINS","WEB_APP_PLATFORM","LANG_PACK","NSFW_RESTRICTION_REASON","COUNTRIES_WITH_12H_TIME_FORMAT","API_CHAT_TYPES","HEART_REACTION","emoticon","REPLIES_USER_ID","VERIFICATION_CODES_USER_ID","ANONYMOUS_USER_ID","RESTRICTED_EMOJI_SET_ID","CHANNEL_ID_BASE","DEFAULT_GIF_SEARCH_BOT_USERNAME","ALL_FOLDER_ID","ARCHIVED_FOLDER_ID","SAVED_FOLDER_ID","DELETED_COMMENTS_CHANNEL_ID","MAX_MEDIA_FILES_FOR_ALBUM","MAX_ACTIVE_PINNED_CHATS","SCHEDULED_WHEN_ONLINE","LANG_PACKS","FEEDBACK_URL","FAQ_URL","PRIVACY_URL","MINI_APP_TOS_URL","FRAGMENT_ADS_URL","STORY_EXPIRE_PERIOD","STORY_VIEWERS_EXPIRE_PERIOD","FRESH_AUTH_PERIOD","GIVEAWAY_BOOST_PER_PREMIUM","GIVEAWAY_MAX_ADDITIONAL_CHANNELS","GIVEAWAY_MAX_ADDITIONAL_USERS","GIVEAWAY_MAX_ADDITIONAL_COUNTRIES","BOOST_PER_SENT_GIFT","FRAGMENT_PHONE_CODE","FRAGMENT_PHONE_LENGTH","DEFAULT_PATTERN_COLOR","DARK_THEME_PATTERN_COLOR","PEER_COLOR_BG_OPACITY","PEER_COLOR_BG_ACTIVE_OPACITY","PEER_COLOR_GRADIENT_STEP","MAX_UPLOAD_FILEPART_SIZE","MAX_UNIQUE_REACTIONS","GROUP_CALL_VOLUME_MULTIPLIER","GROUP_CALL_DEFAULT_VOLUME","DEFAULT_LIMITS","uploadMaxFileparts","stickersFaved","savedGifs","dialogFiltersChats","dialogFilters","dialogFolderPinned","captionLength","channels","channelsPublic","aboutLength","chatlistInvites","chatlistJoined","recommendedChannels","savedDialogsPinned","moreAccounts","DEFAULT_MAX_MESSAGE_LENGTH","ONE_TIME_MEDIA_TTL_SECONDS","PREMIUM_FEATURE_SECTIONS","PREMIUM_BOTTOM_VIDEOS","PREMIUM_LIMITS_ORDER","DEFAULT_GIFT_PROFILE_FILTER_OPTIONS","sortType","shouldIncludeUnlimited","shouldIncludeLimited","shouldIncludeUnique","shouldIncludeDisplayed","shouldIncludeHidden","DEFAULT_RESALE_GIFTS_FILTER_OPTIONS","ACCOUNT_TTL_OPTIONS","ManagementProgress","updateAppBadge","PASSCODE_IDB_STORE","MAX_BUFFER_SIZE","cacheApi","unsubscribe","clearEncryptedSession","encryptSession","forgetPasscode","resetInitialLocationHash","resetLocationHash","clearStoredSession","loadStoredSession","storeSession","forceWebsync","removeGlobalFromCache","removeSharedStateFromCache","serializeGlobal","addActionHandler","clearGlobalForLockScreen","updateManagementProgress","updatePasscodeSettings","destroySharedStatePort","actions","initialLocationHash","shouldAllowHttpTransport","shouldForceHttpTransport","shouldDebugExportedSenders","shouldCollectDebugLogs","hasTestParam","search","tgWebAuthTest","accountIds","userAgent","sessionData","isWebmSupported","maxBufferSize","webAuthToken","dcId","tgWebAuthDcId","mockScenario","isTestServerRequested","password","file","isFallback","videoTs","bot","tabId","InProgress","Complete","loadFullUser","hangUp","leaveGroupCall","reset","forceInitApi","clear","langCachePrefix","langCacheVersion","initShared","force","byTabId","otherTabId","deviceToken","subscribedAt","sessionJson","JSON","stringify","globalJson","invalidAttemptsCount","timeoutUntil","ProfileEditProgress","UPLOADING_WALLPAPER_SLUG","buildCollectionByKey","requestPermission","subscribe","setTimeFormat","requestActionTimeout","buildApiInputPrivacyRules","addBlockedUser","addNotifyException","addNotifyExceptions","deletePeerPhoto","removeBlockedUser","replaceSettings","updateChat","updateSharedSettings","updateUser","updateUserFullInfo","updateTabState","selectIsCurrentUserFrozen","bio","about","profileEdit","shouldUsernameUpdate","u","isEditable","withPhotos","avatarPhotoId","profilePhoto","Idle","checkedUsername","isUsernameAvailable","loadedWallpapers","wallpapers","createObjectURL","slug","mediaType","wallpaper","firstWallpaper","withLocalMedia","blocked","ids","blockedIds","isOnlyStories","signUpNotification","notifyDefaults","hasContactJoinedNotifications","peerType","isMuted","shouldShowPreviews","mutedUntil","oldSettings","byKey","hasWebNotifications","hasPushNotifications","isGranted","isSilent","languages","phoneNumberSettings","addByPhoneSettings","lastSeenSettings","profilePhotoSettings","forwardsSettings","chatInviteSettings","phoneCallSettings","phoneP2PSettings","voiceMessagesSettings","bioSettings","birthdaySettings","giftsSettings","noPaidMessagesSettings","privacy","rules","addByPhone","lastSeen","forwards","chatInvite","phoneCall","phoneP2P","voiceMessages","birthday","gifts","noPaidMessages","privacyKey","visibility","onSuccess","allowedIds","allowUserIds","allowChatIds","blockUserIds","blockChatIds","botsPrivacy","isAllowList","updatedIds","isPremiumAllowed","idsForUpdate","isUnspecified","shouldAllowPremium","isOnline","isSensitiveEnabled","timeFormat","toUpperCase","wasTimeFormatSetManually","nearestCountryCode","appConfig","isAppConfigLoaded","expiresAt","peerColors","generalHash","general","colors","timezones","globalSettings","shouldArchiveAndMuteNewNonContact","shouldHideReadMarks","shouldNewNonContactPeersRequirePremium","nonContactPeersPaidStars","shouldDisplayGiftsButton","disallowedGifts","shouldUpdateUsersSettings","fullInfoById","loadFullChat","loadUser","prevUsernames","sortedUsernames","res","currentUsername","idx","findIndex","getShippingError","shouldClosePaymentModal","unique","clearWebTokenAuth","setServerTimeOffset","updateSessionUserId","isChatSuperGroup","onUpdateApiReady","onUpdateAuthorizationState","onUpdateAuthorizationError","onUpdateWebAuthTokenFailed","onUpdateConnectionState","onUpdateSession","onUpdateServerTimeOffset","onUpdateCurrentUser","sync","isFetchingDifference","isFetching","paymentShippingError","addPaymentError","closePaymentModal","showDialog","wasAuthReady","previousAuthState","currentState","attemptedState","isLoggingOut","authIsCodeViaApp","isCodeViaApp","authHint","hint","noReset","errorKey","multitabNextAction","clearMultitabNextAction","channelStackIds","flatMap","tab","messageLists","messageList","requestChannelDifference","signOut","isEmpty","mainDcId","saveSession","serverTimeOffset","currentUserFullInfo","currentGlobal","addCallback","IS_MULTIACCOUNT_SUPPORTED","IS_LINUX","IS_MAC_OS","IS_WINDOWS","decryptSessionByCurrentHash","applyPerformanceSettings","switchTheme","getSystemTheme","setSystemThemeChangeCallback","startWebsync","stopWebsync","clearCaching","setupCaching","selectPerformanceSettings","selectSettingsKeys","initSharedState","HISTORY_ANIMATION_DURATION","shouldUseSystemTheme","forceSyncOnIOs","destroyConnection","onSomeTabSwitchedMultitabRole","session","parse","events","subscribeAfterUserGesture","once","isUpdated","shouldInit","messageTextSize","globalTheme","systemTheme","performanceType","floor","setAttribute","canAnimate","canInstall","remove","isWalletCreatedEnv","telegramUserIdTest","backendUrl","endpoint","method","json","exists","globalUpdate","LeftColumnContent","SettingsScreens","disableDebugConsole","initDebugConsole","updatePeerColors","updateThemeSettings","selectChatFolder","prevGlobal","updatePageTitle","updateShouldDebugExportedSenders","updateShouldEnableDebugLog","oldGlobal","oldSharedSettings","sharedSettings","prevPerformance","prevPeerColors","withAnimation","hasFocus","canDisplayChatInTitle","foldersAction","nextFoldersAction","contentKey","ChatList","leftColumn","screen","openLeftColumnContent","Settings","settingsScreen","folderId","isOnlyInvites","chatFolder","openSettingsScreen","FoldersEditFolderInvites","FoldersEditFolderFromChatList","requestNextFoldersAction","noRequestNextScreen","isChatList","openEditChatFolder","shareFolderScreen","isFromSettings","onFullyIdle","removeCallback","MAIN_IDB_STORE","getOrderedIds","pickTruthy","GLOBAL_STATE_CACHE_KEY","onBeforeUnload","throttle","INITIAL_GLOBAL_STATE","clearSharedStateForLockScreen","selectChatLastMessageId","selectChatMessages","selectCurrentMessageList","selectTopics","selectViewportIds","selectVisibleUsers","getIsMobile","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","isCaching","isRemovingCache","unsubscribeFromBeforeUnload","cacheGlobal","cacheSharedState","state","loadCachedGlobal","loadCachedSharedState","del","cacheIsScreenLocked","localStorage","setItem","initCache","resetCache","removeItem","loadCache","initialState","cache","readCache","time","getItem","cachedFromLocalStorage","cached","cachedSharedState","timeEnd","migrateCache","newState","unsafeMigrateCache","untypedCached","chatFolders","limits","similarChannelsById","similarBotsById","lastMessageIds","darkPeerColors","fileUploads","byMessageKey","reactions","quickReplies","previewMediaByBotId","loadingParameters","topBotApps","defaultTags","commonChatsById","botAppPermissionsById","topicsInfoById","messages","pollById","botVerificationShownPeerIds","peers","accountDaysTtl","cacheVersion","playbackByChatId","themes","dark","patternColor","light","notifyExceptionById","animationLevel","messageSendKeyCombo","isConnectionStatusMinimized","shouldSkipWebAppCloseConfirmation","miniAppsCachedPosition","miniAppsCachedSize","shouldWarnAboutSvg","forceUpdateCache","noEncrypt","serializedGlobal","reduceGlobal","reduceSharedState","reducedGlobal","lastIsChatInfoShown","reduceCustomEmojis","reduceUsers","reduceChats","reduceMessages","reduceSettings","reduceChatFolders","groupCalls","reduceGroupCalls","availableReactions","reduceAvailableReactions","isInitial","lastRendered","idsToSave","byIdToSave","forEmoji","added","statusRecent","statusesById","currentChatIds","visibleUserIds","chatStoriesUserIds","webPage","attachBotIds","attachMenu","bots","topPeers","recentlyFoundChatIds","contactList","messagesChatIds","viewportIds","replyPeer","unlinkedIdsToSave","linkedMonoforumId","byChatId","forumPanelChatIds","forumPanelChatId","chatIdsToSave","openedChatThreadIds","tabChatId","pollIdsToSave","chatLastMessageId","openedThreadIds","commentThreadIds","threadsById","threadInfo","isCommentsInfo","originMessageId","threadIds","concat","threadsToSave","viewportIdsToSave","thread","lastViewportIds","topics","topicLastMessageIds","lastMessageId","savedLastMessageIds","lastMessageIdsToSave","listedIds","pinnedIds","typingStatus","cleanedById","cleanedMessage","omitLocalMedia","omitLocalPaidReactions","sponsoredByChatId","results","reaction","localAmount","blobUrl","isPreloadedGlobally","previousLocalId","lastPremiumBandwithNotificationDate","activeGroupCallId","getBotCoverMediaHash","convertToApiChatType","getWebAppKey","webApp","requestUrl","appName","botId","isSystemBot","formatDateToString","formatTime","getPeerIdDividend","selectIsChatRestricted","FOREVER_BANNED_DATE","isChatGroup","isChatBasicGroup","isChatMonoforum","isCommonBoxChat","isChatWithVerificationCodesBot","getChatTypeString","getPrivateChatUserId","getChatLink","activeUsername","owner","isChatAdmin","adminRights","isCreator","getHasAdminRight","getCanManageTopic","isOwner","isUserRightBanned","chatFullInfo","unrestrictedByBoosts","boostsToUnrestrict","boostsApplied","currentUserBannedRights","defaultBannedRights","getCanPostInChat","isMessageThread","isNotJoined","isRestricted","isForbidden","migratedTo","getAllowedAttachmentOptions","isChatWithBot","isStoryReply","paidMessagesStars","isInScheduledList","canAttachMedia","canAttachPolls","canSendStickers","canSendGifs","canAttachEmbedLinks","canSendPhotos","canSendVideos","canSendRoundVideos","canSendAudios","canSendVoices","canSendPlainText","canSendDocuments","canAttachToDoLists","isAdmin","getMessageSendingRestrictionReason","sendMessages","untilDate","getForumComposerPlaceholder","isReplying","isChatArchived","getCanDeleteChat","getFolderDescriptionText","folder","chatsCount","excludedChatIds","includedChatIds","groups","contacts","nonContacts","isChatPublic","hasUsername","getOrderedTopics","pinnedOrder","shouldSortByLastMessage","pinned","isPinned","ordered","pinnedOrdered","getIsSavedDialog","getGroupStatus","chatTypeString","membersCount","getCustomPeerFromInvite","invite","isFake","isScam","fakeType","getMockPreparedMessageFromResult","preparedMessage","inlineButtons","sendMessage","replyMarkup","viaBotId","parseEmojiOnlyString","getEmojiOnlyCountForMessage","getPhotoMediaHash","getVideoMediaHash","STORY_ALT_VIDEO_WIDTH","getStoryMediaHash","isAlt","altVideos","getPreferredAlt","alts","curr","abs","getStoryKey","storyId","IS_OPFS_SUPPORTED","IS_OPUS_SUPPORTED","IS_PROGRESSIVE_SUPPORTED","getAttachmentMediaType","matchLinkInMessageText","hasMessageMedia","getMessagePhoto","getMessageVideo","getMessageDocument","getMessageSticker","getMessageContact","getMessageTodo","getMessageAction","getMessageAudio","getMessageVoice","canEditMedia","otherMedia","getMessageActionPhoto","getMessageRoundVideo","getMessageWebPageDocument","getMessageWebPage","isDocumentPhoto","innerMediaType","isDocumentVideo","isMessageDocumentSticker","getMessageLocation","getMessagePaidMedia","getMessageWebPagePhoto","getMessageDocumentPhoto","getMessageWebPageVideo","getMessageWebPageAudio","getMessageDocumentVideo","getMessageDownloadableMedia","getMessageMediaThumbnail","extendedMedia","getMessageMediaThumbDataUri","dataUri","getMediaThumbUri","getMessageIsSpoiler","invoiceMedia","isSpoiler","buildStaticMapHash","geo","zoom","long","lat","accuracyRadius","getMessageMediaHash","messagePhoto","actionPhoto","messageVideo","messageDocument","messageAudio","getDocumentMediaHash","getAudioMediaHash","getVoiceMediaHash","base","hasMediaLocalBlobUrl","getProfilePhotoMediaHash","appendProgressiveQueryParameters","getVideoPreviewMediaHash","hasVideoPreview","getAudioHasCover","webDocument","previewPhotoSizes","getMediaHash","getGamePreviewPhotoHash","getGamePreviewVideoHash","thumbnailSizes","getMediaFormat","isDocument","hasInnerVideo","isAudio","getMediaFileSize","DownloadUrl","Progressive","getChatMediaMessageIds","isFromSharedMedia","getMessageContentIds","getPhotoFullDimensions","sizes","getMediaTransferState","isLoadNeeded","isUploading","isTransferring","transferProgress","messageIds","contentType","validator","getMediaDuration","canReplaceMessageMedia","attachment","isPhotoOrVideo","isFile","fileType","isMediaLoadableInViewer","newMessage","getMediaFilename","getIsDownloading","activeDownloads","getTimestampableMedia","getMessageTranscription","SPOILER_CHARS","isExtended","emojiWithSpace","getMessageTextWithSpoilers","description","transcription","textWithoutTranscription","accText","spoiler","generateBrailleSpoiler","getMediaContentTypeDescription","getSummaryDescription","truncatedText","mediaContent","hasUsedTruncatedText","summary","boughtExtendedMedia","isBought","previewExtendedMedia","isPaidMediaAlbum","isPaidMediaSingleVideo","isPaidMediaSinglePhoto","getMessageAudioCaption","question","performer","areDeepEqual","getCleanPeerId","areSortedArraysIntersecting","isLocalMessageId","getMessageHtmlId","getMessageOriginalId","transcriptionId","transcriptions","hasMessageText","getMessageStatefulContent","storyPeerId","stories","byPeerId","getMessageCustomShape","hasOtherFormatting","emojiOnlyCount","getMessageSingleRegularEmoji","getMessageSingleCustomEmoji","getFirstLinkInMessage","firstTextUrl","firstUrl","isOwnMessage","isReplyToMessage","isForwardedMessage","forwardInfo","isServiceNotificationMessage","isAnonymousOwnMessage","senderId","getSendingState","sendingState","isMessageLocal","isMessageFailed","isHistoryClearMessage","isGeoLiveExpired","period","isMessageTranslatable","allowOutgoing","isLocal","isServiceNotification","isScheduled","getMessageSingleInlineButton","orderHistoryIds","orderPinnedIds","mergeIdRanges","ranges","idsUpdate","hasIntersection","newOutlyingLists","array","prevArray","splice","contentText","hasCodeEntities","oldEntities","isExpiredMessage","hasMessageTtl","ttlSeconds","shouldSendAsFile","isUploadingFileSticker","getMessageLink","chatUsername","normalizedId","chatPart","topicPart","messagePart","splitMessagesForForwarding","limit","currentArr","lastGroup","batch","getSuggestedChangesInfo","originalMessage","original","suggested","originalContent","suggestedContent","originalText","originalMediaContent","suggestedText","suggestedMediaContent","isNewText","isNewMedia","originalPrice","suggestedPrice","isNewPrice","originalTime","suggestedTime","isNewTime","getSuggestedChangesActionText","changesInfo","changesParts","changesText","conjunction","langKey","changes","buildChatThreadKey","partition","clamp","usersById","chatsById","allowedUserIds","allowedChatIds","blockedUserIds","blockedChatIds","allowedUsers","allowedChats","blockedUsers","blockedChats","getCurrentMaxAccountCount","premiumCount","currentMaxCount","getCurrentProdAccountCount","omitUndefined","getIsChatMuted","notifyException","getChatNotifySettings","getIsChatSilent","hasSound","getShouldShowMessagePreview","defaults","getNotificationPeerType","getTranslationFn","getUserFirstOrLastName","filterPeersByQuery","query","selectorFn","localizedTitle","isFoundInLocalized","getPeerFullTitle","getPeerTypeKey","isSupport","getMessageSenderName","getMessageRecentReaction","recentReactions","checkIfHasUnreadReactions","isUnread","isOwn","areReactionsEmpty","getReactionKey","uniqueValue","isSameReaction","first","second","canSendReaction","chatReactions","areCustomAllowed","allowed","sortReactions","topReactions","reactionOne","reactionTwo","indexOne","indexTwo","Infinity","getUserReactions","isReactionChosen","chosenOrder","updateReactionCount","reactionCount","newReactions","existingIndex","addPaidReaction","hasPaid","localIsPrivate","localPeerId","localPreviousChosenOrder","getStoryReplyInfo","getSavedGiftKey","withoutTag","localTag","getStickerHashById","stickerId","isPreview","containsCustomEmoji","formatFullDate","DAY","orderBy","getServerTimeOffset","getUserStatus","userStatus","botActiveUsers","wasOnline","wasOnlineDate","diff","getTime","minutes","today","setHours","serverToday","hours","yesterday","setDate","getDate","serverYesterday","isUserOnline","withSelfOnline","isUserBot","getCanAddContact","sortUserIds","userStatusesById","priorityIds","expires","typify","typed","getPromiseActions","isCacheApiSupported","reestablishMasterToSelf","initGlobal","cloneDeep","loadBundle","parseLocationHash","initializeChatMediaSearchResults","INITIAL_TAB_STATE","replaceTabThreadParam","replaceThreadParam","selectThreadParam","initialTabState","isChatInfoShown","audioPlayer","playbackRate","lastPlaybackRate","isPlaybackRateActive","isLastPlaybackRateActive","mediaViewer","every","fixedThreadsById","t","parsedMessageList","isSupported","actionPayload","Calls","NewChatMembersProgress","INITIAL_PERFORMANCE_STATE_MAX","animatedEmoji","autoplayGifs","autoplayVideos","contextMenuAnimations","contextMenuBlur","loopAnimatedStickers","mediaViewerAnimations","messageComposerAnimations","messageSendingAnimations","pageTransitions","reactionEffects","rightColumnAnimations","stickerEffects","storyRibbonAnimations","snapEffect","INITIAL_PERFORMANCE_STATE_MID","INITIAL_PERFORMANCE_STATE_MIN","INITIAL_SHARED_STATE","twoFaSettings","isAppUpdateAvailable","isElectronUpdateAvailable","shouldShowContextMenuHint","profilePhotosById","orderedPinnedIds","orderedPeerIds","hasNext","hasNextInArchive","stealthMode","attachmentSettings","shouldCompress","shouldSendGrouped","isInvertedMedia","webPageMediaSize","shouldSendInHighQuality","scheduledMessages","messagesById","invites","recentEmojis","recentCustomEmojis","effectReactions","availableEffectById","stickers","setsById","recent","favorite","greeting","premium","featured","setIds","effect","emojiKeywords","gifs","topInlineBots","activeSessions","byHash","orderedHashes","activeWebSessions","canAutoLoadPhotoFromContacts","canAutoLoadPhotoInPrivateChats","canAutoLoadPhotoInGroups","canAutoLoadPhotoInChannels","canAutoLoadVideoFromContacts","canAutoLoadVideoInPrivateChats","canAutoLoadVideoInGroups","canAutoLoadVideoInChannels","canAutoLoadFileFromContacts","canAutoLoadFileInPrivateChats","canAutoLoadFileInGroups","canAutoLoadFileInChannels","autoLoadFileMaxSizeMb","notificationSoundVolume","shouldSuggestStickers","shouldSuggestCustomEmoji","shouldPaidMessageAutoApprove","shouldUpdateStickerSetOrder","canTranslate","canTranslateChats","doNotTranslate","isBlurred","serviceNotifications","trustedBotIds","translations","archiveSettings","isMinimized","isLeftColumnShown","isTradingColumnShown","selectedTradingCoin","selectedTradingMintAddress","newChatMembersProgress","Closed","gifSearch","stickerSearch","activeChatFolder","tabThreads","inlineBots","byUsername","webApps","openedWebApps","openedOrderedKeys","sessionKeys","modalState","isModalOpen","isMoreAppsTabActive","globalSearch","userSearch","middleSearch","byChatThreadKey","sharedMediaSearch","chatMediaSearch","management","savedGifts","giftsByPeerId","resaleGifts","updateIteration","storyViewer","isRibbonShown","volume","isShareMessageModalShown","isWebAppsCloseConfirmationModalOpen","forwardMessages","replyingMessage","pollResults","payment","starsPayment","notifications","dialogs","activeReactions","statistics","pollModal","requestedTranslations","isPaymentMessageConfirmDialogOpen","removePeerStory","STORY_EXPIRATION_INTERVAL","intervals","previousGlobal","isCurrentMaster","isPreviousMaster","startIntervals","stopIntervals","setInterval","checkStoryExpiration","interval","clearInterval","serverTime","expireDate","isInProfile","areSortedArraysEqual","selectChatFullInfo","DEFAULT_CHAT_LISTS","replaceChatListIds","newIds","replaceChatListLoadingParameters","nextOffsetId","nextOffsetPeerId","nextOffsetDate","updateChatLastMessageId","listType","updateChatsLastMessageId","addChatListIds","replaceChats","newById","addUnreadMentions","shouldUpdateCount","prevChatUnreadMentions","unreadMentions","updatedUnreadMentions","updatedUnreadMentionsCount","unreadMentionsCount","removeUnreadMentions","removedCount","chatUpdate","noOmitUnreadReactionCount","withDeepCheck","updateKeys","updatedChat","getUpdatedChat","updateChatFullInfo","fullInfoUpdate","currentFullInfo","updatedFullInfo","replaceChatFullInfo","fullInfo","updateChats","updatedById","addChats","addedById","existingChat","newChat","membersCountChanged","omitProps","updateChatListType","currentListIds","listTypeKey","currentFolderList","updateChatListSecondaryInfo","totalCountKey","totalChatCount","leaveChat","leftChatId","removeChatFromChatLists","joinInfo","chatLists","addChatMembers","membersToAdd","currentMembers","members","newMemberIds","m","updatedMembers","currentIds","adminMembers","adminMembersById","replaceSimilarChannels","similarChannelIds","toggleSimilarChannels","similarChannels","isExpanded","addSimilarBots","similarBotsIds","getSearchResultKey","updateGlobalSearch","searchStatePartial","updateGlobalSearchContent","currentContent","updateGlobalSearchResults","newFoundMessages","nextOffsetRate","resultsByType","newFoundMessagesById","foundIdsForType","foundIds","newId","updateGlobalSearchFetchingStatus","prevFoundIds","newFoundIds","prototype","foundOrPrevFoundIds","fetchingStatus","updateManagement","addTimestampEntities","excludeSortedArray","selectChatScheduledMessages","selectCurrentMessageIds","selectListedIds","selectMessageIdsByGroupId","selectOutlyingLists","selectPinnedIds","selectPoll","selectQuickReplyMessage","selectScheduledIds","selectScheduledMessage","selectThreadInfo","removeIdFromSearchResults","clearMessageTranslation","updateCurrentMessageList","shouldReplaceHistory","shouldReplaceLast","newMessageLists","previous","replaceChatMessages","updateMessageStore","updateTabThread","threadUpdate","updateThread","paramName","newValue","addMessages","addedByChatId","messagesByChatId","addChatMessagesById","replaceMessages","updatedByChatId","currentById","updateChatMessage","messageUpdate","isMediaUnread","updatedMessage","updateScheduledMessage","updateScheduledMessages","updateQuickReplyMessage","updateQuickReplyMessages","deleteQuickReplyMessages","deleteChatMessages","updatedThreads","mediaIdsToRemove","threadMessages","deletedForwardedPosts","isLinkedChannelPost","threadMessageIds","outlyingLists","newMessageCount","messagesCount","nonLocalMessageCount","activeDownloadsInChat","originChatId","mediaHash","cancelMessageMediaDownload","mediaId","newViewportIds","updateThreadInfo","currentMessageList","canDeleteCurrentThread","currentThreadId","fromChatId","fromMessageId","originalPost","deleteChatScheduledMessages","scheduledIds","newScheduledIds","updateListedIds","removeOutlyingList","l","updateOutlyingLists","addViewportId","safeReplaceViewportIds","safeReplacePinnedIds","newPinnedIds","doNotUpdateLinked","newThreadInfo","linkedUpdate","fromChannelId","updateThreadInfos","originChannelId","updateFocusedMessage","noHighlight","isResizingContainer","quote","quoteOffset","scrollTargetPosition","focusedMessage","updateSponsoredMessage","deleteSponsoredMessage","updateFocusDirection","enterMessageSelectMode","selectedMessages","toggleMessageSelection","messageListType","childMessageIds","withShift","oldSelectedMessages","selectedMessageIds","newMessageIds","newSelectedMessageIds","prevIndex","currentIndex","exitMessageSelectMode","updateThreadUnreadFromForwardedMessage","originMessage","isDeleting","channelPostId","threadInfoOld","addActiveMediaDownload","metadata","mediaHashes","newActiveDownloads","updateUploadByMessageKey","messageKey","updateQuickReplies","quickRepliesUpdate","deleteQuickReply","quickReplyId","updatePoll","pollUpdate","oldResults","newResults","isChosen","option","updatedPoll","updatePollVote","recentVoterIds","totalVoters","newRecentVoterIds","newTotalVoters","targetOptionIndex","targetOption","updatedOption","votersCount","selectChatMediaSearch","replaceMiddleSearch","chatThreadKey","rest","updateMiddleSearch","currentSearch","updated","isHashtag","savedTag","resetMiddleSearch","replaceMiddleSearchResults","fetchingQuery","updateMiddleSearchResults","prevQuery","closeMiddleSearch","replaceSharedMediaSearch","updateSharedMediaSearchType","currentType","replaceSharedMediaSearchResults","updateSharedMediaSearchResults","orderFoundIdsByDescending","orderFoundIdsByAscending","mergeWithChatMediaSearchSegment","loadingState","segment","mergedFoundIds","mergedLoadingState","areAllItemsLoadedForwards","areAllItemsLoadedBackwards","mergeChatMediaSearchSegments","currentSegment","segments","updateChatMediaSearchResults","replaceChatMediaSearchResults","removeIdFromSegment","foundId","removeIdsFromChatMediaSearchParams","updatedSearchParams","replaceChatMediaSearch","resetForwardsLoadingStateInParams","updateChatMediaLoadingState","setChatMediaSearchLoading","clearPasscodeSettings","withTabState","selectStarsPayment","updatePayment","updateStarsPayment","starPayment","updateShippingOptions","shippingOptions","setRequestInfoId","requestId","setPaymentStep","step","setStripeCardInfo","cardInfo","stripeCredentials","setSmartGlocalCardInfo","smartGlocalCredentials","setConfirmPaymentUrl","confirmPaymentUrl","setReceipt","receipt","clearPayment","clearStarPayment","closeInvoice","isPaymentModalOpen","isExtendedMedia","updateStarsBalance","balance","ton","appendStarsTransactions","transactions","nextOffset","isTon","history","newTypeObject","appendStarsSubscriptions","subscriptions","newObject","updateStarsSubscriptionLoading","openStarsTransactionModal","transaction","starsTransactionModal","openStarsTransactionFromReceipt","transactionId","nanos","uniqueByField","selectPeerPhotos","selectUserFullInfo","updatePeer","peerUpdate","updatePeerFullInfo","peerFullInfoUpdate","updatePeerPhotosIsLoading","profilePhotos","replacePeerPhotos","updatePeerPhotos","newPhotos","shouldInvalidateCache","currentPhotos","fallbackPhoto","personalPhoto","unshift","hasFallbackPhoto","currentPhotoArray","photoId","isFromActionMessage","userFullInfo","isAvatar","nextAvatarPhoto","newFallbackPhoto","newPersonalPhoto","newProfilePhoto","shouldKeepInPhotos","updateSharedState","updateUserBlockedState","newSettings","replaceNotifyExceptions","updateNotifyDefaults","contactId","updateStatistics","updateMessageStatistics","currentMessage","currentStory","updateStoryStatistics","updateStatisticsGraph","updateChannelMonetizationStatistics","monetization","updateVerifyMonetizationModal","monetizationVerificationModal","compareFields","selectIsChatWithSelf","addStories","newStoriesByPeerId","updatedByPeerId","newPeerStories","profileIds","lastUpdatedAt","updateOrderedStoriesPeerIds","addStoriesForPeer","newStories","addToArchive","archiveIds","deletedIds","updatedOrderedIds","updatedArchiveIds","updatedProfileIds","storyChangelogUserId","updatePeerLastUpdatedAt","updateStoriesForPeer","updatePeerStoriesFullyLoaded","isArchive","updateLastReadStoryForPeer","updateLastViewedStoryForPeer","lastViewedId","lastViewedByPeerId","updatePeersWithStories","storiesByPeerId","maxStoryId","updateStoryViews","views","viewModal","newViews","updateStoryViewsLoading","newOrderedIds","newProfileIds","lastStoryId","previousStoryId","newLastReadId","updateSentStoryReaction","reactionsCount","hasReaction","countDiff","newReactionsCount","updatePeerStory","sentReaction","storyUpdate","updatePeerStoryViews","viewsUpdate","updatePeerProfileStory","updatePeerStoriesHidden","areHidden","areStoriesHidden","updatePeerIds","allPeerIds","newOrderedPeerIds","compare","peerIdA","peerIdB","peerA","peerB","diffCurrentUser","luaA","orderedA","lriA","hasUnreadA","luaB","orderedB","lriB","hasUnreadB","diffUnread","diffPremium","diffType","updateStealthMode","selectCustomEmojiForEmoji","selectStickersForEmoji","updateStickerSearch","resultIds","updateStickerSets","category","sets","updatedSets","stickerSet","existing","regularSetIds","updateCustomEmojiSets","addedSetIds","updateStickerSet","stickerSetId","currentStickerSet","isCustomEmoji","isEmoji","addedSets","installedDate","isArchived","customEmojiById","updateGifSearch","isNew","currentResults","gif","replaceAnimatedEmojis","animatedEmojis","updateStickersForEmoji","remoteStickers","localStickers","allStickers","uniqueIds","updateCustomEmojiForEmoji","updateRecentStatusCustomEmojis","rebuildStickersForEmoji","tabStatePartial","selectTopicsInfo","updateTopicsStore","updateListedTopicIds","topicIds","listedTopicIds","updateTopics","topicsCount","oldTopics","newTopics","topicsById","firstMessageId","updateTopic","updatedTopic","deleteTopic","updateTopicLastMessageId","replacePinnedTopicIds","pinnedTopicIds","orderedPinnedTopicIds","selectMessageTranslations","updateMessageTranslation","toLanguageCode","translation","translatedMessages","byLangCode","chatTranslations","newByLangCode","newTranslatedMessages","updateMessageTranslations","isPending","updateRequestedChatTranslation","toLanguage","removeRequestedChatTranslation","updateRequestedMessageTranslation","manualMessages","removeRequestedMessageTranslation","newManualMessages","updateTwoFaSettings","MEMO_EMPTY_ARRAY","replaceUsers","updateContactList","updatedUsers","contactUserIds","contactUserIdsFromUpdate","userUpdate","updatedUser","getUpdatedUser","updateUsers","addUsers","existingUser","newUser","deleteContact","updateUserSearch","updateUserSearchFetchingStatus","isBlocked","replaceUserStatuses","updateUserCommonChats","commonChats","addUserStatuses","closeNewContactDialog","newContact","updateMissingInvitedUsers","missingUsers","inviteViaLinkModal","updateBotAppPermissions","permissions","replacePeerSavedGifts","keyCounts","IS_TRANSLATION_SUPPORTED","selectActiveRestrictionReasons","selectBot","selectIsCurrentUserPremium","selectPeerFullInfo","selectChatListLoadingParameters","selectChatUser","selectIsChatWithBot","selectSupportChat","selectChatOnlineCount","onlineCount","selectIsTrustedBot","selectChatType","selectIsChatBotNotStarted","lastMessage","selectChatLastMessage","selectAreActiveChatsLoaded","selectIsChatListed","targetList","selectChatListType","selectTotalChatCount","allChatsCount","archivedChatsCount","selectIsChatPinned","chatFoldersById","pinnedChatIds","selectChatByUsername","usernameLowered","selectIsServiceChatReady","selectSendAs","sendAsId","selectRequestedDraft","requestedDraft","files","selectRequestedDraftFiles","filterChatIdsByType","chatIds","selectCanInviteToChat","isJoinRequest","selectCanShareFolder","excludeArchived","excludeMuted","excludeRead","selectShouldDetectChatLanguage","hasAutoTranslation","selectCanTranslateChat","requestedTranslation","selectRequestedChatTranslationLanguage","isLanguageDetectable","detectedLanguage","selectSimilarChannelIds","selectSimilarBotsIds","realChatId","selectIsMonoforumAdmin","activeRestrictions","restrictionReasons","selectCurrentGlobalSearchQuery","selectManagement","selectCurrentManagement","currentManagement","selectCurrentManagementType","chatBot","selectCanManage","isPrivate","canAddContact","isBot","findLast","getMessageKey","selectPeerPaidMessagesStars","selectIsStickerFavorite","selectUserStatus","selectCurrentChat","selectTabThreadParam","selectThread","messageInfo","selectOutlyingListByMessageId","selectScrollOffset","selectLastScrollOffset","selectEditingId","selectEditingDraft","selectEditingScheduledId","selectEditingScheduledDraft","selectDraft","selectNoWebPage","selectFirstMessageId","selectReplyStack","selectThreadMessagesCount","selectThreadByMessage","selectIsMessageInCurrentMessageList","selectIsViewportNewest","chatMessages","selectEditingMessage","selectFocusedMessageId","focusedChatId","selectIsMessageFocused","focusedId","selectIsMessageUnread","lastReadOutboxMessageId","selectOutgoingStatus","isScheduledList","areProfilesShown","getSendersFromSelectedMessages","selectSenderFromMessage","selectSenderFromHeader","header","selectForwardedSender","isStoryForward","isChannelPost","hiddenUserName","savedFromPeerId","selectTopicFromMessage","MAX_MESSAGES_TO_DELETE_OWNER_TOPIC","selectCanDeleteOwnerTopic","hasNotOutgoingMessages","selectCanDeleteTopic","selectSavedDialogIdFromMessage","savedPeerId","savedDialogId","replyToTopId","isForumTopic","selectCanReplyToMessage","canPostInChat","messageTopic","selectCanForwardMessage","hasTtl","isChatProtected","selectIsChatProtected","isStoryForwardForbidden","noForwards","canForward","isForwardingAllowed","selectAllowedMessageActionsSlow","isChatWithSelf","isBasicGroup","isSuperGroup","isBotChat","isFailed","isForwarded","isDocumentSticker","isBoostMessage","hasChatPinPermission","hasPinPermission","canEditMessagesIndefinitely","isMessageEditable","editTimeLimit","canReply","canReplyGlobally","canPin","canUnpin","pinnedMessageIds","canNotDeleteBoostMessage","canDelete","canReport","canDeleteForAll","hasMessageEditRight","canEdit","hasSticker","hasFavoriteSticker","canFaveSticker","canUnfaveSticker","canCopy","canCopyLink","canSelect","canDownload","canSaveGif","canRevote","closed","quiz","canClosePoll","noOptions","ability","selectCanDeleteMessages","messageActions","selectCanDeleteSelectedMessages","messageIdList","selectCanReportSelectedMessages","selectCanDownloadSelectedMessages","selectActiveDownloads","selectUploadProgress","selectRealLastReadId","lastReadInboxMessageId","unreadCount","selectFirstUnreadId","lastReadServiceNotificationId","notification","findAfterLastReadId","isFromScheduled","found","selectIsForwardModalOpen","selectCommonBoxChatId","fromLastMessage","selectIsInSelectMode","selectIsMessageSelected","selectForwardedMessageIdsByGroupId","selectIsDocumentGroupSelected","selectedIds","groupIds","selectSelectedMessagesCount","selectNewestMessageWithBotKeyboardButtons","selectShouldDisplayReplyKeyboard","replyHideMessageId","selectShouldHideReplyKeyboard","shouldHideKeyboardButtons","isHideKeyboardSelective","isMentioned","replyToMessageId","keyboardButtons","isKeyboardSelective","selectCanAutoLoadMedia","isPhoto","canAutoLoadMedia","canAutoLoadMediaFromContacts","canAutoLoadMediaInPrivateChats","canAutoLoadMediaInGroups","canAutoLoadMediaInChannels","isMediaFromContact","selectLastServiceNotification","maxId","selectIsMessageProtected","selectHasProtectedMessage","selectCanForwardMessages","selectHasSvg","selectSponsoredMessage","selectDefaultReaction","defaultReaction","enabledReactions","selectMaxUserReactions","maxUserReactionsPremium","maxUserReactionsDefault","selectShouldSchedule","selectCanSchedule","selectCanScheduleUntilOnline","selectCustomEmojis","selectMessageCustomEmojiSets","doc","s","selectForwardsContainVoiceMessages","selectChatTranslations","selectRequestedMessageTranslationLanguage","requestedInChat","selectReplyCanBeSentToChat","toChatId","fromRealChatId","selectForwardsCanBeSentToChat","сheckMessageSendingDenied","isSticker","isPlainText","selectCanTranslateMessage","isTranslationEnabled","canTranslateLanguage","isTranslatable","chatRequestedLanguage","selectTopicLink","selectMessageReplyInfo","additionalReplyInfo","isMainThread","selectReplyMessage","selectMessageTimestampableDuration","noReplies","timestampableMedia","replyTimestampableMedia","selectMessageLastPlaybackTimestamp","ignoreRestrictionReasons","isForCurrentPlatform","shouldIgnore","selectIsMediaNsfw","chatActiveRestrictions","messageActiveRestrictions","selectCurrentMiddleSearch","selectCurrentSharedMediaSearch","selectCurrentChatMediaSearch","arePropsShallowEqual","selectPaymentInputInvoice","inputInvoice","selectPaymentForm","form","selectPaymentRequestId","selectProviderPublishableKey","nativeParams","publishableKey","selectProviderPublicToken","publicToken","selectStripeCredentials","selectSmartGlocalCredentials","selectCanUseGiftProfileAdminFilter","isCurrentUser","selectCanUseGiftProfileFilter","selectGiftProfileFilter","selectIsGiftProfileFilterDefault","selectCanGift","areStarGiftsAvailable","selectPeerSavedGifts","isChatWithUser","selectNotifySettings","selectNotifyDefaults","selectNotifyException","selectLanguageCode","selectCanSetPasscode","selectTranslationLanguage","translationLanguage","selectNewNoncontactPeersRequirePremium","selectNonContactPeersPaidStars","selectShouldHideReadMarks","selectSharedState","selectStatistics","selectIsStatisticsShown","isStatisticsShown","currentChatId","canViewStatistics","selectCurrentViewedStory","selectIsStoryViewerOpen","selectPinnedStories","selectPeerFirstUnreadStoryId","lastReadIndex","selectPeerFirstStoryId","selectStoryListForViewer","isSingleStory","currentStoryId","peerIds","storyIdsByPeerId","getPeerStoryIdsForViewer","currentPeerId","storySourceProp","convertCurrencyFromBaseUnit","MONTH_EMOTICON","STAR_EMOTICON","TON_EMOTICON","selectCurrentStickerSearch","selectCurrentGifSearch","selectStickerSet","stickersForEmoji","packs","cleanEmoji","isCurrentUserPremium","addedCustomSets","customEmojiForEmoji","isFree","selectCustomEmojiForEmojis","selectIsSetPremium","selectAnimatedEmoji","cleanedEmoji","selectRestrictedEmoji","restrictedEmoji","cleanedStickerEmoji","selectAnimatedEmojiEffect","animatedEmojiEffects","selectAnimatedEmojiSound","emojiSounds","defaultEmojiStatusesStickerSetId","selectGiftStickerForDuration","premiumGifts","selectGiftStickerForStars","starCount","selectGiftStickerForTon","tonGifts","convertedAmount","RightColumnContent","IS_SNAP_EFFECT_SUPPORTED","selectIsMediaViewerOpen","isAvatarView","standaloneMedia","isSponsoredMessage","selectRightColumnContentKey","editTopicPanel","EditTopic","createTopicPanel","CreateTopic","PollResults","Management","currentMessageId","MessageStatistics","StoryStatistics","Statistics","boostStatistics","BoostStatistics","monetizationStatistics","MonetizationStatistics","StickerSearch","GifSearch","AddingMembers","ChatInfo","selectThemeValues","themeKey","selectIsForumPanelOpen","isClosing","selectIsForumPanelClosed","selectIsReactionPickerOpen","reactionPicker","selectPerformanceSettingsValue","selectCanAutoPlayMedia","canAutoPlayVideos","canAutoPlayGifs","asGif","selectShouldLoopStickers","selectIsContextMenuTranslucent","selectIsSynced","selectCanAnimateSnapEffect","selectWebApp","selectActiveWebApp","activeWebAppKey","selectLeftColumnContentKey","selectSettingsScreen","selectUserCommonChats","selectIsUserBlocked","freezeUntilDate","selectIsPremiumPurchaseBlocked","isPremiumPurchaseBlocked","selectIsGiveawayGiftsPurchaseAvailable","isGiveawayGiftsPurchaseAvailable","selectUserByPhoneNumber","phoneNumberCleaned","selectBotAppPermissions","deepDiff","deepMerge","sharedWorker","synced","lastSharedState","localState","SharedWorker","port","onMessage","start","sendToWorker","onGlobalChange","updateGlobal","close","scheduledEvents","sendOnTickEnd","requestNextMutation","IS_VIEW_TRANSITION_SUPPORTED","hasActiveTransition","hasActiveViewTransition","useViewTransition","domUpdaterFn","transitionState","setTransitionState","startViewTransition","finished","ready","shouldApplyVtn","useDerivedState","useSelectorSignal","useSelector","selector","selectorSignal","createSignal","bySelector","setter","getter","clientsCount","state2","calcTextLineHeightAndCount","useDebouncedCallback","WINDOW_RESIZE_LINE_RECALC_DEBOUNCE","maxLinesBeforeCollapse","cutoutRef","isDisabled","isFirstRenderRef","cutoutHeightRef","setIsCollapsible","maxHeight","recalculateTextLines","totalLines","debouncedRecalcTextLines","UPDATE_DEBOUNCE","useStyleObserver","property","setValue","updateValue","computedValue","getPropertyValue","removeProperty","handleTransitionEnd","propertyName","useInterval","delay","noFirst","savedCallback","addSvgDefinition","removeSvgDefinition","SVG_MAP","SvgColorFilter","referenceCount","constructor","filterId","xmlns","getFilterId","removeReference","isUsed","asValue","prepareStyle","prepareHexColor","DEBOUNCE","hexColor","createCallbackManager","mediaQueryCache","callbacks","isTablet","isLandscape","getIsTablet","getIsWebAppsFullscreenSupported","handleMediaQueryChange","runCallbacks","initMediaQueryCache","mobileQuery","tabletQuery","landscapeQuery","isTouchScreenQuery","isDesktop","fn","deps","defaultValue","setIsLoading","setResult","wasCancelled","isSafariPatchInProgress","MIN_READY_STATE","MIN_ALLOWED_MEDIA_DURATION","noInitiallyBuffered","setIsBuffered","setIsReady","bufferedProgress","setBufferedProgress","bufferedRanges","setBufferedRanges","setIsBufferedDebounced","handleBuffering","buffered","getTimeRanges","bufferedLength","end","currentRanges","readyState","onPLay","onLoadedData","onLoadStart","onPause","onProgress","checkBuffering","setX","setY","recalculate","targetBounds","canvasBounds","throttledRecalculate","shouldSkipUndefined","shouldForceCurrent","ms","noLast","fnMemo","useSignal","useSignalEffect","useDerivedSignal","resolverOrDependency","dependencies","isAsync","resolver","getValue","resolverRef","runCurrentResolver","currentResolver","resolverOrSignal","valueRef","isSync","cb","debugKey","prevDepsRef","prevDeps","DRAG_DISTANCE_THRESHOLD","isDragging","screenX","screenY","distance","dispatchEvent","CustomEvent","buttons","deltaX","deltaY","deltaDistance","sqrt","handleDoubleClick","electron","addCustomEmojiInputRenderCallback","LOAD_QUEUE","RENDER_HISTORY","THROTTLE","LIMIT_PER_REQUEST","loadFromQueue","queue","queueToLoad","otherQueue","loadCustomEmojis","updateLastRendered","updateLastRenderedCustomEmojis","reverse","notifyCustomEmojiRender","emojiId","handler","setTrue","setFalse","setTrigger","startCallbacks","endCallbacks","onEnd","lastOnStart","lastOnEnd","afterHeavyAnimation","isScheduledRef","PATH_BASE","SAFARI_EDGE_BACK_GESTURE_LIMIT","SAFARI_EDGE_BACK_GESTURE_DURATION","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","isSafariGestureAnimation","TEST_getHistoryState","TEST_getHistoryCursor","handleTouchStart","touches","pageX","innerWidth","handleTouchEnd","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","delta","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","back","replaceState","cleanupClosed","alreadyClosedCount","countClosed","cleanupTrashedState","isAnimationDisabled","disableHistoryAnimations","previousUniqueSessionId","lastOnBack","indexRef","wasReplaced","pushState","forceReplace","shouldReplace","previousRecord","markReplaced","processBack","prevIsActive","throttleWith","useIntersectionObserver","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","threshold","rootCallback","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","observer","disconnect","destroy","initController","entriesAccumulator","observerCallback","observerCallbackSync","callbackManager","hasCallbacks","IntersectionObserver","rootMargin","observe","targetCallback","controller","unobserve","useOnIntersect","targetRef","lastCallback","isIntersecting","setIsIntersecting","onSelectWithEnter","itemSelector","noCaptureFocus","focusedIndex","setFocusedIndex","querySelectorAll","newIndex","addLocalizationCallback","fetchLangString","langPack","langString","strings","mediaFormat","mediaData","spentTime","isMediaReady","noMountTransition","MENU_POSITION_VISUAL_COMFORT_SPACE_PX","MENU_POSITION_BOTTOM_MARGIN","EMPTY_RECT","optionsRef","options2","applyStaticOptions","staticOptions","processDynamically","bubbleStyle","containerEl","bubbleEl","cssText","transformOrigin","anchor","getRootElement","getMenuElement","getTriggerElement","getLayout","withMaxHeight","triggerEl","anchorX","anchorY","menuEl","rootEl","extraPaddingX","extraTopPadding","extraMarginTop","topShiftY","menuElMinWidth","shouldAvoidNegativePosition","isDense","marginTop","menuElWidth","menuElHeight","menuRect","rootRect","yWithTopShift","triggerRect","addedYForPortalPositioning","addedXForPortalPositioning","leftWithPossibleNegative","addedXForMenuPositioning","offsetX","offsetY","menuMaxHeight","addLoadListener","getModuleFromMemory","bundleName","moduleName","autoUpdate","module","hasIntersected","getNoHeavyAnimation","setNoHeavyAnimation","$getIsHeavyAnimating","resizeImage","storeAccountData","LOCAL_STORAGE_LISTENING_THROTTLE","REFRESH_INTERVAL","PREVIEW_SIZE","isUpdater","setAccountsInfo","avatarUrl","refresh","emojiStatusId","emojiStatus","updateAvatar","abortSignal","resizedAvatar","img","aborted","dataUrl","toDataURL","avatarUri","AbortController","signal","abort","handleStorageChange","langProvider","next","dispatchPriorityPlaybackEvent","elementObserverMap","onResize","onResizeRef","ResizeObserver","refOrElement","onIntersectionChange","onIntersectionChangeLast","flush","offsetParent","useSyncEffectWithPrevDeps","CLOSE_DURATION","closeDuration","prefix","shouldForceOpen","closingTimeoutRef","getState","setState","onCloseEndLast","applyClassNames","hasOpenClass","withShouldRender","getIsClosing","onCloseTransitionEnd","noFirstOpenTransition","setIsClosed","closeTimeoutRef","hasOpenClassName","setHasOpenClassName","exec","shouldHaveOpenClassName","hasShownClass","cleanupEffect","isSignal","isFirstRun","dependency","cleanupRef","useLayoutEffectWithPrevDeps","msOrSchedulerFn","isMediaContainer","uri","idRef","resolveEventType","unloadVideo","videoRef","handlers","handlersRef","videoEl","handlers2","BACKDROP_CLASSNAME","ignoreRightClick","excludedClosestSelector","handleEvent","closest","getIsInBackgroundLocal","setIsInBackground","getIsInBackground","handleBlur","handleFocus","lastOnBlur","lastOnFocus","createListener","devicePixelRatio","setDpr","initialWidth","initialHeight","setWidth","setHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","safeExec","fastRaf","setPhase","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","throttleWithRafFallback","currentMeasureTasks","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttledFn","Element","methods","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","LAYOUT_CAUSES","DEFAULT_ERROR_HANDLER","onError","nativeMethods","phase","isStrict","newPhase","getPhase","setupLayoutDetectors","setupMutationObserver","clearMutationObserver","clearLayoutDetectors","forceMeasure","forcedMutationAllowedFor","forceMutation","nodes","suppressStrict","setHandler","causes","nativeGetter","getOwnPropertyDescriptor","defineProperty","onMeasure","call","nativeMethod","apply","MutationObserver","mutations","attributeName","contentEditable","childList","attributes","subtree","characterData","propName","utf16","decode","input","output","len","extra","charCodeAt","RangeError","encode","initial_n","initial_bias","delimiter","damp","tmin","tmax","skew","maxint","decode_digit","cp","adapt","numpoints","firsttime","k","preserveCase","case_flags","input_length","n","out","bias","basic","j","ic","oldi","w","digit","lastIndexOf","toUnicode","domain_array","RLottie","LOTTIE_LOAD_DELAY","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","asCapture","eventType","canUseEventDelegation","addDelegatedListener","removeDelegatedListener","tagName","realEventType","resolveDelegationRegistry","resolveDelegatedEventTypes","removeAllDelegatedListeners","eventTypes","realEvent","furtherCallsPrevented","Proxy","p","Reflect","parentNode","newSet","documentListenersCount","delegatedHandlersCount1","counter","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","onIdle","AUTO_END_TIMEOUT","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","isBlocking","hasEnded","throttleWithFullyIdle","Teact","create","jsxDEV","captureImmediateEffects","hasElementChanged","isParentElement","mountComponent","MountState","renderComponent","unmountComponent","VirtualType","HTML_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoCorrect","spellCheck","INDEX_KEY_PREFIX","SELECTION_STATE_ATTRIBUTE","headsByElement","WeakMap","extraClasses","extraStyles","DEBUG_virtualTreeSize","$element","parentEl","runImmediateEffects","$head","$renderedChild","renderWithVirtual","DEBUG_addToVirtualTreeSize","$current","$new","$parent","currentContext","skipComponentUpdate","fragment","nextSibling","namespace","isCurrentComponent","Component","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","Tag","updateComponent","componentInstance","mountState","Mounted","setupComponentUpdateListener","newTarget","initComponent","mountChildren","canSetTextContent","Text","firstChild","textContent","createNode","insertBefore","setElementRef","remount","getNextSibling","isComponent","isFragment","renderChildren","forceMoveToEnd","$currentAsReal","isTag","$newAsTag","updateAttributes","Unmounted","fragmentEl","placeholderTarget","createComment","$child","unmountChildren","Empty","createTextNode","createElementNS","processControlled","hasOwnProperty","processUncontrolledOnMount","componentNextSibling","replaceChild","unmountRealTree","lastChild","currentEl","DEBUG_checkKeyUniqueness","renderFastListChildren","currentFragment","newFragment","lastCurrentChild","siblingAfterFragment","currentChildren","newChildren","currentChildrenLength","newChildrenLength","createDocumentFragment","fragmentNextSibling","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","isValueControlled","isCheckedControlled","isControlled","isCaretAtEnd","selectionState","defaultChecked","currentEntries","newEntries","currentValue","removeAttribute","updateClassName","inputEl","selectionStateJson","updateStyle","__html","htmlElement","extraArray","extraObject","applyExtraStyles","standardStyles","child","logUnequalProps","incrementOverlayCounter","Symbol","DEBUG_RENDER_THRESHOLD","DEBUG_EFFECT_THRESHOLD","DEBUG_SILENT_RENDERS_FOR","contextCounter","lastComponentId","renderingInstance","buildFragmentElement","createComponentInstance","buildTagElement","buildChildren","buildComponentElement","noEmpty","cleanChildren","dropEmptyTail","buildChildElement","isEmptyPlaceholder","DEBUG_components","TOTAL","DEBUG_memos","DEBUG_MEMOS_CALLS_THRESHOLD","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","hooks","cursor","effects","memos","refs","componentName","DEBUG_resolveComponentName","rescue","renderedValue","$old","Mounting","byCursor","releaseSignals","helpGc","hook","schedule","nextValue","currentElement","useEffectBase","isLayout","effectConfig","scheduleEffect","causedBy","prevValue","setupSignals","cleanups","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","always","runEffect","debugHitRateKey","DEBUG_state","instanceKey","misses","msg","newCallback","createContext","contextId","TeactContextProvider","DEBUG_contentComponentName","Provider","useContextSignal","getDefaultValue","signalRef","TeactMemoWrapper","handleError","React","DEBUG_currentRandomId","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","updateContainers","containers","runCallbacksThrottled","setUntypedGlobal","forceOutdated","DEBUG_randomId","getUntypedGlobal","getUntypedActions","forceOnHeavyAnimationOnce","actionQueue","handleAction","mapStateToProps","ownProps","mappedProps","activateContainer","newMappedProps","isNaN","DEBUG_componentName","DEBUG_updates","updateTime","addUntypedActionHandler","withUntypedGlobal","activationFn","TeactNContainer","stuckTo","stickTo","vs16RegExp","zeroWidthJoiner","removeVS16s","rawEmoji","LoadMoreDirection","FocusDirection","GlobalSearchContent","MediaViewerOrigin","StoryViewerOrigin","AudioOrigin","ChatCreationProgress","ProfileState","PaymentStep","ManagementScreens","resolved","currentInstance","animateSingle","tick","schedulerFn","cancelSingleAnimation","dumbScheduler","dumbCb","animate","animateInstantly","timingFunctions","linear","easeIn","easeOut","easeInOut","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","t0","t1","f","applyStyles","css","setAppBadge","value1","value2","type1","type2","isArray1","isArray2","array1","array2","member1","object1","object2","keys1","key1","currentProps","newProps","currentKeys","currentKeysLength","newKeysLength","TEST_INTERVAL","FRAMES_TO_TEST","REDUCED_FPS","isImproved","betterView","lastFocusAt","setupInterval","testAndImprove","fps","testFps","improveView","frames","lastFrameAt","mean","boosterEl","requestAnimationFrame","globalThis","IS_INTL_LIST_FORMAT_SUPPORTED","Intl","IS_BAD_URL_PARSER","host","ARE_WEBCODECS_SUPPORTED","createStore","delMany","getEntries","getMany","getKeys","setMany","getValues","IdbStore","store","updater","getBasicListFormat","format","formatToParts","signalPasscodeHash","subscribeToTokenDied","MULTITAB_STORAGE_KEY","MULTITAB_ESTABLISH_TIMEOUT","resolveGlobalPromise","isFirstGlobalResolved","isBroadcastDiffScheduled","lastBroadcastDiffGlobal","broadcastDiffOnIdle","unsubcribeFromMultitabBroadcastChannel","handleMessage","subscribeToMultitabBroadcastChannel","appVersion","APP_VERSION","batchedUpdates","localDb","argsWithCallback","refreshLangPackFromCache","requestGlobal","resolveWithoutGlobal","notifyLangpackUpdate","load","convertPunycode","PROTOCOL_WHITELIST","FALLBACK_PREFIX","parsedUrl","protocol","unicodeDomain","hostname","decodeURI","hasLatin","hasNonLatin","char","test","getPlatform","iosPlatforms","maxTouchPoints","macosPlatforms","windowsPlatforms","IS_PRODUCTION_HOST","IS_MOBILE","IS_YA_BROWSER","IS_FIREFOX","Auxiliary","Secondary","Fourth","Fifth","IS_PWA","standalone","IS_APP","IS_VOICE_RECORDING_SUPPORTED","mediaDevices","AudioContext","webkitAudioContext","isLastEmojiVersionSupported","IS_SERVICE_WORKER_SUPPORTED","chromeVersion","hasBrokenServiceWorkerStreaming","Audio","canPlayType","IS_CANVAS_FILTER_SUPPORTED","IS_REQUEST_FULLSCREEN_SUPPORTED","ARE_CALLS_SUPPORTED","LAYERS_ANIMATION_NAME","IS_WAVE_TRANSFORM_SUPPORTED","IS_FLUID_BACKGROUND_SUPPORTED","TEST_VIDEO","MASK_IMAGE_DISABLED","storage","getDirectory","directory","removeEntry","recursive","IS_OFFSET_PATH_SUPPORTED","CSS","supports","IS_OPEN_IN_NEW_TAB_SUPPORTED","MESSAGE_LIST_SENSITIVE_AREA","SCROLLBAR_WIDTH","ALLOWABLE_CALCULATION_ERROR_SIZE","inlineEl","newEmojiWidth","legacyEmojiWidth","IS_GEOLOCATION_SUPPORTED","getGeolocationStatus","permissionStatus","geolocation","getCurrentPosition","accessRequested","accessGranted","elementName","modifiers","baseName","modifier","self","caches","SUFFIX","Type","cacheName","isHtmlAllowed","Request","open","Blob","blob","shouldRecreate","resolvedType","Json","ArrayBuffer","arrayBuffer","cacheData","Response","put","captureKeyboardListener","onEsc","Lethargy","SwipeDirection","IOS_SCREEN_EDGE_THRESHOLD","SWIPE_DIRECTION_THRESHOLD","SWIPE_DIRECTION_TOLERANCE","MOVE_THRESHOLD","SWIPE_THRESHOLD_DEFAULT","RELEASE_WHEEL_ZOOM_DELAY","RELEASE_WHEEL_DRAG_DELAY","getDistance","hypot","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","captureEvents","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","currentWindowSize","initialTouchCenter","initialSwipeAxis","minZoom","maxZoom","onCapture","includedClosestSelector","withNativeDrag","withCursor","onDrag","onMove","onRelease","passive","selectorToPreventScroll","scrollable","overflow","onDoubleClick","centerX","centerY","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","xAbs","yAbs","swipeThreshold","axis","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheelZoom","onWheelDrag","sign","dx","dy","onWheel","doubleTapZoom","is","ctrlKey","metaKeyPressed","metaKey","shiftKey","isUserEvent","check","withWheelDrag","isNotPassive","currentSwipeAxis","offsets","Left","Right","Up","Down","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","onEnter","onDelete","onBackspace","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handlerName","currentEventHandlers","releaseKeyboardListener","keyHandlers","CLIPBOARD_ITEM_SUPPORTED","ClipboardItem","textCopyEl","str","selection","getSelection","rangeToRestore","rangeCount","getRangeAt","execCommand","removeAllRanges","addRange","copyHtmlToClipboard","html","write","copyImageToClipboard","imageUrl","imageEl","Image","onload","toBlob","copyBlobToClipboard","copyTextToClipboardFromPromise","getTextPromise","onFailure","copyTextToClipboardFallback","hasGetDataError","rejectGetDataError","clipboardTextItem","pngBlob","LUMA_THRESHOLD","hex2rgb","param","rgb2hex","p0","p1","p2","rgb2hsb","h","v","hsb2rgb","q","getAverageColor","blockSize","defaultRGB","rgb","naturalHeight","naturalWidth","getImageData","getColorLuma","luma","hsl2rgb","getPatternColor","hue","saturation","hex","convertToRGBA","alpha","red","green","blue","alphaFloat","numberToHexColor","padStart","getTextColor","fallbackMs","waitForEndEvent","animationName","detailedName","isHandled","handleAnimationEnd","TransitionEvent","AnimationEvent","readStrings","FALLBACK_LANG_CODE","FALLBACK_VERSION","FALLBACK_TRANSLATE_URL","readFallbackStrings","forLocalScript","fileData","readFileSync","rawStrings","clearKey","pluralSuffix","knownValue","version","stringsCount","nativeName","pluralCode","translatedCount","translationsUrl","parseLine","isEscaped","isInsideString","separatorIndex","withCache","getDays","getHours","getMinutes","WEEKDAYS_FULL","MONTHS_FULL","MONTHS_FULL_LOWERCASE","month","MIN_SEARCH_YEAR","MAX_DAY_IN_MONTH","MAX_MONTH_IN_YEAR","MILLISECONDS_IN_DAY","isToday","getDayStartAt","getDayStart","datetime","toYearMonth","getFullYear","getMonth","toIsoString","marker","formatPastTimeShort","alwaysShowTime","weekAgo","weekday","getDay","noYear","formatMonthAndYear","isShort","formatCountdown","secondsLeft","days","formatMediaDuration","formatCountdownShort","msLeft","formatLocationLastUpdate","lastUpdated","seconds","formatRelativePastTime","lastUpdatedDate","formatPastDatetime","pastTime","formatTimeDuration","showLast","durationRecords","labels","multiplier","modulus","scheduleDateTimestamp","formatHumanDate","noWeekdays","isUpperFirst","upperFirst","lowerFirst","limitBefore","limitAhead","weekDayString","formatWeekday","day","weekDay","formatMediaDateTime","maxValue","maxHours","maxMinutes","string","formatVoiceRecordDuration","durationInMs","milliseconds","formatDayToStringWithCache","dayStartAt","locale","monthFormat","noDay","toLocaleString","year","noSeconds","hour","minute","hourCycle","formatDateAtTime","hoursPriority","isValidDate","parseDateString","matchStringDate","matchEuropeStringDate","matchNumberDate","dateParts","monthIndex","timestampPlusDay","formatRegistrationMonth","dateString","DateTimeFormat","getSeconds","TIMESTAMP_RE","apiText","resultText","matchAll","fullMatch","hourStr","minuteStr","secondStr","totalSeconds","overlaps","inserted","parseTimestampDuration","isInteger","regex","MINUTE","HOUR","roundDown","roundFunc","DEBUG_LEVELS","ORIGINAL_FUNCTIONS","DEBUG_LOGS","getDebugLogs","KEYS_TO_IGNORE","MIN_RENDERS_TO_SHOW","MIN_DURATION_TO_SHOW","BG_GREEN","counters","renderCountersThrottled","renderCounters","loggerEl","debugToOverlay","setupOverlay","dateFormatted","toLocaleTimeString","getMilliseconds","wasAtBottom","scrollTop","lastUpdateAt","halfSecondAgo","maxRenders","maxDuration","factorToHex","clearEl","factor","isLiteralObject","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","areSortedArraysDeepEqual","keys2","subValue1","subValue2","subDiff","toChannelId","isUsernameValid","ELIGIBLE_HOSTNAMES","tryParseDeepLink","parseDeepLink","getUsernameFromDeepLink","deepLink","correctUrl","urlParsed","parseHttpLink","urlToParse","parseTgLink","queryParams","getQueryParams","pathParams","getPathParams","deepLinkType","getTgDeepLinkType","single","comment","buildPublicMessageLink","commentId","buildPrivateMessageLink","buildShareLink","buildChatFolderLink","buildLoginCodeLink","buildTelegramPassportLink","bot_id","scope","publicKey","public_key","nonce","callbackUrl","callback_url","buildPublicUsernameOrBotLink","appname","startApp","startapp","mode","startAttach","startattach","attach","choose","buildPrivateChannelLink","buildBusinessChatLink","buildPremiumReferrerLink","buildPremiumMultigiftLink","buildChatBoostLink","buildGiftUniqueLink","buildSettingsScreenLink","getHttpDeepLinkType","isPrivateChannel","boost","isNumber","isSingle","buildSettingsScreen","screenParam","fromEntries","reduceDiff","oldValue","processDeepLink","parsedLink","openPrivateChannel","parseChooseParameter","startParam","originalParts","resolveBusinessChatLink","openPremiumModal","openGiftRecipientPicker","processBoostParameters","usernameOrId","openUniqueGiftBySlug","EditProfile","Language","ActiveSessions","Privacy","Folders","General","openStarsBalanceModal","checkChatInvite","openChatByPhoneNumber","openStickerSet","joinVoiceChatByLink","openInvoice","openChatWithDraft","checkChatlistInvite","openStoryViewerByUsername","checkGiftCode","voicechat","livestream","inviteHash","urlParam","formatShareText","purpose","balanceNeeded","topup","types","textContainer","jsxToHtml","blankSrc","placeholderSrc","DOM_PROCESS_THROTTLE","INPUT_WAITING_CUSTOM_EMOJI_IDS","renderCallbacks","checkInputCustomEmojiLoad","callInputRenderHandlers","processDomForCustomEmoji","processMessageInputForCustomEmoji","loaded","getCustomEmojiMediaDataForInput","fetchAndProcess","shouldUseStaticFallback","isUsingSharedCanvas","EXCLUDE_EMOJIS","ISO_FLAGS_OFFSET","unifiedToNative","unified","unicodes","codePoints","fromCodePoint","path","nativeToUnified","pairs","nativeToUnifiedExtended","uncompressEmoji","emojiData","categories","emojiRaw","names","native","iso","codePointAt","EMOJI_EXCEPTIONS","replacement","DETECT_UP_TO","MAX_LENGTH","standardizedText","textWithoutNewlines","countIfEmojiOnly","iterator","entityId","isChannelId","mtpId","MIN_USERNAME_LENGTH","MIN_UPDATE_USERNAME_LENGTH","MAX_USERNAME_LENGTH","USERNAME_REGEX","isUpdating","minUsernameLength","ESTABLISH_BROADCAST_CHANNEL_NAME","getPasscodeHash","setPasscodeHash","ESTABLISH_TIMEOUT","addCallbackTokenDied","runCallbacksTokenDied","collectedTokens","isEstablished","initialEstablishment","masterToken","isWaitingForMaster","reestablishToken","currentPasscodeHash","hasGaveUpMaster","shouldGiveUpMaster","tokenDied","prevLength","establishMultitabRole","shouldReestablishMasterToSelf","signalTokenDead","getAllMultitabTokens","initialEstablishmentPromise","isCurrentTabMaster","File","fileBits","blobToDataUri","reader","FileReader","onerror","readAsDataURL","blobToFile","lastModified","preloadVideo","onloadedmetadata","createPosterForVideo","onseeked","videoWidth","videoHeight","fetchBlob","fetchFile","imgToCanvas","hasPreview","validateFiles","fixMovMime","ext","DEBUG_DURATION_LIMIT","initials","buildInitials","prepared","DEBUG_getFolderManager","updateFolderManagerThrottled","updateFolderManager","inited","updateFolders","orderedIdsByFolderId","getPinnedChatsCount","pinnedCountByFolderId","getChatsCount","chatsCountByFolderId","getUnreadCounters","unreadCountersByFolderId","getUnreadChatsByFolderId","unreadChatIdsByFolderId","getAllNotificationsCount","notificationsCount","getOrderKey","isForSaved","chatSummariesById","orderInSaved","orderInAll","addOrderedIdsCallback","addChatsCountCallback","addUnreadChatsByFolderIdCallback","addUnreadCountersCallback","DEBUG_startedAt","isAllFolderChanged","isMainFolderChanged","isArchivedFolderChanged","isSavedFolderChanged","isAllFullyLoadedChanged","isAllFolderFullyLoaded","isArchivedFullyLoadedChanged","isArchivedFolderFullyLoaded","isSavedFolderFullyLoadedChanged","isSavedFolderFullyLoaded","areFoldersChanged","foldersById","areChatsChanged","areSavedLastMessageIdsChanged","lastSavedMessageIds","areAllLastMessageIdsChanged","lastAllMessageIds","areTopicsChanged","areUsersChanged","areNotifyDefaultsChanged","areNotifyExceptionsChanged","notifyExceptions","affectedFolderIds","updateFullyLoaded","updateResults","prevAllFolderListIds","allFolderListIds","prevArchivedFolderListIds","archivedFolderListIds","prevSavedFolderListIds","savedFolderListIds","newListIds","currentPinnedIds","allFolderPinnedIds","savedFolderPinnedIds","archivedFolderPinnedIds","emptyFolderIds","folderSummariesById","changedFolders","buildFolderSummaryFromMainList","newFoldersById","buildFolderSummary","newChatsById","newUsersById","newAllLastMessageIds","newSavedLastMessageIds","newNotifyDefaults","newNotifyExceptions","folderSummaries","newAllFolderListIds","newArchivedFolderListIds","newSavedFolderListIds","newGeneralIds","newAllIds","allIds","newFolderIds","currentSummary","isRemovedFromAll","isRemovedFromSaved","newSummary","buildChatSummary","buildChatFolderIds","currentFolderIds","folderIdsByChatId","deletedFolderIds","updateListsForChat","chatUnreadCount","chatUnreadMentionsCount","hasUnreadMark","userInfo","shouldHideServiceChat","creationDate","draftDate","lastMessageInSaved","isListedInAll","isListedInSaved","isUserContact","chatSummary","folderSummary","isChatInFolder","isListed","currentFolderIdsSet","newFolderIdsSet","currentFolderOrderedIds","chatIdsByFolderId","isOrderedListJustPatched","wasUnreadCountersChanged","wasChatsCountChanged","wasUnreadChatsChanged","pinnedCount","newPinnedCount","buildFolderOrderedIds","currentOrderedIds","currentPinnedCount","areOrderedIdsChanged","currentChatsCount","newChatsCount","currentUnreadCounters","newUnreadCounters","buildFolderUnreadCounters","currentUnreadChats","newUnreadChats","buildFolderByUnreadChats","prevOrderedIds","isSavedFolder","sortedPinnedIds","allListIds","notPinnedIds","sortedNotPinnedIds","chatId1","chatId2","newInitials","SITE_FONTS","font","fonts","formatStarsAsIcon","formatTonAsIcon","getCurrencyExp","convertCurrencyToBaseUnit","convertTonToNanos","totalPrice","asFont","iconClassName","formatCurrencyAsString","convertTonToUsd","usdRate","tonInRegularUnits","shouldOmitFractions","NumberFormat","minimumFractionDigits","maximumFractionDigits","grey","rose","violet","yellow","TOPIC_MAPPING","getTopicColors","getTopicColorCssVariable","generateUniqueNumberId","READABLE_ERROR_MESSAGES","CHAT_RESTRICTED","CHAT_SEND_POLL_FORBIDDEN","CHAT_SEND_STICKERS_FORBIDDEN","CHAT_SEND_GIFS_FORBIDDEN","CHAT_SEND_MEDIA_FORBIDDEN","CHAT_LINK_EXISTS","SLOWMODE_WAIT_X","USER_BANNED_IN_CHANNEL","USER_IS_BLOCKED","YOU_BLOCKED_USER","IMAGE_PROCESS_FAILED","MEDIA_EMPTY","MEDIA_GROUPED_INVALID","MEDIA_NEW_INVALID","MESSAGE_NOT_MODIFIED","MEDIA_INVALID","PASSWORD_HASH_INVALID","PHOTO_EXT_INVALID","PHOTO_INVALID_DIMENSIONS","PHOTO_SAVE_FILE_INVALID","MESSAGE_DELETE_FORBIDDEN","MESSAGE_POLL_CLOSED","MESSAGE_EDIT_TIME_EXPIRED","PINNED_DIALOGS_TOO_MUCH","CHANNEL_PRIVATE","MEDIA_CAPTION_TOO_LONG","ADDRESS_STREET_LINE1_INVALID","ADDRESS_STREET_LINE2_INVALID","ADDRESS_CITY_INVALID","ADDRESS_COUNTRY_INVALID","ADDRESS_POSTCODE_INVALID","ADDRESS_STATE_INVALID","REQ_INFO_NAME_INVALID","REQ_INFO_PHONE_INVALID","REQ_INFO_EMAIL_INVALID","LINK_NOT_MODIFIED","MESSAGE_TOO_LONG","SERVICE_WORKER_DISABLED","MESSAGE_TOO_LONG_PLEASE_REMOVE_CHARACTERS","FRESH_RESET_AUTHORISATION_FORBIDDEN","BOTS_TOO_MUCH","BOT_GROUPS_BLOCKED","USERS_TOO_MUCH","USER_CHANNELS_TOO_MUCH","USER_KICKED","USER_NOT_MUTUAL_CONTACT","USER_PRIVACY_RESTRICTED","INVITE_HASH_EMPTY","INVITE_HASH_EXPIRED","INVITE_HASH_INVALID","CHANNELS_TOO_MUCH","USER_ALREADY_PARTICIPANT","SCHEDULE_DATE_INVALID","WALLPAPER_DIMENSIONS_INVALID","ADMINS_TOO_MUCH","ADMIN_RANK_EMOJI_NOT_ALLOWED","ADMIN_RANK_INVALID","FRESH_CHANGE_ADMINS_FORBIDDEN","INPUT_USER_DEACTIVATED","BOT_PRECHECKOUT_TIMEOUT","PROVIDER_ACCOUNT_TIMEOUT","STARGIFT_CONVERT_TOO_OLD","SUBSCRIPTION_ALREADY_ACTIVE","PEERS_LIST_EMPTY","PAID_MEDIA_FORBIDDEN","USER_DISALLOWED_STARGIFTS","CHAT_WRITE_FORBIDDEN","CHAT_ADMIN_REQUIRED","SHIPPING_ERRORS","field","FINAL_PAYMENT_ERRORS","getReadableErrorText","isSlowMode","textParams","extraPartIndex","errorMessage","showError","handleErrorEvent","alert","getErrorMessage","throttleError","ErrorEvent","stack","scaleImage","ratio","outputType","revokeObjectURL","bitmap","createImageBitmap","resizeWidth","resizeHeight","resizeQuality","averageColor","fillColor","ctx2D","transferFromImageBitmap","steppedScale","oc","octx","mul","cur","storedSharedState","promptInstall","prompt","userChoice","isInstalled","outcome","setInstallPrompt","getPromptInstall","collection","member","buildCollectionByCallback","mapValues","newByKey","object","stringKeys","savedKeys","stringKey","orderRule","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","isInsideSortedArrayRange","findIntersectionWithSet","toExclude","excludeIndex","chunkSize","pass","fail","arr","isObject","predicate","buildMessageKey","getMessageServerKey","msgId","parseMessageKey","parseSearchResultKey","lastUpDeltas","lastDownDeltas","deltasTimestamp","lastDelta","originalEvent","wheelDelta","detail","isInertia","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","preciseNumber","containerClassName","shouldConvertFromNanos","specialReplacement","areAdvancedLangFnOptions","isDeletedLangString","isPluralLangString","replaceInStringsWithTeact","LimitedMap","initialStrings","LANGPACK_STORE_PREFIX","FORMATTERS_FALLBACK_LANG","STRING_CACHE_LIMIT","TRANSLATION_CACHE","formatters","fallbackLangPack","translationFn","createTranslationFn","areCallbacksScheduled","scheduleCallbacks","localizationReady","loadCachedLangData","cacheLangData","fallbackLoadPromise","loadFallbackPack","fallbackData","updateLanguage","fetchDifference","fromVersion","applyLangPackDifference","keysToRemove","newLangPack","updateLangPack","newLang","createFormatters","listFormatFallback","createListFormat","ListFormat","pluralRules","PluralRules","region","DisplayNames","disjunction","initLocalization","canLoadFromServer","cachedData","loadAndChangeLanguage","refreshFromCache","shouldCheckCache","changeLanguage","remoteLanguage","requestLangPackDifference","newLanguage","remoteLangPack","baseLangCode","processTranslationAdvanced","processTranslation","rawCode","with","withAdvanced","of","internalFormatters","languageInfo","getString","langPackStringValue","other","cacheKey","variableEntries","finalString","valueAsString","isFinite","replaceAll","tempResult","specialReplacements","withRenderText","preparedValue","removeLocalizationCallback","isRegularLangString","isLangFnParam","UNIQUE_PLACEHOLDER_PREFIX","langFn","placeholders","replaced","disjunctionWithNodes","num","isBetween","decimals","lerp","interpolationRatio","roundToNearestEven","oggToWav","asCacheApiType","PROGRESSIVE_URL_PREFIX","DOWNLOAD_URL_PREFIX","MAX_MEDIA_RETRIES","memoryCache","fetchPromises","progressCallbacks","cancellableCallbacks","callbackUniqueId","getProgressiveUrl","getDownloadUrl","fetchFromCacheOrRemote","activeCallbacks","cancelProgress","parentCallback","retryNumber","prepareMedia","makeOnProgress","remote","getRetryTimeout","debug","dataBlob","serviceWorker","downloadWithRetry","fullSize","LOAD_PROMISES","MEMORY_CACHE","Extra","Stars","bundle","WORKER_NAME","WorkerGlobalScope","WORKER_ACCOUNT_SLOT","getAccountSlot","slotNumber","accountInfo","getAccountInfo","loadSlotSession","currentSlotData","updatedSharedData","writeSlotSession","forLogin","versionChannel","semverCompare","localeCompare","numeric","caseFirst","getDeviceToken","subscription","toJSON","checkIfPushSupported","ServiceWorkerRegistration","Notification","permission","checkIfNotificationsSupported","expirationTime","soundPlayedDelay","soundPlayedIds","notificationSound","playNotifySound","currentVolume","playNotifySoundDebounced","checkIfShouldResubscribe","unsubscribeFromPush","deleteDeviceToken","serviceWorkerRegistration","pushManager","getSubscription","loadCustomEmoji","isSubscriptionFailed","checkIfOfflinePushFailed","setDeviceToken","updateWebNotificationSettings","userVisibleOnly","DOMException","ABORT_ERR","NOT_SUPPORTED_ERR","checkIfShouldNotify","isChatMuted","topicMutedUntil","notifySettings","shouldIgnoreMute","shouldNotifyAboutMessage","getNotificationContent","privateChatUserId","senderName","getReactionEmoji","getAvatar","notifyAboutCall","areNotificationsSupported","vibrate","onclick","notifyAboutMessage","isReaction","isChatSilent","activeReaction","dispatch","onshow","closeMessageNotifications","notifyClientReady","SAMPLE_RATE","BIT_DEPTH","opusData","typedArray","Uint8Array","decoderWorker","wavWorker","onmessage","buffers","buffer","wavBitDepth","wavSampleRate","decoderSampleRate","outputBufferSampleRate","pages","formatInteger","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","en","ar","be","n10","n100","ca","cs","v0","de","es","fa","fi","fr","it","hr","i10","i100","f10","f100","hu","ko","nb","nl","pl","ru","sk","sr","tr","uk","uz","currentLangCode","currentTimeFormat","createLangFn","cacheValue","importFallbackLangPack","withFallback","fetchRemote","langInfo","langName","sourceLangPacks","getPluralOption","optionIndex","processTemplate","template","translationSlices","initialValue","preferredPluralOption","otherValue","formattedValue","IV_LENGTH","SALT","UnrecoverablePasscodeError","passcodeHash","setupPasscode","sha256","sessionEncrypted","aesEncrypt","globalEncrypted","aesDecrypt","decryptSession","plaintext","crypto","subtle","digest","TextEncoder","asArray","asArrayBuffer","pwHash","iv","getRandomValues","alg","importKey","ptUint8","ctBuffer","encrypt","ct","dataArray","plainBuffer","decrypt","TextDecoder","patchSafariProgressiveAudio","audioEl","patchedForSafari","patchForSafariInProgress","paused","preventPlayAfterPatch","toggle","clearWebsync","SEARCH_ENGINE_REGEX","PERMANENT_VERSION_KEY","CLIENT_VERSION","setPermanentWebVersion","getPermanentWebVersion","switchPermanentWebVersion","skipLockOnUnload","checkAndAssignPermanentWebVersion","isSearchEngine","currentVersion","urlParams","hasTest","shouldRedirect","PATTERN_PLACEHOLDER","DEFAULT_PATTERN","possibleCountries","codesWithPrefix","prefixes","bestMatches","pattern","getBestPattern","patterns","numberWithoutCode","defaultPattern","stripped","formatPhoneNumberWithCode","numberWithPlus","PRETTY_BY_ALIAS","js","javascript","ts","typescript","python","py","rust","func","cpp","fortran","f90","java","sql","swift","kotlin","ruby","rb","php","perl","bash","sh","markdown","yaml","yml","solidity","sol","tl","codeLanguage","prettyLangName","insertionQueue","keyToRemove","callbackfn","thisArg","toStringTag","replaceWithTeact","searchValue","replaceValue","firstElement","timerId","parsedInitialLocationHash","messageHash","isAlreadyParsed","createLocationHash","displayType","isType","castedThreadId","createMessageHashUrl","locationHash","parsedHash","SAFE_EXEC_ENABLED","shouldIgnoreError","mediaEl","getIsVideoPlaying","ended","shouldRunFirst","shouldRunLast","waitingTimeout","_args","onTickEnd","waiting","rafPromise","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","currentCallbacks","currentTimeoutCallbacks","onTickEndCallbacks","IDLE_TIMEOUT","onIdleCallbacks","requestIdleCallback","deadline","timeRemaining","beforeUnloadCallbacks","isLast","RE_NOT_LETTER","haystack","needle","needleWords","haystackLower","haystackWords","needleWord","haystackWord","_serverTimeOffset","slotData","legacyAuthJson","userAuth","dcID","newSlotData","storeLegacySession","clearStoredLegacySession","loadStoredLegacySession","importTestSession","TEST_SESSION","IGNORE_WORKER_PATH","handleWorkerMessage","scriptURL","registrations","getRegistrations","ourRegistrations","unregister","register","getRegistration","hasErrorKey","SIGNAL_MARK","obj","unsubscribesByEffect","currentEffect","unsubscribes","unsub","DEFINITION_MAP","defs","appendElement","INERTIA_DURATION","INERTIA_EASING","isSwipeActive","swipeOffsets","cancelCurrentReleaseAnimation","captureControlledSwipe","onSwipeLeftStart","onSwipeRightStart","onCancel","currentSlide","nextSlide","onCancelForTransition","targetPosition","extractAnimationEndPosition","getAnimations","animationTimingFunction","currentDirection","computedStyle","initialPositionPx","extractPositionFromMatrix","targetPositionPx","units","dragOffset","newProgress","updateAnimationProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","elements","getTiming","KeyframeEffect","keyframe","getKeyframes","extractPositionFromTransform","transformRule","matrix","themeColors","isInitialized","DECIMAL_PLACES","HEX_COLOR_REGEX","DURATION_MS","ENABLE_ANIMATION_DELAY_MS","RGB_VARIABLES","DISABLE_ANIMATION_CSS","injectCss","head","themeClassName","isDarkTheme","shouldAnimate","startIndex","endIndex","startAt","themeColorTag","uninjectCss","applyColorAnimationStep","lerpRgb","propertyColors","roundedA","systemThemeCache","themeChangeCallback","handleSystemThemeChange","formatIntegerCompact","formatPercent","fractionDigits","phrase","word","FILE_SIZE_UNITS","formatFileSize","GENERAL_VARIABLES","LIGHT_VARIABLES","DARK_VARIABLES","setVariable","lightValueOrGeneral","darkValue","scheduleVariableUpdate","isUpdateScheduled","updateVariables","generalVariables","buildVariables","lightVariables","darkVariables","setPeerColor","darkColors","mainLightColor","mainDarkColor","lightBgColor","darkBgColor","lightBgActiveColor","darkBgActiveColor","lightGradientColors","darkGradientColors","lightGradient","darkGradient","extractCurrentThemeParams","getPropertyHexColor","secondaryTextColor","bgColor","textColor","buttonColor","buttonTextColor","linkColor","hintColor","secondaryBgColor","sectionSeparatorColor","headerBgColor","accentTextColor","sectionBgColor","sectionHeaderTextColor","subtitleTextColor","destructiveTextColor","bg_color","text_color","hint_color","link_color","button_color","button_text_color","secondary_bg_color","header_bg_color","accent_text_color","section_bg_color","section_header_text_color","subtitle_text_color","destructive_text_color","section_separator_color","validateHexColor","updateWebmanifest","manifest","WEBSYNC_URLS","WEBSYNC_VERSION","WEBSYNC_KEY","WEBSYNC_TIMEOUT","getTs","saveSync","authed","canRedirect","lastTimeout","currentTs","script","removeElement","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","WINDOW_RESIZE_THROTTLE_MS","handleOrientationChange","visualViewport","pageTop","vh","getIsKeyboardVisible","fnCache","isCompatTestPassed","restoreLocalStorage","switchMultitabRole","isPageUnload"],"sourceRoot":""}